
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of an open-source marketplace platform Waldur. See the latest version at https://docs.waldur.com">
      
      
      
      
      
      
      <link rel="icon" href="../assets/waldur-logo.svg">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.24">
    
    
      
        <title>Print documentation - Waldur Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Waldur Documentation" class="md-header__button md-logo" aria-label="Waldur Documentation" data-md-component="logo">
      
  <img src="../assets/waldur-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Waldur Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Waldur Documentation" class="md-nav__button md-logo" aria-label="Waldur Documentation" data-md-component="logo">
      
  <img src="../assets/waldur-logo.svg" alt="logo">

    </a>
    Waldur Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CHANGELOG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/accounting-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accounting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/authentication-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/marketplace-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Marketplace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/organization-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/reporting-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reporting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API/user-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/data-processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data processing disclaimer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/governance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Governance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/publications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/reporting-issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reporting issues
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/screenshots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Screenshots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Admin guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Admin guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/billing-and-accounting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Billing and accounting in Waldur
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/checklist-for-production/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Checklist for Go live
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/cookie-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cookie policy and Telemetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/grafana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grafana and Prometheus Metrics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/hardware-requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/managing-with-ansible/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Waldur with Ansible
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/multilingual/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multilingual User Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/waldur-shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur Shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/whitelabeling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    White-labeling instructions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_12" >
        
          
          <label class="md-nav__link" for="__nav_6_12" id="__nav_6_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_12">
            <span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/docker-compose/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur Docker-compose deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_12_2" >
        
          
          <label class="md-nav__link" for="__nav_6_12_2" id="__nav_6_12_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Argocd
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_12_2">
            <span class="md-nav__icon md-icon"></span>
            Argocd
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/argocd/argocd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur deployment in ArgoCD
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_12_3" >
        
          
          <label class="md-nav__link" for="__nav_6_12_3" id="__nav_6_12_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Helm
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_12_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_12_3">
            <span class="md-nav__icon md-icon"></span>
            Helm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur Helm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_12_3_2" >
        
          
          <label class="md-nav__link" for="__nav_6_12_3_2" id="__nav_6_12_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Docs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_12_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_12_3_2">
            <span class="md-nav__icon md-icon"></span>
            Docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur Helm chart configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/bootstrap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootstrap configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/external-db-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External DB integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Official documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/host-aliasing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Host aliasing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/hpa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HPA setup and configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/ip-whitelisting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Limiting network access to Mastermind APIs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/kubectl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Official documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/locust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Locust cofiguration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/marketplace-script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur Marketplace script plugin setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/mastermind-templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mastermind templates configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/migration-from-psql-ha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration from Postgresql HA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/minikube/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Official documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/minio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Min.io configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/postgres-backup-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PostgreSQL backup configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/postgres-db-ha/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PostgreSQL HA chart configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/postgres-db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PostgreSQL chart configuration (without HA support)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/proxy-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proxy setup for Waldur components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/rabbitmq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RabbitMQ configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/saml2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SAML2 configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/service-endpoint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service endpoints
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/tls-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TLS configuration instructions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/deployment/helm/docs/whitelabeling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    White-labeling instructions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_13" >
        
          
          <label class="md-nav__link" for="__nav_6_13" id="__nav_6_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Identities
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_13">
            <span class="md-nav__icon md-icon"></span>
            Identities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/identities/LDAP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/identities/TARA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TARA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/identities/eduGAIN/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eduGAIN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/identities/eduTEAMS/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eduTEAMS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/identities/freeipa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FreeIPA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/identities/keycloak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keycloak
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/identities/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_14" >
        
          
          <label class="md-nav__link" for="__nav_6_14" id="__nav_6_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mastermind configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_14">
            <span class="md-nav__icon md-icon"></span>
            Mastermind configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/cli-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/configuration-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/google-calendar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration of the Google Calendar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/notification-templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overriding notification templates via admin panel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/notifications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notifications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/mastermind-configuration/templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message templates
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_15" >
        
          
          <label class="md-nav__link" for="__nav_6_15" id="__nav_6_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Providers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_15">
            <span class="md-nav__icon md-icon"></span>
            Providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/providers/adding-an-offering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding an offering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/providers/azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/providers/moab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MOAB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/providers/openstack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenStack (Tenant)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/providers/remote-slurm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent for Service Provider Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/providers/remote-waldur/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Offering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/providers/slurm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SLURM provider
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_16" >
        
          
          <label class="md-nav__link" for="__nav_6_16" id="__nav_6_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Rke2 setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_16">
            <span class="md-nav__icon md-icon"></span>
            Rke2 setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin-guide/rke2-setup/RKE2-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur on RKE2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Developer guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/ad-hoc-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ad-hoc scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/how-to-add-new-language/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add a new language for translatable models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/how-to-write-docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to write docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/how-to-write-serializers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to write serializers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/how-to-write-tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to write tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/how-to-write-views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to write views
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/i18n/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Internationalization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/install-from-src/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation from source
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Event logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/managed-entities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managed entities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role-based access control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/quotas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quotas application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/resource-actions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Declaring resource actions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/settings-policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Settings policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/tasks-and-executors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tasks and executors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/waldur-ci-cd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur CI/CD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_23" >
        
          
          <label class="md-nav__link" for="__nav_7_23" id="__nav_7_23_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_23">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/invoices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Invoices plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/jira/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JIRA plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/valimo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Valimo authentication plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_23_6" >
        
          
          <label class="md-nav__link" for="__nav_7_23_6" id="__nav_7_23_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Openstack
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_23_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_23_6">
            <span class="md-nav__icon md-icon"></span>
            Openstack
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/openstack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenStack plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/openstack/backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenStack backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/openstack/import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources import
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/plugins/openstack/instances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenStack instances
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_24" >
        
          
          <label class="md-nav__link" for="__nav_7_24" id="__nav_7_24_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ui
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_24">
            <span class="md-nav__icon md-icon"></span>
            Ui
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/ui/i18n/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multilingual user interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/ui/permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Role-based access control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/ui/tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Table component
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/ui/terminology_policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terminology policy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/ui/tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Glossaries
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Glossaries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossaries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossaries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossaries/marketplace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terminology
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossaries/structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Users, Organizations and Projects
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Glauth
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Glauth
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/glauth/systemd-instructions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Systemd setup for glauth and config refresher
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3" >
        
          
          <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lexis
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3">
            <span class="md-nav__icon md-icon"></span>
            Lexis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/lexis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrating LEXIS with Waldur
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4" >
        
          
          <label class="md-nav__link" for="__nav_9_4" id="__nav_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Open ondemand
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_4">
            <span class="md-nav__icon md-icon"></span>
            Open ondemand
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/open-ondemand/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrating Open OnDemand with Waldur and SLURM
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_5" >
        
          
          <label class="md-nav__link" for="__nav_9_5" id="__nav_9_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Service desk
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_5">
            <span class="md-nav__icon md-icon"></span>
            Service desk
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/service-desk/service-desk-integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Service Desk integrations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6" >
        
          
          <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Waldur keycloak mapper
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_6">
            <span class="md-nav__icon md-icon"></span>
            Waldur keycloak mapper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/waldur-keycloak-mapper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur Keycloak mapper
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_7" >
        
          
          <label class="md-nav__link" for="__nav_9_7" id="__nav_9_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Waldur keycloak minio mapper
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_7">
            <span class="md-nav__icon md-icon"></span>
            Waldur keycloak minio mapper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/waldur-keycloak-minio-mapper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    waldur-keycloak-minio-mapper
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_8" >
        
          
          <label class="md-nav__link" for="__nav_9_8" id="__nav_9_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Waldur slurm service
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_8">
            <span class="md-nav__icon md-icon"></span>
            Waldur slurm service
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/waldur-slurm-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur SLURM Integration Service
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrator guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Integrator guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/ansible-module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ansible module for Waldur
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/reporting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reporting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/waldur-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur SDK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4" >
        
          
          <label class="md-nav__link" for="__nav_10_4" id="__nav_10_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    APIs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_4">
            <span class="md-nav__icon md-icon"></span>
            APIs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/APIs/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/APIs/authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/APIs/permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permissions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
        
          
          <label class="md-nav__link" for="__nav_10_5" id="__nav_10_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Existing integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_5">
            <span class="md-nav__icon md-icon"></span>
            Existing integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/existing-integrations/firezone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VPNaaS custom script - Provisioning VPN as a Service based on Firezone
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrator-guide/existing-integrations/guacamole/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Waldur Guacamole integration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            User guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interface Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/marketplace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Marketplace introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/organization_and_project_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Organization and project management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/project_membership_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project membership management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/projects-removal-admin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple projects removal via admin panel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/resource_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/usage_reports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accounting and usage reports
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Print documentation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Print documentation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      2. Changelog
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      3. Getting started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-api" class="md-nav__link">
    <span class="md-ellipsis">
      I. API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I. API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      4. API index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-accounting-api" class="md-nav__link">
    <span class="md-ellipsis">
      5. Accounting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-authentication-api" class="md-nav__link">
    <span class="md-ellipsis">
      6. Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-marketplace-api" class="md-nav__link">
    <span class="md-ellipsis">
      7. Marketplace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-organization-api" class="md-nav__link">
    <span class="md-ellipsis">
      8. Organization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-reporting-api" class="md-nav__link">
    <span class="md-ellipsis">
      9. Reporting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-user-api" class="md-nav__link">
    <span class="md-ellipsis">
      10. User
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-about" class="md-nav__link">
    <span class="md-ellipsis">
      II. About
    </span>
  </a>
  
    <nav class="md-nav" aria-label="II. About">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-contributing" class="md-nav__link">
    <span class="md-ellipsis">
      11. Contributing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-data-processing" class="md-nav__link">
    <span class="md-ellipsis">
      12. Data processing disclaimer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-governance" class="md-nav__link">
    <span class="md-ellipsis">
      13. Governance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-publications" class="md-nav__link">
    <span class="md-ellipsis">
      14. Publications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-reporting-issues" class="md-nav__link">
    <span class="md-ellipsis">
      15. Reporting issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-roadmap" class="md-nav__link">
    <span class="md-ellipsis">
      16. Roadmap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-screenshots" class="md-nav__link">
    <span class="md-ellipsis">
      17. Screenshots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-support" class="md-nav__link">
    <span class="md-ellipsis">
      18. Support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-admin-guide" class="md-nav__link">
    <span class="md-ellipsis">
      III. Admin guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III. Admin guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#admin-guide-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      19. Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-backups" class="md-nav__link">
    <span class="md-ellipsis">
      20. Backups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-billing-and-accounting" class="md-nav__link">
    <span class="md-ellipsis">
      21. Billing and accounting in Waldur
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-checklist-for-production" class="md-nav__link">
    <span class="md-ellipsis">
      22. Checklist for Go live
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-cookie-policy" class="md-nav__link">
    <span class="md-ellipsis">
      23. Cookie policy and Telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-grafana" class="md-nav__link">
    <span class="md-ellipsis">
      24. Grafana and Prometheus Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-hardware-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      25. Hardware requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-managing-with-ansible" class="md-nav__link">
    <span class="md-ellipsis">
      26. Managing Waldur with Ansible
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-multilingual" class="md-nav__link">
    <span class="md-ellipsis">
      27. Multilingual User Interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-waldur-shell" class="md-nav__link">
    <span class="md-ellipsis">
      28. Waldur Shell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-whitelabeling" class="md-nav__link">
    <span class="md-ellipsis">
      29. White-labeling instructions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-developer-guide" class="md-nav__link">
    <span class="md-ellipsis">
      IV. Developer guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IV. Developer guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#developer-guide" class="md-nav__link">
    <span class="md-ellipsis">
      30. Developer documentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-ad-hoc-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      31. Ad-hoc scripts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-background" class="md-nav__link">
    <span class="md-ellipsis">
      32. Background processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-events" class="md-nav__link">
    <span class="md-ellipsis">
      33. Events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-add-new-language" class="md-nav__link">
    <span class="md-ellipsis">
      34. Add a new language for translatable models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-docs" class="md-nav__link">
    <span class="md-ellipsis">
      35. How to write docs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-serializers" class="md-nav__link">
    <span class="md-ellipsis">
      36. How to write serializers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-tests" class="md-nav__link">
    <span class="md-ellipsis">
      37. How to write tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-views" class="md-nav__link">
    <span class="md-ellipsis">
      38. How to write views
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-i18n" class="md-nav__link">
    <span class="md-ellipsis">
      39. Internationalization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-install-from-src" class="md-nav__link">
    <span class="md-ellipsis">
      40. Installation from source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-logging" class="md-nav__link">
    <span class="md-ellipsis">
      41. Event logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-managed-entities" class="md-nav__link">
    <span class="md-ellipsis">
      42. Managed entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-models" class="md-nav__link">
    <span class="md-ellipsis">
      43. Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      44. Role-based access control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-quotas" class="md-nav__link">
    <span class="md-ellipsis">
      45. Quotas application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-resource-actions" class="md-nav__link">
    <span class="md-ellipsis">
      46. Declaring resource actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-settings-policy" class="md-nav__link">
    <span class="md-ellipsis">
      47. Settings policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-tasks-and-executors" class="md-nav__link">
    <span class="md-ellipsis">
      48. Tasks and executors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-templates" class="md-nav__link">
    <span class="md-ellipsis">
      49. Templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-waldur-ci-cd" class="md-nav__link">
    <span class="md-ellipsis">
      50. Waldur CI/CD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      51. Development guidelines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-glossaries" class="md-nav__link">
    <span class="md-ellipsis">
      V. Glossaries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="V. Glossaries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glossaries" class="md-nav__link">
    <span class="md-ellipsis">
      52. Glossaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glossaries-marketplace" class="md-nav__link">
    <span class="md-ellipsis">
      53. Terminology
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glossaries-structure" class="md-nav__link">
    <span class="md-ellipsis">
      54. Users, Organizations and Projects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      VI. Integrations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VI. Integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrations" class="md-nav__link">
    <span class="md-ellipsis">
      55. Integrations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-integrator-guide" class="md-nav__link">
    <span class="md-ellipsis">
      VII. Integrator guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VII. Integrator guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrator-guide-ansible-module" class="md-nav__link">
    <span class="md-ellipsis">
      56. Ansible module for Waldur
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrator-guide-reporting" class="md-nav__link">
    <span class="md-ellipsis">
      57. Reporting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrator-guide-waldur-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      58. Waldur SDK
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-user-guide" class="md-nav__link">
    <span class="md-ellipsis">
      VIII. User guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VIII. User guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-guide" class="md-nav__link">
    <span class="md-ellipsis">
      59. User Guide
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-interface" class="md-nav__link">
    <span class="md-ellipsis">
      60. Interface Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-marketplace" class="md-nav__link">
    <span class="md-ellipsis">
      61. Marketplace introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-organization_and_project_management" class="md-nav__link">
    <span class="md-ellipsis">
      62. Organization and project management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-project_membership_management" class="md-nav__link">
    <span class="md-ellipsis">
      63. Project membership management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-projects-removal-admin" class="md-nav__link">
    <span class="md-ellipsis">
      64. Multiple projects removal via admin panel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-resource_management" class="md-nav__link">
    <span class="md-ellipsis">
      65. Resource management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-usage_reports" class="md-nav__link">
    <span class="md-ellipsis">
      66. Accounting and usage reports
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    <span class="md-ellipsis">
      1. Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      2. Changelog
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      3. Getting started
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-api" class="md-nav__link">
    <span class="md-ellipsis">
      I. API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="I. API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      4. API index
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-accounting-api" class="md-nav__link">
    <span class="md-ellipsis">
      5. Accounting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-authentication-api" class="md-nav__link">
    <span class="md-ellipsis">
      6. Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-marketplace-api" class="md-nav__link">
    <span class="md-ellipsis">
      7. Marketplace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-organization-api" class="md-nav__link">
    <span class="md-ellipsis">
      8. Organization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-reporting-api" class="md-nav__link">
    <span class="md-ellipsis">
      9. Reporting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-user-api" class="md-nav__link">
    <span class="md-ellipsis">
      10. User
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-about" class="md-nav__link">
    <span class="md-ellipsis">
      II. About
    </span>
  </a>
  
    <nav class="md-nav" aria-label="II. About">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-contributing" class="md-nav__link">
    <span class="md-ellipsis">
      11. Contributing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-data-processing" class="md-nav__link">
    <span class="md-ellipsis">
      12. Data processing disclaimer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-governance" class="md-nav__link">
    <span class="md-ellipsis">
      13. Governance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-publications" class="md-nav__link">
    <span class="md-ellipsis">
      14. Publications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-reporting-issues" class="md-nav__link">
    <span class="md-ellipsis">
      15. Reporting issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-roadmap" class="md-nav__link">
    <span class="md-ellipsis">
      16. Roadmap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-screenshots" class="md-nav__link">
    <span class="md-ellipsis">
      17. Screenshots
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-support" class="md-nav__link">
    <span class="md-ellipsis">
      18. Support
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-admin-guide" class="md-nav__link">
    <span class="md-ellipsis">
      III. Admin guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="III. Admin guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#admin-guide-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      19. Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-backups" class="md-nav__link">
    <span class="md-ellipsis">
      20. Backups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-billing-and-accounting" class="md-nav__link">
    <span class="md-ellipsis">
      21. Billing and accounting in Waldur
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-checklist-for-production" class="md-nav__link">
    <span class="md-ellipsis">
      22. Checklist for Go live
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-cookie-policy" class="md-nav__link">
    <span class="md-ellipsis">
      23. Cookie policy and Telemetry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-grafana" class="md-nav__link">
    <span class="md-ellipsis">
      24. Grafana and Prometheus Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-hardware-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      25. Hardware requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-managing-with-ansible" class="md-nav__link">
    <span class="md-ellipsis">
      26. Managing Waldur with Ansible
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-multilingual" class="md-nav__link">
    <span class="md-ellipsis">
      27. Multilingual User Interface
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-waldur-shell" class="md-nav__link">
    <span class="md-ellipsis">
      28. Waldur Shell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-guide-whitelabeling" class="md-nav__link">
    <span class="md-ellipsis">
      29. White-labeling instructions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-developer-guide" class="md-nav__link">
    <span class="md-ellipsis">
      IV. Developer guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IV. Developer guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#developer-guide" class="md-nav__link">
    <span class="md-ellipsis">
      30. Developer documentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-ad-hoc-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      31. Ad-hoc scripts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-background" class="md-nav__link">
    <span class="md-ellipsis">
      32. Background processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-events" class="md-nav__link">
    <span class="md-ellipsis">
      33. Events
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-add-new-language" class="md-nav__link">
    <span class="md-ellipsis">
      34. Add a new language for translatable models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-docs" class="md-nav__link">
    <span class="md-ellipsis">
      35. How to write docs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-serializers" class="md-nav__link">
    <span class="md-ellipsis">
      36. How to write serializers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-tests" class="md-nav__link">
    <span class="md-ellipsis">
      37. How to write tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-how-to-write-views" class="md-nav__link">
    <span class="md-ellipsis">
      38. How to write views
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-i18n" class="md-nav__link">
    <span class="md-ellipsis">
      39. Internationalization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-install-from-src" class="md-nav__link">
    <span class="md-ellipsis">
      40. Installation from source
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-logging" class="md-nav__link">
    <span class="md-ellipsis">
      41. Event logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-managed-entities" class="md-nav__link">
    <span class="md-ellipsis">
      42. Managed entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-models" class="md-nav__link">
    <span class="md-ellipsis">
      43. Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      44. Role-based access control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-quotas" class="md-nav__link">
    <span class="md-ellipsis">
      45. Quotas application
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-resource-actions" class="md-nav__link">
    <span class="md-ellipsis">
      46. Declaring resource actions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-settings-policy" class="md-nav__link">
    <span class="md-ellipsis">
      47. Settings policy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-tasks-and-executors" class="md-nav__link">
    <span class="md-ellipsis">
      48. Tasks and executors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-templates" class="md-nav__link">
    <span class="md-ellipsis">
      49. Templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-waldur-ci-cd" class="md-nav__link">
    <span class="md-ellipsis">
      50. Waldur CI/CD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#developer-guide-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      51. Development guidelines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-glossaries" class="md-nav__link">
    <span class="md-ellipsis">
      V. Glossaries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="V. Glossaries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glossaries" class="md-nav__link">
    <span class="md-ellipsis">
      52. Glossaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glossaries-marketplace" class="md-nav__link">
    <span class="md-ellipsis">
      53. Terminology
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#glossaries-structure" class="md-nav__link">
    <span class="md-ellipsis">
      54. Users, Organizations and Projects
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      VI. Integrations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VI. Integrations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrations" class="md-nav__link">
    <span class="md-ellipsis">
      55. Integrations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-integrator-guide" class="md-nav__link">
    <span class="md-ellipsis">
      VII. Integrator guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VII. Integrator guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integrator-guide-ansible-module" class="md-nav__link">
    <span class="md-ellipsis">
      56. Ansible module for Waldur
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrator-guide-reporting" class="md-nav__link">
    <span class="md-ellipsis">
      57. Reporting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integrator-guide-waldur-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      58. Waldur SDK
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-user-guide" class="md-nav__link">
    <span class="md-ellipsis">
      VIII. User guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VIII. User guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#user-guide" class="md-nav__link">
    <span class="md-ellipsis">
      59. User Guide
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-interface" class="md-nav__link">
    <span class="md-ellipsis">
      60. Interface Introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-marketplace" class="md-nav__link">
    <span class="md-ellipsis">
      61. Marketplace introduction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-organization_and_project_management" class="md-nav__link">
    <span class="md-ellipsis">
      62. Organization and project management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-project_membership_management" class="md-nav__link">
    <span class="md-ellipsis">
      63. Project membership management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-projects-removal-admin" class="md-nav__link">
    <span class="md-ellipsis">
      64. Multiple projects removal via admin panel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-resource_management" class="md-nav__link">
    <span class="md-ellipsis">
      65. Resource management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-guide-usage_reports" class="md-nav__link">
    <span class="md-ellipsis">
      66. Accounting and usage reports
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section id="print-site-cover-page">
            
<div>

    
        <h1>Waldur Documentation</h1>
    

</div>


<table>

    
    <tr>
        <td>Description</td>
        <td>Documentation of an open-source marketplace platform Waldur. See the latest version at https://docs.waldur.com</td>
    </tr>
    

    

    

    
    <tr>
        <td>Copyright</td>
        <td>Copyright &copy; 2016 - 2023 Waldur team</td>
    </tr>
    

</table>





        </section>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-introduction">Introduction</h1>
<p>Waldur is a platform for managing hybrid cloud resources. It is used both for controlling internal enterprise IT resources and
for selling cloud services. Waldur is composed of the following main components:</p>
<ul>
<li>Waldur MasterMind - broker and orchestrator of cloud services. Responsible for technical service delivery and
    connected matters. Exposes REST API for management</li>
<li>Waldur HomePort - web-based self-service portal. Talks REST to MasterMind.</li>
</ul>
<p>Waldur is open-source, extendable and comes with a <a href="#about-support">professional support</a>.</p>
<p>To get a quick feeling what Waldur is, take a look at some <a href="#about-screenshots">screenshots</a>.</p>
<p>If you are interested in deploying, check the <a href="#getting-started">getting started</a> section!</p>
<p>We also have <a href="https://docs.google.com/presentation/d/1AJWe5Xc31V2Vyl9MiryeHXmJOJNQAu88g_0NbhhblXE/edit?usp=sharing">overview slides</a> about Waldur.</p>
<p><a class="glightbox" href="../assets/waldur_overview.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Overview" src="../assets/waldur_overview.png" /></a></p></section><section class="print-page" id="changelog"><h1 id="changelog-changelog">Changelog</h1>
<h2 id="changelog-669">6.6.9</h2>
<p>Notes: None</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.8...6.6.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.8...6.6.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.8...6.6.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.8...6.6.9">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.8...6.6.9">tag diff</a></li>
</ul>
<p>Date: Tue Apr 30 07:40:46 UTC 2024</p>
<h2 id="changelog-668">6.6.8</h2>
<p>Notes: Bugfixes.</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.7...6.6.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.7...6.6.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.7...6.6.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.7...6.6.8">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.7...6.6.8">tag diff</a></li>
</ul>
<p>Date: Mon Apr 29 08:54:03 UTC 2024</p>
<h2 id="changelog-667">6.6.7</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.6...6.6.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.6...6.6.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.6...6.6.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.6...6.6.7">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.6...6.6.7">tag diff</a></li>
</ul>
<p>Date: Fri Apr 26 15:11:26 UTC 2024</p>
<h2 id="changelog-666">6.6.6</h2>
<p>Notes: Fix user management permissions.</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.5...6.6.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.5...6.6.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.5...6.6.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.5...6.6.6">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.5...6.6.6">tag diff</a></li>
</ul>
<p>Date: Mon Apr 22 16:07:21 UTC 2024</p>
<h2 id="changelog-665">6.6.5</h2>
<p>Notes: None</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.4...6.6.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.4...6.6.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.4...6.6.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.4...6.6.5">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.4...6.6.5">tag diff</a></li>
</ul>
<p>Date: Fri Apr 19 11:05:01 UTC 2024</p>
<h2 id="changelog-664">6.6.4</h2>
<p>Notes: Volume type selector bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.3...6.6.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.3...6.6.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.3...6.6.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.3...6.6.4">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.3...6.6.4">tag diff</a></li>
</ul>
<p>Date: Sun Apr  7 08:45:51 UTC 2024</p>
<h2 id="changelog-663">6.6.3</h2>
<p>Notes: Add support for Matomo user tracking</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.2...6.6.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.2...6.6.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.2...6.6.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.2...6.6.3">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.2...6.6.3">tag diff</a></li>
</ul>
<p>Date: Thu Apr  4 17:29:13 UTC 2024</p>
<h2 id="changelog-662">6.6.2</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.1...6.6.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.1...6.6.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.1...6.6.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.1...6.6.2">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.1...6.6.2">tag diff</a></li>
</ul>
<p>Date: Wed Apr  3 09:04:26 UTC 2024</p>
<h2 id="changelog-661">6.6.1</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.6.0...6.6.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.6.0...6.6.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.6.0...6.6.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.6.0...6.6.1">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.6.0...6.6.1">tag diff</a></li>
</ul>
<p>Date: Mon Apr  1 15:40:22 UTC 2024</p>
<h2 id="changelog-660">6.6.0</h2>
<p>Notes: None</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.9...6.6.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.9...6.6.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.9...6.6.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.9...6.6.0">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.9...6.6.0">tag diff</a></li>
</ul>
<p>Date: Mon Apr  1 13:43:17 UTC 2024</p>
<h2 id="changelog-659">6.5.9</h2>
<p>Notes: SMAX configuration bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.8...6.5.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.8...6.5.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.8...6.5.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.8...6.5.9">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.8...6.5.9">tag diff</a></li>
</ul>
<p>Date: Tue Mar 26 21:45:17 UTC 2024</p>
<h2 id="changelog-658">6.5.8</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.7...6.5.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.7...6.5.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.7...6.5.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.7...6.5.8">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.7...6.5.8">tag diff</a></li>
</ul>
<p>Date: Tue Mar 26 19:20:27 UTC 2024</p>
<h2 id="changelog-657">6.5.7</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.6...6.5.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.6...6.5.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.6...6.5.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.6...6.5.7">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.6...6.5.7">tag diff</a></li>
</ul>
<p>Date: Mon Mar 25 17:45:10 UTC 2024</p>
<h2 id="changelog-656">6.5.6</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.5...6.5.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.5...6.5.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.5...6.5.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.5...6.5.6">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.5...6.5.6">tag diff</a></li>
</ul>
<p>Date: Fri Mar 15 20:08:05 UTC 2024</p>
<h2 id="changelog-655">6.5.5</h2>
<p>Notes: Openstack caching bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.4...6.5.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.4...6.5.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.4...6.5.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.4...6.5.5">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.4...6.5.5">tag diff</a></li>
</ul>
<p>Date: Tue Mar 12 19:31:25 UTC 2024</p>
<h2 id="changelog-654">6.5.4</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.3...6.5.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.3...6.5.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.3...6.5.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.3...6.5.4">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.3...6.5.4">tag diff</a></li>
</ul>
<p>Date: Mon Mar 11 20:22:24 UTC 2024</p>
<h2 id="changelog-653">6.5.3</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.2...6.5.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.2...6.5.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.2...6.5.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.2...6.5.3">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.2...6.5.3">tag diff</a></li>
</ul>
<p>Date: Thu Mar  7 18:23:33 UTC 2024</p>
<h2 id="changelog-652">6.5.2</h2>
<p>Notes: None</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.1...6.5.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.1...6.5.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.1...6.5.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.1...6.5.2">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.1...6.5.2">tag diff</a></li>
</ul>
<p>Date: Tue Mar  5 21:29:54 UTC 2024</p>
<h2 id="changelog-651">6.5.1</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.5.0...6.5.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.5.0...6.5.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.5.0...6.5.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.5.0...6.5.1">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.5.0...6.5.1">tag diff</a></li>
</ul>
<p>Date: Tue Feb 27 20:45:36 UTC 2024</p>
<h2 id="changelog-650">6.5.0</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.9...6.5.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.9...6.5.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.9...6.5.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.9...6.5.0">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.9...6.5.0">tag diff</a></li>
</ul>
<p>Date: Mon Feb 26 22:29:21 UTC 2024</p>
<h2 id="changelog-649">6.4.9</h2>
<p>Notes: Bugfixes and optimisations</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.8...6.4.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.8...6.4.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.8...6.4.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.8...6.4.9">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.8...6.4.9">tag diff</a></li>
</ul>
<p>Date: Thu Feb 22 18:39:12 UTC 2024</p>
<h2 id="changelog-648">6.4.8</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.7...6.4.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.7...6.4.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.7...6.4.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.7...6.4.8">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.7...6.4.8">tag diff</a></li>
</ul>
<p>Date: Mon Feb 19 13:11:14 UTC 2024</p>
<h2 id="changelog-647">6.4.7</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.6...6.4.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.6...6.4.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.6...6.4.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.6...6.4.7">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.6...6.4.7">tag diff</a></li>
</ul>
<p>Date: Thu Feb 15 21:33:03 UTC 2024</p>
<h2 id="changelog-646">6.4.6</h2>
<p>Notes: None</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.5...6.4.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.5...6.4.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.5...6.4.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.5...6.4.6">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.5...6.4.6">tag diff</a></li>
</ul>
<p>Date: Tue Feb 13 18:48:49 UTC 2024</p>
<h2 id="changelog-645">6.4.5</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.4...6.4.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.4...6.4.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.4...6.4.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.4...6.4.5">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.4...6.4.5">tag diff</a></li>
</ul>
<p>Date: Mon Feb 12 17:05:57 UTC 2024</p>
<h2 id="changelog-644">6.4.4</h2>
<p>Notes: None</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.3...6.4.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.3...6.4.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.3...6.4.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.3...6.4.4">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.3...6.4.4">tag diff</a></li>
</ul>
<p>Date: Wed Feb  7 15:59:43 UTC 2024</p>
<h2 id="changelog-643">6.4.3</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.2...6.4.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.2...6.4.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.2...6.4.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.2...6.4.3">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.2...6.4.3">tag diff</a></li>
</ul>
<p>Date: Thu Feb  1 13:22:43 UTC 2024</p>
<h2 id="changelog-642">6.4.2</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.1...6.4.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.1...6.4.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.1...6.4.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.1...6.4.2">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.1...6.4.2">tag diff</a></li>
</ul>
<p>Date: Tue Jan 30 11:06:12 UTC 2024</p>
<h2 id="changelog-641">6.4.1</h2>
<p>Notes: Bugfixes and UI improvements</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.4.0...6.4.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.4.0...6.4.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.4.0...6.4.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.4.0...6.4.1">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.4.0...6.4.1">tag diff</a></li>
</ul>
<p>Date: Thu Jan 25 20:10:36 UTC 2024</p>
<h2 id="changelog-640">6.4.0</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.9...6.4.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.9...6.4.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.9...6.4.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.9...6.4.0">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.9...6.4.0">tag diff</a></li>
</ul>
<p>Date: Mon Jan 22 21:42:06 UTC 2024</p>
<h2 id="changelog-639">6.3.9</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.8...6.3.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.8...6.3.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.8...6.3.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.8...6.3.9">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.8...6.3.9">tag diff</a></li>
</ul>
<p>Date: Tue Jan 16 07:30:40 UTC 2024</p>
<h2 id="changelog-638">6.3.8</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.7...6.3.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.7...6.3.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.7...6.3.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.7...6.3.8">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.7...6.3.8">tag diff</a></li>
</ul>
<p>Date: Sat Jan 13 11:47:57 UTC 2024</p>
<h2 id="changelog-637">6.3.7</h2>
<p>Notes: Bugfix in remote usage sync module</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.6...6.3.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.6...6.3.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.6...6.3.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.6...6.3.7">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.6...6.3.7">tag diff</a></li>
</ul>
<p>Date: Fri Jan 12 12:59:23 UTC 2024</p>
<h2 id="changelog-636">6.3.6</h2>
<p>Notes: Bugfixes and new checkout flow</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.5...6.3.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.5...6.3.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.5...6.3.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.5...6.3.6">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.5...6.3.6">tag diff</a></li>
</ul>
<p>Date: Thu Jan 11 22:53:44 UTC 2024</p>
<h2 id="changelog-635">6.3.5</h2>
<p>Notes: Optimisation for remote order lookups</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.4...6.3.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.4...6.3.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.4...6.3.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.4...6.3.5">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.4...6.3.5">tag diff</a></li>
</ul>
<p>Date: Wed Dec 27 13:08:05 UTC 2023</p>
<h2 id="changelog-634">6.3.4</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.3...6.3.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.3...6.3.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.3...6.3.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.3...6.3.4">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.3...6.3.4">tag diff</a></li>
</ul>
<p>Date: Fri Dec 22 16:35:23 UTC 2023</p>
<h2 id="changelog-633">6.3.3</h2>
<p>Notes: Merge OrderItem and Order APIs, drop support for legacy UI.</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.2...6.3.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.2...6.3.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.2...6.3.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.2...6.3.3">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.2...6.3.3">tag diff</a></li>
</ul>
<p>Date: Fri Dec 22 08:22:50 UTC 2023</p>
<h2 id="changelog-632">6.3.2</h2>
<p>Notes: Fix header of initial data for new user on-boarding</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.1...6.3.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.1...6.3.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.1...6.3.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.1...6.3.2">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.1...6.3.2">tag diff</a></li>
</ul>
<p>Date: Tue Dec  5 13:39:49 UTC 2023</p>
<h2 id="changelog-631">6.3.1</h2>
<p>Notes: Bugfix in permission set of organization owner</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.3.0...6.3.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.3.0...6.3.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.3.0...6.3.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.3.0...6.3.1">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.3.0...6.3.1">tag diff</a></li>
</ul>
<p>Date: Tue Dec  5 08:43:03 UTC 2023</p>
<h2 id="changelog-630">6.3.0</h2>
<p>Notes: Bug fixes from the previous release.</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.9...6.3.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.9...6.3.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.9...6.3.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.9...6.3.0">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.9...6.3.0">tag diff</a></li>
</ul>
<p>Date: Sun Dec  3 18:10:28 UTC 2023</p>
<h2 id="changelog-629">6.2.9</h2>
<p>Notes: Fixes and improvements</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.8...6.2.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.8...6.2.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.8...6.2.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.8...6.2.9">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.8...6.2.9">tag diff</a></li>
</ul>
<p>Date: Sat Dec  2 13:26:41 UTC 2023</p>
<h2 id="changelog-628">6.2.8</h2>
<p>Notes: Bugfix in remote waldur plugin</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.7...6.2.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.7...6.2.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.7...6.2.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.7...6.2.8">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.7...6.2.8">tag diff</a></li>
</ul>
<p>Date: Wed Nov 22 16:32:32 UTC 2023</p>
<h2 id="changelog-627">6.2.7</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.6...6.2.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.6...6.2.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.6...6.2.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.6...6.2.7">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.6...6.2.7">tag diff</a></li>
</ul>
<p>Date: Wed Nov 22 08:32:16 UTC 2023</p>
<h2 id="changelog-626">6.2.6</h2>
<p>Notes: None</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.5...6.2.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.5...6.2.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.5...6.2.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.5...6.2.6">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.5...6.2.6">tag diff</a></li>
</ul>
<p>Date: Sun Nov 19 17:27:59 UTC 2023</p>
<h2 id="changelog-625">6.2.5</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.4...6.2.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.4...6.2.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.4...6.2.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.4...6.2.5">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.4...6.2.5">tag diff</a></li>
</ul>
<p>Date: Sat Nov 11 21:04:19 UTC 2023</p>
<h2 id="changelog-624">6.2.4</h2>
<p>Notes:</p>
<ol>
<li>Bugfixes</li>
<li>Assurance existence of Marketplace.Resource after approval of order</li>
<li>Added broadcast template management</li>
<li>
<p>Expose user notifications for admin</p>
</li>
<li>
<p>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.3...6.2.4">tag diff</a></p>
</li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.3...6.2.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.3...6.2.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.3...6.2.4">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.3...6.2.4">tag diff</a></li>
</ol>
<p>Date: Fri Nov  3 20:01:00 UTC 2023</p>
<h2 id="changelog-623">6.2.3</h2>
<p>Notes: More bugixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.2...6.2.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.2...6.2.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.2...6.2.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.2...6.2.3">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.2...6.2.3">tag diff</a></li>
</ul>
<p>Date: Tue Oct 24 20:30:41 UTC 2023</p>
<h2 id="changelog-622">6.2.2</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.1...6.2.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.1...6.2.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.1...6.2.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.1...6.2.2">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.1...6.2.2">tag diff</a></li>
</ul>
<p>Date: Tue Oct 24 13:20:42 UTC 2023</p>
<h2 id="changelog-621">6.2.1</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.2.0...6.2.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.2.0...6.2.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.2.0...6.2.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.2.0...6.2.1">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.2.0...6.2.1">tag diff</a></li>
</ul>
<p>Date: Mon Oct 16 20:22:53 UTC 2023</p>
<h2 id="changelog-620">6.2.0</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.9...6.2.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.9...6.2.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.9...6.2.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.9...6.2.0">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.9...6.2.0">tag diff</a></li>
</ul>
<p>Date: Sun Oct 15 10:13:35 UTC 2023</p>
<h2 id="changelog-619">6.1.9</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.8...6.1.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.8...6.1.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.8...6.1.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.8...6.1.9">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.8...6.1.9">tag diff</a></li>
</ul>
<p>Date: Thu Oct 12 18:05:21 UTC 2023</p>
<h2 id="changelog-618">6.1.8</h2>
<p>Notes: Fixed VM form validation, bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.7...6.1.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.7...6.1.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.7...6.1.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.7...6.1.8">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.7...6.1.8">tag diff</a></li>
</ul>
<p>Date: Thu Oct 12 07:25:01 UTC 2023</p>
<h2 id="changelog-617">6.1.7</h2>
<p>Notes: Bugfix</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.6...6.1.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.6...6.1.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.6...6.1.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.6...6.1.7">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.6...6.1.7">tag diff</a></li>
</ul>
<p>Date: Sun Oct  8 19:07:28 UTC 2023</p>
<h2 id="changelog-616">6.1.6</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.5...6.1.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.5...6.1.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.5...6.1.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.5...6.1.6">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.5...6.1.6">tag diff</a></li>
</ul>
<p>Date: Fri Oct  6 16:55:36 UTC 2023</p>
<h2 id="changelog-615">6.1.5</h2>
<p>Notes: Migration to dynamic permissions, new creation forms.</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.4...6.1.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.4...6.1.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.4...6.1.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.4...6.1.5">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.4...6.1.5">tag diff</a></li>
</ul>
<p>Date: Thu Oct  5 20:59:29 UTC 2023</p>
<h2 id="changelog-614">6.1.4</h2>
<p>Notes: Introduce custom roles</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.3...6.1.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.3...6.1.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.3...6.1.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.3...6.1.4">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.3...6.1.4">tag diff</a></li>
</ul>
<p>Date: Tue Aug 29 11:12:27 UTC 2023</p>
<h2 id="changelog-613">6.1.3</h2>
<p>Notes: Improvements to offering sync and Helm packaging.</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.2...6.1.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.2...6.1.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.2...6.1.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.2...6.1.3">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.2...6.1.3">tag diff</a></li>
</ul>
<p>Date: Mon Aug 21 09:10:34 UTC 2023</p>
<h2 id="changelog-612">6.1.2</h2>
<p>Notes: Fix OIDC authentication flow</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.1...6.1.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.1...6.1.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.1...6.1.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.1...6.1.2">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.1...6.1.2">tag diff</a></li>
</ul>
<p>Date: Mon Aug 14 07:51:31 UTC 2023</p>
<h2 id="changelog-611">6.1.1</h2>
<p>Notes: Move OIDC configuration to DB</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.1.0...6.1.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.1.0...6.1.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.1.0...6.1.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.1.0...6.1.1">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.1.0...6.1.1">tag diff</a></li>
</ul>
<p>Date: Sun Aug 13 05:18:12 UTC 2023</p>
<h2 id="changelog-610">6.1.0</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.9...6.1.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.9...6.1.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.9...6.1.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.9...6.1.0">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.9...6.1.0">tag diff</a></li>
</ul>
<p>Date: Sun Aug  6 07:07:27 UTC 2023</p>
<h2 id="changelog-609">6.0.9</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.8...6.0.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.8...6.0.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.8...6.0.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.8...6.0.9">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.8...6.0.9">tag diff</a></li>
</ul>
<p>Date: Sat Aug  5 20:11:10 UTC 2023</p>
<h2 id="changelog-608">6.0.8</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.7...6.0.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.7...6.0.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.7...6.0.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.7...6.0.8">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.7...6.0.8">tag diff</a></li>
</ul>
<p>Date: Sun Jul 30 19:22:29 UTC 2023</p>
<h2 id="changelog-607">6.0.7</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.6...6.0.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.6...6.0.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.6...6.0.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.6...6.0.7">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.6...6.0.7">tag diff</a></li>
</ul>
<p>Date: Wed Jul 26 17:02:07 UTC 2023</p>
<h2 id="changelog-606">6.0.6</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.5...6.0.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.5...6.0.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.5...6.0.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.5...6.0.6">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.5...6.0.6">tag diff</a></li>
</ul>
<p>Date: Thu Jul 20 14:21:22 UTC 2023</p>
<h2 id="changelog-605">6.0.5</h2>
<p>Notes: Bugfixes, reporting dashboard</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.4...6.0.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.4...6.0.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.4...6.0.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.4...6.0.5">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.4...6.0.5">tag diff</a></li>
</ul>
<p>Date: Wed Jul  5 15:37:38 UTC 2023</p>
<h2 id="changelog-604">6.0.4</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.3...6.0.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.3...6.0.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.3...6.0.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.3...6.0.4">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.3...6.0.4">tag diff</a></li>
</ul>
<p>Date: Fri Jun 30 15:16:33 UTC 2023</p>
<h2 id="changelog-603">6.0.3</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.2...6.0.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.2...6.0.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.2...6.0.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.2...6.0.3">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.2...6.0.3">tag diff</a></li>
</ul>
<p>Date: Tue Jun 27 15:23:14 UTC 2023</p>
<h2 id="changelog-602">6.0.2</h2>
<p>Notes: Bugfix release</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.1...6.0.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.1...6.0.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.1...6.0.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.1...6.0.2">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.1...6.0.2">tag diff</a></li>
</ul>
<p>Date: Mon Jun 26 19:39:40 UTC 2023</p>
<h2 id="changelog-601">6.0.1</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/6.0.0...6.0.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/6.0.0...6.0.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/6.0.0...6.0.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/6.0.0...6.0.1">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/6.0.0...6.0.1">tag diff</a></li>
</ul>
<p>Date: Mon Jun 26 17:02:47 UTC 2023</p>
<h2 id="changelog-600">6.0.0</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.9...6.0.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.9...6.0.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.9...6.0.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.9...6.0.0">tag diff</a></li>
<li>Waldur Prometheus Exporter: <a href="https://github.com/waldur/waldur-prometheus-exporter/compare/5.9.9...6.0.0">tag diff</a></li>
</ul>
<p>Date: Fri Jun 23 15:50:18 UTC 2023</p>
<h2 id="changelog-599">5.9.9</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.8...5.9.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.8...5.9.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.8...5.9.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.8...5.9.9">tag diff</a></li>
</ul>
<p>Date: Sat Jun 17 05:19:49 UTC 2023</p>
<h2 id="changelog-598">5.9.8</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.7...5.9.8">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.7...5.9.8">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.7...5.9.8">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.7...5.9.8">tag diff</a></li>
</ul>
<p>Date: Fri Jun  9 19:24:43 UTC 2023</p>
<h2 id="changelog-597">5.9.7</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.6...5.9.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.6...5.9.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.6...5.9.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.6...5.9.7">tag diff</a></li>
</ul>
<p>Date: Fri Jun  9 17:11:05 UTC 2023</p>
<h2 id="changelog-596">5.9.6</h2>
<p>Notes: Fix remote orders</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.5...5.9.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.5...5.9.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.5...5.9.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.5...5.9.6">tag diff</a></li>
</ul>
<p>Date: Tue Jun  6 20:05:16 UTC 2023</p>
<h2 id="changelog-595">5.9.5</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.4...5.9.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.4...5.9.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.4...5.9.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.4...5.9.5">tag diff</a></li>
</ul>
<p>Date: Mon Jun  5 09:43:52 UTC 2023</p>
<h2 id="changelog-594">5.9.4</h2>
<p>Notes: Switch to new UI by default</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.3...5.9.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.3...5.9.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.3...5.9.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.3...5.9.4">tag diff</a></li>
</ul>
<p>Date: Sat Jun  3 14:36:05 UTC 2023</p>
<h2 id="changelog-593">5.9.3</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.2...5.9.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.2...5.9.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.2...5.9.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.2...5.9.3">tag diff</a></li>
</ul>
<p>Date: Tue May 30 12:12:05 UTC 2023</p>
<h2 id="changelog-592">5.9.2</h2>
<p>Notes: Fixed redirects for group invititations</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.1...5.9.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.1...5.9.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.1...5.9.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.1...5.9.2">tag diff</a></li>
</ul>
<p>Date: Thu May 25 17:12:33 UTC 2023</p>
<h2 id="changelog-591">5.9.1</h2>
<p>Notes: Introduce service_catalogue translation domain</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.9.0...5.9.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.9.0...5.9.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.9.0...5.9.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.9.0...5.9.1">tag diff</a></li>
</ul>
<p>Date: Tue May 23 18:06:21 UTC 2023</p>
<h2 id="changelog-590">5.9.0</h2>
<p>Notes: Bugfix, reverting public plan changes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.8.9...5.9.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.8.9...5.9.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.8.9...5.9.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.8.9...5.9.0">tag diff</a></li>
</ul>
<p>Date: Mon May 22 14:26:55 UTC 2023</p>
<h2 id="changelog-589">5.8.9</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.8.7...5.8.9">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.8.7...5.8.9">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.8.7...5.8.9">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.8.7...5.8.9">tag diff</a></li>
</ul>
<p>Date: Sun May 21 11:53:09 UTC 2023</p>
<h2 id="changelog-587">5.8.7</h2>
<p>Notes: Project selector bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/v5.8.6...5.8.7">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.8.6...5.8.7">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.8.6...5.8.7">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.8.6...5.8.7">tag diff</a></li>
</ul>
<p>Date: Mon May 15 20:34:08 UTC 2023</p>
<h2 id="changelog-586">5.8.6</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/5.8.5...5.8.6">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/5.8.5...5.8.6">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/5.8.5...5.8.6">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/5.8.5...5.8.6">tag diff</a></li>
</ul>
<p>Date: Mon May 15 16:03:07 UTC 2023</p>
<h2 id="changelog-585">5.8.5</h2>
<p>Notes: Bugfixes</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/v5.8.4...5.8.5">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/v5.8.4...5.8.5">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/v5.8.4...5.8.5">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/v5.8.4...5.8.5">tag diff</a></li>
</ul>
<p>Date: Fri May 12 19:48:08 UTC 2023</p>
<h2 id="changelog-584">5.8.4</h2>
<p>Notes: Bugfixes and improvements</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/v5.8.3...v5.8.4">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/v5.8.3...v5.8.4">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/v5.8.3...v5.8.4">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/v5.8.3...v5.8.4">tag diff</a></li>
</ul>
<p>Date: Wed May 10 16:16:11 UTC 2023</p>
<h2 id="changelog-583">5.8.3</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/v5.8.2...v5.8.3">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/v5.8.2...v5.8.3">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/v5.8.2...v5.8.3">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/v5.8.2...v5.8.3">tag diff</a></li>
</ul>
<p>Date: Wed May  3 16:16:56 UTC 2023</p>
<h2 id="changelog-582">5.8.2</h2>
<p>Notes: Fix migrations broken in 5.8.1</p>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/v5.8.1...v5.8.2">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/v5.8.1...v5.8.2">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/v5.8.1...v5.8.2">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/v5.8.1...v5.8.2">tag diff</a></li>
</ul>
<p>Date: Fri Apr 28 08:46:24 UTC 2023</p>
<h2 id="changelog-581">5.8.1</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/v5.8.0...v5.8.1">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/v5.8.0...v5.8.1">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/v5.8.0...v5.8.1">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/v5.8.0...v5.8.1">tag diff</a></li>
</ul>
<p>Date: Thu Apr 27 11:09:24 UTC 2023</p>
<h2 id="changelog-580">5.8.0</h2>
<ul>
<li>Waldur Mastermind: <a href="https://github.com/waldur/waldur-mastermind/compare/v5.7.9...v5.8.0">tag diff</a></li>
<li>Waldur Homeport: <a href="https://github.com/waldur/waldur-homeport/compare/v5.7.9...v5.8.0">tag diff</a></li>
<li>Waldur Helm: <a href="https://github.com/waldur/waldur-helm/compare/v5.7.9...v5.8.0">tag diff</a></li>
<li>Waldur Docker Compose: <a href="https://github.com/waldur/waldur-docker-compose/compare/v5.7.9...v5.8.0">tag diff</a></li>
</ul>
<p>Date: Thu Apr  6 12:10:01 UTC 2023</p></section><section class="print-page" id="getting-started"><h1 id="getting-started-getting-started">Getting started</h1>
<p>Installing Waldur is a simple and straightforward process.</p>
<h2 id="getting-started-pick-method-of-installation">Pick method of installation</h2>
<p>There are 2 supported methods:</p>
<ul>
<li><a href="#admin-guide-deployment-docker-compose">Using docker-compose</a>. Fastest but runs on a single server.</li>
<li><a href="#admin-guide-deployment-helm">Using Helm</a>. For deploying on Kubernetes clusters.</li>
</ul>
<h2 id="getting-started-configure-waldur">Configure Waldur</h2>
<p>Tune Waldur configuration to match your deployment. Majority of the configuration is done on Mastermind side.
Exact method of configuration depends on the chosen method of installation.
Settings are grouped by modules, you can see all available ones in
the <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a>.</p>
<p>The most typical aspects for configuration are:</p>
<ul>
<li>Configuring <a href="#admin-guide-identities-summary">identity providers</a>. Waldur supports a range of OIDC and SAML based IdPs.</li>
<li><a href="#admin-guide-providers-adding-an-offering">Adding offerings</a> for sharing among Waldur users.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For easier management of Waldur deployments and configuration we
provide <a href="#admin-guide-managing-with-ansible">Ansible playbooks</a>.</p>
</div>
<h2 id="getting-started-profit">Profit</h2>
<p>You are done! If you are happy and want to support the project, make sure you check the <a href="#about-support">support page</a>.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Before going to production, make sure you have completed
the <a href="#admin-guide-checklist-for-production">go-live checklist</a>.</p>
</div></section>
                        <h1 class='nav-section-title' id='section-api'>
                            API <a class='headerlink' href='#section-api' title='Permanent link'>↵</a>
                        </h1>
                        <h1 class='nav-section-title-end'>Ended: API</h1>
                        <h1 class='nav-section-title' id='section-about'>
                            About <a class='headerlink' href='#section-about' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="about-contributing"><h1 id="about-contributing-contributing">Contributing</h1>
<p>Waldur is an open project welcoming contributions. To assure the smooth acceptance of contributions please review
the contribution guidelines below.</p>
<h2 id="about-contributing-pull-requests">Pull requests</h2>
<p>We welcome contributions (patches, new features, translations, etc) through pull requests. Please make sure that the
following is addressed when making a pull request:</p>
<ul>
<li>a request has a clear scope - new feature, bugfix, refactoring. Granular pull requests make integration much faster;</li>
<li>the code is following code conventions of the corresponding platform and linters / tests are passing;</li>
</ul>
<h2 id="about-contributing-localisation">Localisation</h2>
<p>If you see a term, which needs to be translated better, please submit a fix via <a href="https://localazy.com/p/waldur-homeport">Localazy</a>.</p>
<h2 id="about-contributing-license">License</h2>
<p>All contributions to Waldur can be accepted only you agree to license your contribution under the MIT license.
Please make sure that you have the right to sign off code as MIT.</p>
<h2 id="about-contributing-code-repositories">Code repositories</h2>
<table>
<thead>
<tr>
<th>Repository</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/waldur/waldur-homeport">HomePort</a></td>
<td>Code of Waldur Homeport web interface</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/waldur-mastermind">MasterMind</a></td>
<td>Code of Waldur Mastermind orchestrator</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/waldur-helm">Helm package</a></td>
<td>Helm packaging of Waldur for Kubernetes</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/waldur-docker-compose">Docker-compose</a></td>
<td>Docker-compose packaging of Waldur</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/ansible-waldur-module">Ansible module</a></td>
<td>Ansible module for Waldur APIs</td>
</tr>
</tbody>
</table></section><section class="print-page" id="about-data-processing"><h1 id="about-data-processing-data-processing-disclaimer">Data processing disclaimer</h1>
<p>Waldur developers would like to inform that we do not assume any responsibility for processing data generated or handled by the software.</p>
<p>Users (e.g platform operators, platform users) are solely responsible for ensuring that the data processed through our software complies with applicable laws, regulations, and industry standards. Waldur developers disclaim any liability for loss, damage, or unauthorized access to data from our software.</p>
<p>Our role is limited to the development of software solution. We do not control, manage, or take responsibility for our software processes' specific deployments and data, including but not limited to data storage, transmission, or any associated security measures.</p>
<p>Users are encouraged to implement data protection and security measures to secure their information. By using Waldur software, users acknowledge and agree that Waldur developers are not liable for any issues related to data processing.</p>
<h2 id="about-data-processing-some-highlights-to-keep-in-mind-regarding-user-data-processing-in-waldur">Some highlights to keep in mind regarding user data processing in Waldur</h2>
<ul>
<li>Platform operator should have a DPA (Data Processing Agreement) with every Service Provider connected to the platform because, in case of a service request from a Service Provider, the latter gets the ability to see members of the project whereas service is to be provisioned. For example, an HPC service gets access to project member information only when the project is requesting access to the service. The access is revoked once the service is terminated.</li>
<li>Staff users (usually platform operators) can see all users personal information.</li>
<li>User profile modifications are logged, including modifier network address and changes for auditing and tracing abilities. Additionally, operations connected with the user, e.g. adding or removing SSH key, are also logged.</li>
<li>The authentication system is designed around the federated AAI solution, where a user is expected to conform explicitly to personal data propagation from the Identity Provider (IdP) to Waldur.</li>
<li>In cases when policy allows, it is possible to create a non-personalized group or robot account to act on behalf of the user, e.g. for CICD types of workflows.</li>
<li>All event logs contain references to a user - by UUID - if they are connected with the user. This allows the platform operator to have an easy information cleanup for user data according to specific deployment policies (e.g. removing data of deactivated users after two years) and to disclose user data easily collected about them.</li>
</ul>
<h2 id="about-data-processing-some-suggestions-to-ensure-that-the-data-is-securely-protected">Some suggestions to ensure that the data is securely protected</h2>
<ul>
<li>Waldur is pretty configurable, this means that the Waldur deployment operator can configure user profiles in a way that the information requested about the users is as minimal as possible.</li>
<li>User information is visible to all project members, so make sure that you include only these users in the project, who are allowed to see each other's information. In addition to that, organization managers can see the user information about users connected to that organization.</li>
</ul></section><section class="print-page" id="about-governance"><h1 id="about-governance-governance">Governance</h1>
<p>Waldur is a project co-developed by <a href="https://opennodecloud.com">OpenNode</a> and <a href="https://hpc.ut.ee/">University of Tartu</a>
with contributions from different organizations. To make sure that the project is delivering a sound product,
OpenNode maintains control over the authoritative source code and covers Product owner and Architect roles (see below).</p>
<p>Waldur and all of its components are released under MIT license to be as friendly towards ecosystem as possible.</p>
<h2 id="about-governance-overview-of-the-development-process">Overview of the development process</h2>
<p>Waldur team tries to maintain a transparent process of development. In a team, each person can have one or more of the roles below.</p>
<h2 id="about-governance-roles">Roles</h2>
<ul>
<li>Project manager - collects and provides requirements for a particular Waldur-based project. Multiple people can have this role.</li>
<li>Product owner - analysis requirements from project managers and fits into a product roadmap. Maintains technical
  feature list. Single person at a time can have this role.</li>
<li>Architect - oversees Waldur platform development, including backend, frontend, external tools. Has a final word on
  the way how components are integrated. Single person at a time can have this role.</li>
<li>Developer - responsible for fulfilling tasks created. Multiple people can have this role.</li>
</ul>
<h2 id="about-governance-workflow">Workflow</h2>
<ul>
<li>Project manager communicates with customers, defines requirements for product owner.</li>
<li>Product owner analyses requirements from all projects and creates epics for technical features implementation. Epics
  are assigned to the architect.</li>
<li>Architect defines general development plan for features from product owner, adds description to the epic and creates
  separate tasks or stories for component owners.</li>
<li>Developers process tasks.</li>
<li>Product owner releases tagged versions of the product once a certain amount of functionality or bugfixes went in.</li>
</ul></section><section class="print-page" id="about-publications"><h1 id="about-publications-publications">Publications</h1>
<ul>
<li>2022 - <a href="https://thaulow.co/noroff/ssh.pdf">Evaluating SSH for Modern Deployments</a>, Thomas Thaulow Stöcklin</li>
<li>2022 - <a href="https://comserv.cs.ut.ee/ati_thesis/datasheet.php?id=75146&amp;year=2022">Testing Estonian Scientific Computing Infrastructure Self-Service in Cypress Framework</a>, Janeli Õun</li>
<li>2021 - <a href="https://comserv.cs.ut.ee/ati_thesis/datasheet.php?id=72359&amp;year=0">A Modern CI/CD Pipeline for Cloud Native Applications</a>, Sergei Zaiaev</li>
<li>2018 - <a href="https://digikogu.taltech.ee/et/Download/1ee3b818-b726-43cc-a8c4-da8e4d6fc71b/Andmeanaltikaplatvormideautomatiseeritudpaiga.pdf">Automated provisioning of data analytics platforms in the Estonian Scientific Computing Infrastructure</a>, Stanislav Nazmutdinov</li>
</ul></section><section class="print-page" id="about-reporting-issues"><h1 id="about-reporting-issues-reporting-issues">Reporting issues</h1>
<p>No software is perfect and issues are to be expected. If you observe something that you think needs fixing, please
provide issue report, which includes:</p>
<p>From <strong>HomePort</strong>:</p>
<ol>
<li>HAR request that has failed or that contains data required for rendering of the data.<ul>
<li><a href="https://www.keycdn.com/support/what-is-a-har-file">What is HAR</a></li>
<li><a href="https://support.zendesk.com/hc/en-us/articles/204410413-Generating-a-HAR-file-for-troubleshooting">Zendesk instructions for generating a HAR</a></li>
<li><a href="https://support.box.com/hc/en-us/articles/360043696054-How-to-Generate-Network-Captures-for-Troubleshooting">Box instructions for generating a HAR</a></li>
</ul>
</li>
<li>Screenshot of the error in a high enough resolution.</li>
</ol>
<p>From <strong>MasterMind</strong>:</p>
<ol>
<li>Latest mastermind logs that include stacktrace of the error, typically <em>core.log</em> and <em>celery-celery.log</em>.</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Logs may contain sensitive data, please make sure that you either cleanup the data or share it with a trusted
party before sharing the actual data.</p>
</div></section><section class="print-page" id="about-roadmap"><h1 id="about-roadmap-roadmap">Roadmap</h1>
<h2 id="about-roadmap-disclaimer">Disclaimer</h2>
<p>This document is a living document and is used for planning. Plans for the unreleased features can change without
further notice and hence cannot be used as a guaranteed delivery plan, the features can be delivered both
earlier and later.</p>
<p>Roadmap is created based on the backlog and requests from the existing users of Waldur. If you are interested in a
specific topic, please <a href="#about-support">reach out</a> to us.</p>
<p>Some of the tasks are common and some are functional, listed below.</p>
<h2 id="about-roadmap-continuous-improvements">Continuous improvements</h2>
<h3 id="about-roadmap-documentation">Documentation</h3>
<p>There is no such thing as a perfect documentation so we are constantly working on improving it.</p>
<h3 id="about-roadmap-cicd">CI/CD</h3>
<p>We believe that automation is a key to improving quality of code and happiness of developers, so we are
constantly working on improving CI/CD related aspects.</p>
<h3 id="about-roadmap-tests">Tests</h3>
<p>A good software is a reliable software, so we are always trying to add more sensible tests.</p>
<h2 id="about-roadmap-functional">Functional</h2>
<p>The list below is based on the Epics maintained in Waldur's task manager. They are labelled with  domains, which
have requested them. Domains are:</p>
<ul>
<li><strong>Generic</strong> - Common requirements, no extra label.</li>
<li><strong>Academia</strong> - originating from the research community;</li>
<li><strong>Commercial</strong> - originating from the commercial deployments;</li>
<li><strong>Government</strong> - originating from the public sector deployments.</li>
</ul>
<h3 id="about-roadmap-open-or-in-progress">Open or  in progress</h3>
<table>
<thead>
<tr>
<th><strong>Code</strong></th>
<th><strong>Description</strong></th>
<th><strong>Domain</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>WAL-4077</td>
<td>Integrate external quality metrics of Data repositories with Offerings</td>
<td></td>
</tr>
<tr>
<td>WAL-4074</td>
<td>FAIR Offerings - background linking of offering PIDs with published articles</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-4073</td>
<td>FAIR-services - add reminders for users about referrals of consumed resources via PIDs</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-4072</td>
<td>Expose summaries of Offerings publicly</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-4000</td>
<td>Allow to limit visibility of Offering by service provider</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-3999</td>
<td>Support for customer credits</td>
<td>Academia Commercial Government</td>
</tr>
<tr>
<td>WAL-3997</td>
<td>Add common limit management support to HomePort</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-3987</td>
<td>Extensions to SLURM module</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3964</td>
<td>Implement consolidated approach for remote user accounts management in marketplace offerings</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3963</td>
<td>Make order confirmation message a common functionality for all Marketplace</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3951</td>
<td>Implement more fine grained storage of user name</td>
<td></td>
</tr>
<tr>
<td>WAL-3943</td>
<td>Shared Openstack Tenant provider phase I</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3934</td>
<td>Functionality specific to deployment of Waldur in Puhuri project as Core</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3811</td>
<td>Improvements to feedback collection</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3805</td>
<td>Direct LDAP support for Linux identity</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3793</td>
<td>Tasks related to simplification of the invoice model</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3788</td>
<td>Add ability to see popularity of an offering from the list</td>
<td></td>
</tr>
<tr>
<td>WAL-3759</td>
<td>Add support of versioning for core objects</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3744</td>
<td>Add support for creating / managing projects and resources through API of external Waldur</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3736</td>
<td>Allow protecting resources from accidental deletion</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3689</td>
<td>Expose list of connected VMs for each security group</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3626</td>
<td>Add ability to generate API docs for select endpoints</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3625</td>
<td>Migrate from Issue types to Request types for Jira support backend</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3606</td>
<td>Introduce Organization level service manager role</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3596</td>
<td>Allow logins to Rancher via keycloak</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3595</td>
<td>Expose port management for OpenStack tenant</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3589</td>
<td>Expose Sankey diagram with costs and Service providers</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3585</td>
<td>Rancher access group management</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3582</td>
<td>Allow editing of invoice data for staff users</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3563</td>
<td>Tasks related for getting Puhuri Core to work</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3524</td>
<td>Add support for sending notifications to users</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-3439</td>
<td>Add support for bookmarking offerings as favourites</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3400</td>
<td>Tasks related to gitlab dev pipelines</td>
<td></td>
</tr>
<tr>
<td>WAL-3339</td>
<td>Offerings (Reporting)</td>
<td></td>
</tr>
<tr>
<td>WAL-3334</td>
<td>Introduce vault for storing secret configuration in Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-3305</td>
<td>Chart for creating overview of existing organizations</td>
<td></td>
</tr>
<tr>
<td>WAL-3285</td>
<td>"Some of the services suggest purchasing of connected offerings</td>
<td>To Do</td>
</tr>
<tr>
<td>WAL-3272</td>
<td>Allow setting limit for the maximal size of the total volume type quota</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3218</td>
<td>Payment profiles (Phase III)</td>
<td></td>
</tr>
<tr>
<td>WAL-3205</td>
<td>UX stabilization (phase I)</td>
<td></td>
</tr>
<tr>
<td>WAL-3195</td>
<td>Improvements to the request-based item UX</td>
<td></td>
</tr>
<tr>
<td>WAL-3136</td>
<td>Marketplace Checklists (phase II)</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-3135</td>
<td>Support for auto-scalability of Waldur running on K8S</td>
<td></td>
</tr>
<tr>
<td>WAL-3103</td>
<td>Second phase of support for virtual routers in OpenStack.</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3076</td>
<td>Extend current model with ability to attach VMs directly to external networks</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-3072</td>
<td>Support for operations on multiple objects</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-3005</td>
<td>Followup tasks for payment profiles</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2991</td>
<td>Markeplace Scripts plugin phase I</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-2965</td>
<td>Enhancements to properly support virtual security gateway use-case</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2961</td>
<td>Tasks related to Kubernetes ON service development and operation</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2922</td>
<td>Tasks for exposing Offerings publicly</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2921</td>
<td>Extending Organization extended payment options</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2920</td>
<td>Tasks related for extending Waldur with ability to assess compliancy of organizations</td>
<td></td>
</tr>
<tr>
<td>WAL-2850</td>
<td>Extending Rancher to support Helm charts</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2843</td>
<td>Tasks related to building up monitoring for EOSC</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2780</td>
<td>Integration of PID services with Waldur models</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2776</td>
<td>A visual checklist for making sure that things are done for the project</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2749</td>
<td>Tasks connected to improving security of Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-2748</td>
<td>Collection of tasks aimed at improving UX of Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-2747</td>
<td>Operational tools for Waldur deployments</td>
<td></td>
</tr>
<tr>
<td>WAL-2676</td>
<td>System for lightweight offering management</td>
<td></td>
</tr>
<tr>
<td>WAL-2637</td>
<td>Support for creating Rancher clusters</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2623</td>
<td>Introduce license support for OpenStack</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-2519</td>
<td>Improvements to VMware plugin</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-2401</td>
<td>Implement device booking feature</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2134</td>
<td>Further developments of Marketplace</td>
<td></td>
</tr>
<tr>
<td>WAL-1442</td>
<td>Enhancements to Waldur for service provider visibility</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-1309</td>
<td>Implement backend and frontend support for managing JIRA as a provider and issues as resources</td>
<td></td>
</tr>
<tr>
<td>WAL-1262</td>
<td>Efforts for getting Waldur into Redhat container store</td>
<td></td>
</tr>
<tr>
<td>WAL-1212</td>
<td>Reanimate Zabbix plugin</td>
<td></td>
</tr>
<tr>
<td>WAL-1056</td>
<td>IPv6 support for OpenStack provider</td>
<td>Academia Commercial Government</td>
</tr>
<tr>
<td>WAL-868</td>
<td>Refactor cost tracking</td>
<td></td>
</tr>
<tr>
<td>WAL-842</td>
<td>On-demand demo environment from waldur.com</td>
<td></td>
</tr>
<tr>
<td>WAL-791</td>
<td>Stress testing &amp; Profiling (vol 1)</td>
<td></td>
</tr>
<tr>
<td>WAL-500</td>
<td>Waldur-specifics for ISKE H audit</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-198</td>
<td>Resource retention management</td>
<td>Academia Commercial Government</td>
</tr>
<tr>
<td>WAL-44</td>
<td>Navigation FTS</td>
<td></td>
</tr>
<tr>
<td>WAL-30</td>
<td>Quick alerts</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="about-roadmap-finished-or-discarded">Finished or discarded</h3>
<table>
<thead>
<tr>
<th><strong>Code</strong></th>
<th><strong>Description</strong></th>
<th><strong>Domain</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>WAL-3998</td>
<td>Add i18n support</td>
<td></td>
</tr>
<tr>
<td>WAL-3976</td>
<td>Allow setting end of life for project</td>
<td></td>
</tr>
<tr>
<td>WAL-3850</td>
<td>Convert OrderItems and Invoices PDF to on-the-fly generation</td>
<td></td>
</tr>
<tr>
<td>WAL-3833</td>
<td>Add an intro header to the personal dashboard</td>
<td></td>
</tr>
<tr>
<td>WAL-3804</td>
<td>Slurm user list</td>
<td></td>
</tr>
<tr>
<td>WAL-3710</td>
<td>Add support for tracking historical changes to important models</td>
<td></td>
</tr>
<tr>
<td>WAL-3592</td>
<td>Expose measured units in invoice details</td>
<td></td>
</tr>
<tr>
<td>WAL-3587</td>
<td>Render component usage as charts in homeport</td>
<td></td>
</tr>
<tr>
<td>WAL-3579</td>
<td>Support for description for Secgroup Rules</td>
<td></td>
</tr>
<tr>
<td>WAL-3551</td>
<td>Extensions to request-based item offerings to support Puhuri cases</td>
<td></td>
</tr>
<tr>
<td>WAL-3523</td>
<td>Add regular reminders for reviewing membership data of users</td>
<td></td>
</tr>
<tr>
<td>WAL-3520</td>
<td>Add a minimal privilege project member role</td>
<td></td>
</tr>
<tr>
<td>WAL-3497</td>
<td>Trello integration for feature requests</td>
<td></td>
</tr>
<tr>
<td>WAL-3466</td>
<td>Support editing of organizations in homeport</td>
<td></td>
</tr>
<tr>
<td>WAL-3407</td>
<td>Extension of checklists to personalized ones</td>
<td></td>
</tr>
<tr>
<td>WAL-3306</td>
<td>Growth chart shows changes over time of usage</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3297</td>
<td>Financial overview improvements</td>
<td></td>
</tr>
<tr>
<td>WAL-3294</td>
<td>Actions for setting up Waldur at VU</td>
<td></td>
</tr>
<tr>
<td>WAL-3197</td>
<td>ITA PKI extension improvements</td>
<td></td>
</tr>
<tr>
<td>WAL-3096</td>
<td>Add support for OpenStack Router</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3022</td>
<td>Redesign of slurm module</td>
<td></td>
</tr>
<tr>
<td>WAL-2989</td>
<td>Reports visible to support</td>
<td></td>
</tr>
<tr>
<td>WAL-2967</td>
<td>Basic feature to track quality of handling of a ticket</td>
<td></td>
</tr>
<tr>
<td>WAL-2666</td>
<td>Extending OpenStack integration with separate pricing for different volume types</td>
<td></td>
</tr>
<tr>
<td>WAL-2646</td>
<td>Tickets related to extension of OpenStack driver</td>
<td></td>
</tr>
<tr>
<td>WAL-2596</td>
<td>Drop OpenStack packages</td>
<td></td>
</tr>
<tr>
<td>WAL-2590</td>
<td>Tasks related to VMware that are need additional analysis</td>
<td></td>
</tr>
<tr>
<td>WAL-2491</td>
<td>VMware plugin</td>
<td></td>
</tr>
<tr>
<td>WAL-2025</td>
<td>Tasks related to extension of MasterMind API for BDG SSP</td>
<td></td>
</tr>
<tr>
<td>WAL-1988</td>
<td>Marketplace (3)</td>
<td></td>
</tr>
<tr>
<td>WAL-1808</td>
<td>Waldur Marketplace (Phase 2)</td>
<td></td>
</tr>
<tr>
<td>WAL-1640</td>
<td>Extension of ansible SDK with additional operations</td>
<td></td>
</tr>
<tr>
<td>WAL-1568</td>
<td>Migrate tables to React</td>
<td></td>
</tr>
<tr>
<td>WAL-1523</td>
<td>Waldur Marketplace (Phase I)</td>
<td></td>
</tr>
<tr>
<td>WAL-1504</td>
<td>Implement basic support for Dutch government cloud in Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-1402</td>
<td>Add support for MOAB provider</td>
<td></td>
</tr>
<tr>
<td>WAL-1289</td>
<td>Add support for Jira attachments</td>
<td></td>
</tr>
<tr>
<td>WAL-1288</td>
<td>Support view of users</td>
<td></td>
</tr>
<tr>
<td>WAL-1286</td>
<td>Add support for LDAP-based authentication backends</td>
<td></td>
</tr>
<tr>
<td>WAL-1255</td>
<td>Add support for Staff only VPC management</td>
<td></td>
</tr>
<tr>
<td>WAL-1113</td>
<td>Paypal support</td>
<td></td>
</tr>
<tr>
<td>WAL-1095</td>
<td>Basic Azure VM provider</td>
<td></td>
</tr>
<tr>
<td>WAL-1060</td>
<td>Waldur goes to K8S</td>
<td></td>
</tr>
<tr>
<td>WAL-1058</td>
<td>Resource import</td>
<td></td>
</tr>
<tr>
<td>WAL-969</td>
<td>Expert provider extension</td>
<td></td>
</tr>
<tr>
<td>WAL-962</td>
<td>Add organization self-registration</td>
<td></td>
</tr>
<tr>
<td>WAL-925</td>
<td>Add eduGain support for authentication</td>
<td></td>
</tr>
<tr>
<td>WAL-903</td>
<td>Improvements to invoice / accounting</td>
<td></td>
</tr>
<tr>
<td>WAL-839</td>
<td>Miration to ES 5.x</td>
<td></td>
</tr>
<tr>
<td>WAL-834</td>
<td>Migrate to Django 1.11</td>
<td></td>
</tr>
<tr>
<td>WAL-833</td>
<td>Create a PoC for Expert provider</td>
<td></td>
</tr>
<tr>
<td>WAL-832</td>
<td>Ansible module for Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-793</td>
<td>2nd phase of Grafana dashboards</td>
<td></td>
</tr>
<tr>
<td>WAL-790</td>
<td>Add ability to set cost limit on organization</td>
<td></td>
</tr>
<tr>
<td>WAL-751</td>
<td>Support for Ansible-playbooks as application providers</td>
<td></td>
</tr>
<tr>
<td>WAL-730</td>
<td>Waldur Mission Control (central management for Waldurs)</td>
<td></td>
</tr>
<tr>
<td>WAL-722</td>
<td>LDAP-based SSH access provider</td>
<td></td>
</tr>
<tr>
<td>WAL-713</td>
<td>Add TaaT authentication provider to Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-701</td>
<td>Notifications</td>
<td></td>
</tr>
<tr>
<td>WAL-686</td>
<td>Add support for smartid.ee IdP</td>
<td></td>
</tr>
<tr>
<td>WAL-604</td>
<td>Basic support mode</td>
<td></td>
</tr>
<tr>
<td>WAL-597</td>
<td>/admin improvements</td>
<td></td>
</tr>
<tr>
<td>WAL-596</td>
<td>HomePort localization</td>
<td></td>
</tr>
<tr>
<td>WAL-595</td>
<td>API Documentation</td>
<td></td>
</tr>
<tr>
<td>WAL-568</td>
<td>Grafana dashbord (for operators)</td>
<td></td>
</tr>
<tr>
<td>WAL-566</td>
<td>Predictive analysis for capacity planning (organization-view)</td>
<td></td>
</tr>
<tr>
<td>WAL-511</td>
<td>Fixes for a broken network model</td>
<td></td>
</tr>
<tr>
<td>WAL-479</td>
<td>Price estimation</td>
<td></td>
</tr>
<tr>
<td>WAL-468</td>
<td>Admin and user guides (initial)</td>
<td></td>
</tr>
<tr>
<td>WAL-463</td>
<td>Extended backup restoration</td>
<td></td>
</tr>
<tr>
<td>WAL-462</td>
<td>Extend snapshot management</td>
<td></td>
</tr>
<tr>
<td>WAL-461</td>
<td>Basic resource usage view</td>
<td></td>
</tr>
<tr>
<td>WAL-454</td>
<td>R: Update django to 1.9.</td>
<td></td>
</tr>
<tr>
<td>WAL-396</td>
<td>OpenStack providers pricing info</td>
<td></td>
</tr>
<tr>
<td>WAL-323</td>
<td>Use neutron for network operations.</td>
<td></td>
</tr>
<tr>
<td>WAL-297</td>
<td>Project policies</td>
<td></td>
</tr>
<tr>
<td>WAL-289</td>
<td>Optimizer for IaaS resource selection</td>
<td></td>
</tr>
<tr>
<td>WAL-287</td>
<td>Renaming of artifacts to Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-270</td>
<td>OpenStack Tenant dashboard access</td>
<td></td>
</tr>
<tr>
<td>WAL-262</td>
<td>OpenStack Tenant Network Management</td>
<td></td>
</tr>
<tr>
<td>WAL-259</td>
<td>OpenStack Instance Access Management</td>
<td></td>
</tr>
<tr>
<td>WAL-213</td>
<td>Basic policy support</td>
<td></td>
</tr>
<tr>
<td>WAL-199</td>
<td>Provider details</td>
<td></td>
</tr>
<tr>
<td>WAL-197</td>
<td>Customer support</td>
<td></td>
</tr>
<tr>
<td>WAL-169</td>
<td>API Token management</td>
<td></td>
</tr>
<tr>
<td>WAL-168</td>
<td>Extended membership management capabilities</td>
<td></td>
</tr>
<tr>
<td>WAL-106</td>
<td>Refactoring: Update DRF version.</td>
<td></td>
</tr>
<tr>
<td>WAL-88</td>
<td>Transactional event logs</td>
<td></td>
</tr>
<tr>
<td>WAL-82</td>
<td>Controls for user profile updates</td>
<td></td>
</tr>
<tr>
<td>WAL-79</td>
<td>Tenant Management</td>
<td></td>
</tr>
<tr>
<td>WAL-77</td>
<td>Request-based Offerings</td>
<td></td>
</tr>
<tr>
<td>WAL-76</td>
<td>Billing</td>
<td></td>
</tr>
<tr>
<td>WAL-75</td>
<td>Audit log</td>
<td></td>
</tr>
<tr>
<td>WAL-68</td>
<td>Waldur ServiceStore</td>
<td></td>
</tr>
<tr>
<td>WAL-43</td>
<td>Waldur white-labelling</td>
<td></td>
</tr>
<tr>
<td>WAL-42</td>
<td>Resource state display</td>
<td></td>
</tr>
<tr>
<td>WAL-41</td>
<td>Registration</td>
<td></td>
</tr>
<tr>
<td>WAL-17</td>
<td>Waldur HomePort L&amp;F</td>
<td></td>
</tr>
<tr>
<td>WAL-15</td>
<td>Waldur web page</td>
<td></td>
</tr>
<tr>
<td>WAL-9</td>
<td>OpenStack VM backup management</td>
<td></td>
</tr>
<tr>
<td>WAL-8</td>
<td>OpenStack Storage management</td>
<td></td>
</tr>
<tr>
<td>WAL-7</td>
<td>OpenStack Instance management</td>
<td></td>
</tr>
<tr>
<td>WAL-6</td>
<td>Waldur HomePort navigation</td>
<td></td>
</tr>
<tr>
<td>WAL-4</td>
<td>VPC / OpenStack Tenant purchase</td>
<td></td>
</tr>
<tr>
<td>WAL-3</td>
<td>Organization team management</td>
<td></td>
</tr>
<tr>
<td>WAL-2</td>
<td>I want to be able to manage my SSH keys</td>
<td></td>
</tr>
</tbody>
</table></section><section class="print-page" id="about-screenshots"><h1 id="about-screenshots-screenshots">Screenshots</h1>
<h2 id="about-screenshots-login-page">Login page</h2>
<p><a href="../about/img/login.png"><img alt="Landing" src="../about/img/login.png" /></a></p>
<h2 id="about-screenshots-organization-dashboard">Organization dashboard</h2>
<p><a href="../about/img/org-dashboard.png"><img alt="Organization dashboard" src="../about/img/org-dashboard.png" /></a></p>
<h2 id="about-screenshots-project-dashboard">Project dashboard</h2>
<p><a href="../about/img/project-resource-list.png"><img alt="Resource list" src="../about/img/project-resource-list.png" /></a>
<a href="../about/img/project-openstack-details.png"><img alt="OpenStack details" src="../about/img/project-openstack-details.png" /></a>
<a href="../about/img/slurm-resource.png"><img alt="SLURM details" src="../about/img/slurm-resource.png" /></a></p>
<h2 id="about-screenshots-provider-reporting-and-support-dashboard">Provider reporting and support dashboard</h2>
<p><a href="../about/img/support-financial.png"><img alt="Financial overview" src="../about/img/support-financial.png" /></a>
<a href="../about/img/support-growth.png"><img alt="Growth reporting" src="../about/img/support-growth.png" /></a>
<a href="../about/img/support-issues.png"><img alt="Service desk issue" src="../about/img/support-issues.png" /></a></p>
<h2 id="about-screenshots-marketplace">Marketplace</h2>
<p><a href="../about/img/marketplace.png"><img alt="Marketplace" src="../about/img/marketplace.png" /></a>
<a href="../about/img/marketplace-vpc.png"><img alt="VPC creation" src="../about/img/marketplace-vpc.png" /></a>
<a href="../about/img/marketplace-slurm.png"><img alt="SLURM creation" src="../about/img/marketplace-slurm.png" /></a></p></section><section class="print-page" id="about-support"><h1 id="about-support-support">Support</h1>
<p>Waldur is an open-source project co-developed by <a href="https://opennodecloud.com">OpenNode</a> and <a href="https://hpc.ut.ee">University of Tartu</a>.</p>
<h2 id="about-support-support-and-sponsored-development">Support and sponsored development</h2>
<p>OpenNode provides several <a href="https://waldur.com/pricing/">options for support</a> with varying SLAs.</p>
<p>If you would like to know more, <a href="mailto:info@opennodecloud.com">reach out</a>!</p>
<h2 id="about-support-managed-hosting-for-academical-institutions">Managed hosting for academical institutions</h2>
<p>Please reach out to <a href="mailto:support@hpc.ut.ee">support@hpc.ut.ee</a> if you represent an R&amp;D organization
and interested in managed Waldur hosting.</p></section><h1 class='nav-section-title-end'>Ended: About</h1>
                        <h1 class='nav-section-title' id='section-admin-guide'>
                            Admin guide <a class='headerlink' href='#section-admin-guide' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="admin-guide-architecture"><h1 id="admin-guide-architecture-architecture">Architecture</h1>
<p>Waldur is composed of a several components.</p>
<ul>
<li>Homeport (web client, graphical interface) - React application</li>
<li>Mastermind API server - Django/Django REST Framework application implementing the core business logic</li>
<li>Celery workers - Background processing of tasks</li>
<li>Celery beat - Scheduling of periodic tasks for background processing</li>
<li>PostgreSQL database - Storing persistent data, also serves as Celery result store in Kubernetes deployment</li>
<li>Redis - Tasks queue and result store for Celery (Docker Compose deployment only)</li>
<li>RabbitMQ - Tasks queue and result store for Celery (Kubernetes deployment only)</li>
</ul>
<p><a class="glightbox" href="../assets/components.svg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="diagram" src="../assets/components.svg" /></a></p></section><section class="print-page" id="admin-guide-backups"><h1 id="admin-guide-backups-backups">Backups</h1>
<p>Waldur keeps state in 2 components:</p>
<ul>
<li>Database - main persistency layer.</li>
<li>Message queue - contains transient data mostly about scheduled jobs and cache.</li>
</ul>
<p>Of these, only database needs to be backed up.</p>
<p>A typical approach to a backup is:</p>
<h2 id="admin-guide-backups-1-create-a-db-dump">1. Create a DB dump</h2>
<ol>
<li>An entire db dump</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-t<span class="w"> </span>waldur-db<span class="w"> </span>pg_dump<span class="w"> </span>-U<span class="w"> </span>waldur<span class="w"> </span>waldur<span class="w"> </span><span class="p">|</span><span class="w"> </span>gzip<span class="w"> </span>-9<span class="w"> </span>&gt;<span class="w"> </span>waldur-<span class="k">$(</span>date<span class="w"> </span>+<span class="s1">&#39;%Y%m%dT%H%M%S&#39;</span><span class="k">)</span>.sql.gz
</code></pre></div></td></tr></table></div>
<ol>
<li>An entire db dump with cleanup commands:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-t<span class="w"> </span>waldur-db<span class="w"> </span>pg_dump<span class="w"> </span>--clean<span class="w"> </span>-U<span class="w"> </span>waldur<span class="w"> </span>waldur<span class="w"> </span><span class="p">|</span><span class="w"> </span>gzip<span class="w"> </span>-9<span class="w"> </span>&gt;<span class="w"> </span>waldur-<span class="k">$(</span>date<span class="w"> </span>+<span class="s1">&#39;%Y%m%dT%H%M%S&#39;</span><span class="k">)</span>.sql.gz
</code></pre></div></td></tr></table></div>
<ol>
<li>A db dump containing only data</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-t<span class="w"> </span>waldur-db<span class="w"> </span>pg_dump<span class="w"> </span>-a<span class="w"> </span>-U<span class="w"> </span>waldur<span class="w"> </span>waldur<span class="w"> </span><span class="p">|</span><span class="w"> </span>gzip<span class="w"> </span>-9<span class="w"> </span>&gt;<span class="w"> </span>waldur-<span class="k">$(</span>date<span class="w"> </span>+<span class="s1">&#39;%Y%m%dT%H%M%S&#39;</span><span class="k">)</span>.sql.gz
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-backups-2-copy-backup-to-a-remote-location">2. Copy backup to a remote location</h2>
<p>Using rsync / scp or more specialised tools.</p>
<h2 id="admin-guide-backups-3-restore-the-created-backup">3. Restore the created backup</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>cat<span class="w"> </span>waldur-backup.sql<span class="w"> </span><span class="p">|</span><span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>waldur-db<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>waldur
</code></pre></div></td></tr></table></div>
<p>We suggest to make sure that backups are running regularly, e.g. using cron.</p></section><section class="print-page" id="admin-guide-billing-and-accounting"><h1 id="admin-guide-billing-and-accounting-billing-and-accounting-in-waldur">Billing and accounting in Waldur</h1>
<p>Accounting and billing components in Waldur are respnsible for gathering the accunting data and representing it to the
end users. Waldur has built-in reporting and accounting functionality. This allows tracking usage information in each
project and resources within that project. During the creation step of the service offering, the provider can define
the accounting components (like CPU-h, GPU-h and storage for HPC, CPU, RAM and storage for VMs) and plans, which set
the price for each defined component. Consumers can see the usage information based on the policies defined by the
provider.</p>
<p>From a provider point of view, Waldur supports invoice generation and exposes enough of information via APIs to
integrate with custom payment providers.</p>
<p>On the consumer side, Waldur provides convenient ways to see resource usage information. User interface shows overall
usage data within the project and monthly usage across resource components (for exammple, CPU, GPU and storage).
End users are  able to export the usage data to PDF, CSV and XLSX formats. Depending on the end user role,
project members are able to  see the specific project information, organization owners are able to see all projects
information within specific organization.</p>
<p>In addition to that, Waldur offers convenient way to export the usage information, so external visualization solutions
(like Grafana) can generate graphs based on that data. More information <a href="#admin-guide-grafana">about that</a>.</p></section><section class="print-page" id="admin-guide-checklist-for-production"><h1 id="admin-guide-checklist-for-production-checklist-for-go-live">Checklist for Go live</h1>
<h2 id="admin-guide-checklist-for-production-general">General</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that privacy policy and terms of use are updated to the site specific ones.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that SMTP server and outgoing email address are configured and emails are sent out.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Reboot test: restart all the nodes where Waldur components are running, application should recover automatically.</li>
</ul>
<h2 id="admin-guide-checklist-for-production-security">Security</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Remove or disable default staff accounts.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Generate a new random secret key.</li>
</ul>
<h2 id="admin-guide-checklist-for-production-backups">Backups</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that configuration of Waldur is backed up and versioned.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Assure that DB backups are performed, i.e. backups are created when manually triggering</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Assure that DB backups files are on a persistent storage, preferably outside the storage used for Waldur's database.</li>
</ul>
<h2 id="admin-guide-checklist-for-production-air-gapped-deployments">Air-gapped deployments</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that Waldur docker images are mirrored to a local registry.</li>
</ul></section><section class="print-page" id="admin-guide-cookie-policy"><h1 id="admin-guide-cookie-policy-cookie-policy-and-telemetry">Cookie policy and Telemetry</h1>
<h2 id="admin-guide-cookie-policy-cookie-policy">Cookie policy</h2>
<p>Waldur can save data about the user in a browser. Data type and policy depends on the component.</p>
<h3 id="admin-guide-cookie-policy-homeport">HomePort</h3>
<ul>
<li>Saving of the latest view point of the user.</li>
<li>Saving redirect information, i.e. where to forward from a certain state.</li>
<li>Saving which authentication method was used by user for logging in.</li>
<li>Saving user session token.</li>
<li>Saving user language preference.</li>
</ul>
<h3 id="admin-guide-cookie-policy-mastermind">MasterMind</h3>
<ul>
<li>Saving authentication token (cookie) when a user logs into /admin management interface.</li>
</ul>
<h2 id="admin-guide-cookie-policy-telemetry">Telemetry</h2>
<p>Waldur can send telemetry metrics to the telemetry server. Metrics are sent only if the feature is enabled and the telemetry server is configured in the Waldur settings.
To toggle the feature on or off, navigate to <code>Administration -&gt; Settings -&gt; Features</code> in HomePort and enable or disable the <code>Send telemetry metrics</code> feature.
<a class="glightbox" href="../admin-guide/img/telemetry-feature.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="../admin-guide/img/telemetry-feature.png" /></a></p>
<p>An <strong>example</strong> of telemetry metrics is shown below:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>Deployment<span class="w"> </span>ID:<span class="w"> </span>0f115db062b7c0dd030b16878c7
Deployment<span class="w"> </span>type:<span class="w"> </span>other
Helpdesk<span class="w"> </span>backend:<span class="w"> </span>zammad
Helpdesk<span class="w"> </span>integration<span class="w"> </span>status:<span class="w"> </span><span class="nb">true</span>
Number<span class="w"> </span>of<span class="w"> </span>users:<span class="w"> </span><span class="m">1555</span>
Number<span class="w"> </span>of<span class="w"> </span>offerings:<span class="w"> </span><span class="m">796</span>
Types<span class="w"> </span>of<span class="w"> </span>offering:
<span class="w">    </span>Waldur.RemoteOffering
<span class="w">    </span>Marketplace.Booking
<span class="w">    </span>Marketplace.Rancher
<span class="w">    </span>OpenStackTenant.Volume
<span class="w">    </span>VMware.VirtualMachine
<span class="w">    </span>Marketplace.Basic
Version:<span class="w"> </span><span class="m">6</span>.6.5+3.g6491c9dab.dirty
Installation<span class="w"> </span>date:<span class="w"> </span><span class="m">2022</span>-06-10<span class="w"> </span><span class="m">11</span>:28:50.585100+0000
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-grafana"><h1 id="admin-guide-grafana-grafana-and-prometheus-metrics">Grafana and Prometheus Metrics</h1>
<ul>
<li>Export Waldur metrics with <a href="https://github.com/waldur/waldur-prometheus-exporter">waldur-prometheus-exporter</a></li>
<li>Import <a href="../admin-guide/grafana-dashboard.json">grafana dashboard json</a> into Grafana</li>
</ul></section><section class="print-page" id="admin-guide-hardware-requirements"><h1 id="admin-guide-hardware-requirements-hardware-requirements">Hardware requirements</h1>
<h2 id="admin-guide-hardware-requirements-docker-compose-deployment-on-a-single-server">Docker-compose deployment (on a single server)</h2>
<ul>
<li>Docker version: 1.13+</li>
<li>Minimal configuration: 4 vCPU, 8 GB RAM</li>
</ul>
<h2 id="admin-guide-hardware-requirements-helm-based-deployment">Helm-based deployment</h2>
<ul>
<li>Kubernetes version: 1.18+</li>
<li>Minimal namespace limits:</li>
<li>CPU: <strong>8000m</strong><ul>
<li>Waldur: 4000m</li>
<li>PostgreSQL: 4000m</li>
</ul>
</li>
<li>RAM: <strong>10000Mi</strong><ul>
<li>Waldur: 6000Mi</li>
<li>PostgreSQL: 4000Mi</li>
</ul>
</li>
<li>Storage: <strong>20Gi</strong> (PostgreSQL DB)</li>
<li>Recommended namespace limits:</li>
<li>CPU: <strong>12000m</strong><ul>
<li>Waldur: 6000m</li>
<li>PostgreSQL: 6000m</li>
</ul>
</li>
<li>RAM: <strong>14000Mi</strong><ul>
<li>Waldur: 8000Mi</li>
<li>PostgreSQL: 6000Mi</li>
</ul>
</li>
<li>Storage: <strong>40Gi</strong> (PostgreSQL DB)</li>
</ul>
<h2 id="admin-guide-hardware-requirements-component-specific-requirements">Component specific requirements</h2>
<h3 id="admin-guide-hardware-requirements-waldur-mastermind-api">Waldur Mastermind (API)</h3>
<p>By default 4 uWSGI processes are started.</p>
<ul>
<li>Minimum requirements: 1 CPU, 1GB RAM for every node</li>
<li>Recommended setup: 2 CPU or more, 2 GB RAM or more</li>
</ul>
<h3 id="admin-guide-hardware-requirements-waldur-mastermind-celery-worker">Waldur Mastermind (Celery worker)</h3>
<p>By default a single worker with 10 threads is started.</p>
<ul>
<li>Minimum requirements: 2 CPU, 1 GB RAM</li>
<li>Recommended setup: 4 CPU or more, 8 GB RAM or more</li>
</ul>
<p><strong>More memory should be added if more Celery worker processes are running on the same host (512 MB for each 4 Celery workers).</strong></p>
<h3 id="admin-guide-hardware-requirements-waldur-mastermind-celery-beat">Waldur Mastermind (Celery beat)</h3>
<p>A single Celery beat process is started.</p>
<ul>
<li>Minimum and recommended requirements: 1 CPU, 1 GB RAM</li>
</ul>
<h3 id="admin-guide-hardware-requirements-postgresql">PostgreSQL</h3>
<ul>
<li>Minimum requirements: 1 CPU, 1 GB RAM</li>
<li>Recommended setup: 2 CPU or more, 2 GB RAM or more</li>
</ul>
<h3 id="admin-guide-hardware-requirements-redis">Redis</h3>
<ul>
<li>Minimum requirements: 1 CPU, 512 MB RAM</li>
<li>Recommended setup: 2 CPU or more, 1 GB RAM or more</li>
</ul>
<h2 id="admin-guide-hardware-requirements-waldur-homeport-nginx">Waldur HomePort (Nginx)</h2>
<ul>
<li>Minimum and recommended requirements: 1 CPU and 512MB RAM</li>
</ul></section><section class="print-page" id="admin-guide-managing-with-ansible"><h1 id="admin-guide-managing-with-ansible-managing-waldur-with-ansible">Managing Waldur with Ansible</h1>
<p><strong>NB!</strong> Repository with Ansible playbooks for Waldur management is not open-sourced. It is available to Waldur users
that have purchased support packages.</p>
<h2 id="admin-guide-managing-with-ansible-compatibility">Compatibility</h2>
<p>Ansible version 2.9 is supported; code in this repository may work with other Ansible versions but it is not guaranteed.</p>
<h2 id="admin-guide-managing-with-ansible-quick-setup">Quick setup</h2>
<ol>
<li>Make sure that you have:<ul>
<li>Folder containing managed-ansible Ansible installer (this one).</li>
<li>Folder containing deployment-specific settings.</li>
</ul>
</li>
<li>Copy <code>setup_deployment.sh.example</code> to <code>setup_deployment.sh</code>, adjust:<ul>
<li>INSTALLER_PATH - full path to current folder</li>
<li>DEPLOYMENT_CONFIG_PATH - full path to folder with deployment-specific information</li>
<li>DEPLOYMENT_IDS - list of deployment IDs you want to manage.</li>
</ul>
</li>
<li>Run ./setup_deployment.sh. This will create required symlinks.</li>
<li>Run <code>ansible-playbook -DC &lt;deployment_id.yml&gt;</code> to check what installer will do.</li>
<li>Run <code>ansible-playbook -D &lt;deployment_id.yml&gt;</code> to apply the installer.</li>
</ol>
<h2 id="admin-guide-managing-with-ansible-upgrading-installer">Upgrading installer</h2>
<ol>
<li>Download a new archive into a separate folder and unpack.</li>
<li>
<p>Check what has changed:</p>
<p><code>rsync --dry-run -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/</code></p>
</li>
<li>
<p>Do the upgrade:</p>
<p><code>rsync -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/</code></p>
</li>
</ol>
<h2 id="admin-guide-managing-with-ansible-upgrading-waldur">Upgrading Waldur</h2>
<p>Upgrading Waldur to a new version is achieved by following the checklist:</p>
<ol>
<li>Update deployment-specific variables for the new version in <code>groups_vars/&lt;deployment_id&gt;/vars</code> and <code>groups_vars/&lt;deployment_id&gt;/vault</code> (if setting is private).</li>
<li>Update target version in <code>groups_vars/&lt;deployment_id&gt;/vars</code>: set <code>waldur_homeport_version</code> and <code>waldur_mastermind_version</code> to a new version of the Waldur release.</li>
<li>Run <code>ansible-playbook -DC &lt;deployment_id.yml&gt;</code> to check what installer will do during the upgrade.</li>
<li>Run <code>ansible-playbook -D &lt;deployment_id.yml&gt;</code> to perform an upgrade.</li>
</ol>
<h2 id="admin-guide-managing-with-ansible-add-new-deployment">Add new deployment</h2>
<p>Infrastructure:</p>
<ol>
<li>Prepare servers matching <a href="https://github.com/waldur/waldur-docs/blob/master/docs/admin-guide/hardware-requirements/requirements.md">requirements</a>.</li>
<li>Make sure you can access them by SSH by running only <code>ssh &lt;host&gt;</code>. Otherwise you should tweak <code>~/.ssh/config</code> file or describe connectivity in the Ansible inventory.</li>
</ol>
<p>Ansible (this repository):</p>
<ol>
<li>Add new deployment-specific host group to <code>hosts</code> file (example: <code>[foo]</code>); add hosts to this group.</li>
<li>Add hosts to Waldur role groups in <code>hosts</code> file.</li>
<li>Add variable files for new deployment: <code>group_vars/foo/vars</code> and <code>group_vars/foo/vault</code></li>
<li>Add deployment specific information under <code>deployments</code> folder.</li>
<li>Copy existing playbook that is the closest match for a new deployment; modify as needed</li>
<li>Run Ansible playbook to set up deployment: <code>ansible-playbook -D foo.yml</code></li>
</ol>
<h2 id="admin-guide-managing-with-ansible-remove-deployment">Remove deployment</h2>
<p>Ansible (this repository):</p>
<ol>
<li>Delete deployment-specific playbook, roles, tasks, templates etc.</li>
<li>Delete variable files: <code>rm -rf group_vars/foo</code></li>
<li>Delete deployment-specific host group and all deployment-specific hosts from <code>hosts</code> file (example: <code>[foo]</code>)</li>
</ol>
<h2 id="admin-guide-managing-with-ansible-managing-waldur-deployed-as-helm">Managing Waldur deployed as Helm</h2>
<p>Requirements:</p>
<ol>
<li>Installed and running <code>kubernetes</code> system on a node (e. g. minikube)</li>
<li>Installed <code>kubectl</code> on the node</li>
</ol>
<p>Place all configuration files for release in next manner:</p>
<ul>
<li><code>values.yaml</code> -&gt; <code>roles/waldur_helm/files/waldur_helm/waldur/</code></li>
<li><code>values.yaml</code> -&gt; <code>roles/waldur_helm/files/waldur_helm/waldur/</code></li>
<li>Files related to TLS -&gt; <code>deployments/&lt;deployment_id&gt;/tls/</code></li>
<li>Files related to white-labeling -&gt; <code>deployments/&lt;deployment_id&gt;/whitelabeling/</code></li>
<li>Files related to mastermind templates -&gt; <code>deployments/&lt;deployment_id&gt;/mastermind_templates/</code></li>
<li>Files related to stress testing -&gt; <code>deployments/&lt;deployment_id&gt;/locust_tasks/</code></li>
<li>Files related to SAML2 -&gt; <code>deployments/&lt;deployment_id&gt;/waldur_saml2/</code></li>
</ul>
<p>More configuration info:</p>
<ul>
<li><a href="https://github.com/opennode/waldur-helm/blob/master/docs/tls-config.md">TLS</a></li>
<li><a href="https://github.com/opennode/waldur-helm/blob/master/docs/whitelabeling.md">White-labeling</a></li>
<li><a href="https://github.com/opennode/waldur-helm/blob/master/docs/mastermind-templates.md">Mastermind templates</a></li>
</ul></section><section class="print-page" id="admin-guide-multilingual"><h1 id="admin-guide-multilingual-multilingual-user-interface">Multilingual User Interface</h1>
<p>Waldur user interface is available in several languages. Default language is English, but the end users may have several
other options to choose from. The number of available languages depends on the Waldur's configuration. Current status
of the overall avalable languages are visible on the <a href="https://localazy.com/p/waldur-homeport">Localazy website</a>.</p>
<p>Waldur uses <a href="https://localazy.com/">Localazy</a> service, to translate the user interface. Localazy is a continuous
localization platform and web-based translation management system. This allows to use AI or human translation.
Everyone can contribute to Waldur's translation by adding new translantions or fixing current ones, more
information <a href="https://docs.waldur.com/about/contributing/#localisation">here</a>.</p></section><section class="print-page" id="admin-guide-waldur-shell"><h1 id="admin-guide-waldur-shell-waldur-shell">Waldur Shell</h1>
<p>Waldur provides a shell for command line scripting. To start a shell, run <code>waldur shell</code> in the MasterMind context.</p>
<p>For docker-compose deployments, please run:</p>
<p><code>docker exec -it waldur-mastermind-api waldur shell</code></p>
<p>For Helm-based K8s deployments, please run:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span>/etc/rancher/rke2/rke2.yaml<span class="w">  </span><span class="c1"># if running from RKE2 node</span>
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>waldur-mastermind-worker<span class="w">  </span><span class="c1"># to find POD id</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>--stdin<span class="w"> </span>--tty<span class="w"> </span>waldur-mastermind-worker-POD-ID<span class="w"> </span>--<span class="w"> </span>waldur<span class="w"> </span>shell
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-waldur-shell-examples">Examples</h2>
<h3 id="admin-guide-waldur-shell-settingremoving-staff-permissions-for-a-user">Setting/removing staff permissions for a user</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.core.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;example_user&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="s2">&quot;somesecretpassword&quot;</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">is_staff</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># set to False if you want to remove permission</span>
<span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-creating-a-new-user-with-token-only-authentication">Creating a new user with token only authentication</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">rest_framework.authtoken.models</span> <span class="kn">import</span> <span class="n">Token</span>
<span class="kn">from</span> <span class="nn">waldur_core.core.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">username</span><span class="o">=</span><span class="s2">&quot;example_accounting_user&quot;</span><span class="p">,</span>
    <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Accounting&quot;</span><span class="p">,</span>
    <span class="n">last_name</span><span class="o">=</span><span class="s2">&quot;Reporter&quot;</span><span class="p">,</span>
    <span class="n">email</span><span class="o">=</span><span class="s2">&quot;test@example.com&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">token_lifetime</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">user</span><span class="o">.</span><span class="n">set_unusable_password</span><span class="p">()</span>
<span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="n">token</span> <span class="o">=</span> <span class="n">Token</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-triggering-pulling-of-usage-data-from-remote-waldur">Triggering pulling of usage data from remote Waldur</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_mastermind.marketplace_remote.tasks</span> <span class="kn">import</span> <span class="n">UsageListPullTask</span>

<span class="n">UsageListPullTask</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-apply-changes-in-waldur-hpc-plugin-to-existing-users">Apply changes in Waldur HPC plugin to existing users</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.core</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">core_models</span>
<span class="kn">from</span> <span class="nn">waldur_hpc.handlers</span> <span class="kn">import</span> <span class="n">handle_new_user</span>

<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">core_models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_active</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">registration_method__iexact</span><span class="o">=</span><span class="s1">&#39;saml2&#39;</span><span class="p">):</span>
    <span class="n">handle_new_user</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-cleanup-leftover-ports-from-openstack-project">Cleanup leftover ports from OpenStack Project</h3>
<p>Lookup UUID of an OpenStack tenant (aka backend_id in Waldur).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_openstack.openstack.models</span> <span class="kn">import</span> <span class="n">Tenant</span>

<span class="n">t_uuid</span> <span class="o">=</span> <span class="s1">&#39;UUID_OF_TENANT&#39;</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tenant</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">backend_id</span><span class="o">=</span><span class="n">t_uuid</span><span class="p">)</span>

<span class="n">nc</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span><span class="o">.</span><span class="n">neutron_client</span>
<span class="n">all_ports</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">list_ports</span><span class="p">()[</span><span class="s1">&#39;ports&#39;</span><span class="p">]</span>
<span class="n">tenant_ports</span> <span class="o">=</span> <span class="p">[</span><span class="n">port</span> <span class="k">for</span> <span class="n">port</span> <span class="ow">in</span> <span class="n">all_ports</span> <span class="k">if</span> <span class="n">port</span><span class="p">[</span><span class="s1">&#39;tenant_id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">t_uuid</span> <span class="ow">and</span> <span class="n">port</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;DOWN&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tenant_ports</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;fixed_ips&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;ip_address&#39;</span><span class="p">])</span>
    <span class="n">nc</span><span class="o">.</span><span class="n">delete_port</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-add-affiliations-to-user">Add affiliations to user</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.core</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">core_models</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">core_models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="s1">&#39;some.email@abc.example.com&#39;</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">affiliations</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;some.affiliation@domain.example.com&#39;</span><span class="p">]</span>
<span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-create-a-service-user-for-api-access">Create a service user for API access</h3>
<p>To create a service user - without valid access credntials and non-expiring Token, please run the
following script.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.core.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="n">u</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;waldur_demo_user&#39;</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s1">&#39;Demo&#39;</span><span class="p">,</span>
                        <span class="n">last_name</span><span class="o">=</span><span class="s1">&#39;Waldur user&#39;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s1">&#39;demo@example.com&#39;</span><span class="p">)</span>

<span class="c1"># make sure that token doesn&#39;t time out</span>
<span class="n">u</span><span class="o">.</span><span class="n">token_lifetime</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">u</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="c1"># print user authentication token</span>
<span class="nb">print</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">auth_token</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-synchronise-slurm-associations">Synchronise SLURM associations</h3>
<p><strong>Note</strong>: <code>&lt;allocation-uuid&gt;</code> field can be found in an allocations's details page.</p>
<p><code>Select Organization -&gt; Select project -&gt; Select allocation -&gt; Find 'UUID' field in the page.</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_slurm</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">slurm_models</span>

<span class="n">allocation</span> <span class="o">=</span> <span class="n">slurm_models</span><span class="o">.</span><span class="n">Allocation</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="s1">&#39;&lt;allocation-uuid&gt;&#39;</span><span class="p">)</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">allocation</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span>

<span class="n">backend</span><span class="o">.</span><span class="n">add_new_users</span><span class="p">(</span><span class="n">allocation</span><span class="p">)</span> <span class="c1"># Creates associations on SLURM level</span>

<span class="n">backend</span><span class="o">.</span><span class="n">pull_allocation</span><span class="p">(</span><span class="n">allocation</span><span class="p">)</span> <span class="c1"># Sync associations on Waldur level</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-lookup-user-details-from-eduteams">Lookup user details from Eduteams</h3>
<p><strong>Note</strong>: <code>USER_CUID</code> is a unique ID of user in Eduteams.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_auth_social.utils</span> <span class="kn">import</span> <span class="n">get_remote_eduteams_user_info</span>

<span class="n">USER_CUID</span><span class="o">=</span><span class="s1">&#39;semi_secret@eduteams.org&#39;</span>

<span class="n">get_remote_eduteams_user_info</span><span class="p">(</span><span class="n">USER_CUID</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-generate-report-for-list-of-projects-and-their-details">Generate report for list of projects and their details</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="kn">from</span> <span class="nn">waldur_core.structure</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">structure_models</span>


<span class="n">projects</span> <span class="o">=</span> <span class="n">structure_models</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">created__lte</span><span class="o">=</span><span class="s1">&#39;2022-05-31&#39;</span><span class="p">)</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="k">for</span> <span class="n">project</span> <span class="ow">in</span> <span class="n">projects</span><span class="p">:</span>
    <span class="n">owner</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">get_owners</span><span class="p">()</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">project</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">owner</span> <span class="ow">and</span> <span class="n">owner</span><span class="o">.</span><span class="n">full_name</span><span class="p">,</span>
            <span class="n">project</span><span class="o">.</span><span class="n">oecd_fos_2007_code</span><span class="p">,</span>
            <span class="n">project</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">country</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-generate-report-for-openstack-resources-across-projects">Generate report for OpenStack resources across projects</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">from</span> <span class="nn">waldur_openstack.openstack.models</span> <span class="kn">import</span> <span class="n">Tenant</span>
<span class="kn">from</span> <span class="nn">waldur_openstack.openstack_tenant.models</span> <span class="kn">import</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">Volume</span>
<span class="kn">from</span> <span class="nn">waldur_core.structure.models</span> <span class="kn">import</span> <span class="n">ServiceSettings</span>

<span class="n">RAM_LIMIT_NAME</span> <span class="o">=</span> <span class="s1">&#39;ram&#39;</span>
<span class="n">STORAGE_LIMIT_NAME</span> <span class="o">=</span> <span class="s1">&#39;storage&#39;</span>

<span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">generate_report</span><span class="p">():</span>
    <span class="n">tenants</span> <span class="o">=</span> <span class="n">Tenant</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s1">&#39;Organisation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Abbreviation&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Project&#39;</span><span class="p">,</span>
            <span class="s1">&#39;VPC&#39;</span><span class="p">,</span>
            <span class="s1">&#39;RAM limit&#39;</span><span class="p">,</span>
            <span class="s1">&#39;RAM usage&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Storage limit&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Storage usage&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Number of VMs&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Big VM count&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Big volume count&#39;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">tenant</span> <span class="ow">in</span> <span class="n">tenants</span><span class="p">:</span>
        <span class="n">number_of_vms</span> <span class="o">=</span> <span class="n">tenant</span><span class="o">.</span><span class="n">quotas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;instances&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">usage</span>
        <span class="n">ram_limit</span> <span class="o">=</span> <span class="n">tenant</span><span class="o">.</span><span class="n">quotas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ram&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span> <span class="o">/</span> <span class="mi">1024</span>
        <span class="n">ram_usage</span> <span class="o">=</span> <span class="n">tenant</span><span class="o">.</span><span class="n">quotas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;ram&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">usage</span> <span class="o">/</span> <span class="mi">1024</span>
        <span class="n">storage_limit</span> <span class="o">=</span> <span class="n">tenant</span><span class="o">.</span><span class="n">quotas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;storage&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span> <span class="o">/</span> <span class="mi">1024</span>
        <span class="n">storage_usage</span> <span class="o">=</span> <span class="n">tenant</span><span class="o">.</span><span class="n">quotas</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;storage&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">usage</span> <span class="o">/</span> <span class="mi">1024</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="n">ServiceSettings</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="n">tenant</span><span class="p">)</span>
        <span class="c1"># RAM &gt; 16 GB</span>
        <span class="n">big_vm_count</span> <span class="o">=</span> <span class="n">Instance</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">service_settings</span><span class="o">=</span><span class="n">ss</span><span class="p">,</span> <span class="n">ram__gt</span><span class="o">=</span><span class="mi">16</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="c1"># Disk &gt; 256 GB</span>
        <span class="n">big_storage_count</span> <span class="o">=</span> <span class="n">Volume</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">service_settings</span><span class="o">=</span><span class="n">ss</span><span class="p">,</span> <span class="n">size__gt</span><span class="o">=</span><span class="mi">256</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">tenant</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">tenant</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">customer</span><span class="o">.</span><span class="n">abbreviation</span><span class="p">,</span>
                <span class="n">tenant</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">tenant</span><span class="p">,</span>
                <span class="n">ram_limit</span><span class="p">,</span>
                <span class="n">ram_usage</span><span class="p">,</span>
                <span class="n">storage_limit</span><span class="p">,</span>
                <span class="n">storage_usage</span><span class="p">,</span>
                <span class="n">number_of_vms</span><span class="p">,</span>
                <span class="n">big_vm_count</span><span class="p">,</span>
                <span class="n">big_storage_count</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-update-limits-for-all-tenants-in-a-specific-organization">Update limits for all tenants in a specific organization</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_API_URL</span> <span class="o">=</span> <span class="s1">&#39;&lt;CHANGEME&gt;&#39;</span>
<span class="n">WALDUR_API_TOKEN</span> <span class="o">=</span> <span class="s1">&#39;&lt;CHANGEME&gt;&#39;</span>
<span class="n">CUSTOMER_UUID</span> <span class="o">=</span> <span class="s1">&#39;&lt;CHANGEME&gt;&#39;</span>

<span class="n">CORES_LIMIT</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">RAM_GB_LIMIT</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">STORAGE_GB_LIMIT</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">TENANT_LIMITS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cores&#39;</span><span class="p">:</span> <span class="n">CORES_LIMIT</span><span class="p">,</span>
    <span class="s1">&#39;ram&#39;</span><span class="p">:</span> <span class="n">RAM_GB_LIMIT</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span>
    <span class="s1">&#39;storage&#39;</span><span class="p">:</span> <span class="n">STORAGE_GB_LIMIT</span> <span class="o">*</span> <span class="mi">1024</span>
<span class="p">}</span>

<span class="kn">from</span> <span class="nn">waldur_client</span> <span class="kn">import</span> <span class="n">WaldurClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">WaldurClient</span><span class="p">(</span><span class="n">WALDUR_API_URL</span><span class="p">,</span> <span class="n">WALDUR_API_TOKEN</span><span class="p">)</span>
<span class="n">tenants</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_tenants</span><span class="p">({</span><span class="s1">&#39;customer_uuid&#39;</span><span class="p">:</span> <span class="n">CUSTOMER_UUID</span><span class="p">})</span>

<span class="k">for</span> <span class="n">tenant</span> <span class="ow">in</span> <span class="n">tenants</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">marketplace_resource_update_limits_order</span><span class="p">(</span>
        <span class="n">resource_uuid</span><span class="o">=</span><span class="n">tenant</span><span class="p">[</span><span class="s1">&#39;marketplace_resource_uuid&#39;</span><span class="p">],</span>
        <span class="n">limits</span><span class="o">=</span><span class="n">TENANT_LIMITS</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-generate-cost-report-for-a-specific-organization-by-month">Generate cost report for a specific organization by month</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="kn">from</span> <span class="nn">waldur_core.structure</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">structure_models</span>
<span class="kn">from</span> <span class="nn">waldur_mastermind.invoices</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">invoice_models</span>

<span class="n">customer</span> <span class="o">=</span> <span class="n">structure_models</span><span class="o">.</span><span class="n">Customer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">abbreviation</span><span class="o">=</span><span class="s1">&#39;Ada&#39;</span><span class="p">)</span>
<span class="n">invoices</span> <span class="o">=</span> <span class="n">invoice_models</span><span class="o">.</span><span class="n">Invoice</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">customer</span><span class="o">=</span><span class="n">customer</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">)</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="k">for</span> <span class="n">invoice</span> <span class="ow">in</span> <span class="n">invoices</span><span class="p">:</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="n">invoice</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
            <span class="n">invoice</span><span class="o">.</span><span class="n">month</span><span class="p">,</span>
            <span class="n">invoice</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="n">invoice</span><span class="o">.</span><span class="n">price</span><span class="p">,</span>
            <span class="n">invoice</span><span class="o">.</span><span class="n">tax</span><span class="p">,</span>
            <span class="n">invoice</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-generate-a-report-for-vms-created-within-a-specific-tenant-offering">Generate a report for VMs created within a specific tenant offering</h3>
<p>Upon running the script, please change <code>year</code> and <code>offering_uuid</code> variables.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_mastermind.marketplace</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">mm</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>
<span class="kn">from</span> <span class="nn">waldur_openstack.openstack_tenant</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">otm</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="n">year</span> <span class="o">=</span> <span class="mi">2024</span>
<span class="n">offering_uuid</span> <span class="o">=</span> <span class="s2">&quot;changeme&quot;</span>

<span class="n">tenant_offering</span> <span class="o">=</span> <span class="n">mm</span><span class="o">.</span><span class="n">Offering</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">offering_uuid</span><span class="p">)</span>

<span class="n">vm_orders</span> <span class="o">=</span> <span class="n">mm</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="n">offering__parent</span><span class="o">=</span><span class="n">tenant_offering</span><span class="p">,</span>
    <span class="n">state</span><span class="o">=</span><span class="n">mm</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">States</span><span class="o">.</span><span class="n">DONE</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="n">mm</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">Types</span><span class="o">.</span><span class="n">CREATE</span><span class="p">,</span>
    <span class="n">resource__created__year</span><span class="o">=</span><span class="n">year</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;created&quot;</span><span class="p">)</span>

<span class="n">report</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">vm_orders</span><span class="p">:</span>
    <span class="n">resource</span> <span class="o">=</span> <span class="n">order</span><span class="o">.</span><span class="n">resource</span>
    <span class="n">flavor_url</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;flavor&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">flavor_url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;flavor_url is missing for order </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">order</span><span class="p">)</span>
        <span class="k">continue</span>

    <span class="n">flavor_parsed_url</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="n">flavor_url</span><span class="p">)</span>
    <span class="n">flavor_url_parts</span> <span class="o">=</span> <span class="n">flavor_parsed_url</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    <span class="n">flavor_uuid</span> <span class="o">=</span> <span class="n">flavor_url_parts</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">flavor</span> <span class="o">=</span> <span class="n">otm</span><span class="o">.</span><span class="n">Flavor</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">flavor_uuid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">flavor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There is no flavor for order </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">order</span><span class="p">)</span>
        <span class="k">continue</span>

    <span class="n">system_volume_size</span> <span class="o">=</span> <span class="n">order</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;system_volume_size&quot;</span><span class="p">]</span>
    <span class="n">data_volume_size</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data_volume_size&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">vm_terminated</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">resource</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">mm</span><span class="o">.</span><span class="n">Resource</span><span class="o">.</span><span class="n">States</span><span class="o">.</span><span class="n">TERMINATED</span><span class="p">:</span>
        <span class="n">termination_order</span> <span class="o">=</span> <span class="n">mm</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">resource</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="n">mm</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">States</span><span class="o">.</span><span class="n">DONE</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">mm</span><span class="o">.</span><span class="n">Order</span><span class="o">.</span><span class="n">Types</span><span class="o">.</span><span class="n">TERMINATE</span>
        <span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">termination_order</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Termination order for resource </span><span class="si">%s</span><span class="s2"> does not exist&quot;</span> <span class="o">%</span> <span class="n">resource</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vm_terminated</span> <span class="o">=</span> <span class="n">termination_order</span><span class="o">.</span><span class="n">consumer_reviewed_at</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>

    <span class="n">report</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;vm_name&quot;</span><span class="p">:</span> <span class="n">resource</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;vm_created&quot;</span><span class="p">:</span> <span class="n">resource</span><span class="o">.</span><span class="n">created</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="s2">&quot;vm_terminated&quot;</span><span class="p">:</span> <span class="n">vm_terminated</span><span class="p">,</span>
            <span class="s2">&quot;project_name&quot;</span><span class="p">:</span> <span class="n">resource</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;flavor_name&quot;</span><span class="p">:</span> <span class="n">flavor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;flavor_cores&quot;</span><span class="p">:</span> <span class="n">flavor</span><span class="o">.</span><span class="n">cores</span><span class="p">,</span>
            <span class="s2">&quot;flavor_ram&quot;</span><span class="p">:</span> <span class="n">flavor</span><span class="o">.</span><span class="n">ram</span><span class="p">,</span>
            <span class="s2">&quot;flavor_disk&quot;</span><span class="p">:</span> <span class="n">flavor</span><span class="o">.</span><span class="n">disk</span><span class="p">,</span>
            <span class="s2">&quot;system_volume_size&quot;</span><span class="p">:</span> <span class="n">system_volume_size</span><span class="p">,</span>
            <span class="s2">&quot;data_volume_size&quot;</span><span class="p">:</span> <span class="n">data_volume_size</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>

<span class="n">report_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;vm-report-</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">.csv&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">report_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;vm_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;vm_created&quot;</span><span class="p">,</span>
        <span class="s2">&quot;vm_terminated&quot;</span><span class="p">,</span>
        <span class="s2">&quot;project_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;flavor_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;flavor_cores&quot;</span><span class="p">,</span>
        <span class="s2">&quot;flavor_ram&quot;</span><span class="p">,</span>
        <span class="s2">&quot;flavor_disk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;system_volume_size&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data_volume_size&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnames</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-waldur-shell-migrate-users-to-a-new-keycloak-instance">Migrate users to a new Keycloak instance</h3>
<h4 id="admin-guide-waldur-shell-introduction">Introduction</h4>
<p>There are 3 scripts involved:</p>
<ol>
<li>
<p><a href="#admin-guide-waldur-shell-export-keycloak-user-permissions">export-keycloak-user-permissions.py</a>: exports Keycloak user data to a <code>.yaml</code> file in the following format:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">johndoe</span>
<span class="w">  </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">johndoe@example.com</span>
<span class="w">  </span><span class="nt">full_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">John Doe</span>
<span class="w">  </span><span class="nt">permissions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">project</span>
<span class="w">      </span><span class="nt">project_uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bed45d99e83d4c17a5bf5908ad70554e</span>
<span class="w">      </span><span class="nt">role_uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">e4130fde02474571a5166bb6742dc2d0</span>
<span class="w">      </span><span class="nt">project_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Project</span><span class="nv"> </span><span class="s">01&quot;</span>
<span class="w">      </span><span class="nt">role_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PROJECT.MANAGER&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">customer</span>
<span class="w">      </span><span class="nt">customer_uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1aaec6489ea7492cbe0401997de13653</span>
<span class="w">      </span><span class="nt">role_uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16ec8cf8874d467d9a2c7a0c822c6b3e</span>
<span class="w">      </span><span class="nt">customer_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Organization</span><span class="nv"> </span><span class="s">01&quot;</span>
<span class="w">      </span><span class="nt">role_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CUSTOMER.OWNER&quot;</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p><a href="#admin-guide-waldur-shell-delete-keycloak-users">delete-keycloak-users.py</a>: removes data about all the users from an old Keycloak instance</p>
</li>
<li>
<p><a href="#admin-guide-waldur-shell-invite-keycloak-users">invite-keycloak-users.py</a>: creates and sends invitations to the user emails based on their roles in project and organizations</p>
</li>
</ol>
<p>When you are ready to migrate users to the new Keyaloak instance:</p>
<ol>
<li>copy the script file to the <code>waldur-mastermind-api</code> container using <code>docker cp</code> or <code>kubectl cp</code> commands;</li>
<li>connect to the container shell using <code>docker exec</code> or <code>kubectl exec</code>;</li>
<li>execute the scripts sequentially using <code>waldur shell</code>:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>root@waldur-mastermind-api$<span class="w"> </span>waldur<span class="w"> </span>shell<span class="w"> </span>&lt;<span class="w"> </span>export-keycloak-user-permissions.py
root@waldur-mastermind-api$<span class="w"> </span>waldur<span class="w"> </span>shell<span class="w"> </span>&lt;<span class="w"> </span>delete-keycloak-users.py
root@waldur-mastermind-api$<span class="w"> </span>waldur<span class="w"> </span>shell<span class="w"> </span>&lt;<span class="w"> </span>invite-keycloak-users.py
</code></pre></div></td></tr></table></div>
<h4 id="admin-guide-waldur-shell-export-keycloak-user-permissions">export-keycloak-user-permissions</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.core</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">core_models</span>
<span class="kn">from</span> <span class="nn">waldur_core.structure</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">structure_models</span>
<span class="kn">from</span> <span class="nn">waldur_core.permissions.models</span> <span class="kn">import</span> <span class="n">UserRole</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.models</span> <span class="kn">import</span> <span class="n">ContentType</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="n">users</span> <span class="o">=</span> <span class="n">core_models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_active</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">registration_method</span><span class="o">=</span><span class="s2">&quot;keycloak&quot;</span><span class="p">)</span>

<span class="n">project_content_type</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">structure_models</span><span class="o">.</span><span class="n">Project</span><span class="p">)</span>
<span class="n">customer_content_type</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">structure_models</span><span class="o">.</span><span class="n">Customer</span><span class="p">)</span>
<span class="n">roles</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span>
    <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
        <span class="s2">&quot;full_name&quot;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">get_full_name</span><span class="p">(),</span>
        <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="p">}</span>
    <span class="n">perms</span> <span class="o">=</span> <span class="n">UserRole</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">is_active</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">permission</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">permission</span><span class="o">.</span><span class="n">content_type</span> <span class="o">==</span> <span class="n">project_content_type</span><span class="p">:</span>
            <span class="n">project</span> <span class="o">=</span> <span class="n">permission</span><span class="o">.</span><span class="n">scope</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;permissions&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;project&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;project_uuid&quot;</span><span class="p">:</span> <span class="n">project</span><span class="o">.</span><span class="n">uuid</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span>
                    <span class="s2">&quot;role_uuid&quot;</span><span class="p">:</span> <span class="n">permission</span><span class="o">.</span><span class="n">role</span><span class="o">.</span><span class="n">uuid</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span>
                    <span class="s2">&quot;project_name&quot;</span><span class="p">:</span> <span class="n">project</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;role_name&quot;</span><span class="p">:</span> <span class="n">permission</span><span class="o">.</span><span class="n">role</span><span class="o">.</span><span class="n">name</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">permission</span><span class="o">.</span><span class="n">content_type</span> <span class="o">==</span> <span class="n">customer_content_type</span><span class="p">:</span>
            <span class="n">customer</span> <span class="o">=</span> <span class="n">permission</span><span class="o">.</span><span class="n">scope</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;permissions&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;customer&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;customer_uuid&quot;</span><span class="p">:</span> <span class="n">customer</span><span class="o">.</span><span class="n">uuid</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span>
                    <span class="s2">&quot;role_uuid&quot;</span><span class="p">:</span> <span class="n">permission</span><span class="o">.</span><span class="n">role</span><span class="o">.</span><span class="n">uuid</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span>
                    <span class="s2">&quot;customer_name&quot;</span><span class="p">:</span> <span class="n">customer</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;role_name&quot;</span><span class="p">:</span> <span class="n">permission</span><span class="o">.</span><span class="n">role</span><span class="o">.</span><span class="n">name</span>
                <span class="p">}</span>
            <span class="p">)</span>

    <span class="n">roles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;roles.yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">output</span><span class="p">:</span>
    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">roles</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h4 id="admin-guide-waldur-shell-delete-keycloak-users">delete-keycloak-users</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.core</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">core_models</span>

<span class="n">users</span> <span class="o">=</span> <span class="n">core_models</span><span class="o">.</span><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_active</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">registration_method</span><span class="o">=</span><span class="s2">&quot;keycloak&quot;</span><span class="p">)</span>
<span class="n">users</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h4 id="admin-guide-waldur-shell-invite-keycloak-users">invite-keycloak-users</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.structure</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">structure_models</span>
<span class="kn">from</span> <span class="nn">waldur_core.permissions</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">permission_models</span>
<span class="kn">from</span> <span class="nn">waldur_core.users</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">user_models</span>
<span class="kn">from</span> <span class="nn">waldur_core.core.utils</span> <span class="kn">import</span> <span class="n">get_system_robot</span>
<span class="kn">from</span> <span class="nn">waldur_core.users</span> <span class="kn">import</span> <span class="n">tasks</span> <span class="k">as</span> <span class="n">user_tasks</span>
<span class="kn">import</span> <span class="nn">yaml</span>

<span class="n">system_robot</span> <span class="o">=</span> <span class="n">get_system_robot</span><span class="p">()</span>

<span class="n">user_roles</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;roles.yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">roles_file</span><span class="p">:</span>
    <span class="n">user_roles</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">roles_file</span><span class="p">)</span>

<span class="k">for</span> <span class="n">user_role</span> <span class="ow">in</span> <span class="n">user_roles</span><span class="p">:</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">user_role</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span>
    <span class="n">full_name</span> <span class="o">=</span> <span class="n">user_role</span><span class="p">[</span><span class="s2">&quot;full_name&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">user_role</span><span class="p">[</span><span class="s2">&quot;permissions&quot;</span><span class="p">]:</span>
        <span class="n">role_name</span> <span class="o">=</span> <span class="n">permission_models</span><span class="o">.</span><span class="n">Role</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">perm</span><span class="p">[</span><span class="s2">&quot;role_uuid&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">name</span>
        <span class="n">role_name_suffix</span> <span class="o">=</span> <span class="n">role_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">perm</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;project&quot;</span><span class="p">:</span>
            <span class="n">project</span> <span class="o">=</span> <span class="n">structure_models</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">perm</span><span class="p">[</span><span class="s2">&quot;project_uuid&quot;</span><span class="p">])</span>

            <span class="n">invitation</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">user_models</span><span class="o">.</span><span class="n">Invitation</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
                <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
                <span class="n">full_name</span><span class="o">=</span><span class="n">full_name</span><span class="p">,</span>
                <span class="n">customer</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">customer</span><span class="p">,</span>
                <span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span>
                <span class="n">project_role</span><span class="o">=</span><span class="n">role_name_suffix</span><span class="p">,</span>
                <span class="n">created_by</span><span class="o">=</span><span class="n">system_robot</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Inviting user </span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2">) to project </span><span class="si">{</span><span class="n">project</span><span class="si">}</span><span class="s2"> as </span><span class="si">{</span><span class="n">role_name_suffix</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">user_tasks</span><span class="o">.</span><span class="n">send_invitation_created</span><span class="p">(</span>
                <span class="n">invitation</span><span class="o">.</span><span class="n">uuid</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span> <span class="n">system_robot</span><span class="o">.</span><span class="n">full_name</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">perm</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;customer&quot;</span><span class="p">:</span>
            <span class="n">customer</span> <span class="o">=</span> <span class="n">structure_models</span><span class="o">.</span><span class="n">Customer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="n">perm</span><span class="p">[</span><span class="s2">&quot;customer_uuid&quot;</span><span class="p">])</span>

            <span class="n">invitation</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">user_models</span><span class="o">.</span><span class="n">Invitation</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
                <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
                <span class="n">full_name</span><span class="o">=</span><span class="n">full_name</span><span class="p">,</span>
                <span class="n">customer</span><span class="o">=</span><span class="n">customer</span><span class="p">,</span>
                <span class="n">customer_role</span><span class="o">=</span><span class="n">role_name_suffix</span><span class="p">,</span>
                <span class="n">created_by</span><span class="o">=</span><span class="n">system_robot</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Inviting user </span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2">) to customer </span><span class="si">{</span><span class="n">customer</span><span class="si">}</span><span class="s2"> as </span><span class="si">{</span><span class="n">role_name_suffix</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">user_tasks</span><span class="o">.</span><span class="n">send_invitation_created</span><span class="p">(</span>
                <span class="n">invitation</span><span class="o">.</span><span class="n">uuid</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span> <span class="n">system_robot</span><span class="o">.</span><span class="n">full_name</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-whitelabeling"><h1 id="admin-guide-whitelabeling-white-labeling-instructions">White-labeling instructions</h1>
<p>To change white-labeling settings on the fly, you can perform following steps:</p>
<ul>
<li>
<p>Go to admin panel (e.g. <code>http://localhost:8080/admin/</code>)</p>
</li>
<li>
<p>Open Templates: <code>Utilities</code> -&gt; <code>Constance</code> -&gt; <code>Config</code></p>
</li>
</ul>
<p><a class="glightbox" href="../assets/constance_config.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img.png" src="../assets/constance_config.png" /></a></p>
<p>You will see a list of white-labeling settings available to be changed.</p>
<p>You can change them as you wish to, or you can reset them to default values.</p>
<p><a class="glightbox" href="../assets/constance_settings.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img.png" src="../assets/constance_settings.png" /></a></p>
<p>Save the changes and you are good to go.</p></section>
                        <h2 class='nav-section-title' id='section-deployment'>
                            Deployment <a class='headerlink' href='#section-deployment' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="admin-guide-deployment-docker-compose"><h1 id="admin-guide-deployment-docker-compose-waldur-docker-compose-deployment">Waldur Docker-compose deployment</h1>
<h2 id="admin-guide-deployment-docker-compose-prerequisites">Prerequisites</h2>
<ul>
<li>at least 8GB RAM on Docker Host to run all containers</li>
<li>Docker v1.13+</li>
</ul>
<h2 id="admin-guide-deployment-docker-compose-prepare-environment">Prepare environment</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># clone repo</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/waldur/waldur-docker-compose.git
<span class="nb">cd</span><span class="w"> </span>waldur-docker-compose
<span class="c1"># setup settings</span>
cp<span class="w"> </span>.env.example<span class="w"> </span>.env
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-docker-compose-booting-up">Booting up</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># start containers</span>
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1"># verify</span>
docker<span class="w"> </span>compose<span class="w"> </span>ps
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-t<span class="w"> </span>waldur-mastermind-worker<span class="w"> </span>status

<span class="c1"># Create user</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-t<span class="w"> </span>waldur-mastermind-worker<span class="w"> </span>waldur<span class="w"> </span>createstaffuser<span class="w"> </span>-u<span class="w"> </span>admin<span class="w"> </span>-p<span class="w"> </span>password<span class="w"> </span>-e<span class="w"> </span>admin@example.com

<span class="c1"># Create demo categories for OpenStack: Virtual Private Cloud, VMs and Storage</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-t<span class="w"> </span>waldur-mastermind-worker<span class="w"> </span>waldur<span class="w"> </span>load_categories<span class="w"> </span>vpc<span class="w"> </span>vm<span class="w"> </span>storage
</code></pre></div></td></tr></table></div>
<p>Waldur HomePort will be accessible on <a href="https://localhost">https://localhost</a>.
API will listen on <a href="https://localhost/api">https://localhost/api</a>.</p>
<p>Healthcheck can be accessed on <a href="https://localhost/health-check">https://localhost/health-check</a>.</p>
<p>Tearing down and cleaning up:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>down
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-docker-compose-logs">Logs</h2>
<p>Logs emitted by the containers are collected and saved in the <code>waldur_logs</code> folder. You can change the location by
editing environment variable (<code>.env</code>) and updating <code>LOG_FOLDER</code> value.</p>
<h2 id="admin-guide-deployment-docker-compose-known-issues">Known issues</h2>
<p>When Waldur is launched for the first time, it applies initial database migrations.
It means that you may need to wait few minutes until these migrations are applied.
Otherwise you may observe HTTP error 500 rendered by REST API server.
This issue would be resolved after upgrade to <a href="https://docs.docker.com/compose/release-notes/#1290">Docker Compose 1.29</a>.</p>
<p>To use a custom script offering type, it should be possible to connect to <code>/var/run/docker.sock</code> from
within the Waldur containers. If you are getting a permission denied error in logs, try setting more
open permissions, for example, <code>chmod 666 /var/run/docker.sock</code>. Note that this is not a secure
setup, so make sure you understand what you are doing.</p>
<h2 id="admin-guide-deployment-docker-compose-upgrading-waldur">Upgrading Waldur</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>pull
docker<span class="w"> </span>compose<span class="w"> </span>restart
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-docker-compose-using-tls">Using TLS</h2>
<p>This setup supports following types of SSL certificates:</p>
<ul>
<li>Email - set environment variable TLS to your email to register Let's Encrypt account and get free automatic SSL certificates.</li>
</ul>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">TLS</span><span class="o">=</span>my@email.com
</code></pre></div></td></tr></table></div>
<ul>
<li>Internal - set environment variable TLS to "internal" to generate self-signed certificates for dev environments</li>
</ul>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">TLS</span><span class="o">=</span>internal
</code></pre></div></td></tr></table></div>
<ul>
<li>Custom - set environment variable TLS to "cert.pem key.pem" where cert.pem and key.pem - are paths to your custom certificates (this needs modifying docker-compose with path to your certificates passed as volumes)</li>
</ul>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">TLS</span><span class="o">=</span>cert.pem<span class="w"> </span>key.pem
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-docker-compose-custom-caddy-configuration-files">Custom Caddy configuration files</h2>
<p>To add additional caddy config snippets into the caddy virtual host configuration add .conf files to config/caddy-includes/</p>
<h2 id="admin-guide-deployment-docker-compose-keycloak">Keycloak</h2>
<p>Keycloak is an Identity and Access Management software bundled with waldur-docker-compose.</p>
<p>To create a keycloak admin account set <code>KEYCLOAK_ADMIN</code> env variable in <code>docker-compose.yaml</code> and <code>KEYCLOAK_ADMIN_PASSWORD</code> in <code>.env</code> file.</p>
<p>After this, you can login to the admin interface at <a href="https://localhost/auth/admin">https://localhost/auth/admin</a> and create Waldur users.</p>
<p>To use Keycloak as an identity provider within Waldur, follow the instruction <a href="https://docs.waldur.com/admin-guide/identities/keycloak/">here</a>.
The discovery url to connect to Keycloak from the waldur-mastermind-api container is:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>http://keycloak:8080/auth/realms/&lt;YOUR<span class="w"> </span>REALM&gt;/.well-known/openid-configuration
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-docker-compose-integration-with-slurm">Integration with SLURM</h2>
<p>The integration is described <a href="https://docs.waldur.com/admin-guide/providers/remote-slurm/">here</a>.</p>
<h3 id="admin-guide-deployment-docker-compose-whitelabeling-settings">Whitelabeling settings</h3>
<p>To set up whitelabeling, you need to define settings in <code>./config/waldur-mastermind/whitelabeling.yaml</code>.
You can see the list of all whitelabeling options below.</p>
<h4 id="admin-guide-deployment-docker-compose-general-whitelabeling-settings">General whitelabeling settings</h4>
<ul>
<li>site_name</li>
<li>site_address</li>
<li>site_email</li>
<li>site_phone</li>
<li>short_page_title</li>
<li>full_page_title</li>
<li>brand_color</li>
<li>brand_label_color</li>
<li>hero_link_label</li>
<li>hero_link_url</li>
<li>site_description</li>
<li>currency_name</li>
<li>docs_url</li>
<li>support_portal_url</li>
</ul>
<h4 id="admin-guide-deployment-docker-compose-logos-and-images-of-whitelabeling">Logos and images of whitelabeling</h4>
<p>The path to a logo is constructed like so:
/etc/waldur/icons - is a path in the container (Keep it like it is) + the name of the logo file from config/whitelabeling directory.</p>
<p>All-together /etc/waldur/icons/file_name_from_whitelabeling_directory</p>
<ul>
<li>powered_by_logo</li>
<li>hero_image</li>
<li>sidebar_logo</li>
<li>sidebar_logo_mobile</li>
<li>site_logo</li>
<li>login_logo</li>
<li>favicon</li>
</ul></section>
                        <h3 class='nav-section-title' id='section-argocd'>
                            Argocd <a class='headerlink' href='#section-argocd' title='Permanent link'>↵</a>
                        </h3>
                        <section class="print-page" id="admin-guide-deployment-argocd-argocd"><h1 id="admin-guide-deployment-argocd-argocd-waldur-deployment-in-argocd">Waldur deployment in ArgoCD</h1>
<p><a href="https://github.com/waldur/csl-poc">This repository</a> contains ansible playbook settings for infrastructure setup (<code>ansible/</code> directory)
together with Kubernetes manifest files for different applications managed by ArgoCD (<code>applications/</code> directory).</p>
<h2 id="admin-guide-deployment-argocd-argocd-infrastructure-setup">Infrastructure setup</h2>
<p>Before beginning with application management, infrastructure setup is required.
For this, you should use the playbook <a href="https://github.com/waldur/csl-poc/blob/main/ansible/cloud-infrastructure-setup.yaml">ansible/cloud-infrastructure-setup.yaml</a>.
Given an access to virtual machines with python3.8+ installed, it is capable of:</p>
<ol>
<li>Disk setup in case if each virtual machine has a separate disk attached as a device;</li>
<li>Installation of <a href="https://docs.rke2.io/">RKE2-managed Kubernetes cluster</a> with a single server and workers;</li>
<li>Installation of <a href="https://helm.sh/">Helm tool binary</a>;</li>
<li>Installation of ArgoCD: both Kubernetes manifests and command-line binary.</li>
</ol>
<p>All these steps can be customized via either <a href="https://github.com/waldur/csl-poc/blob/main/ansible/vars.defaults">ansible/vars.defaults</a> or <code>ansible/vars.custom</code> file.</p>
<p>The example infra has 3 VMs with <code>python3.9</code> installed.
After establishing ssh-based connection to the machines, you can execute the playbook:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ansible-playbook<span class="w"> </span>-i<span class="w"> </span>hosts<span class="w"> </span>-D<span class="w"> </span>cloud-infrastructure-setup.yaml
</code></pre></div></td></tr></table></div>
<p>After successful run, the infra is ready for further steps.</p>
<h2 id="admin-guide-deployment-argocd-argocd-installation-and-management-of-applications">Installation and management of applications</h2>
<p>You should run all the command described below on the RKE2 server, where ArgoCD binary installed, only.</p>
<h3 id="admin-guide-deployment-argocd-argocd-prerequisite">Prerequisite</h3>
<p>The following lines ensure user login to ArgoCD server via <code>argocd</code> binary.
They should run prior to every application-related action.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">ARGOCD_SERVER_IP</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>service<span class="w"> </span>argocd-server<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">={</span>.spec.clusterIP<span class="o">}</span><span class="k">)</span>
<span class="nv">ARGOCD_ADMIN_PASSWORD</span><span class="o">=</span><span class="k">$(</span>argocd<span class="w"> </span>admin<span class="w"> </span>initial-password<span class="w"> </span>-n<span class="w"> </span>argocd<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n1<span class="k">)</span>
argocd<span class="w"> </span>login<span class="w"> </span><span class="nv">$ARGOCD_SERVER_IP</span>:80<span class="w"> </span>--username<span class="w"> </span>admin<span class="w"> </span>--password<span class="w"> </span><span class="nv">$ARGOCD_ADMIN_PASSWORD</span><span class="w"> </span>--name<span class="w"> </span>default
</code></pre></div></td></tr></table></div>
<p>You can validate authentication and access:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>argocd<span class="w"> </span>account<span class="w"> </span>get-user-info
argocd<span class="w"> </span>app<span class="w"> </span>list
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-deployment-argocd-argocd-longhorn">Longhorn</h3>
<p>You can use <a href="https://github.com/waldur/csl-poc/blob/main/applications/longhorn/application.yaml">this app manifest</a> and
<a href="https://github.com/waldur/csl-poc/blob/main/applications/longhorn/values-custom.yaml">this custom values file</a> for Longhorn installation.</p>
<p>This script creates a new Kubernetes namespace, where application is created synched:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>longhorn-system
argocd<span class="w"> </span>app<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>applications/longhorn/application.yaml
argocd<span class="w"> </span>app<span class="w"> </span>sync<span class="w"> </span>argocd/longhorn
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-deployment-argocd-argocd-postgresql-operator">PostgreSQL operator</h3>
<p>You can use <a href="https://github.com/waldur/csl-poc/blob/main/applications/postgresql-operator/application.yaml">this app manifest</a> and
<a href="https://github.com/waldur/csl-poc/blob/main/applications/postgresql-operator/values-custom.yaml">this custom values file</a> for PostgreSQL operator installation.</p>
<p>This script creates a new Kubernetes namespace, where application is created synched:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>postgres-operator-system
argocd<span class="w"> </span>app<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>applications/postgresql-operator/application.yaml
argocd<span class="w"> </span>app<span class="w"> </span>sync<span class="w"> </span>argocd/postgres-operator
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-deployment-argocd-argocd-waldur">Waldur</h3>
<p>Waldur requires PostgreSQL database as a persistent storage and RabbitMQ as a message queue to be up and running.</p>
<p>Firstly, you need to create a namespace for Waldur:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>waldur
</code></pre></div></td></tr></table></div>
<p>Secondly, create and sync PostgreSQL application managed by the operator installed before.
You can use <a href="https://github.com/waldur/csl-poc/blob/main/applications/waldur-postgresql/application.yaml">this manifest</a> for ArgoCD app and <a href="https://github.com/waldur/csl-poc/blob/main/applications/waldur-postgresql/manifests/waldur-postgresql.yaml">this manifest</a> for modification of the DB settings.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>argocd<span class="w"> </span>app<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>applications/waldur-postgresql/application.yaml
argocd<span class="w"> </span>app<span class="w"> </span>sync<span class="w"> </span>argocd/waldur-postgresql
</code></pre></div></td></tr></table></div>
<p>Finally, you can deploy Waldur using <a href="https://github.com/waldur/csl-poc/blob/main/applications/waldur/application.yaml">this app manifest</a> and <a href="https://github.com/waldur/csl-poc/blob/main/applications/waldur/values-custom.yaml">these values</a>. <strong>NB</strong>: RabbitMQ is included in the deployment.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>argocd<span class="w"> </span>app<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>applications/waldur/application.yaml
argocd<span class="w"> </span>app<span class="w"> </span>sync<span class="w"> </span>argocd/waldur
</code></pre></div></td></tr></table></div></section><h1 class='nav-section-title-end'>Ended: Argocd</h1>
                        <h3 class='nav-section-title' id='section-helm'>
                            Helm <a class='headerlink' href='#section-helm' title='Permanent link'>↵</a>
                        </h3>
                        <section class="print-page" id="admin-guide-deployment-helm"><h1 id="admin-guide-deployment-helm-waldur-helm">Waldur Helm</h1>
<p>Waldur is a platform for creating hybrid cloud solutions.
It allows building enterprise-grade systems and
providing self-service environment for the end-users.</p>
<h2 id="admin-guide-deployment-helm-introduction">Introduction</h2>
<p>This chart bootstraps a <a href="https://waldur.com/">Waldur</a> deployment
on a Kubernetes cluster using the <a href="https://helm.sh">Helm</a> package manager.</p>
<h2 id="admin-guide-deployment-helm-installing-prerequisites">Installing prerequisites</h2>
<ol>
<li>Install Kubernetes server, for example, using <a href="#admin-guide-deployment-helm-docs-minikube">minikube</a></li>
<li>Install Kubernetes client, i.e. <a href="#admin-guide-deployment-helm-docs-kubectl">kubectl</a></li>
<li>Install <a href="#admin-guide-deployment-helm-docs-helm">Helm</a></li>
</ol>
<h2 id="admin-guide-deployment-helm-installing-the-chart">Installing the chart</h2>
<ol>
<li>Clone <a href="https://github.com/waldur/waldur-helm">waldur-helm repository</a></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/waldur/waldur-helm.git
<span class="w">  </span><span class="nb">cd</span><span class="w"> </span>waldur-helm
</code></pre></div></td></tr></table></div>
<ol>
<li>Add the stable repository</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>stable<span class="w"> </span>https://charts.helm.sh/stable
</code></pre></div></td></tr></table></div>
<ol>
<li>
<p>Setup database:
    3.1 Setup single PostgreSQL DB: <a href="#admin-guide-deployment-helm-docs-postgres-db">instructions</a> or
    3.2 Setup PostgreSQL HA DB: <a href="#admin-guide-deployment-helm-docs-postgres-db-ha">instructions</a> or
    3.3 Integrate with external DB: <a href="#admin-guide-deployment-helm-docs-external-db-integration">instructions</a></p>
<p><strong>NB</strong> Only one of these two options should be used. Otherwise, DB will be unavailable.</p>
</li>
<li>
<p>Install minio (for database backups): <a href="#admin-guide-deployment-helm-docs-minio">instructions</a></p>
</li>
<li>Install RabbitMQ for task queue: <a href="#admin-guide-deployment-helm-docs-rabbitmq">instructions</a></li>
<li>Install Helm package:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>waldur<span class="w"> </span>waldur
</code></pre></div></td></tr></table></div>
<p><strong>NB</strong> After this command, Waldur release will run in <code>default</code> namespace.
Please, pay attention in which namespace which release is running.</p>
<p>For instance, you can install Waldur release
in <code>test</code> namespace in the following way:</p>
<ol>
<li>Create <code>test</code> namespace:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span><span class="nb">test</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Install release:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>waldur<span class="w"> </span>waldur<span class="w"> </span>--namespace<span class="w"> </span><span class="nb">test</span>
</code></pre></div></td></tr></table></div>
<p>However, postgresql release and waldur should be installed
in the same namespace in order to share a common secret with DB credentials.</p>
<h2 id="admin-guide-deployment-helm-adding-admin-user">Adding admin user</h2>
<p>Open waldur-mastermind-worker shell and execute the following command:</p>
<ol>
<li>Get waldur-mastermind-worker pod name</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="c1"># Example:</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>waldur-mastermind-worker<span class="w"> </span><span class="c1"># --&gt;</span>
<span class="w">  </span><span class="c1"># default waldur-mastermind-worker-6d98cd98bd-wps8n 1/1 Running 0 9m9s</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Connect to pod via shell</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="c1"># Example:</span>
<span class="w">  </span>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>waldur-mastermind-worker-6d98cd98bd-wps8n<span class="w"> </span>--<span class="w"> </span>/bin/bash
</code></pre></div></td></tr></table></div>
<ol>
<li>Execute command to add admin user</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>waldur<span class="w"> </span>createstaffuser<span class="w"> </span>-u<span class="w"> </span>user<span class="w"> </span>-p<span class="w"> </span>password<span class="w"> </span>-e<span class="w"> </span>admin@example.com
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-helm-waldur-helm-chart-release-upgrading">Waldur Helm chart release upgrading</h2>
<p>Delete initdb job (if exists):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>delete<span class="w"> </span>job<span class="w"> </span>waldur-mastermind-initdb-job<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
</code></pre></div></td></tr></table></div>
<p>Delete load features job (if exists):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>delete<span class="w"> </span>job<span class="w"> </span>load-features-job<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
</code></pre></div></td></tr></table></div>
<p>Upgrade Waldur dependencies and release:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>dep<span class="w"> </span>update<span class="w"> </span>waldur/
<span class="w">  </span>helm<span class="w"> </span>upgrade<span class="w"> </span>waldur<span class="w"> </span>waldur/
</code></pre></div></td></tr></table></div>
<p>Restart deployments to apply configmaps changes:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>waldur-mastermind-beat
<span class="w">  </span>kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>waldur-mastermind-api
<span class="w">  </span>kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>waldur-mastermind-worker
<span class="w">  </span>kubectl<span class="w"> </span>rollout<span class="w"> </span>restart<span class="w"> </span>deployment<span class="w"> </span>waldur-homeport
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-helm-private-registry-setup">Private registry setup</h2>
<p>A user can use private registry for Docker images.
For this, the corresponding credentials should be registered in a secret,
name of which should be placed in <code>.Values.imagePullSecrets</code>.
A secret can be created trough <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#create-a-secret-by-providing-credentials-on-the-command-line">CLI</a>.</p>
<h2 id="admin-guide-deployment-helm-configuration-docs">Configuration docs</h2>
<p>Configuration documentation: <a href="#admin-guide-deployment-helm-docs">index</a></p></section>
                        <h4 class='nav-section-title' id='section-docs'>
                            Docs <a class='headerlink' href='#section-docs' title='Permanent link'>↵</a>
                        </h4>
                        <section class="print-page" id="admin-guide-deployment-helm-docs"><h1 id="admin-guide-deployment-helm-docs-waldur-helm-chart-configuration">Waldur Helm chart configuration</h1>
<p>Outline:</p>
<ul>
<li><a href="#admin-guide-deployment-helm-docs-postgres-backup-management">Postgres backup management</a></li>
<li><a href="#admin-guide-deployment-helm-docs-tls-config">TLS</a></li>
<li><a href="#admin-guide-deployment-helm-docs-whitelabeling">White-labeling</a></li>
<li><a href="#admin-guide-deployment-helm-docs-mastermind-templates">Custom Mastermind templates</a></li>
<li><a href="#admin-guide-deployment-helm-docs-bootstrap">Bootstrapping</a></li>
<li><a href="#admin-guide-deployment-helm-docs-saml2">SAML2</a></li>
<li><a href="#admin-guide-deployment-helm-docs-hpa">HPA</a></li>
<li><a href="#admin-guide-deployment-helm-docs-locust">Stress testing</a></li>
<li><a href="#admin-guide-deployment-helm-docs-ip-whitelisting">IP whitelisting</a></li>
<li><a href="#admin-guide-deployment-helm-docs-proxy-setup">Proxy setup</a></li>
<li><a href="#admin-guide-deployment-helm-docs-host-aliasing">Host aliasing</a></li>
</ul></section><section class="print-page" id="admin-guide-deployment-helm-docs-bootstrap"><h1 id="admin-guide-deployment-helm-docs-bootstrap-bootstrap-configuration">Bootstrap configuration</h1>
<p>You can create a bootstrapping script and Helm will run
it right after Waldur release installation.</p>
<p>Example script:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="c1">#!/bin/bash</span>
<span class="w">  </span><span class="nb">set</span><span class="w"> </span>-e

<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[+] Creating staff user&quot;</span>
<span class="w">  </span>waldur<span class="w"> </span>createstaffuser<span class="w"> </span>-u<span class="w"> </span>admin<span class="w"> </span>-p<span class="w"> </span>admin<span class="w"> </span>-e<span class="w"> </span>admin@example.com
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;[+] Done&quot;</span>

<span class="w">  </span><span class="nb">exit</span><span class="w"> </span><span class="m">0</span>
</code></pre></div></td></tr></table></div>
<p>This script with all necessary additional files
should be placed in <code>bootstrap.dir</code> directory.</p>
<p>Additional configuration variables (<code>bootstrap</code> prefix):</p>
<ol>
<li><code>enabled</code> - enable/disable bootstrap</li>
<li><code>script</code> - main script file in <code>bootstrap.dir</code> folder.</li>
<li><code>dir</code> -  directory with all bootstrap files</li>
</ol>
<p>Moreover, that is better to install release with <code>--wait</code> flag:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>waldur<span class="w"> </span>waldur/<span class="w"> </span>--wait<span class="w"> </span>--timeout<span class="w"> </span>10m0s
</code></pre></div></td></tr></table></div>
<p>This allows running migrations job before a bootstrap one.
more info: <a href="https://helm.sh/docs/topics/charts_hooks/">link</a>,
<code>Hooks and the Release Lifecycle</code> section)</p>
<p><strong>NB</strong>:</p>
<ul>
<li>
<p>A script, which contains interaction with a db can fail
  due to not all migrations are applied.
  Automatical reruning of the bootstrap job is normal behaviour in such situations.</p>
</li>
<li>
<p>Hence, the script should be <strong>idempotent</strong>.</p>
</li>
</ul></section><section class="print-page" id="admin-guide-deployment-helm-docs-external-db-integration"><h1 id="admin-guide-deployment-helm-docs-external-db-integration-external-db-integration">External DB integration</h1>
<p>Waldur Helm can use an external PostgreSQL deployed within the same Kubernetes cluster.</p>
<p>For this, you need to set the following variables in <code>values.yaml</code>:</p>
<ol>
<li><code>externalDB.enabled</code> - toggler for integration; requires <code>postgresql.enabled</code> and <code>postgresqlha.enabled</code> to be <code>false</code></li>
<li><code>externalDB.flavor</code> - a type of the DB management system; currently only <code>zalando</code> (<a href="https://postgres-operator.readthedocs.io/en/latest/">Zalando operator</a>) is supported</li>
<li><code>externalDB.secretName</code> - name of the secret with PostgreSQL credentials for Waldur user; should include <code>username</code> and <code>password</code> keys</li>
<li><code>externalDB.serviceName</code> - name of the service linked to PostgreSQL master</li>
</ol>
<p>Zalando-managed PostgreSQL cluster example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;acid.zalan.do/v1&quot;</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">waldur-postgresql-&lt;UNIQUE_SUFFIX_EG_CURRENT_DATE&gt;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">teamId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;waldur&quot;</span>
<span class="w">  </span><span class="nt">volume</span><span class="p">:</span>
<span class="w">    </span><span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20Gi</span>
<span class="w">  </span><span class="nt">numberOfInstances</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">users</span><span class="p">:</span>
<span class="w">    </span><span class="nt">waldur</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">superuser</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">createdb</span>
<span class="w">  </span><span class="nt">databases</span><span class="p">:</span>
<span class="w">    </span><span class="nt">waldur</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">waldur</span>
<span class="w">  </span><span class="nt">postgresql</span><span class="p">:</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;14&quot;</span>
<span class="w">  </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">    </span><span class="nt">requests</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;500m&#39;</span>
<span class="w">      </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500Mi</span>
<span class="w">    </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">      </span><span class="nt">cpu</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1&#39;</span>
<span class="w">      </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2Gi</span>
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-helm-docs-external-db-integration-backup-setup">Backup setup</h2>
<p>Enable backups for a cluster with the following addition to a manifest file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;acid.zalan.do/v1&quot;</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">waldur-postgresql-&lt;UNIQUE_SUFFIX_EG_CURRENT_DATE&gt;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ...</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS_ENDPOINT</span><span class="w"> </span><span class="c1"># S3-like storage endpoint</span>
<span class="w">      </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">        </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URL</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS_ACCESS_KEY_ID</span><span class="w"> </span><span class="c1"># Username for S3-like storage</span>
<span class="w">      </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">        </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">username</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AWS_SECRET_ACCESS_KEY</span><span class="w"> </span><span class="c1"># Password for the storage</span>
<span class="w">      </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">        </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WAL_S3_BUCKET</span><span class="w"> </span><span class="c1"># Bucket name for the storage</span>
<span class="w">      </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">        </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bucket</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">USE_WALG_BACKUP</span><span class="w"> </span><span class="c1"># Enable backups to the storage</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;true&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">USE_WALG_RESTORE</span><span class="w"> </span><span class="c1"># Enable restore for replicas using the storage</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;true&#39;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BACKUP_SCHEDULE</span><span class="w"> </span><span class="c1"># Base backups schedule</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*&quot;</span>
</code></pre></div></td></tr></table></div>
<p>You also need to create a secret file with the credentials for the storage:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># puhuri-core-dev</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;B64_ENCODED_ENDPOINT&quot;</span>
<span class="w">  </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;B64_ENCODED_USERNAME&quot;</span>
<span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;B64_ENCODED_PASSWORD&quot;</span>
<span class="w">  </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;B64_ENCODED_BUCKET&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-deployment-helm-docs-external-db-integration-trigger-a-base-backup-manually">Trigger a base backup manually</h3>
<p>Connect to the leader PSQL pod and execute the following commands:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>su<span class="w"> </span>postgres
envdir<span class="w"> </span><span class="s2">&quot;/run/etc/wal-e.d/env&quot;</span><span class="w"> </span>/scripts/postgres_backup.sh<span class="w"> </span><span class="s2">&quot;/home/postgres/pgdata/pgroot/data&quot;</span>
<span class="c1"># Output:</span>
<span class="c1"># ...</span>
<span class="c1"># INFO: 2023/08/24 10:27:05.159175 Wrote backup with name base_00000009000000010000009C</span>
envdir<span class="w"> </span><span class="s2">&quot;/run/etc/wal-e.d/env&quot;</span><span class="w"> </span>wal-g<span class="w"> </span>backup-list
<span class="c1"># Output:</span>
<span class="c1"># name                          modified             wal_segment_backup_start</span>
<span class="c1"># ...</span>
<span class="c1"># base_00000009000000010000009C 2023-08-24T10:27:05Z 00000009000000010000009C</span>
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-helm-docs-external-db-integration-restore-db-from-backup">Restore DB from backup</h2>
<p>The preferable option is creation a new instance of PostgreSQL cluster cloning data from the original one.</p>
<p>For this, create a manifest with the following content:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;acid.zalan.do/v1&quot;</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">waldur-postgresql-&lt;UNIQUE_SUFFIX_EG_CURRENT_DATE&gt;</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">clone</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cluster</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;waldur-postgresql-&lt;SUFFIX&gt;&quot;</span><span class="w"> </span><span class="c1"># Name of a reference cluster</span>
<span class="w">    </span><span class="nt">timestamp</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2023-08-24T14:23:00+03:00&quot;</span><span class="w"> </span><span class="c1"># Desired db snapshot time</span>
<span class="w">    </span><span class="nt">s3_wal_path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;s3://puhuri-core-dev/spilo/puhuri-core-dev-waldur-postgresql/wal/&quot;</span><span class="w"> </span><span class="c1"># Path to a directory with WALs in S3 bucket</span>
<span class="w">    </span><span class="nt">s3_force_path_style</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span><span class="c1"># Use the path above</span>
<span class="w">    </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CLONE_METHOD</span><span class="w"> </span><span class="c1"># Enable clone</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CLONE_WITH_WALE&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CLONE_AWS_ENDPOINT</span><span class="w"> </span><span class="c1"># S3-like storage endpoint</span>
<span class="w">      </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">        </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">URL</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CLONE_AWS_ACCESS_KEY_ID</span><span class="w"> </span><span class="c1"># Username for S3-like storage</span>
<span class="w">      </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">        </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">username</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CLONE_AWS_SECRET_ACCESS_KEY</span><span class="w"> </span><span class="c1"># Password for the storage</span>
<span class="w">      </span><span class="nt">valueFrom</span><span class="p">:</span>
<span class="w">        </span><span class="nt">secretKeyRef</span><span class="p">:</span>
<span class="w">          </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgres-cluster-backups-minio</span>
</code></pre></div></td></tr></table></div>
<p>Then, apply the manifest to the cluster, change <code>externalDB.{secretName, serviceName}</code> after DB bootstrap and upgrade Waldur release.</p></section><section class="print-page" id="admin-guide-deployment-helm-docs-helm"><h1 id="admin-guide-deployment-helm-docs-helm-official-documentation">Official documentation</h1>
<p>Documentation of installation link: <a href="https://helm.sh/docs/intro/install/#from-script">Helm</a></p>
<h2 id="admin-guide-deployment-helm-docs-helm-installing-helm">Installing Helm</h2>
<ol>
<li>Download and install Helm</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>curl<span class="w"> </span>-fsSL<span class="w"> </span>-o<span class="w"> </span>get_helm.sh<span class="w"> </span>https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3
<span class="w">  </span>chmod<span class="w"> </span><span class="m">700</span><span class="w"> </span>get_helm.sh
<span class="w">  </span>./get_helm.sh
</code></pre></div></td></tr></table></div>
<ol>
<li>Check the version</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>version
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-deployment-helm-docs-host-aliasing"><h1 id="admin-guide-deployment-helm-docs-host-aliasing-host-aliasing">Host aliasing</h1>
<p>You can specify additional hosts for Waldur containers in the same manner as the <code>/etc/hosts</code> file using <a href="https://kubernetes.io/docs/tasks/network/customize-hosts-file-for-pods/">host aliasing</a>. To create aliases, a user needs to modify the <code>hostAliases</code> variable in <code>waldur/values.yaml</code> file. Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">hostAliases</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.2.3.4&quot;</span>
<span class="w">    </span><span class="nt">hostnames</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;my.host.example.com&quot;</span>
</code></pre></div></td></tr></table></div>
<p>This will add a record for <code>my.host.example.com</code> to the <code>/etc/hosts</code> file of all the Waldur containers</p></section><section class="print-page" id="admin-guide-deployment-helm-docs-hpa"><h1 id="admin-guide-deployment-helm-docs-hpa-hpa-setup-and-configuration">HPA setup and configuration</h1>
<p>It is possible to use cpu-utilization-based HPA
for API server (aka waldur-mastermind-api) and
Celery executor (aka <code>waldur-mastermind-worker</code> and <code>waldur-mastermind-beat</code>) pods.</p>
<h2 id="admin-guide-deployment-helm-docs-hpa-setup">Setup</h2>
<p>If you use minikube, you need to enable <code>metrics-server</code> using next command:
<code>minikube addons enable metrics-server</code></p>
<h2 id="admin-guide-deployment-helm-docs-hpa-configuration">Configuration</h2>
<p>In <code>values.yaml</code> file you can configure HPA for:</p>
<ol>
<li>
<p>API server (<code>hpa.api</code> prefix):</p>
<p>1.1 <code>enabled</code> - flag for enabling HPA.
    Possible values: <code>true</code> for enabling and <code>false</code> for disabling.</p>
<p>1.2 <code>resources</code> - custom resources for server.
    <code>requests.cpu</code> param is mandatory for proper HPA work.</p>
<p>1.3 <code>cpuUtilizationBorder</code> - border percentage of
    average CPU utilization per pod for deployment.</p>
</li>
<li>
<p>Celery (<code>hpa.celery</code> prefix):</p>
<p>2.1 <code>enabled</code> - flag for enabling HPA, the same possible values as for API server.</p>
<p>2.2 <code>workerResources</code> - custom resources for celery worker.
    <code>requests.cpu</code> param is mandatory for proper HPA work.</p>
<p>2.3 <code>beatResources</code> - custom resources for celery beat.
    <code>requests.cpu</code> param is mandatory for proper HPA work.</p>
<p>2.4 <code>cpuUtilizationBorder</code> - border percentage of
    average CPU utilization per pod for deployment.</p>
</li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm-docs-ip-whitelisting"><h1 id="admin-guide-deployment-helm-docs-ip-whitelisting-limiting-network-access-to-mastermind-apis">Limiting network access to Mastermind APIs</h1>
<p>Waldur Helm allows limiting network access to Mastermind API endpoints - i.e. <code>/api/</code>, <code>/api-auth/</code>, <code>/admin/</code> - based on whitelisting the subnets from where access is allowed. To define a list of allowed subnets in CIDR format for the all the API endpoint, please use <code>ingress.whitelistSourceRange</code> option in <code>values.yaml</code>. Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nn">...</span>
<span class="nt">ingress</span><span class="p">:</span>
<span class="w">  </span><span class="nt">whitelistSourceRange</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;192.168.22.0/24&#39;</span>
<span class="nn">...</span>
</code></pre></div></td></tr></table></div>
<p>Given this value, only IPs from <code>192.168.22.0/24</code> subnet are able to access Waldur Mastermind APIs.</p>
<p>In case you want to limit access to <code>/api/admin/</code> endpoint specifically, there is another option called <code>ingress.whitelistSourceRangeAdmin</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nn">...</span>
<span class="nt">ingress</span><span class="p">:</span>
<span class="w">  </span><span class="nt">whitelistSourceRangeAdmin</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;192.168.22.1/32&#39;</span>
<span class="nn">...</span>
</code></pre></div></td></tr></table></div>
<p>This will limit access to the admin endpoint only for <code>192.168.22.1</code> IP. <strong>Note: The <code>whitelistSourceRangeAdmin</code> option takes precedence over <code>whitelistSourceRange</code>.</strong></p>
<p>In case of multiple subnets/IPs, comma separated list can be used as a value. E.g.: <code>192.168.22.1/32,192.168.21.0/24</code>. This works for both options.</p></section><section class="print-page" id="admin-guide-deployment-helm-docs-kubectl"><h1 id="admin-guide-deployment-helm-docs-kubectl-official-documentation">Official documentation</h1>
<p>Documentation of installation link: <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl-on-linux">doc</a></p>
<h2 id="admin-guide-deployment-helm-docs-kubectl-installing-kubectl">Installing kubectl</h2>
<ol>
<li>Download and install latest kubectl</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>curl<span class="w"> </span>-LO<span class="w"> </span>https://storage.googleapis.com/kubernetes-release/release/<span class="sb">`</span>curl<span class="w"> </span>-s<span class="w"> </span>https://storage.googleapis.com/kubernetes-release/release/stable.txt<span class="sb">`</span>/bin/linux/amd64/kubectl
</code></pre></div></td></tr></table></div>
<ol>
<li>Add executable mode for kubectl</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>chmod<span class="w"> </span>+x<span class="w"> </span>./kubectl
</code></pre></div></td></tr></table></div>
<ol>
<li>Move kubectl binary into your PATH</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>sudo<span class="w"> </span>mv<span class="w"> </span>./kubectl<span class="w"> </span>/usr/local/bin/kubectl
</code></pre></div></td></tr></table></div>
<ol>
<li>Check the version</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>version<span class="w"> </span>--client
</code></pre></div></td></tr></table></div>
<ol>
<li>Show running Pods in cluster</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>po<span class="w"> </span>-A<span class="w"> </span><span class="c1"># --&gt;</span>
<span class="w">  </span><span class="c1"># NAMESPACE     NAME                             READY STATUS  RESTARTS AGE</span>
<span class="w">  </span><span class="c1"># kube-system   coredns-66bff467f8-dcfxn         1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   coredns-66bff467f8-tdgpn         1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   etcd-minikube                    1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   kindnet-4j8t6                    1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   kube-apiserver-minikube          1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   kube-controller-manager-minikube 1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   kube-proxy-ft67m                 1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   kube-scheduler-minikube          1/1   Running 0        ??m</span>
<span class="w">  </span><span class="c1"># kube-system   storage-provisioner              1/1   Running 0        ??m</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-deployment-helm-docs-locust"><h1 id="admin-guide-deployment-helm-docs-locust-locust-cofiguration">Locust cofiguration</h1>
<p>This chart uses Locust tool for stress testing.</p>
<h2 id="admin-guide-deployment-helm-docs-locust-installation">Installation</h2>
<p>Locust runs as another standalone Helm release.</p>
<p>Install Locust:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>locust<span class="w"> </span>stable/locust<span class="w"> </span>-f<span class="w"> </span>locust-values.yaml
</code></pre></div></td></tr></table></div>
<p>After release installation, some instructions regarding access to WEB UI
for Locust printed in stdout.See <a href="https://docs.locust.io/en/stable/quickstart.html#locust-s-web-interface">this section</a>
for more information about UI interaction.</p>
<h2 id="admin-guide-deployment-helm-docs-locust-configuration">Configuration</h2>
<p>You can change locust config with the folloving variables in <code>locust-values.yaml</code>:</p>
<ol>
<li><code>image.repository</code> - repository of locust image</li>
<li><code>image.tag</code> - tag of locust image</li>
<li><code>master.config</code> - key-value configuration records
    for locust master (used as container env vars)</li>
<li><code>master.config.locust-host</code> - URL of target mastermind service.
    See <a href="#admin-guide-deployment-helm-docs-service-endpoint">this doc</a> for details</li>
<li><code>master.config.target-host</code> - same as <code>master.config.locust-host</code></li>
<li><code>master.config.locust-mode-master</code> - master mode flag. Please, don't change it,
    because for new versions of locust this flag is mandatory for a master node.</li>
<li><code>master.config.locust-locustfile</code> - path to the injected locust file.
    Please, don't change file directory (<code>/locust-tasks/</code>),
    because it is fixed mountpoint for pods.
    The filename itself can have any value,
     but should be the same as key in the configmap (<code>worker.config.configmapName</code>).</li>
<li><code>worker.config</code> - key-value configuration records
    for locust worker (used as container env vars).</li>
<li><code>worker.config.configmapName</code> - name of configmap with locustfile</li>
<li><code>worker.config.locust-mode-worker</code> - worker mode flag.
     Please, don't change it, because for new versions of locust
     this flag is mandatory for a worker node.</li>
<li><code>worker.config.locust-locustfile</code> - path to the injected locust file.
     Same rules as for <code>master.config.locust-locustfile</code>.</li>
<li><code>worker.config.locust-master-node-host</code> - hostname of the locust master service,
     which is formatted as <code>&lt;locust_release_name&gt;-master-svc</code></li>
<li><code>worker.replicaCount</code> - number of locust workers</li>
</ol>
<p>You can find available variables for master and worker configuration
<a href="https://github.com/helm/charts/tree/master/stable/locust#installing-the-chart">from chart desription</a>
and
<a href="https://docs.locust.io/en/stable/configuration.html#all-available-configuration-options">official locust documentation</a>
(most of the flags and args can be injected through env vars).</p>
<p><strong>NB</strong>: The original helm chart image (<code>greenbirdit/locust:0.9.0</code>)
has outdated locust version and doesn't support most of
the current env variables from the first link above.
Thus <code>master.config.target-host</code> is used only for compatibility
and must be equal to <code>master.config.locust-host</code></p>
<p>In the <code>values.yaml</code> you need to setup the following vars (<code>stressTesting</code> prefix):</p>
<ol>
<li><code>enabled</code> - enable/disable stress testing</li>
<li><code>locustFilePath</code> - path to the locust file (should be in the <code>waldur/</code> directory)</li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm-docs-marketplace-script"><h1 id="admin-guide-deployment-helm-docs-marketplace-script-waldur-marketplace-script-plugin-setup">Waldur Marketplace script plugin setup</h1>
<p>Available options in <code>values.yaml</code>:</p>
<ul>
<li><code>waldur.marketplace.script.enabled</code> - enable/disable plugin</li>
<li><code>waldur.marketplace.script.dockerImages</code> - key-value structure, where key is a programming language
  and value - a corresponding docker image tag</li>
<li><code>waldur.marketplace.script.k8sNamespace</code> - Kubernetes namespace, where jobs will be executed</li>
<li><code>waldur.marketplace.script.kubeconfigPath</code> - path to local file with kubeconfig content</li>
<li><code>waldur.marketplace.script.kubeconfig</code> - kubeconfig file content takes precedence over <code>.kubeconfigPath</code> option</li>
<li><code>waldur.marketplace.script.jobTimeout</code> - timeout for Kubernetes jobs</li>
</ul></section><section class="print-page" id="admin-guide-deployment-helm-docs-mastermind-templates"><h1 id="admin-guide-deployment-helm-docs-mastermind-templates-mastermind-templates-configuration">Mastermind templates configuration</h1>
<p>If you want to configure custom mastermind templates, you should:</p>
<ol>
<li>
<p>Setup <code>waldur.mastermindTemplating.mastermindTemplatesPath</code>
    in values.yaml (by default, it is equal to <code>mastermind_templates/mastermind-templates.yaml</code>).
    Alternatively, you can use <code>waldur.mastermindTemplating.mastermindTemplates</code> containing <code>.yaml</code>
    file strings to get rid of file usage.</p>
</li>
<li>
<p>Put all the custom templates into the file in a following way:</p>
</li>
</ol>
<p><strong>NB</strong>: The keys in the file should have <code>&lt;waldur_application_name&gt;/&lt;event_name&gt;_&lt;postfix&gt;.&lt;extension&gt;</code>, where <code>&lt;postfix&gt;</code> can be either <code>message</code> or <code>subject</code>, and <code>&lt;extension&gt;</code> - either <code>txt</code> or <code>html</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">&lt;file-name1&gt;</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">&lt;Custom content1&gt;</span>
<span class="nt">&lt;file-name2&gt;</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">&lt;Custom content2&gt;</span>
<span class="nn">...</span>
</code></pre></div></td></tr></table></div>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">users/invitation_notification_message.txt</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">Hi!</span>
<span class="nt">users/invitation_notification_message.html</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">&lt;html&gt;</span>
<span class="w">    </span><span class="no">&lt;head lang=&quot;en&quot;&gt;</span>
<span class="w">        </span><span class="no">&lt;meta charset=&quot;UTF-8&quot;&gt;</span>
<span class="w">        </span><span class="no">&lt;title&gt;Invitation has been created&lt;/title&gt;</span>
<span class="w">    </span><span class="no">&lt;/head&gt;</span>
<span class="w">    </span><span class="no">&lt;body&gt;</span>
<span class="w">    </span><span class="no">&lt;p&gt;</span>
<span class="w">        </span><span class="no">Hi!</span>
<span class="w">    </span><span class="no">&lt;/p&gt;</span>
<span class="w">    </span><span class="no">&lt;/body&gt;</span>
<span class="w">    </span><span class="no">&lt;/html&gt;</span>
<span class="nn">...</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-deployment-helm-docs-migration-from-psql-ha"><h1 id="admin-guide-deployment-helm-docs-migration-from-psql-ha-migration-from-postgresql-ha">Migration from Postgresql HA</h1>
<p>Plan:</p>
<ol>
<li>Scale api, beat, worker -&gt; 0</li>
<li>Backup — using backup job</li>
<li>group_vars/puhuri_core_prd - helm_pg_ha_enabled: no ===&gt; CANCEL THE UPDATING PIPELINE!</li>
<li>Run dependency update ==&gt; leads to a working single psql</li>
<li>Restore DB — using recovery job</li>
<li>Run a common update pipeline</li>
<li>Validate that login works</li>
<li>Drop old psql ha, drop pvc</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Backup</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>postgresql-ha-waldur-postgresql-0<span class="w"> </span>--<span class="w"> </span>env<span class="w"> </span><span class="nv">PGPASSWORD</span><span class="o">=</span>waldur<span class="w"> </span>pg_dump<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span>.0.0.0<span class="w"> </span>-U<span class="w"> </span>waldur<span class="w"> </span>waldur<span class="w"> </span><span class="p">|</span><span class="w"> </span>gzip<span class="w"> </span>-9<span class="w"> </span>&gt;<span class="w"> </span>backup.sql.gz

<span class="c1"># Backup restoration</span>
<span class="c1"># Locally</span>
kubectl<span class="w"> </span>cp<span class="w"> </span>backup.sql.gz<span class="w"> </span>postgresql-waldur-0:/tmp/backup.sql.gz
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>postgresql-waldur-0<span class="w"> </span>--<span class="w"> </span>bash

<span class="c1"># In pgpool pod</span>
gzip<span class="w"> </span>-d<span class="w"> </span>/tmp/backup.sql.gz
<span class="nb">export</span><span class="w"> </span><span class="nv">PGPASSWORD</span><span class="o">=</span>waldur
psql<span class="w"> </span>-U<span class="w"> </span>waldur<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span>.0.0.0<span class="w"> </span>-f<span class="w"> </span>/tmp/backup.sql
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-deployment-helm-docs-minikube"><h1 id="admin-guide-deployment-helm-docs-minikube-official-documentation">Official documentation</h1>
<p>Documentation of installation link: <a href="https://minikube.sigs.k8s.io/docs/start/linux/">doc</a></p>
<h2 id="admin-guide-deployment-helm-docs-minikube-installing-minikub">Installing minikub</h2>
<ol>
<li>
<p>Download and install minikube</p>
</li>
<li>
<p>For Debial/Ubuntu:</p>
</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>curl<span class="w"> </span>-LO<span class="w"> </span>https://storage.googleapis.com/minikube/releases/latest/minikube_1.9.1-0_amd64.deb
<span class="w">  </span>sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>minikube_1.9.1-0_amd64.deb
</code></pre></div></td></tr></table></div>
<ul>
<li>For Fedora/Red Hat</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>curl<span class="w"> </span>-LO<span class="w"> </span>https://storage.googleapis.com/minikube/releases/latest/minikube-1.9.1-0.x86_64.rpm
<span class="w">  </span>sudo<span class="w"> </span>rpm<span class="w"> </span>-ivh<span class="w"> </span>minikube-1.9.1-0.x86_64.rpm
</code></pre></div></td></tr></table></div>
<ul>
<li>Others (direct installation)</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>curl<span class="w"> </span>-LO<span class="w"> </span>https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
<span class="w">  </span>sudo<span class="w"> </span>install<span class="w"> </span>minikube-linux-amd64<span class="w"> </span>/usr/local/bin/minikube
</code></pre></div></td></tr></table></div>
<ol>
<li>Set docker as a default driver</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>minikube<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>driver<span class="w"> </span>docker
<span class="w">  </span>minikube<span class="w"> </span>delete<span class="w"> </span><span class="c1"># delete previous profile</span>
<span class="w">  </span>minikube<span class="w"> </span>config<span class="w"> </span>get<span class="w"> </span>driver<span class="w"> </span><span class="c1"># --&gt; docker</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Start local kubernetes cluster</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>minikube<span class="w"> </span>start
<span class="w">  </span>minikube<span class="w"> </span>status<span class="w"> </span><span class="c1"># --&gt;</span>
<span class="w">  </span><span class="c1"># m01</span>
<span class="w">  </span><span class="c1"># host: Running</span>
<span class="w">  </span><span class="c1"># kubelet: Running</span>
<span class="w">  </span><span class="c1"># apiserver: Running</span>
<span class="w">  </span><span class="c1"># kubeconfig: Configured</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-deployment-helm-docs-minio"><h1 id="admin-guide-deployment-helm-docs-minio-minio-configuration">Min.io configuration</h1>
<p>Min.io storage is used as a database backup storage.</p>
<p>Add <code>bitnami</code> repo to helm:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bitnami<span class="w"> </span>https://charts.bitnami.com/bitnami
</code></pre></div></td></tr></table></div>
<p>Install <code>minio</code> release:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>minio<span class="w"> </span>bitnami/minio<span class="w"> </span>-f<span class="w"> </span>minio-values.yaml
</code></pre></div></td></tr></table></div>
<p>You can change <code>minio</code> config with next vars (in <code>minio.values</code> file):</p>
<ol>
<li><code>accessKey.password</code> - access key id for storage</li>
<li><code>secretKey.password</code> - secret key itself</li>
<li><code>serviceAccount.name</code> - name of the service account for MinIO</li>
<li><code>persistence.enabled</code> - persistence enabling flag</li>
<li><code>persistence.size</code> - size of storage per each pod</li>
<li><code>ingress</code> - ingress settings</li>
<li><code>defaultBuckets</code> - default buckets created after
    release installation (comma-separated list of strings)</li>
</ol>
<p>For more configuration values follow <a href="https://github.com/bitnami/charts/tree/master/bitnami/minio#parameters">this link</a>.</p>
<p>In Waldur Helm <code>values.yaml</code> you need to setup:</p>
<ol>
<li><code>minio.accessKey</code> - should be same as <code>accessKey</code> in <code>minio.values.yaml</code></li>
<li><code>minio.secretKey</code> - should be same as <code>secretKey</code> in <code>minio.values.yaml</code></li>
<li><code>minio.bucketName</code> - should be same as a value from <code>defaultBuckets</code> list in <code>minio-values.yaml</code></li>
<li><code>minio.endpoint</code> - access URL to <code>minio</code> storage
    (<code>minio</code> service host and port). See <a href="#admin-guide-deployment-helm-docs-service-endpoint">this doc</a> for details.</li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm-docs-postgres-backup-management"><h1 id="admin-guide-deployment-helm-docs-postgres-backup-management-postgresql-backup-configuration">PostgreSQL backup configuration</h1>
<p>There are the following jobs for backups management:</p>
<ul>
<li>
<p>CronJob for backups creation (running by a schedule <code>postgresBackup.schedule</code>)</p>
</li>
<li>
<p>CronJob for backups rotation (running by a schedule <code>postgresBackup.rotationSchedule</code>)</p>
</li>
</ul>
<p>Backup configuration values (<code>postgresBackup</code> prefix):</p>
<ul>
<li>
<p><code>enabled</code> - boolean flag for enabling/disabling backups</p>
</li>
<li>
<p><code>schedule</code> - cron-like schedule for backups</p>
</li>
<li>
<p><code>rotationSchedule</code> - cron-like schedule for backups rotation</p>
</li>
<li>
<p><code>maxNumber</code> - maximum number of backups to store</p>
</li>
<li>
<p><code>image</code> - Docker image containing <code>potgres</code> and <code>minio</code> (client) binaries
  (<a href="https://hub.docker.com/r/opennode/postgres-minio">opennode/postgres-minio</a>
  by default)</p>
</li>
</ul>
<h2 id="admin-guide-deployment-helm-docs-postgres-backup-management-backups-restoration">Backups restoration</h2>
<p>To restore backups you need to connect to the restoration pod. The major prerequisite for this is stopping the
Waldur backend pods to avoid errors. <strong>NB: During restoration process, the site will be unavailable</strong>. For this,
please execute the following lines in the Kubernetes node:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Stop all the API pods</span>
kubectl<span class="w"> </span>scale<span class="w"> </span>--replicas<span class="o">=</span><span class="m">0</span><span class="w"> </span>deployment/waldur-mastermind-api
<span class="c1"># Stop all the Celery worker pods</span>
kubectl<span class="w"> </span>scale<span class="w"> </span>--replicas<span class="o">=</span><span class="m">0</span><span class="w"> </span>deployment/waldur-mastermind-worker
<span class="c1"># Connect to the restoration pod</span>
kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>deployment/waldur-db-restore<span class="w"> </span>--<span class="w"> </span>bash
</code></pre></div></td></tr></table></div>
<p>This will give you access to a terminal of a restoration pod. In this shell, please, execute the command:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>db-backup-minio-auth
</code></pre></div></td></tr></table></div>
<p>This will print the recent 5 backups available for restoration. Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>root@waldur-db-restore-ff7f586bb-nb8jt:/#<span class="w"> </span>db-backup-minio-auth
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>LOCAL_PG_BACKUPS_DIR<span class="w"> </span>:
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>MINIO_PG_BACKUPS_DIR<span class="w"> </span>:<span class="w"> </span>pg/data/backups/postgres
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Setting<span class="w"> </span>up<span class="w"> </span>the<span class="w"> </span>postgres<span class="w"> </span><span class="nb">alias</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>minio<span class="w"> </span>server<span class="w"> </span><span class="o">(</span>http://minio.default.svc.cluster.local:9000<span class="o">)</span>
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Last<span class="w"> </span><span class="m">5</span><span class="w"> </span>backups
<span class="o">[</span><span class="m">2022</span>-12-01<span class="w"> </span><span class="m">05</span>:00:02<span class="w"> </span>UTC<span class="o">]</span><span class="w">  </span>91KiB<span class="w"> </span>backup-2022-12-01-05-00.sql.gz
<span class="o">[</span><span class="m">2022</span>-11-30<span class="w"> </span><span class="m">05</span>:00:02<span class="w"> </span>UTC<span class="o">]</span><span class="w">  </span>91KiB<span class="w"> </span>backup-2022-11-30-05-00.sql.gz
<span class="o">[</span><span class="m">2022</span>-11-29<span class="w"> </span><span class="m">05</span>:00:02<span class="w"> </span>UTC<span class="o">]</span><span class="w">  </span>91KiB<span class="w"> </span>backup-2022-11-29-05-00.sql.gz
<span class="o">[</span><span class="m">2022</span>-11-28<span class="w"> </span><span class="m">16</span>:30:37<span class="w"> </span>UTC<span class="o">]</span><span class="w">  </span>91KiB<span class="w"> </span>backup-2022-11-28-16-30.sql.gz
<span class="o">[</span><span class="m">2022</span>-11-28<span class="w"> </span><span class="m">16</span>:28:27<span class="w"> </span>UTC<span class="o">]</span><span class="w">  </span>91KiB<span class="w"> </span>backup-2022-11-28-16-28.sql.gz
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>Finished
</code></pre></div></td></tr></table></div>
<p>As you can see, the backup name contains the date and time when it was created in <code>YYYY-mm-dd-HH-MM</code> format. You can freely choose the one you need.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>db-backup-minio-auth
<span class="w">  </span><span class="nb">export</span><span class="w"> </span><span class="nv">BACKUP_FILENAME</span><span class="o">=</span>&lt;SELECTED_BACKUP&gt;
<span class="w">  </span>mc<span class="w"> </span>cp<span class="w"> </span>pg/<span class="nv">$MINIO_BUCKET</span>/backups/postgres/<span class="nv">$BACKUP_FILENAME</span><span class="w"> </span>backup.sql.gz
<span class="w">  </span>gzip<span class="w"> </span>-d<span class="w"> </span>backup.sql.gz
<span class="w">  </span><span class="c1"># Be careful: the next lines have potentially danger operations</span>
<span class="w">  </span>psql<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = &#39;waldur&#39; AND pid &lt;&gt; pg_backend_pid();&quot;</span>
<span class="w">  </span>psql<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;DROP DATABASE waldur;&#39;</span>
<span class="w">  </span>createdb<span class="w"> </span>waldur
<span class="w">  </span>psql<span class="w"> </span>-f<span class="w"> </span>backup.sql
<span class="w">  </span>rm<span class="w"> </span>backup.sql
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-helm-docs-postgres-backup-management-restoration-from-external-backup">Restoration from external backup</h2>
<p>If you want to use a pre-created backup from an external system, copy the backup file:</p>
<ol>
<li>Copy the backup file to your local machine</li>
<li>
<p>Copy the file to pod</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">RESTORATION_POD_NAME</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>--template<span class="w"> </span><span class="s1">&#39;{{range .items}}{{.metadata.name}}{{&quot;\n&quot;}}{{end}}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>restore<span class="k">)</span>
kubectl<span class="w"> </span>cp<span class="w"> </span>&lt;BACKUP_FILE&gt;<span class="w"> </span><span class="nv">$RESTORATION_POD_NAME</span>:/tmp/backup.sql.gz
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Connect to pod's terminal</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="nv">$RESTORATION_POD_NAME</span><span class="w"> </span>--<span class="w"> </span>bash
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Apply the backup</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>gzip<span class="w"> </span>-d<span class="w"> </span>/tmp/backup.sql.gz
<span class="c1"># Be careful: the next lines have potentially danger operations</span>
psql<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE pg_stat_activity.datname = &#39;waldur&#39; AND pid &lt;&gt; pg_backend_pid();&quot;</span>
psql<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;DROP DATABASE waldur;&#39;</span>
createdb<span class="w"> </span>waldur
psql<span class="w"> </span>-f<span class="w"> </span>/tmp/backup.sql
rm<span class="w"> </span>/tmp/backup.sql
</code></pre></div></td></tr></table></div>
</li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm-docs-postgres-db-ha"><h1 id="admin-guide-deployment-helm-docs-postgres-db-ha-postgresql-ha-chart-configuration">PostgreSQL HA chart configuration</h1>
<p><a href="https://github.com/bitnami/charts/tree/master/bitnami/postgresql-ha">bitnami/postgresql-ha</a>
is used as a highly available database for Waldur.</p>
<h2 id="admin-guide-deployment-helm-docs-postgres-db-ha-standalone-installation">Standalone installation</h2>
<p>Add <code>bitnami</code> repo to helm:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bitnami<span class="w"> </span>https://charts.bitnami.com/bitnami
</code></pre></div></td></tr></table></div>
<p>Install <code>postgresql-ha</code> release:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>postgresql-ha<span class="w"> </span>bitnami/postgresql-ha<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-f<span class="w"> </span>postgresql-ha-values.yaml<span class="w"> </span>--version<span class="w"> </span><span class="m">11</span>.7.4
</code></pre></div></td></tr></table></div>
<p><strong>NB</strong>: the value <code>postgresql.HAEnabled</code> for waldur release must be <code>true</code>.</p>
<h3 id="admin-guide-deployment-helm-docs-postgres-db-ha-chart-configuration">Chart configuration</h3>
<p>You can change default PostgreSQL config with
the following variables in <code>values.yaml</code> (<code>postgresql-ha-values.yaml</code> file):</p>
<ol>
<li><code>postgresql.database</code> - name of a database.
    <strong>NB</strong>: must match <code>postgresql.database</code> value in <code>waldur/values.yaml</code></li>
<li><code>postgresql.username</code> - name of a database user.
    <strong>NB</strong>: must match <code>postgresql.username</code> value in <code>waldur/values.yaml</code></li>
<li><code>postgresql.password</code> - password of a database user</li>
<li><code>postgresql.replicaCount</code> - number of db replicas</li>
<li><code>postgresql.syncReplication</code> - enable/disable synchronous replication</li>
<li><code>postgresql.repmgrUsername</code> - username of <code>repmgr</code> user</li>
<li><code>postgresql.repmgrPassword</code> - password of <code>repmgr</code> user</li>
<li><code>persistence.size</code> - size of a database (for each replica)</li>
<li><code>pgpoolImage.tag</code> - tag of <code>Pgpool</code> image.
    Possible tags for default image can be found <a href="https://hub.docker.com/r/bitnami/pgpool/tags">here</a></li>
<li><code>postgresqlImage.tag</code> - tag of <code>PostgreSQL</code> image.
     Possible tags for default image can be found <a href="https://hub.docker.com/r/bitnami/postgresql-repmgr/tags/">here</a></li>
<li><code>pgpoolImage.tag</code> - registry of <code>Pgpool</code> image.</li>
<li><code>postgresqlImage.tag</code> - registry of <code>PostgreSQL</code> image.</li>
</ol>
<p>More information related to possible values
<a href="https://github.com/bitnami/charts/tree/master/bitnami/postgresql-ha#parameters">here</a>.</p>
<h2 id="admin-guide-deployment-helm-docs-postgres-db-ha-dependency-installation">Dependency installation</h2>
<p>Waldur Helm chart supports PostgreSQL HA installation as a dependency.
For this, set <code>postgresqlha.enabled</code> to <code>true</code> and update related settings in <code>postgresqlha</code> section in <code>waldur/values.yaml</code></p>
<p><strong>NB</strong>: the value <code>postgresql.enabled</code> and <code>externalDB.enabled</code> must be <code>false</code>.</p>
<p>Prior Waldur installation, update chart dependencies:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>helm<span class="w"> </span>dependency<span class="w"> </span>update
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-deployment-helm-docs-postgres-db"><h1 id="admin-guide-deployment-helm-docs-postgres-db-postgresql-chart-configuration-without-ha-support">PostgreSQL chart configuration (without HA support)</h1>
<p><a href="https://github.com/bitnami/charts/tree/master/bitnami/postgresql">bitnami/postgresql chart</a>
is used as a database for Waldur.</p>
<h2 id="admin-guide-deployment-helm-docs-postgres-db-standalone-installation">Standalone installation</h2>
<p>Add <code>bitnami</code> repo to helm:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bitnami<span class="w"> </span>https://charts.bitnami.com/bitnami
</code></pre></div></td></tr></table></div>
<p>Install <code>postgresql</code> release:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>postgresql<span class="w"> </span>bitnami/postgresql<span class="w"> </span>--version<span class="w"> </span><span class="m">11</span>.9.1<span class="w"> </span>-f<span class="w"> </span>postgresql-values.yaml
</code></pre></div></td></tr></table></div>
<p><strong>NB</strong>: the values <code>postgresql.enabled</code> and <code>postgresqlha.enabled</code> must be <code>false</code>.</p>
<h3 id="admin-guide-deployment-helm-docs-postgres-db-chart-configuration">Chart configuration</h3>
<p>You can change default PostgreSQL config with the following variables in <code>postgresql-values.yaml</code>:</p>
<ol>
<li><code>auth.database</code> - name of a database.
    <strong>NB</strong>: must match <code>postgresql.database</code> value in <code>waldur/values.yaml</code></li>
<li><code>auth.username</code> - name of a database user.
    <strong>NB</strong>: must match <code>postgresql.username</code> value in <code>waldur/values.yaml</code></li>
<li><code>auth.password</code> - password of a database user</li>
<li><code>primary.persistence.size</code> - size of a database</li>
<li><code>image.tag</code> - tag of <code>PostgreSQL</code> image.
    Possible tags for default image can be found <a href="https://hub.docker.com/r/bitnami/postgresql/tags">here</a></li>
<li><code>image.registry</code> - registry of <code>PostgreSQL</code> image.</li>
</ol>
<p>More information related to possible values <a href="https://github.com/bitnami/charts/tree/master/bitnami/postgresql#parameters">here</a>.</p>
<h2 id="admin-guide-deployment-helm-docs-postgres-db-dependency-installation">Dependency installation</h2>
<p>Waldur Helm chart supports PostgreSQL installation as a dependency.
For this, set <code>postgresql.enabled</code> to <code>true</code> and update related settings in <code>postgresql</code> section in <code>waldur/values.yaml</code></p>
<p><strong>NB</strong>: the value <code>postgresqlha.enabled</code> and <code>externalDB.enabled</code> must be <code>false</code>.</p>
<p>Prior Waldur installation, update chart dependencies:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>helm<span class="w"> </span>dependency<span class="w"> </span>update
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-deployment-helm-docs-proxy-setup"><h1 id="admin-guide-deployment-helm-docs-proxy-setup-proxy-setup-for-waldur-components">Proxy setup for Waldur components</h1>
<p>You can setup the proxy environment variables <code>https_proxy</code>, <code>http_proxy</code> and <code>no_proxy</code> for Waldur component containers.
For this, please set values for the <code>proxy.httpsProxy</code>, <code>proxy.httpProxy</code> and <code>proxy.noProxy</code> variables in <code>waldur/values.yaml</code> file.</p>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">proxy</span><span class="p">:</span>
<span class="w">  </span><span class="nt">httpsProxy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://proxy.example.com/&quot;</span>
<span class="w">  </span><span class="nt">httpProxy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://proxy.example.com/&quot;</span>
<span class="w">  </span><span class="nt">noProxy</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;.test&quot;</span>
</code></pre></div></td></tr></table></div>
<p><strong>Note</strong>: you can set variables separately, i.e. leave some of them blank:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>proxy:
<span class="w">  </span>httpsProxy:<span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="w">  </span>httpProxy:<span class="w"> </span><span class="s2">&quot;http://proxy.example.com/&quot;</span>
<span class="w">  </span>noProxy:<span class="w"> </span><span class="s2">&quot;.test&quot;</span>
</code></pre></div></td></tr></table></div>
<p>In the previous example, the <code>https_proxy</code> env variable won't be present in the containers.</p></section><section class="print-page" id="admin-guide-deployment-helm-docs-rabbitmq"><h1 id="admin-guide-deployment-helm-docs-rabbitmq-rabbitmq-configuration">RabbitMQ configuration</h1>
<p>For rabbitmq installation,
<a href="https://github.com/bitnami/charts/tree/master/bitnami/rabbitmq">bitnami/rabbitmq</a>
is used.</p>
<h2 id="admin-guide-deployment-helm-docs-rabbitmq-installation">Installation</h2>
<p>Add <code>bitnami</code> repo to helm:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>bitnami<span class="w"> </span>https://charts.bitnami.com/bitnami
</code></pre></div></td></tr></table></div>
<p>Install rabbitmq-ha release:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span>rmq<span class="w"> </span>bitnami/rabbitmq<span class="w"> </span>--version<span class="w"> </span><span class="m">10</span>.3.5<span class="w"> </span>-f<span class="w"> </span>rmq-values.yaml
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-deployment-helm-docs-rabbitmq-configuration">Configuration</h2>
<p>You can change rabbitmq config with the following variables in <code>rmq-values.yaml</code>:</p>
<ol>
<li><code>replicaCount</code> - number RMQ instances</li>
<li><code>persistence.enabled</code> - enable/disable persistence</li>
<li><code>persistence.size</code> - size for singe PV</li>
<li><code>persistence.storageClass</code> - storage class for PV</li>
<li><code>auth.username</code> - username for RMQ user</li>
<li><code>auth.password</code> - password for RMQ user</li>
</ol>
<p>For more config values, see <a href="https://github.com/bitnami/charts/tree/master/bitnami/rabbitmq#parameters">this section</a></p>
<p>In <code>values.yaml</code> file, you need to setup the following vars (<code>rabbitmq</code> prefix):</p>
<ol>
<li><code>user</code> - should be same as <code>auth.username</code> in the <code>rmq-values.yaml</code> file</li>
<li><code>password</code> - should be same as <code>auth.password</code> in the <code>rmq-values.yaml</code> file</li>
<li><code>host</code> - rabbitmq-ha service <strong>hostname</strong>
    (See <a href="#admin-guide-deployment-helm-docs-service-endpoint">this doc</a> for details)</li>
<li><code>customManagementPort</code> - custom port for rabbitmq management interface</li>
<li><code>customAMQPPort</code> - custom port for AMQP access</li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm-docs-saml2"><h1 id="admin-guide-deployment-helm-docs-saml2-saml2-configuration">SAML2 configuration</h1>
<p>To configure SAML2 for Waldur:</p>
<ol>
<li>Enable SAML2 support in <code>values.yaml</code>:
    add <code>SAML2</code> string into <code>waldur.authMethods</code> list</li>
<li>Set source directory in <code>waldur.saml2.dir</code></li>
<li>Place necessary files in the directory
    with the following manner (<code>.</code> is the source directory root):<ul>
<li><code>sp.crt</code> -&gt; <code>./</code></li>
<li><code>sp.pem</code> -&gt; <code>./</code></li>
<li><code>saml2.conf.py</code> -&gt; <code>./</code></li>
</ul>
</li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm-docs-service-endpoint"><h1 id="admin-guide-deployment-helm-docs-service-endpoint-service-endpoints">Service endpoints</h1>
<p>For communication inside a cluster, pods use services.
Usually, that needs to define internal endpoints with service URL format.</p>
<p><strong>NB</strong>: It is important to set up <code>namespace</code> part correctly.
If not, requests can come to unexpected service, which will cause errors.</p>
<h2 id="admin-guide-deployment-helm-docs-service-endpoint-endpoint-format">Endpoint format</h2>
<p>Fully qualified endpoint format is:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>http://&lt;service-name&gt;.&lt;namespace&gt;.svc.&lt;cluster&gt;:&lt;service-port&gt;
</code></pre></div></td></tr></table></div>
<p>Where</p>
<ul>
<li><code>&lt;service-name&gt;.&lt;namespace&gt;.svc.&lt;cluster&gt;</code> - hostname of service</li>
<li><code>&lt;service-port&gt;</code> - port of service</li>
</ul>
<p>For example:</p>
<ul>
<li>hostname is <code>elasticsearch-master.elastic.svc.cluster.local</code></li>
<li>service port is <code>9200</code></li>
<li>final URL is <code>http://elasticsearch-master.elastic.svc.cluster.local:9200</code></li>
</ul>
<p>If pods run in the same namespace and cluster, it can be simplified to:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>http://&lt;service-name&gt;:&lt;service-port&gt;
</code></pre></div></td></tr></table></div>
<p>For example: <code>http://elasticsearch-master:9200</code></p></section><section class="print-page" id="admin-guide-deployment-helm-docs-tls-config"><h1 id="admin-guide-deployment-helm-docs-tls-config-tls-configuration-instructions">TLS configuration instructions</h1>
<p>To enable tls globally please set <code>ingress.tls.enabled=true</code> in <code>values.yaml</code></p>
<h2 id="admin-guide-deployment-helm-docs-tls-config-lets-encrypt-setup">Let’s Encrypt setup</h2>
<p>It you want co configure <a href="https://letsencrypt.org/">letsencrypt</a>
certification, you need to:</p>
<ol>
<li>Set <code>ingress.tls.source="letsEncrypt"</code> in <code>values.yaml</code></li>
<li>Create namespace for cert-manager</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>namespace<span class="w"> </span>cert-manager
</code></pre></div></td></tr></table></div>
<ol>
<li>Add repository and update repos list</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>jetstack<span class="w"> </span>https://charts.jetstack.io
<span class="w">  </span>helm<span class="w"> </span>repo<span class="w"> </span>update
</code></pre></div></td></tr></table></div>
<ol>
<li>Install cert-manager release</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>helm<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>cert-manager<span class="w"> </span>jetstack/cert-manager<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--namespace<span class="w"> </span>cert-manager<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--version<span class="w"> </span>v1.7.1<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--set<span class="w"> </span><span class="nv">installCRDs</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>After that, <code>waldur</code> release is ready for installation.</li>
</ol>
<h2 id="admin-guide-deployment-helm-docs-tls-config-your-own-certificate">Your own certificate</h2>
<p>In case, when you want to use own certificate, you need to:</p>
<ol>
<li>Set <code>ingress.tls.source="secret"</code> in <code>values.yaml</code></li>
<li>Set <code>ingress.tls.secretsDir</code> variable to directory
    with your <code>tls.crt</code> and <code>tls.key</code> files. By default it is set to <code>tls</code></li>
<li>After that, <code>waldur</code> release is ready for installation</li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm-docs-whitelabeling"><h1 id="admin-guide-deployment-helm-docs-whitelabeling-white-labeling-instructions">White-labeling instructions</h1>
<p>To setup white-labeling, you can define next variables in <code>waldur/values.yaml</code> file:</p>
<ul>
<li><code>shortPageTitle</code> - custom prefix for page title</li>
<li><code>modePageTitle</code> - custom page title</li>
<li><code>loginLogoPath</code> - path to custom <code>.png</code> image file
    for login page (should be in <code>waldur/</code> chart directory)</li>
<li><code>sidebarLogoPath</code> - path to custom <code>.png</code> image file
    for sidebar header (should be in <code>waldur/</code> chart directory)</li>
<li><code>poweredByLogoPath</code> - path to custom <code>.png</code> image file
    for "powered by" part of login page (should be in <code>waldur/</code> chart directory)</li>
<li><code>faviconPath</code> - path to custom favicon <code>.png</code> image file</li>
<li><code>tosHtmlPath</code> - path to custom terms of service file (<code>tos.html</code>)</li>
<li><code>privacyHtmlPath</code> - path to custom privacy statement file (<code>privacy.html</code>)</li>
<li><code>brandColor</code> - Hex color definition is used in HomePort landing page for login button.</li>
<li><code>brandLabelColor</code> - Hex color definition is used in HomePort landing page for font color of login button.</li>
<li><code>heroImagePath</code> - Relative path to image rendered at hero section of HomePort landing page.</li>
<li><code>heroLinkLabel</code> - Label for link in hero section of HomePort landing page. It can be lead to support site or blog post.</li>
<li><code>heroLinkUrl</code> - Link URL in hero section of HomePort landing page.</li>
<li><code>siteDescription</code> - text at hero section of HomePort landing page.</li>
</ul>
<p><strong>NB:</strong></p>
<ul>
<li>the <code>*Path</code> values take place only if respectful <code>*Url</code> values are not specified.
    If both types are defined, the precedence is taken by <code>URL</code>(<code>*Url</code>) for all cases.</li>
<li>all of imported files must be within chart root directory</li>
</ul>
<p>Alternatively, TOS and PP files content can be provided as multiline values in <code>tosHtml</code> and <code>privacyHtml</code> options respectfully.
If defined, they take precedence over the aforementioned ones.</p></section><h1 class='nav-section-title-end'>Ended: Docs</h1><h1 class='nav-section-title-end'>Ended: Helm</h1><h1 class='nav-section-title-end'>Ended: Deployment</h1>
                        <h2 class='nav-section-title' id='section-identities'>
                            Identities <a class='headerlink' href='#section-identities' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="admin-guide-identities-ldap"><h1 id="admin-guide-identities-ldap-ldap">LDAP</h1>
<p>Waldur allows you to authenticate using identities from a LDAP server.</p>
<h2 id="admin-guide-identities-ldap-prerequisites">Prerequisites</h2>
<ul>
<li>Below it is assumed that LDAP server is provided by FreeIPA. Although LDAP authentication would work with any other
  LDAP server as well, you may need to customize configuration for Waldur MasterMind.</li>
<li>Please ensure that Waldur Mastermind API server has access to the LDAP server. By default LDAP server listens
  on TCP and UDP port 389, or on port 636 for LDAPS (LDAP over SSL). If this port is filtered out by firewall,
  you wouldn't be able to authenticate via LDAP.</li>
<li>You should know LDAP server URI, for example, FreeIPA demo server has <code>ldap://ipa.demo1.freeipa.org</code>.</li>
<li>You should know username and password of LDAP admin user. For example, FreeIPA demo server uses
  username=admin and password=Secret123.</li>
</ul>
<h3 id="admin-guide-identities-ldap-add-ldap-configuration-to-waldur-mastermind-configuration">Add LDAP configuration to Waldur Mastermind configuration</h3>
<p>Example configuration is below, please adjust to your specific deployment.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">ldap</span>
<span class="kn">from</span> <span class="nn">django_auth_ldap.config</span> <span class="kn">import</span> <span class="n">LDAPSearch</span><span class="p">,</span> <span class="n">GroupOfNamesType</span>

<span class="c1"># LDAP authentication.</span>
<span class="c1"># See also: https://django-auth-ldap.readthedocs.io/en/latest/authentication.html</span>
<span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">+=</span> <span class="p">(</span>
    <span class="s1">&#39;django_auth_ldap.backend.LDAPBackend&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">AUTH_LDAP_SERVER_URI</span> <span class="o">=</span> <span class="s1">&#39;ldap://ipa.demo1.freeipa.org&#39;</span>

<span class="c1"># Following variables are not used by django-auth-ldap,</span>
<span class="c1"># they are used as templates for other variables</span>
<span class="n">AUTH_LDAP_BASE</span> <span class="o">=</span> <span class="s1">&#39;cn=accounts,dc=demo1,dc=freeipa,dc=org&#39;</span>
<span class="n">AUTH_LDAP_USER_BASE</span> <span class="o">=</span> <span class="s1">&#39;cn=users,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_BASE</span>

<span class="c1"># Format authenticating user&#39;s distinguished name using template</span>
<span class="n">AUTH_LDAP_USER_DN_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;uid=</span><span class="si">%(user)s</span><span class="s1">,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_USER_BASE</span>

<span class="c1"># Credentials for admin user</span>
<span class="n">AUTH_LDAP_BIND_DN</span> <span class="o">=</span> <span class="s1">&#39;uid=admin,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_USER_BASE</span>
<span class="n">AUTH_LDAP_BIND_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;Secret123&#39;</span>

<span class="c1"># Populate the Django user from the LDAP directory.</span>
<span class="n">AUTH_LDAP_USER_ATTR_MAP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;full_name&#39;</span><span class="p">:</span> <span class="s1">&#39;displayName&#39;</span><span class="p">,</span>
    <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;mail&#39;</span>
<span class="p">}</span>

<span class="c1"># Set up the basic group parameters.</span>
<span class="n">AUTH_LDAP_GROUP_BASE</span> <span class="o">=</span> <span class="s2">&quot;cn=groups,&quot;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_BASE</span>
<span class="n">AUTH_LDAP_GROUP_FILTER</span> <span class="o">=</span> <span class="s2">&quot;(objectClass=groupOfNames)&quot;</span>
<span class="n">AUTH_LDAP_GROUP_SEARCH</span> <span class="o">=</span> <span class="n">LDAPSearch</span><span class="p">(</span><span class="n">AUTH_LDAP_GROUP_BASE</span><span class="p">,</span>
    <span class="n">ldap</span><span class="o">.</span><span class="n">SCOPE_SUBTREE</span><span class="p">,</span> <span class="n">AUTH_LDAP_GROUP_FILTER</span><span class="p">)</span>
<span class="n">AUTH_LDAP_GROUP_TYPE</span> <span class="o">=</span> <span class="n">GroupOfNamesType</span><span class="p">(</span><span class="n">name_attr</span><span class="o">=</span><span class="s2">&quot;cn&quot;</span><span class="p">)</span>

<span class="n">AUTH_LDAP_USER_FLAGS_BY_GROUP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;is_staff&#39;</span><span class="p">:</span> <span class="s1">&#39;cn=admins,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_GROUP_BASE</span><span class="p">,</span>
    <span class="s1">&#39;is_support&#39;</span><span class="p">:</span> <span class="s1">&#39;cn=support,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_GROUP_BASE</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Configuration above is based on LDAP server exposed by FreeIPA. To make it work, there are some things
that need to be verified in FreeIPA:</p>
<ol>
<li>Ensure that admins and support groups exist in LDAP server. You may do it using FreeIPA admin UI.
    <a href="../admin-guide/identities/img/freeipa-groups.png"><img alt="FreeIPA groups" src="../admin-guide/identities/img/freeipa-groups.png" /></a></li>
<li>If user is assigned to admins group in LDAP, he becomes staff in Waldur.
    If user is assigned to support group in LDAP, he becomes support user in Waldur.
    For example, consider the manager user which belong to both groups:</li>
</ol>
<p><a href="../admin-guide/identities/img/manager-freeipa.png"><img alt="Manager user" src="../admin-guide/identities/img/manager-freeipa.png" /></a></p>
<h2 id="admin-guide-identities-ldap-field-mapping">Field mapping</h2>
<p><code>displayName</code> attribute in LDAP is mapped to full_name attribute in Waldur.
<code>mail</code> field in LDAP is mapped to email attribute in Waldur.</p>
<p>Consider for example, the following user attributes in LDAP:</p>
<p><a href="../admin-guide/identities/img/manager-ldap-explorer.png"><img alt="LDAP explorer" src="../admin-guide/identities/img/manager-ldap-explorer.png" /></a></p>
<p>Here's how it is mapped in Waldur:</p>
<p><a href="../admin-guide/identities/img/manager-django-admin.png"><img alt="Waldur admin" src="../admin-guide/identities/img/manager-django-admin.png" /></a></p>
<p>And here's how it is displayed when user initially logs into Waldur via HomePort:</p>
<p><a href="../admin-guide/identities/img/manager-waldur.png"><img alt="Homeport login" src="../admin-guide/identities/img/manager-waldur.png" /></a></p></section><section class="print-page" id="admin-guide-identities-tara"><h1 id="admin-guide-identities-tara-tara">TARA</h1>
<p>Waldur supports integration with <a href="https://tara.ria.ee/">TARA</a> authentication service.</p>
<p>To enable it, please register a new client for Waldur deployment and set configuration settings for TARA.
Check <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a> for available settings.</p></section><section class="print-page" id="admin-guide-identities-edugain"><h1 id="admin-guide-identities-edugain-edugain">eduGAIN</h1>
<h2 id="admin-guide-identities-edugain-overview">Overview</h2>
<p><a href="https://wiki.geant.org/display/eduGAIN/eduGAIN+Home">eduGAIN</a> is a global federation of identity and service
providers, based technically on SAML2.</p>
<p>In order to allow eduGAIN users to access Waldur, there are two steps:</p>
<ul>
<li>Waldur deployment must be registered as a service provider in eduGAIN federation.</li>
<li>Waldur must get a list of identities that are trusted for authentication.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>SAML is a complicated and fragile technology. GEANT provides an alternative to direct integration of SAML -
<a href="#admin-guide-identities-eduteams">eduTEAMS</a>, which exposes an OpenID Connect protocol for service providers.</p>
</div>
<p>Waldur relies on <a href="https://djangosaml2.readthedocs.io/">djangosaml2</a> for the heavylifting of SAML processing,
so for fine tuning configuration, contact corresponding project documentation.</p>
<h2 id="admin-guide-identities-edugain-registering-waldur-as-service-provider">Registering Waldur as Service Provider</h2>
<h3 id="admin-guide-identities-edugain-add-saml-configuration-to-waldur-mastermind-configuration">Add SAML configuration to Waldur Mastermind configuration</h3>
<p>Example configuration is below, please adjust to your specific deployment. Once applied, service metadata will be
visible at Waldur deployment URL: <code>https://waldur.example.com/api-auth/saml2/metadata/</code>. That data needs to be
propagated to the federation operator for inclusion into the federation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><a href="#admin-guide-managing-with-ansible">Managed ansible</a> simplifies configuration of the eduGAIN integration and should
be a preferred method for all supported deployments.</p>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">import</span> <span class="nn">saml2</span>
<span class="kn">from</span> <span class="nn">saml2.entity_category.edugain</span> <span class="kn">import</span> <span class="n">COC</span>


<span class="n">WALDUR_AUTH_SAML2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># used for assigning the registration method to the user</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;saml2&#39;</span><span class="p">,</span>
    <span class="c1"># full path to the xmlsec1 binary program</span>
    <span class="s1">&#39;xmlsec_binary&#39;</span><span class="p">:</span> <span class="s1">&#39;/usr/bin/xmlsec1&#39;</span><span class="p">,</span>
    <span class="c1"># required for assertion consumer, single logout services and entity ID</span>
    <span class="s1">&#39;base_url&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># directory with attribute mapping</span>
    <span class="s1">&#39;attribute_map_dir&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># set to True to output debugging information</span>
    <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="c1"># IdPs metadata XML files stored locally</span>
    <span class="s1">&#39;idp_metadata_local&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># IdPs metadata XML files stored remotely</span>
    <span class="s1">&#39;idp_metadata_remote&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># logging</span>
    <span class="c1"># empty to disable logging SAML2-related stuff to file</span>
    <span class="s1">&#39;log_file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;log_level&#39;</span><span class="p">:</span> <span class="s1">&#39;INFO&#39;</span><span class="p">,</span>
    <span class="c1"># Indicates if the entity will sign the logout requests</span>
    <span class="s1">&#39;logout_requests_signed&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
    <span class="c1"># Indicates if the authentication requests sent should be signed by default</span>
    <span class="s1">&#39;authn_requests_signed&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
    <span class="c1"># Identifies the Signature algorithm URL according to the XML Signature specification</span>
    <span class="c1"># SHA1 is used by default</span>
    <span class="s1">&#39;signature_algorithm&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># Identifies the Message Digest algorithm URL according to the XML Signature specification</span>
    <span class="c1"># SHA1 is used by default</span>
    <span class="s1">&#39;digest_algorithm&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># Identified NameID format to use. None means default, empty string (&quot;&quot;) disables addition of entity</span>
    <span class="s1">&#39;nameid_format&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># PEM formatted certificate chain file</span>
    <span class="s1">&#39;cert_file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># PEM formatted certificate key file</span>
    <span class="s1">&#39;key_file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># SAML attributes that are required to identify a user</span>
    <span class="s1">&#39;required_attributes&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># SAML attributes that may be useful to have but not required</span>
    <span class="s1">&#39;optional_attributes&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># mapping between SAML attributes and User fields</span>
    <span class="s1">&#39;saml_attribute_mapping&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="c1"># organization responsible for the service</span>
    <span class="c1"># you can set multilanguage information here</span>
    <span class="s1">&#39;organization&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="c1"># links to the entity categories</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">COC</span><span class="p">],</span>
    <span class="c1"># attributes required by CoC</span>
    <span class="c1"># https://wiki.refeds.org/display/CODE/SAML+2+Profile+for+the+Data+Protection+Code+of+Conduct</span>
    <span class="s1">&#39;privacy_statement_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/privacy-policy/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Service provider display name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Service provider description&#39;</span><span class="p">,</span>
    <span class="c1"># mdpi attributes</span>
    <span class="s1">&#39;registration_policy&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/registration-policy/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;registration_authority&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/registration-authority/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;registration_instant&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s1">&#39;ENABLE_SINGLE_LOGOUT&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;ALLOW_TO_SELECT_IDENTITY_PROVIDER&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;IDENTITY_PROVIDER_URL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;IDENTITY_PROVIDER_LABEL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;DEFAULT_BINDING&#39;</span><span class="p">:</span> <span class="n">saml2</span><span class="o">.</span><span class="n">BINDING_HTTP_POST</span><span class="p">,</span>
    <span class="s1">&#39;DISCOVERY_SERVICE_URL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;DISCOVERY_SERVICE_LABEL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-identities-edugain-example-of-generated-metadata">Example of generated metadata</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ns0:EntityDescriptor</span><span class="w"> </span><span class="na">xmlns:ns0=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:metadata&quot;</span><span class="w"> </span><span class="na">xmlns:ns1=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:attribute&quot;</span><span class="w"> </span><span class="na">xmlns:ns2=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span><span class="w"> </span><span class="na">xmlns:ns4=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:algsupport&quot;</span><span class="w"> </span><span class="na">xmlns:ns5=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:rpi&quot;</span><span class="w"> </span><span class="na">xmlns:ns6=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:ui&quot;</span><span class="w"> </span><span class="na">xmlns:ns7=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#&quot;</span><span class="w"> </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="w"> </span><span class="na">entityID=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/metadata/&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;ns0:Extensions&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns1:EntityAttributes&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns2:Attribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;http://macedir.org/entity-category&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;ns2:AttributeValue</span><span class="w"> </span><span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="w"> </span><span class="na">xsi:type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>http://www.geant.net/uri/dataprotection-code-of-conduct/v1<span class="nt">&lt;/ns2:AttributeValue&gt;</span>
<span class="w">         </span><span class="nt">&lt;/ns2:Attribute&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ns1:EntityAttributes&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:DigestMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:DigestMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#sha224&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:DigestMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:DigestMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#sha384&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:DigestMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmlenc#sha512&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#dsa-sha1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2009/xmldsig11#dsa-sha256&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha224&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha224&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha384&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns4:SigningMethod</span><span class="w"> </span><span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha512&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns5:RegistrationInfo</span><span class="w"> </span><span class="na">registrationAuthority=</span><span class="s">&quot;http://taat.edu.ee&quot;</span><span class="w"> </span><span class="na">registrationInstant=</span><span class="s">&quot;2017-01-01T00:00:00&quot;</span><span class="nt">&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns5:RegistrationPolicy</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>http://taat.edu.ee/main/wp-content/uploads/Federation_Policy_1.3.pdf<span class="nt">&lt;/ns5:RegistrationPolicy&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ns5:RegistrationInfo&gt;</span>
<span class="w">   </span><span class="nt">&lt;/ns0:Extensions&gt;</span>
<span class="w">   </span><span class="nt">&lt;ns0:SPSSODescriptor</span><span class="w"> </span><span class="na">protocolSupportEnumeration=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span><span class="w"> </span><span class="na">AuthnRequestsSigned=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">WantAssertionsSigned=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:Extensions&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns6:UIInfo&gt;</span>
<span class="w">            </span><span class="nt">&lt;ns6:DisplayName</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS<span class="w"> </span>Self-Service<span class="nt">&lt;/ns6:DisplayName&gt;</span>
<span class="w">            </span><span class="nt">&lt;ns6:Description</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>Self-service<span class="w"> </span>for<span class="w"> </span>users<span class="w"> </span>of<span class="w"> </span>Estonian<span class="w"> </span>Scientific<span class="w"> </span>Computing<span class="w"> </span>Infrastructure<span class="w"> </span>(ETAIS)<span class="nt">&lt;/ns6:Description&gt;</span>
<span class="w">            </span><span class="nt">&lt;ns6:Logo&gt;</span>https://minu.etais.ee/login-logo.png<span class="nt">&lt;/ns6:Logo&gt;</span>
<span class="w">            </span><span class="nt">&lt;ns6:PrivacyStatementURL</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>https://minu.etais.ee/views/policy/privacy-full.html<span class="nt">&lt;/ns6:PrivacyStatementURL&gt;</span>
<span class="w">         </span><span class="nt">&lt;/ns6:UIInfo&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ns0:Extensions&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:KeyDescriptor</span><span class="w"> </span><span class="na">use=</span><span class="s">&quot;signing&quot;</span><span class="nt">&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns7:KeyInfo&gt;</span>
<span class="w">            </span><span class="nt">&lt;ns7:X509Data&gt;</span>
<span class="w">               </span><span class="nt">&lt;ns7:X509Certificate&gt;</span>MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV<span class="w"> </span>BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg<span class="w"> </span>Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw<span class="w"> </span>CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh<span class="w"> </span>dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA<span class="w"> </span>o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT<span class="w"> </span>xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44<span class="w"> </span>tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p<span class="w"> </span>fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB<span class="w"> </span>iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN<span class="w"> </span>Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD<span class="w"> </span>ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T<span class="w"> </span>BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV<span class="w"> </span>AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2<span class="w"> </span>fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj<span class="w"> </span>B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu<span class="w"> </span>VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq<span class="w"> </span>I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew==<span class="nt">&lt;/ns7:X509Certificate&gt;</span>
<span class="w">            </span><span class="nt">&lt;/ns7:X509Data&gt;</span>
<span class="w">         </span><span class="nt">&lt;/ns7:KeyInfo&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ns0:KeyDescriptor&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:KeyDescriptor</span><span class="w"> </span><span class="na">use=</span><span class="s">&quot;encryption&quot;</span><span class="nt">&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns7:KeyInfo&gt;</span>
<span class="w">            </span><span class="nt">&lt;ns7:X509Data&gt;</span>
<span class="w">               </span><span class="nt">&lt;ns7:X509Certificate&gt;</span>MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV<span class="w"> </span>BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg<span class="w"> </span>Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw<span class="w"> </span>CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh<span class="w"> </span>dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA<span class="w"> </span>o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT<span class="w"> </span>xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44<span class="w"> </span>tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p<span class="w"> </span>fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB<span class="w"> </span>iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN<span class="w"> </span>Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD<span class="w"> </span>ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T<span class="w"> </span>BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV<span class="w"> </span>AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2<span class="w"> </span>fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj<span class="w"> </span>B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu<span class="w"> </span>VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq<span class="w"> </span>I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew==<span class="nt">&lt;/ns7:X509Certificate&gt;</span>
<span class="w">            </span><span class="nt">&lt;/ns7:X509Data&gt;</span>
<span class="w">         </span><span class="nt">&lt;/ns7:KeyInfo&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ns0:KeyDescriptor&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:SingleLogoutService</span><span class="w"> </span><span class="na">Binding=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect&quot;</span><span class="w"> </span><span class="na">Location=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/logout/complete/&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:SingleLogoutService</span><span class="w"> </span><span class="na">Binding=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot;</span><span class="w"> </span><span class="na">Location=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/logout/complete/&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:AssertionConsumerService</span><span class="w"> </span><span class="na">Binding=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot;</span><span class="w"> </span><span class="na">Location=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/login/complete/&quot;</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:AttributeConsumingService</span><span class="w"> </span><span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:ServiceName</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS<span class="w"> </span>Self-Service<span class="nt">&lt;/ns0:ServiceName&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:RequestedAttribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;urn:mace:dir:attribute-def:cn&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="w"> </span><span class="na">FriendlyName=</span><span class="s">&quot;cn&quot;</span><span class="w"> </span><span class="na">isRequired=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:RequestedAttribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;urn:oid:0.9.2342.19200300.100.1.3&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="w"> </span><span class="na">FriendlyName=</span><span class="s">&quot;mail&quot;</span><span class="w"> </span><span class="na">isRequired=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:RequestedAttribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;schacPersonalUniqueID&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="w"> </span><span class="na">isRequired=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:RequestedAttribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;urn:oid:1.3.6.1.4.1.5923.1.1.1.6&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="w"> </span><span class="na">FriendlyName=</span><span class="s">&quot;eduPersonPrincipalName&quot;</span><span class="w"> </span><span class="na">isRequired=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:RequestedAttribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;schacHomeOrganization&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="w"> </span><span class="na">isRequired=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:RequestedAttribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;urn:oid:2.16.840.1.113730.3.1.39&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="w"> </span><span class="na">FriendlyName=</span><span class="s">&quot;preferredLanguage&quot;</span><span class="w"> </span><span class="na">isRequired=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">         </span><span class="nt">&lt;ns0:RequestedAttribute</span><span class="w"> </span><span class="na">Name=</span><span class="s">&quot;urn:oid:1.3.6.1.4.1.5923.1.1.1.9&quot;</span><span class="w"> </span><span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="w"> </span><span class="na">FriendlyName=</span><span class="s">&quot;eduPersonScopedAffiliation&quot;</span><span class="w"> </span><span class="na">isRequired=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ns0:AttributeConsumingService&gt;</span>
<span class="w">   </span><span class="nt">&lt;/ns0:SPSSODescriptor&gt;</span>
<span class="w">   </span><span class="nt">&lt;ns0:Organization&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:OrganizationName</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;et&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationName&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:OrganizationName</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationName&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:OrganizationDisplayName</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;et&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationDisplayName&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:OrganizationDisplayName</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationDisplayName&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:OrganizationURL</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;et&quot;</span><span class="nt">&gt;</span>http://etais.ee/<span class="nt">&lt;/ns0:OrganizationURL&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:OrganizationURL</span><span class="w"> </span><span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>http://etais.ee/<span class="nt">&lt;/ns0:OrganizationURL&gt;</span>
<span class="w">   </span><span class="nt">&lt;/ns0:Organization&gt;</span>
<span class="w">   </span><span class="nt">&lt;ns0:ContactPerson</span><span class="w"> </span><span class="na">contactType=</span><span class="s">&quot;technical&quot;</span><span class="nt">&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:GivenName&gt;</span>Administrator<span class="nt">&lt;/ns0:GivenName&gt;</span>
<span class="w">      </span><span class="nt">&lt;ns0:EmailAddress&gt;</span>etais@etais.ee<span class="nt">&lt;/ns0:EmailAddress&gt;</span>
<span class="w">   </span><span class="nt">&lt;/ns0:ContactPerson&gt;</span>
<span class="nt">&lt;/ns0:EntityDescriptor&gt;</span>
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-identities-edugain-adding-trusted-identity-providers">Adding trusted identity providers</h2>
<p>In order to configure Waldur to use SAML2 authentication you should specify identity provider metadata.</p>
<ul>
<li>If metadata XML is stored locally, it is cached in the local SQL database. Usually metadata XML file is big, so it
  is necessary to use local cache in this case. But you should ensure that metadata XML file is refreshed via cron
  on a regular basis. A management command <code>waldur sync_saml2_providers</code> performs refreshing of the data.</li>
<li>If metadata XML is accessed remotely, it is not cached in SQL database. Therefore you should ensure that metadata
  XML is small enough. In this case you should download metadata signing certificate locally and specify its path in
  Waldur configuration. The certificate is used to retrieve the metadata securely. Please note that security
  certificates are updated regularly, therefore you should update configuration whenever certificate is updated.
  By convention, both metadata signing certificate and metadata itself are downloaded to <code>/etc/waldur/saml2</code> in
  Waldur Mastermind instances.</li>
</ul>
<h2 id="admin-guide-identities-edugain-references">References</h2>
<h3 id="admin-guide-identities-edugain-taat-configuration">TAAT configuration</h3>
<p>TaaT certificates can be downloaded from: <a href="http://taat.edu.ee/main/dokumendid/sertifikaadid/">http://taat.edu.ee/main/dokumendid/sertifikaadid/</a>.</p>
<p>Metadata URL for test hub is <a href="https://reos.taat.edu.ee/saml2/idp/metadata.php">https://reos.taat.edu.ee/saml2/idp/metadata.php</a>
and for production hub is <a href="https://sarvik.taat.edu.ee/saml2/idp/metadata.php">https://sarvik.taat.edu.ee/saml2/idp/metadata.php</a>.
Note, the certificate must correspond to the hub you want connect to.</p>
<h4 id="admin-guide-identities-edugain-using-janus">Using Janus</h4>
<p><a href="https://taeva.taat.edu.ee/module.php/janus/index.php">Janus</a> is a self-service for managing Service Provider records.</p>
<ul>
<li>Create a new connection:</li>
</ul>
<p><a href="../admin-guide/identities/img/janus-add-new.png"><img alt="Janus" src="../admin-guide/identities/img/janus-add-new.png" /></a></p>
<p>New connection ID must be equal to the base_url in saml.conf.py + /apu-auth/saml2/metadata/</p>
<ul>
<li>Choose SAML 2.0 SP for connection type.</li>
<li>Click Create button</li>
<li>In connection tab select or create ARP. Fields that ARP include must be in the saml_attribute_mapping.</li>
<li>Navigate to the Import metadata tab and paste same URL as in the first step. Click on the Get metadata.</li>
<li>Navigate to the Validate tab and check whether all the tests pass. You can fix metadata in Metadata tab.</li>
</ul>
<h2 id="admin-guide-identities-edugain-haka-configuration">HAKA configuration</h2>
<p>Production hub metadata is described at <a href="https://wiki.eduuni.fi/display/CSCHAKA/Haka+metadata">https://wiki.eduuni.fi/display/CSCHAKA/Haka+metadata</a>.</p>
<p>Test hub metadata is described at <a href="https://wiki.eduuni.fi/display/CSCHAKA/Verifying+Haka+compatibility">https://wiki.eduuni.fi/display/CSCHAKA/Verifying+Haka+compatibility</a>.</p>
<h2 id="admin-guide-identities-edugain-fedi-configuration">FEDI configuration</h2>
<p>Production hub metadata is described at <a href="https://fedi.litnet.lt/en/metadata">https://fedi.litnet.lt/en/metadata</a>.</p>
<p>Discovery is supported: <a href="https://discovery.litnet.lt/simplesaml/module.php/discopower/disco.php">https://discovery.litnet.lt/simplesaml/module.php/discopower/disco.php</a>.</p></section><section class="print-page" id="admin-guide-identities-eduteams"><h1 id="admin-guide-identities-eduteams-eduteams">eduTEAMS</h1>
<p>Waldur supports integration with <a href="http://keycloak.org/">eduTEAMS</a> identity service.</p>
<p>To enable it, please <a href="https://wiki.geant.org/display/eduTEAMS/Registering+services+on+the+eduTEAMS+Service">register a new client</a>
for Waldur deployment and set configuration settings for eduTEAMS.
Check <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a> for available settings.</p>
<h2 id="admin-guide-identities-eduteams-fetch-user-data-using-cuid-of-a-user">Fetch user data using CUID of a user</h2>
<p>You can use CUID of user in order to fetch user permissions. <a href="#integrator-guide-apis-permissions">This file</a> describes how to perform it, you only need to provide CUID as a username.</p></section><section class="print-page" id="admin-guide-identities-freeipa"><h1 id="admin-guide-identities-freeipa-freeipa">FreeIPA</h1>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For integrating FreeIPA as source of identities, please see <a href="#admin-guide-identities-ldap">LDAP</a>.
This module is about synchronising users from Waldur to FreeIPA</p>
</div>
<p>For situations when you would like to provide access to services based on the Linux usernames, e.g. for SLURM
deployments, you might want to map users from Waldur (e.g. created through eduGAIN) to an external FreeIPA service.</p>
<p>To do that, you need to enable module and define settings for accessing FreeIPA REST APIs. See
<a href="#admin-guide-mastermind-configuration-configuration-guide">Waldur configuration guide</a> for the list of supported FreeIPA
settings.</p>
<p>At the moment at most one deployment of FreeIPA per Waldur is supported.</p></section><section class="print-page" id="admin-guide-identities-keycloak"><h1 id="admin-guide-identities-keycloak-keycloak">Keycloak</h1>
<p>Waldur supports integration with <a href="http://keycloak.org/">Keycloak</a> identity manager.</p>
<p>Below is a guide to configure Keycloak OpenID Connect client and Waldur intergration.</p>
<h2 id="admin-guide-identities-keycloak-configuring-keycloak">Configuring Keycloak</h2>
<p>Instructions below are aimed to provide a basic configuration of Keycloak, please refer to Keycloak documentation for full details.</p>
<ol>
<li>Login to admin interface of Keycloak.</li>
<li>Create a new realm (or use existing)
 <a href="../admin-guide/identities/img/keycloak-add-realm.png"><img alt="New realm" src="../admin-guide/identities/img/keycloak-add-realm.png" /></a></li>
<li>Open a menu with a list of clients.
 <a href="../admin-guide/identities/img/keycloak-client-list.png"><img alt="List clients" src="../admin-guide/identities/img/keycloak-client-list.png" /></a></li>
<li>Add a new client for Waldur.
 <a href="../admin-guide/identities/img/keycloak-add-client.png"><img alt="Add client" src="../admin-guide/identities/img/keycloak-add-client.png" /></a></li>
<li>Change client's access type to "confidential".
 <a href="../admin-guide/identities/img/keycloak-client-access-type.png"><img alt="Set access type" src="../admin-guide/identities/img/keycloak-client-access-type.png" /></a></li>
<li>Change client's Valid redirect URIs to "*".
 <a href="../admin-guide/identities/img/keycloak-client-redirect.png"><img alt="Valid redirect URIs" src="../admin-guide/identities/img/keycloak-client-redirect.png" /></a></li>
<li>You can get secret code for the client configuration
 <a href="../admin-guide/identities/img/keycloak-client-secret.png"><img alt="Secret code" src="../admin-guide/identities/img/keycloak-client-secret.png" /></a></li>
<li>You can find the settings required for configuration of Waldur under the following path on your Keycloak deployment (change <code>test-waldur</code> to the realm that you are using):  <code>/auth/realms/test-waldur/.well-known/openid-configuration</code></li>
</ol>
<h2 id="admin-guide-identities-keycloak-configuring-waldur">Configuring Waldur</h2>
<ol>
<li>
<p>Add Keycloak related configuration to Mastermind's <code>override.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_AUTH_SOCIAL</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;KEYCLOAK_AUTH_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://KEYCLOAK_ADDRESS:8080/auth/realms/test-waldur/.well-known/openid-configuration&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;CLIENT_ID&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;SECRET&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_TOKEN_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://KEYCLOAK_ADDRESS:8080/auth/realms/test-waldur/protocol/openid-connect/token&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_USERINFO_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://KEYCLOAK_ADDRESS:8080/auth/realms/test-waldur/protocol/openid-connect/userinfo&#39;</span>
<span class="p">})</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Make sure <code>SOCIAL_SIGNUP</code> is added to the list of available authentication methods:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_CORE</span><span class="p">[</span><span class="s1">&#39;AUTHENTICATION_METHODS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;LOCAL_SIGNIN&quot;</span><span class="p">,</span> <span class="s2">&quot;SOCIAL_SIGNUP&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Full Keycloak related configuration settings are available at <a href="#admin-guide-mastermind-configuration-configuration-guide">Mastermind configuration file reference</a></p>
</li>
</ol></section><section class="print-page" id="admin-guide-identities-summary"><h1 id="admin-guide-identities-summary-summary">Summary</h1>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Protocol</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#admin-guide-identities-edugain">eduGAIN</a></td>
<td>SAML</td>
<td>Federation of research and educational providers supported by Geant</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-eduteams">eduTEAMS</a></td>
<td>OIDC</td>
<td>Group management service integrated with research and educational providers provided by Geant</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-freeipa">FreeIPA</a></td>
<td>REST API</td>
<td>Support for synchronisation of Waldur identities with open-source Identity Management server</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-keycloak">Keycloak</a></td>
<td>OIDC</td>
<td>Open-source identity management server</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-ldap">LDAP</a></td>
<td>LDAP/S</td>
<td>Support of identity servers over LDAP protocol</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-tara">TARA</a></td>
<td>OIDC</td>
<td>Estonian State Autentication service</td>
</tr>
</tbody>
</table></section><h1 class='nav-section-title-end'>Ended: Identities</h1>
                        <h2 class='nav-section-title' id='section-mastermind-configuration'>
                            Mastermind configuration <a class='headerlink' href='#section-mastermind-configuration' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="admin-guide-mastermind-configuration-cli-guide"><h1 id="admin-guide-mastermind-configuration-cli-guide-cli-guide">CLI guide</h1>
<h2 id="admin-guide-mastermind-configuration-cli-guide-axes_list_attempts">axes_list_attempts</h2>
<p>List access attempts</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-axes_reset">axes_reset</h2>
<p>Reset all access attempts and lockouts</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-axes_reset_failure_logs">axes_reset_failure_logs</h2>
<p>Reset access failure log records older than given days.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>axes_reset_failure_logs<span class="w"> </span><span class="o">[</span>--age<span class="w"> </span>AGE<span class="o">]</span>

options:
<span class="w">  </span>--age<span class="w"> </span>AGE<span class="w">  </span>Maximum<span class="w"> </span>age<span class="w"> </span><span class="k">for</span><span class="w"> </span>records<span class="w"> </span>to<span class="w"> </span>keep<span class="w"> </span><span class="k">in</span><span class="w"> </span>days
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-axes_reset_ip">axes_reset_ip</h2>
<p>Reset all access attempts and lockouts for given IP addresses</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>axes_reset_ip<span class="w"> </span>ip<span class="w"> </span><span class="o">[</span>ip<span class="w"> </span>...<span class="o">]</span>

positional<span class="w"> </span>arguments:
<span class="w">  </span>ip
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-axes_reset_logs">axes_reset_logs</h2>
<p>Reset access log records older than given days.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>axes_reset_logs<span class="w"> </span><span class="o">[</span>--age<span class="w"> </span>AGE<span class="o">]</span>

options:
<span class="w">  </span>--age<span class="w"> </span>AGE<span class="w">  </span>Maximum<span class="w"> </span>age<span class="w"> </span><span class="k">for</span><span class="w"> </span>records<span class="w"> </span>to<span class="w"> </span>keep<span class="w"> </span><span class="k">in</span><span class="w"> </span>days
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-axes_reset_username">axes_reset_username</h2>
<p>Reset all access attempts and lockouts for given usernames</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>axes_reset_username<span class="w"> </span>username<span class="w"> </span><span class="o">[</span>username<span class="w"> </span>...<span class="o">]</span>

positional<span class="w"> </span>arguments:
<span class="w">  </span>username
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-clean_settings_cache">clean_settings_cache</h2>
<p>Clean API configuration settings cache.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-cleanup_stale_event_types">cleanup_stale_event_types</h2>
<p>Cleanup stale event types in all hooks.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-copy_category">copy_category</h2>
<p>Copy structure of categories for the Marketplace</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>copy_category<span class="w"> </span>source_category_uuid<span class="w"> </span>target_category_uuid

positional<span class="w"> </span>arguments:
<span class="w">  </span>source_category_uuid<span class="w">  </span>UUID<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>category<span class="w"> </span>to<span class="w"> </span>copy<span class="w"> </span>metadata<span class="w"> </span>from
<span class="w">  </span>target_category_uuid<span class="w">  </span>UUID<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>category<span class="w"> </span>to<span class="w"> </span>copy<span class="w"> </span>metadata<span class="w"> </span>to
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-create_provider">create_provider</h2>
<p>Create a service provider with a linked customer and load categories</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>create_provider<span class="w"> </span><span class="o">[</span>-n<span class="w"> </span>N<span class="o">]</span><span class="w"> </span><span class="o">[</span>-c<span class="w"> </span>C<span class="w"> </span><span class="o">[</span>C<span class="w"> </span>...<span class="o">]]</span>

options:
<span class="w">  </span>-n<span class="w"> </span>N<span class="w">          </span>Customer<span class="w"> </span>name
<span class="w">  </span>-c<span class="w"> </span>C<span class="w"> </span><span class="o">[</span>C<span class="w"> </span>...<span class="o">]</span><span class="w">  </span>List<span class="w"> </span>of<span class="w"> </span>categories<span class="w"> </span>to<span class="w"> </span>load
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-createstaffuser">createstaffuser</h2>
<p>Create a user with a specified username and password. User will be created as staff.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>createstaffuser<span class="w"> </span>-u<span class="w"> </span>USERNAME<span class="w"> </span>-p<span class="w"> </span>PASSWORD<span class="w"> </span>-e<span class="w"> </span>EMAIL

options:
<span class="w">  </span>-u<span class="w"> </span>USERNAME,<span class="w"> </span>--username<span class="w"> </span>USERNAME
<span class="w">  </span>-p<span class="w"> </span>PASSWORD,<span class="w"> </span>--password<span class="w"> </span>PASSWORD
<span class="w">  </span>-e<span class="w"> </span>EMAIL,<span class="w"> </span>--email<span class="w"> </span>EMAIL
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-drop_leftover_openstack_projects">drop_leftover_openstack_projects</h2>
<p>Drop leftover projects from remote OpenStack deployment.
  Leftovers are resources marked as terminated in Waldur but still present in the remote OpenStack.
  Such inconsistency may be caused by split brain problem in the distributed database.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>drop_leftover_openstack_projects<span class="w"> </span><span class="o">[</span>--offering<span class="w"> </span>OFFERING<span class="o">]</span>
<span class="w">                                               </span><span class="o">[</span>--dry-run<span class="o">]</span><span class="w"> </span><span class="o">[</span>--fuzzy-matching<span class="o">]</span>

options:
<span class="w">  </span>--offering<span class="w"> </span>OFFERING<span class="w">  </span>Target<span class="w"> </span>marketplace<span class="w"> </span>offering<span class="w"> </span>name<span class="w"> </span>where<span class="w"> </span>leftover
<span class="w">                       </span>projects<span class="w"> </span>are<span class="w"> </span>located.
<span class="w">  </span>--dry-run<span class="w">            </span>Don<span class="err">&#39;</span>t<span class="w"> </span>make<span class="w"> </span>any<span class="w"> </span>changes,<span class="w"> </span>instead<span class="w"> </span>show<span class="w"> </span>what<span class="w"> </span>projects
<span class="w">                       </span>would<span class="w"> </span>be<span class="w"> </span>deleted.
<span class="w">  </span>--fuzzy-matching<span class="w">     </span>Try<span class="w"> </span>to<span class="w"> </span>detect<span class="w"> </span>leftovers<span class="w"> </span>by<span class="w"> </span>name.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-dumpusers">dumpusers</h2>
<p>Dumps information about users, their organizations and projects.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>dumpusers<span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT<span class="o">]</span>

options:
<span class="w">  </span>-o<span class="w"> </span>OUTPUT,<span class="w"> </span>--output<span class="w"> </span>OUTPUT
<span class="w">                        </span>Specifies<span class="w"> </span>file<span class="w"> </span>to<span class="w"> </span>which<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>is<span class="w"> </span>written.<span class="w"> </span>The
<span class="w">                        </span>output<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>printed<span class="w"> </span>to<span class="w"> </span>stdout<span class="w"> </span>by<span class="w"> </span>default.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-export_ami_catalog">export_ami_catalog</h2>
<p>Export catalog of Amazon images.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-export_auth_social">export_auth_social</h2>
<p>Export OIDC auth configuration as YAML format</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>export_auth_social<span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT<span class="o">]</span>

options:
<span class="w">  </span>-o<span class="w"> </span>OUTPUT,<span class="w"> </span>--output<span class="w"> </span>OUTPUT
<span class="w">                        </span>Specifies<span class="w"> </span>file<span class="w"> </span>to<span class="w"> </span>which<span class="w"> </span>the<span class="w"> </span>output<span class="w"> </span>is<span class="w"> </span>written.<span class="w"> </span>The
<span class="w">                        </span>output<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>printed<span class="w"> </span>to<span class="w"> </span>stdout<span class="w"> </span>by<span class="w"> </span>default.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-export_offering">export_offering</h2>
<p>Export an offering from Waldur. Export data includes JSON file with an offering data and a thumbnail. Names of this files include offering ID.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>export_offering<span class="w"> </span>-o<span class="w"> </span>OFFERING<span class="w"> </span>-p<span class="w"> </span>PATH

options:
<span class="w">  </span>-o<span class="w"> </span>OFFERING,<span class="w"> </span>--offering<span class="w"> </span>OFFERING
<span class="w">                        </span>An<span class="w"> </span>offering<span class="w"> </span>UUID.
<span class="w">  </span>-p<span class="w"> </span>PATH,<span class="w"> </span>--path<span class="w"> </span>PATH<span class="w">  </span>Path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>folder<span class="w"> </span>where<span class="w"> </span>the<span class="w"> </span><span class="nb">export</span><span class="w"> </span>data<span class="w"> </span>will<span class="w"> </span>be
<span class="w">                        </span>saved.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_ami_catalog">import_ami_catalog</h2>
<p>Import catalog of Amazon images.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>import_ami_catalog<span class="w"> </span><span class="o">[</span>-y<span class="o">]</span><span class="w"> </span>FILE

positional<span class="w"> </span>arguments:
<span class="w">  </span>FILE<span class="w">       </span>AMI<span class="w"> </span>catalog<span class="w"> </span>file.

options:
<span class="w">  </span>-y,<span class="w"> </span>--yes<span class="w">  </span>The<span class="w"> </span>answer<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>question<span class="w"> </span>which<span class="w"> </span>would<span class="w"> </span>be<span class="w"> </span>asked<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>yes.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_auth_social">import_auth_social</h2>
<p>Import OIDC auth configuration in YAML format. The example of auth.yaml:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>- provider: &quot;keycloak&quot;   # OIDC identity provider in string format. Valid values are: &quot;tara&quot;, &quot;eduteams&quot;, &quot;keycloak&quot;.
  label: &quot;Keycloak&quot;    # Human-readable IdP name.
  client_id: &quot;waldur&quot;   # A string used in OIDC requests for client identification.
  client_secret: OIDC_CLIENT_SECRET
  discovery_url: &quot;http://localhost/auth/realms/YOUR_KEYCLOAK_REALM/.well-known/openid-configuration&quot; # OIDC discovery endpoint.
  management_url: &quot;&quot;   # Endpoint for user details management.
  protected_fields:    # User fields that are imported from IdP.
    - &quot;full_name&quot;
    - &quot;email&quot;
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>import_auth_social<span class="w"> </span>auth_file

positional<span class="w"> </span>arguments:
<span class="w">  </span>auth_file<span class="w">  </span>Specifies<span class="w"> </span>location<span class="w"> </span>of<span class="w"> </span>auth<span class="w"> </span>configuration<span class="w"> </span>file.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_azure_image">import_azure_image</h2>
<p>Import Azure image</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>import_azure_image<span class="w"> </span><span class="o">[</span>--sku<span class="w"> </span>SKU<span class="o">]</span><span class="w"> </span><span class="o">[</span>--publisher<span class="w"> </span>PUBLISHER<span class="o">]</span>
<span class="w">                                 </span><span class="o">[</span>--offer<span class="w"> </span>OFFER<span class="o">]</span>

options:
<span class="w">  </span>--sku<span class="w"> </span>SKU
<span class="w">  </span>--publisher<span class="w"> </span>PUBLISHER
<span class="w">  </span>--offer<span class="w"> </span>OFFER
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_marketplace_orders">import_marketplace_orders</h2>
<p>Create marketplace order for each resource if it does not yet exist.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_offering">import_offering</h2>
<p>Import or update an offering in Waldur. You must define offering for updating or category and customer for creating.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>import_offering<span class="w"> </span>-p<span class="w"> </span>PATH<span class="w"> </span><span class="o">[</span>-c<span class="w"> </span>CUSTOMER<span class="o">]</span><span class="w"> </span><span class="o">[</span>-ct<span class="w"> </span>CATEGORY<span class="o">]</span>
<span class="w">                              </span><span class="o">[</span>-o<span class="w"> </span>OFFERING<span class="o">]</span>

options:
<span class="w">  </span>-p<span class="w"> </span>PATH,<span class="w"> </span>--path<span class="w"> </span>PATH<span class="w">  </span>File<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>offering<span class="w"> </span>data.
<span class="w">  </span>-c<span class="w"> </span>CUSTOMER,<span class="w"> </span>--customer<span class="w"> </span>CUSTOMER
<span class="w">                        </span>Customer<span class="w"> </span>UUID.
<span class="w">  </span>-ct<span class="w"> </span>CATEGORY,<span class="w"> </span>--category<span class="w"> </span>CATEGORY
<span class="w">                        </span>Category<span class="w"> </span>UUID.
<span class="w">  </span>-o<span class="w"> </span>OFFERING,<span class="w"> </span>--offering<span class="w"> </span>OFFERING
<span class="w">                        </span>Updated<span class="w"> </span>offering<span class="w"> </span>UUID.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_reppu_usages">import_reppu_usages</h2>
<p>Import component usages from Reppu for a specified year and month.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>import_reppu_usages<span class="w"> </span><span class="o">[</span>-m<span class="w"> </span>MONTH<span class="o">]</span><span class="w"> </span><span class="o">[</span>-y<span class="w"> </span>YEAR<span class="o">]</span>
<span class="w">                                  </span><span class="o">[</span>--reppu-api-url<span class="w"> </span>REPPU_API_URL<span class="o">]</span>
<span class="w">                                  </span><span class="o">[</span>--reppu-api-token<span class="w"> </span>REPPU_API_TOKEN<span class="o">]</span>
<span class="w">                                  </span><span class="o">[</span>--dry-run<span class="w"> </span><span class="p">|</span><span class="w"> </span>--no-dry-run<span class="o">]</span>

options:
<span class="w">  </span>-m<span class="w"> </span>MONTH,<span class="w"> </span>--month<span class="w"> </span>MONTH
<span class="w">                        </span>Month<span class="w"> </span><span class="k">for</span><span class="w"> </span>which<span class="w"> </span>data<span class="w"> </span>is<span class="w"> </span>imported.
<span class="w">  </span>-y<span class="w"> </span>YEAR,<span class="w"> </span>--year<span class="w"> </span>YEAR<span class="w">  </span>Year<span class="w"> </span><span class="k">for</span><span class="w"> </span>which<span class="w"> </span>data<span class="w"> </span>is<span class="w"> </span>imported.
<span class="w">  </span>--reppu-api-url<span class="w"> </span>REPPU_API_URL
<span class="w">                        </span>Reppu<span class="w"> </span>API<span class="w"> </span>URL.
<span class="w">  </span>--reppu-api-token<span class="w"> </span>REPPU_API_TOKEN
<span class="w">                        </span>Reppu<span class="w"> </span>API<span class="w"> </span>Token.
<span class="w">  </span>--dry-run,<span class="w"> </span>--no-dry-run
<span class="w">                        </span>Dry<span class="w"> </span>run<span class="w"> </span>mode.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_roles">import_roles</h2>
<p>Import roles configuration in YAML format</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>import_roles<span class="w"> </span>roles_file

positional<span class="w"> </span>arguments:
<span class="w">  </span>roles_file<span class="w">  </span>Specifies<span class="w"> </span>location<span class="w"> </span>of<span class="w"> </span>roles<span class="w"> </span>configuration<span class="w"> </span>file.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-import_tenant_quotas">import_tenant_quotas</h2>
<p>Import OpenStack tenant quotas to marketplace.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>import_tenant_quotas<span class="w"> </span><span class="o">[</span>--dry-run<span class="o">]</span>

options:
<span class="w">  </span>--dry-run<span class="w">  </span>Don<span class="err">&#39;</span>t<span class="w"> </span>make<span class="w"> </span>any<span class="w"> </span>changes,<span class="w"> </span>instead<span class="w"> </span>show<span class="w"> </span>what<span class="w"> </span>objects<span class="w"> </span>would<span class="w"> </span>be
<span class="w">             </span>created.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-initsecuritygroups">initsecuritygroups</h2>
<p>Add default security groups with given names to all tenants.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>initsecuritygroups<span class="w"> </span>names<span class="w"> </span><span class="o">[</span>names<span class="w"> </span>...<span class="o">]</span>

positional<span class="w"> </span>arguments:
<span class="w">  </span>names
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-load_categories">load_categories</h2>
<p>Loads a categories for the Marketplace</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>load_categories<span class="w"> </span>category<span class="w"> </span><span class="o">[</span>category<span class="w"> </span>...<span class="o">]</span>

positional<span class="w"> </span>arguments:
<span class="w">  </span>category<span class="w">  </span>List<span class="w"> </span>of<span class="w"> </span>categories<span class="w"> </span>to<span class="w"> </span>load
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-load_features">load_features</h2>
<p>Import features in JSON format</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>load_features<span class="w"> </span><span class="o">[</span>--dry-run<span class="o">]</span><span class="w"> </span>features_file

positional<span class="w"> </span>arguments:
<span class="w">  </span>features_file<span class="w">  </span>Specifies<span class="w"> </span>location<span class="w"> </span>of<span class="w"> </span>features<span class="w"> </span>file.

options:
<span class="w">  </span>--dry-run<span class="w">      </span>Don<span class="err">&#39;</span>t<span class="w"> </span>make<span class="w"> </span>any<span class="w"> </span>changes,<span class="w"> </span>instead<span class="w"> </span>show<span class="w"> </span>what<span class="w"> </span>objects<span class="w"> </span>would<span class="w"> </span>be
<span class="w">                 </span>created.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-load_notifications">load_notifications</h2>
<p>Import notifications to DB</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>load_notifications<span class="w"> </span>notifications_file

positional<span class="w"> </span>arguments:
<span class="w">  </span>notifications_file<span class="w">  </span>Specifies<span class="w"> </span>location<span class="w"> </span>of<span class="w"> </span>notifications<span class="w"> </span>file.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-load_user_agreements">load_user_agreements</h2>
<p>Imports privacy policy and terms of service into DB</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>load_user_agreements<span class="w"> </span><span class="o">[</span>-tos<span class="w"> </span>TOS<span class="o">]</span><span class="w"> </span><span class="o">[</span>-pp<span class="w"> </span>PP<span class="o">]</span><span class="w"> </span><span class="o">[</span>-f<span class="w"> </span>FORCE<span class="o">]</span>

options:
<span class="w">  </span>-tos<span class="w"> </span>TOS,<span class="w"> </span>--tos<span class="w"> </span>TOS<span class="w">   </span>Path<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>Terms<span class="w"> </span>of<span class="w"> </span>service<span class="w"> </span>file
<span class="w">  </span>-pp<span class="w"> </span>PP,<span class="w"> </span>--pp<span class="w"> </span>PP<span class="w">       </span>Path<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>Privacy<span class="w"> </span>policy<span class="w"> </span>file
<span class="w">  </span>-f<span class="w"> </span>FORCE,<span class="w"> </span>--force<span class="w"> </span>FORCE
<span class="w">                        </span>This<span class="w"> </span>flag<span class="w"> </span>means<span class="w"> </span>force<span class="w"> </span>loading<span class="w"> </span>agreements<span class="w"> </span>even<span class="w"> </span><span class="k">if</span><span class="w"> </span>they
<span class="w">                        </span>are<span class="w"> </span>already<span class="w"> </span>defined<span class="w"> </span><span class="k">in</span><span class="w"> </span>DB.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-move_project">move_project</h2>
<p>Move Waldur project to a different organization.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>move_project<span class="w"> </span>-p<span class="w"> </span>PROJECT_UUID<span class="w"> </span>-c<span class="w"> </span>CUSTOMER_UUID

options:
<span class="w">  </span>-p<span class="w"> </span>PROJECT_UUID,<span class="w"> </span>--project<span class="w"> </span>PROJECT_UUID
<span class="w">                        </span>UUID<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>project<span class="w"> </span>to<span class="w"> </span>move.
<span class="w">  </span>-c<span class="w"> </span>CUSTOMER_UUID,<span class="w"> </span>--customer<span class="w"> </span>CUSTOMER_UUID
<span class="w">                        </span>Target<span class="w"> </span>organization<span class="w"> </span>UUID
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-move_resource">move_resource</h2>
<p>Move a marketplace resource to a different project.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>move_resource<span class="w"> </span>-p<span class="w"> </span>PROJECT_UUID<span class="w"> </span>-r<span class="w"> </span>RESOURCE_UUID

options:
<span class="w">  </span>-p<span class="w"> </span>PROJECT_UUID,<span class="w"> </span>--project<span class="w"> </span>PROJECT_UUID
<span class="w">                        </span>Target<span class="w"> </span>project<span class="w"> </span>UUID
<span class="w">  </span>-r<span class="w"> </span>RESOURCE_UUID,<span class="w"> </span>--resource<span class="w"> </span>RESOURCE_UUID
<span class="w">                        </span>UUID<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>marketplace<span class="w"> </span>resource<span class="w"> </span>to<span class="w"> </span>move.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-override_constance_settings">override_constance_settings</h2>
<p>Override settings stored in django-constance. The example of .yaml file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w"> </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">WALDUR_SUPPORT_ENABLED</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span><span class="c1"># Enables support plugin</span>
<span class="w"> </span><span class="w w-Error"> </span><span class="nt">WALDUR_SUPPORT_ACTIVE_BACKEND_TYPE</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;zammad&#39;</span><span class="w"> </span><span class="c1"># Specifies zammad as service desk plugin</span>
<span class="w">  </span><span class="nt">ZAMMAD_API_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://zammad.example.com/api/&quot;</span><span class="w"> </span><span class="c1"># Specifies zammad API URL</span>
<span class="w">  </span><span class="nt">ZAMMAD_TOKEN</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1282361723491&quot;</span><span class="w"> </span><span class="c1"># Specifies zammad token</span>
<span class="w">  </span><span class="nt">ZAMMAD_GROUP</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default-group&quot;</span><span class="w"> </span><span class="c1"># Specifies zammad group</span>
<span class="w">  </span><span class="nt">ZAMMAD_ARTICLE_TYPE</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;email&quot;</span><span class="w"> </span><span class="c1"># Specifies zammad article type</span>
<span class="w">  </span><span class="nt">ZAMMAD_COMMENT_COOLDOWN_DURATION</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span><span class="w"> </span><span class="c1"># Specifies zammad comment cooldown duration</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>override_constance_settings<span class="w"> </span>constance_settings_file

positional<span class="w"> </span>arguments:
<span class="w">  </span>constance_settings_file
<span class="w">                        </span>Specifies<span class="w"> </span>location<span class="w"> </span>of<span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span>YAML<span class="w"> </span>format<span class="w"> </span>containing
<span class="w">                        </span>new<span class="w"> </span>settings
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-override_roles">override_roles</h2>
<p>Override roles configuration in YAML format. The example of roles-override.yaml:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>- role: CUSTOMER.OWNER
 description: &quot;Custom owner role&quot;
 is_active: True
 add_permissions:
  - OFFERING.CREATE
  - OFFERING.DELETE
  - OFFERING.UPDATE
 drop_permissions:
  - OFFERING.UPDATE_THUMBNAIL
  - OFFERING.UPDATE_ATTRIBUTES
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>override_roles<span class="w"> </span>roles_file

positional<span class="w"> </span>arguments:
<span class="w">  </span>roles_file<span class="w">  </span>Specifies<span class="w"> </span>location<span class="w"> </span>of<span class="w"> </span>roles<span class="w"> </span>configuration<span class="w"> </span>file.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-override_templates">override_templates</h2>
<p>Override templates</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>override_templates<span class="w"> </span><span class="o">[</span>-c<span class="w"> </span>CLEAN<span class="o">]</span><span class="w"> </span>templates_file

positional<span class="w"> </span>arguments:
<span class="w">  </span>templates_file<span class="w">        </span>Specifies<span class="w"> </span>location<span class="w"> </span>of<span class="w"> </span>templates<span class="w"> </span>file.

options:
<span class="w">  </span>-c<span class="w"> </span>CLEAN,<span class="w"> </span>--clean<span class="w"> </span>CLEAN
<span class="w">                        </span>This<span class="w"> </span>flag<span class="w"> </span>means<span class="w"> </span>total<span class="w"> </span>synchronization<span class="w"> </span>with<span class="w"> </span>the
<span class="w">                        </span>template<span class="w"> </span>file<span class="w"> </span>you<span class="w"> </span>pass.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-pgmigrate">pgmigrate</h2>
<p>Load data with disabled signals.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>pgmigrate<span class="w"> </span><span class="o">[</span>--path<span class="w"> </span>PATH<span class="o">]</span>

options:
<span class="w">  </span>--path<span class="w"> </span>PATH,<span class="w"> </span>-p<span class="w"> </span>PATH<span class="w">  </span>Path<span class="w"> </span>to<span class="w"> </span>dumped<span class="w"> </span>database.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-print_events_enums">print_events_enums</h2>
<p>Prints all event types as typescript enums.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-print_features_docs">print_features_docs</h2>
<p>Prints all Waldur feature toggles in markdown format.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-print_features_enums">print_features_enums</h2>
<p>Prints all Waldur feature toggles as typescript enums.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-print_notifications">print_notifications</h2>
<p>Prints Mastermind notifications with a description and templates</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-pull_openstack_volume_metadata">pull_openstack_volume_metadata</h2>
<p>Pull OpenStack volumes metadata to marketplace.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>pull_openstack_volume_metadata<span class="w"> </span><span class="o">[</span>--dry-run<span class="o">]</span>

options:
<span class="w">  </span>--dry-run<span class="w">  </span>Don<span class="err">&#39;</span>t<span class="w"> </span>make<span class="w"> </span>any<span class="w"> </span>changes,<span class="w"> </span>instead<span class="w"> </span>show<span class="w"> </span>what<span class="w"> </span>objects<span class="w"> </span>would<span class="w"> </span>be
<span class="w">             </span>created.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-pull_support_priorities">pull_support_priorities</h2>
<p>Pull priorities from support backend.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-pull_support_users">pull_support_users</h2>
<p>Pull users from support backend.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-push_tenant_quotas">push_tenant_quotas</h2>
<p>Push OpenStack tenant quotas from marketplace to backend.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>push_tenant_quotas<span class="w"> </span><span class="o">[</span>--dry-run<span class="o">]</span>

options:
<span class="w">  </span>--dry-run<span class="w">  </span>Don<span class="err">&#39;</span>t<span class="w"> </span>make<span class="w"> </span>any<span class="w"> </span>changes,<span class="w"> </span>instead<span class="w"> </span>show<span class="w"> </span>what<span class="w"> </span>objects<span class="w"> </span>would<span class="w"> </span>be
<span class="w">             </span>created.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-rebuild_billing">rebuild_billing</h2>
<p>Create or update price estimates based on invoices.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-removestalect">removestalect</h2>
<p>Remove Django event log records with stale content types.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-set_constance_image">set_constance_image</h2>
<p>A custom command to set Constance image configs with CLI</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>set_constance_image<span class="w"> </span>KEY<span class="w"> </span>PATH

positional<span class="w"> </span>arguments:
<span class="w">  </span>KEY<span class="w">   </span>Constance<span class="w"> </span>settings<span class="w"> </span>key
<span class="w">  </span>PATH<span class="w">  </span>Path<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>logo
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-status">status</h2>
<p>Check status of Waldur MasterMind configured services</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>usage:<span class="w"> </span>waldur<span class="w"> </span>status<span class="w"> </span><span class="o">[</span>--check-api-endpoints-at<span class="w"> </span>BASE_URL<span class="o">]</span>

options:
<span class="w">  </span>--check-api-endpoints-at<span class="w"> </span>BASE_URL
<span class="w">                        </span>Runs<span class="w"> </span>API<span class="w"> </span>endpoints<span class="w"> </span>check<span class="w"> </span>at<span class="w"> </span>specified<span class="w"> </span>base<span class="w"> </span>URL<span class="w"> </span><span class="o">(</span>i.e.
<span class="w">                        </span>http://example.com<span class="o">)</span>.<span class="w"> </span>If<span class="w"> </span>this<span class="w"> </span>argument<span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>provided,
<span class="w">                        </span>check<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>skipped.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-cli-guide-switching_backend_server">switching_backend_server</h2>
<p>Backend data update if a server was switched.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-sync_saml2_providers">sync_saml2_providers</h2>
<p>Synchronize SAML2 identity providers.</p>
<h2 id="admin-guide-mastermind-configuration-cli-guide-sync_users">sync_users</h2>
<p>Sync users from Waldur to Rancher.</p></section><section class="print-page" id="admin-guide-mastermind-configuration-configuration-guide"><h1 id="admin-guide-mastermind-configuration-configuration-guide-configuration-guide">Configuration guide</h1>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_auth_saml2-plugin">WALDUR_AUTH_SAML2 plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_AUTH_SAML2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ALLOW_TO_SELECT_IDENTITY_PROVIDER&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;ATTRIBUTE_MAP_DIR&#39;</span><span class="p">:</span> <span class="s1">&#39;/etc/waldur/saml2/attributemaps&#39;</span><span class="p">,</span>
 <span class="s1">&#39;AUTHN_REQUESTS_SIGNED&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
 <span class="s1">&#39;CATEGORIES&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;http://www.geant.net/uri/dataprotection-code-of-conduct/v1&#39;</span><span class="p">],</span>
 <span class="s1">&#39;CERT_FILE&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DEBUG&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;DEFAULT_BINDING&#39;</span><span class="p">:</span> <span class="s1">&#39;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DESCRIPTION&#39;</span><span class="p">:</span> <span class="s1">&#39;Service provider description&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DIGEST_ALGORITHM&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;DISCOVERY_SERVICE_LABEL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;DISCOVERY_SERVICE_URL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;DISPLAY_NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;Service provider display name&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_SINGLE_LOGOUT&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;IDENTITY_PROVIDER_LABEL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;IDENTITY_PROVIDER_URL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;IDP_METADATA_LOCAL&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;IDP_METADATA_REMOTE&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;KEY_FILE&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOGOUT_REQUESTS_SIGNED&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOG_FILE&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOG_LEVEL&#39;</span><span class="p">:</span> <span class="s1">&#39;INFO&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MANAGEMENT_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;saml2&#39;</span><span class="p">,</span>
 <span class="s1">&#39;NAMEID_FORMAT&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;OPTIONAL_ATTRIBUTES&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;ORGANIZATION&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;PRIVACY_STATEMENT_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/privacy-policy/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REGISTRATION_AUTHORITY&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/registration-authority/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REGISTRATION_INSTANT&#39;</span><span class="p">:</span> <span class="s1">&#39;2017-01-01T00:00:00&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REGISTRATION_POLICY&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/registration-policy/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REQUIRED_ATTRIBUTES&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;SAML_ATTRIBUTE_MAPPING&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;SIGNATURE_ALGORITHM&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;XMLSEC_BINARY&#39;</span><span class="p">:</span> <span class="s1">&#39;/usr/bin/xmlsec1&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-allow_to_select_identity_provider">ALLOW_TO_SELECT_IDENTITY_PROVIDER</h3>
<p>Type: bool</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-attribute_map_dir">ATTRIBUTE_MAP_DIR</h3>
<p>Type: str</p>
<p>Directory with attribute mapping</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-authn_requests_signed">AUTHN_REQUESTS_SIGNED</h3>
<p>Type: str</p>
<p>Indicates if the authentication requests sent should be signed by default</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-categories">CATEGORIES</h3>
<p>Type: list</p>
<p>Links to the entity categories</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-cert_file">CERT_FILE</h3>
<p>Type: str</p>
<p>PEM formatted certificate chain file</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-debug">DEBUG</h3>
<p>Type: bool</p>
<p>Set to True to output debugging information</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-default_binding">DEFAULT_BINDING</h3>
<p>Type: str</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-description">DESCRIPTION</h3>
<p>Type: str</p>
<p>Service provider description (required by CoC)</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-digest_algorithm">DIGEST_ALGORITHM</h3>
<p>Type: Optional[str]</p>
<p>Identifies the Message Digest algorithm URL according to the XML Signature specification (SHA1 is used by default)</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-discovery_service_label">DISCOVERY_SERVICE_LABEL</h3>
<p>Type: Optional[str]</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-discovery_service_url">DISCOVERY_SERVICE_URL</h3>
<p>Type: Optional[str]</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-display_name">DISPLAY_NAME</h3>
<p>Type: str</p>
<p>Service provider display name (required by CoC)</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enable_single_logout">ENABLE_SINGLE_LOGOUT</h3>
<p>Type: bool</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-identity_provider_label">IDENTITY_PROVIDER_LABEL</h3>
<p>Type: Optional[str]</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-identity_provider_url">IDENTITY_PROVIDER_URL</h3>
<p>Type: Optional[str]</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-idp_metadata_local">IDP_METADATA_LOCAL</h3>
<p>Type: list</p>
<p>IdPs metadata XML files stored locally</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-idp_metadata_remote">IDP_METADATA_REMOTE</h3>
<p>Type: list</p>
<p>IdPs metadata XML files stored remotely</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-key_file">KEY_FILE</h3>
<p>Type: str</p>
<p>PEM formatted certificate key file</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-logout_requests_signed">LOGOUT_REQUESTS_SIGNED</h3>
<p>Type: str</p>
<p>Indicates if the entity will sign the logout requests</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-log_file">LOG_FILE</h3>
<p>Type: str</p>
<p>Empty to disable logging SAML2-related stuff to file</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-log_level">LOG_LEVEL</h3>
<p>Type: str</p>
<p>Log level for SAML2</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-management_url">MANAGEMENT_URL</h3>
<p>Type: str</p>
<p>The endpoint for user details management.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-name">NAME</h3>
<p>Type: str</p>
<p>Name used for assigning the registration method to the user</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-nameid_format">NAMEID_FORMAT</h3>
<p>Type: Optional[str]</p>
<p>Identified NameID format to use. None means default, empty string ("") disables addition of entity</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-optional_attributes">OPTIONAL_ATTRIBUTES</h3>
<p>Type: list</p>
<p>SAML attributes that may be useful to have but not required</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-organization">ORGANIZATION</h3>
<p>Type: dict</p>
<p>Organization responsible for the service (you can set multilanguage information here)</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-privacy_statement_url">PRIVACY_STATEMENT_URL</h3>
<p>Type: str</p>
<p>URL with privacy statement (required by CoC)</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-registration_authority">REGISTRATION_AUTHORITY</h3>
<p>Type: str</p>
<p>Registration authority required by mdpi</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-registration_instant">REGISTRATION_INSTANT</h3>
<p>Type: str</p>
<p>Registration instant time required by mdpi</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-registration_policy">REGISTRATION_POLICY</h3>
<p>Type: str</p>
<p>Registration policy required by mdpi</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-required_attributes">REQUIRED_ATTRIBUTES</h3>
<p>Type: list</p>
<p>SAML attributes that are required to identify a user</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-saml_attribute_mapping">SAML_ATTRIBUTE_MAPPING</h3>
<p>Type: dict</p>
<p>Mapping between SAML attributes and User fields</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-signature_algorithm">SIGNATURE_ALGORITHM</h3>
<p>Type: Optional[str]</p>
<p>Identifies the Signature algorithm URL according to the XML Signature specification (SHA1 is used by default)</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-xmlsec_binary">XMLSEC_BINARY</h3>
<p>Type: str</p>
<p>Full path to the xmlsec1 binary program</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_auth_social-plugin">WALDUR_AUTH_SOCIAL plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_AUTH_SOCIAL</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ENABLE_EDUTEAMS_SYNC&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_REFRESH_TOKEN&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_SSH_API_PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_SSH_API_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_SSH_API_USERNAME&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_TOKEN_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://proxy.acc.researcher-access.org/OIDC/token&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_USERINFO_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://proxy.acc.researcher-access.org/api/userinfo&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enable_eduteams_sync">ENABLE_EDUTEAMS_SYNC</h3>
<p>Type: bool</p>
<p>Enable eduTEAMS synchronization with remote Waldur.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_client_id">REMOTE_EDUTEAMS_CLIENT_ID</h3>
<p>Type: str</p>
<p>ID of application used for OAuth authentication.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_enabled">REMOTE_EDUTEAMS_ENABLED</h3>
<p>Type: bool</p>
<p>Enable remote eduTEAMS extension.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_refresh_token">REMOTE_EDUTEAMS_REFRESH_TOKEN</h3>
<p>Type: str</p>
<p>Token is used to authenticate against user info endpoint.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_secret">REMOTE_EDUTEAMS_SECRET</h3>
<p>Type: str</p>
<p>Application secret key.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_ssh_api_password">REMOTE_EDUTEAMS_SSH_API_PASSWORD</h3>
<p>Type: str</p>
<p>Password for SSH API URL</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_ssh_api_url">REMOTE_EDUTEAMS_SSH_API_URL</h3>
<p>Type: str</p>
<p>API URL SSH keys</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_ssh_api_username">REMOTE_EDUTEAMS_SSH_API_USERNAME</h3>
<p>Type: str</p>
<p>Username for SSH API URL</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_token_url">REMOTE_EDUTEAMS_TOKEN_URL</h3>
<p>Type: str</p>
<p>The token endpoint is used to obtain tokens.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_userinfo_url">REMOTE_EDUTEAMS_USERINFO_URL</h3>
<p>Type: str</p>
<p>It allows to get user data based on userid aka CUID.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_core-plugin">WALDUR_CORE plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_CORE</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ATTACHMENT_LINK_MAX_AGE&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">),</span>
 <span class="s1">&#39;AUTHENTICATION_METHODS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;LOCAL_SIGNIN&#39;</span><span class="p">],</span>
 <span class="s1">&#39;BACKEND_FIELDS_EDITABLE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;COUNTRIES&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;AL&#39;</span><span class="p">,</span>
               <span class="s1">&#39;AT&#39;</span><span class="p">,</span>
               <span class="s1">&#39;BA&#39;</span><span class="p">,</span>
               <span class="s1">&#39;BE&#39;</span><span class="p">,</span>
               <span class="s1">&#39;BG&#39;</span><span class="p">,</span>
               <span class="s1">&#39;CH&#39;</span><span class="p">,</span>
               <span class="s1">&#39;CY&#39;</span><span class="p">,</span>
               <span class="s1">&#39;DE&#39;</span><span class="p">,</span>
               <span class="s1">&#39;DK&#39;</span><span class="p">,</span>
               <span class="s1">&#39;EE&#39;</span><span class="p">,</span>
               <span class="s1">&#39;ES&#39;</span><span class="p">,</span>
               <span class="s1">&#39;EU&#39;</span><span class="p">,</span>
               <span class="s1">&#39;FI&#39;</span><span class="p">,</span>
               <span class="s1">&#39;FR&#39;</span><span class="p">,</span>
               <span class="s1">&#39;GB&#39;</span><span class="p">,</span>
               <span class="s1">&#39;GE&#39;</span><span class="p">,</span>
               <span class="s1">&#39;GR&#39;</span><span class="p">,</span>
               <span class="s1">&#39;HR&#39;</span><span class="p">,</span>
               <span class="s1">&#39;HU&#39;</span><span class="p">,</span>
               <span class="s1">&#39;IE&#39;</span><span class="p">,</span>
               <span class="s1">&#39;IS&#39;</span><span class="p">,</span>
               <span class="s1">&#39;IT&#39;</span><span class="p">,</span>
               <span class="s1">&#39;LT&#39;</span><span class="p">,</span>
               <span class="s1">&#39;LU&#39;</span><span class="p">,</span>
               <span class="s1">&#39;LV&#39;</span><span class="p">,</span>
               <span class="s1">&#39;MC&#39;</span><span class="p">,</span>
               <span class="s1">&#39;MK&#39;</span><span class="p">,</span>
               <span class="s1">&#39;MT&#39;</span><span class="p">,</span>
               <span class="s1">&#39;NL&#39;</span><span class="p">,</span>
               <span class="s1">&#39;NO&#39;</span><span class="p">,</span>
               <span class="s1">&#39;PL&#39;</span><span class="p">,</span>
               <span class="s1">&#39;PT&#39;</span><span class="p">,</span>
               <span class="s1">&#39;RO&#39;</span><span class="p">,</span>
               <span class="s1">&#39;RS&#39;</span><span class="p">,</span>
               <span class="s1">&#39;SE&#39;</span><span class="p">,</span>
               <span class="s1">&#39;SI&#39;</span><span class="p">,</span>
               <span class="s1">&#39;UA&#39;</span><span class="p">],</span>
 <span class="s1">&#39;CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;EMAIL_CHANGE_MAX_AGE&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
 <span class="s1">&#39;ENABLE_ACCOUNTING_START_DATE&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_GEOIP&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;EXTENSIONS_AUTOREGISTER&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;EXTERNAL_LINKS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;GROUP_INVITATION_LIFETIME&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">),</span>
 <span class="s1">&#39;HOMEPORT_SENTRY_DSN&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;HOMEPORT_SENTRY_ENVIRONMENT&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur-production&#39;</span><span class="p">,</span>
 <span class="s1">&#39;HOMEPORT_SENTRY_TRACES_SAMPLE_RATE&#39;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
 <span class="s1">&#39;HOMEPORT_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://example.com/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;HTTP_CHUNK_SIZE&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
 <span class="s1">&#39;INVITATIONS_ENABLED&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_CIVIL_NUMBER_LABEL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_CREATE_MISSING_USER&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_DISABLE_MULTIPLE_ROLES&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_LIFETIME&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">),</span>
 <span class="s1">&#39;INVITATION_MAX_AGE&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_TAX_NUMBER_LABEL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOCAL_IDP_LABEL&#39;</span><span class="p">:</span> <span class="s1">&#39;Local DB&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOCAL_IDP_MANAGEMENT_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOCAL_IDP_NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;Local DB&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOCAL_IDP_PROTECTED_FIELDS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;LOGGING_REPORT_DIRECTORY&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/log/waldur&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOGGING_REPORT_INTERVAL&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">),</span>
 <span class="s1">&#39;MASTERMIND_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;MATOMO_SITE_ID&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;MATOMO_URL_BASE&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;NATIVE_NAME_ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;NOTIFICATIONS_PROFILE_CHANGES&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;ENABLE_OPERATOR_OWNER_NOTIFICATIONS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                                   <span class="s1">&#39;FIELDS&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span>
                                              <span class="s1">&#39;phone_number&#39;</span><span class="p">,</span>
                                              <span class="s1">&#39;job_title&#39;</span><span class="p">),</span>
                                   <span class="s1">&#39;OPERATOR_NOTIFICATION_EMAILS&#39;</span><span class="p">:</span> <span class="p">[]},</span>
 <span class="s1">&#39;NOTIFICATION_SUBJECT&#39;</span><span class="p">:</span> <span class="s1">&#39;Notifications from Waldur&#39;</span><span class="p">,</span>
 <span class="s1">&#39;OECD_FOS_2007_CODE_MANDATORY&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;ONLY_STAFF_CAN_INVITE_USERS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;ONLY_STAFF_MANAGES_SERVICES&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;SELLER_COUNTRY_CODE&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;SHOW_ALL_USERS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;SUPPORT_PORTAL_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TOKEN_KEY&#39;</span><span class="p">:</span> <span class="s1">&#39;x-auth-token&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TOKEN_LIFETIME&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">),</span>
 <span class="s1">&#39;TRANSLATION_DOMAIN&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;USER_MANDATORY_FIELDS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;full_name&#39;</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span><span class="p">],</span>
 <span class="s1">&#39;USER_REGISTRATION_HIDDEN_FIELDS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;registration_method&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;job_title&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;phone_number&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;organization&#39;</span><span class="p">],</span>
 <span class="s1">&#39;USE_ATOMIC_TRANSACTION&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;VALIDATE_INVITATION_EMAIL&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-attachment_link_max_age">ATTACHMENT_LINK_MAX_AGE</h3>
<p>Type: timedelta</p>
<p>Max age of secure token for media download.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-authentication_methods">AUTHENTICATION_METHODS</h3>
<p>Type: List[str]</p>
<p>List of enabled authentication methods.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-backend_fields_editable">BACKEND_FIELDS_EDITABLE</h3>
<p>Type: bool</p>
<p>Allows to control /admin writable fields. If this flag is disabled it is impossible to edit any field that corresponds to backend value via /admin. Such restriction allows to save information from corruption.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-countries">COUNTRIES</h3>
<p>Type: List[str]</p>
<p>It is used in organization creation dialog in order to limit country choices to predefined set.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-create_default_project_on_organization_creation">CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION</h3>
<p>Type: bool</p>
<p>Enables generation of the first project on organization creation.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-email_change_max_age">EMAIL_CHANGE_MAX_AGE</h3>
<p>Type: timedelta</p>
<p>Max age of change email request.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enable_accounting_start_date">ENABLE_ACCOUNTING_START_DATE</h3>
<p>Type: bool</p>
<p>Allows to enable accounting for organizations using value of accounting_start_date field.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enable_geoip">ENABLE_GEOIP</h3>
<p>Type: bool</p>
<p>Enable detection of coordinates of virtual machines.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-extensions_autoregister">EXTENSIONS_AUTOREGISTER</h3>
<p>Type: bool</p>
<p>Defines whether extensions should be automatically registered.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-external_links">EXTERNAL_LINKS</h3>
<p>Type: List[ExternalLink]</p>
<p>Render external links in dropdown in header. Each item should be object with label and url fields. For example: {"label": "Helpdesk", "url": "<code>https://example.com/</code>"}</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-group_invitation_lifetime">GROUP_INVITATION_LIFETIME</h3>
<p>Type: timedelta</p>
<p>Defines for how long group invitation remains valid.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-homeport_sentry_dsn">HOMEPORT_SENTRY_DSN</h3>
<p>Type: Optional[str]</p>
<p>Sentry Data Source Name for Waldur HomePort project.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-homeport_sentry_environment">HOMEPORT_SENTRY_ENVIRONMENT</h3>
<p>Type: str</p>
<p>Sentry environment name for Waldur Homeport.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-homeport_sentry_traces_sample_rate">HOMEPORT_SENTRY_TRACES_SAMPLE_RATE</h3>
<p>Type: float</p>
<p>Percentage of transactions sent to Sentry for tracing.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-homeport_url">HOMEPORT_URL</h3>
<p>Type: str</p>
<p>It is used for rendering callback URL in HomePort.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-http_chunk_size">HTTP_CHUNK_SIZE</h3>
<p>Type: int</p>
<p>Chunk size for resource fetching from backend API. It is needed in order to avoid too long HTTP request error.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-invitations_enabled">INVITATIONS_ENABLED</h3>
<p>Type: bool</p>
<p>Allows to disable invitations feature.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-invitation_civil_number_label">INVITATION_CIVIL_NUMBER_LABEL</h3>
<p>Type: str</p>
<p>Custom label for civil number field in invitation creation dialog.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-invitation_create_missing_user">INVITATION_CREATE_MISSING_USER</h3>
<p>Type: bool</p>
<p>Allow to create FreeIPA user using details specified in invitation if user does not exist yet.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-invitation_disable_multiple_roles">INVITATION_DISABLE_MULTIPLE_ROLES</h3>
<p>Type: bool</p>
<p>Do not allow user to grant multiple roles in the same project or organization using invitation.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-invitation_lifetime">INVITATION_LIFETIME</h3>
<p>Type: timedelta</p>
<p>Defines for how long invitation remains valid.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-invitation_max_age">INVITATION_MAX_AGE</h3>
<p>Type: Optional[timedelta]</p>
<p>Max age of invitation token. It is used in approve and reject actions.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-invitation_tax_number_label">INVITATION_TAX_NUMBER_LABEL</h3>
<p>Type: str</p>
<p>Custom label for tax number field in invitation creation dialog.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-local_idp_label">LOCAL_IDP_LABEL</h3>
<p>Type: str</p>
<p>The label of local auth.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-local_idp_management_url">LOCAL_IDP_MANAGEMENT_URL</h3>
<p>Type: str</p>
<p>The URL for management of local user details.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-local_idp_name">LOCAL_IDP_NAME</h3>
<p>Type: str</p>
<p>The name of local auth.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-local_idp_protected_fields">LOCAL_IDP_PROTECTED_FIELDS</h3>
<p>Type: List[str]</p>
<p>The list of protected fields for local IdP.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-logging_report_directory">LOGGING_REPORT_DIRECTORY</h3>
<p>Type: str</p>
<p>Directory where log files are located.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-logging_report_interval">LOGGING_REPORT_INTERVAL</h3>
<p>Type: timedelta</p>
<p>Files older that specified interval are filtered out.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-mastermind_url">MASTERMIND_URL</h3>
<p>Type: str</p>
<p>It is used for rendering callback URL in MasterMind.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-matomo_site_id">MATOMO_SITE_ID</h3>
<p>Type: Optional[int]</p>
<p>Site ID is used by Matomo analytics application.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-matomo_url_base">MATOMO_URL_BASE</h3>
<p>Type: Optional[str]</p>
<p>URL base is used by Matomo analytics application.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-native_name_enabled">NATIVE_NAME_ENABLED</h3>
<p>Type: bool</p>
<p>Allows to render native name field in customer and user forms.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-notifications_profile_changes">NOTIFICATIONS_PROFILE_CHANGES</h3>
<p>Type: dict</p>
<p>Configure notifications about profile changes of organization owners.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-notification_subject">NOTIFICATION_SUBJECT</h3>
<p>Type: str</p>
<p>It is used as a subject of email emitted by event logging hook.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-oecd_fos_2007_code_mandatory">OECD_FOS_2007_CODE_MANDATORY</h3>
<p>Type: bool</p>
<p>Field oecd_fos_2007_code must be required for project.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-only_staff_can_invite_users">ONLY_STAFF_CAN_INVITE_USERS</h3>
<p>Type: bool</p>
<p>Allow to limit invitation management to staff only.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-only_staff_manages_services">ONLY_STAFF_MANAGES_SERVICES</h3>
<p>Type: bool</p>
<p>Allows to restrict provider management only to staff users.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-protect_user_details_for_registration_methods">PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS</h3>
<p>Type: List[str]</p>
<p>List of authentication methods which are not allowed to update user details.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-seller_country_code">SELLER_COUNTRY_CODE</h3>
<p>Type: Optional[str]</p>
<p>Specifies seller legal or effective country of registration or residence as an ISO 3166-1 alpha-2 country code. It is used for computing VAT charge rate.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-show_all_users">SHOW_ALL_USERS</h3>
<p>Type: bool</p>
<p>Indicates whether user can see all other users in <code>api/users/</code> endpoint.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-support_portal_url">SUPPORT_PORTAL_URL</h3>
<p>Type: str</p>
<p>Support portal URL is rendered as a shortcut on dashboard</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-token_key">TOKEN_KEY</h3>
<p>Type: str</p>
<p>Header for token authentication.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-token_lifetime">TOKEN_LIFETIME</h3>
<p>Type: timedelta</p>
<p>Defines for how long user token should remain valid if there was no action from user.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-translation_domain">TRANSLATION_DOMAIN</h3>
<p>Type: str</p>
<p>Identifier of translation domain applied to current deployment.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-user_mandatory_fields">USER_MANDATORY_FIELDS</h3>
<p>Type: List[str]</p>
<p>List of user profile attributes that would be required for filling in HomePort. Note that backend will not be affected. If a mandatory field is missing in profile, a profile edit view will be forced upon user on any HomePort logged in action. Possible values are: description, email, full_name, job_title, organization, phone_number</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-user_registration_hidden_fields">USER_REGISTRATION_HIDDEN_FIELDS</h3>
<p>Type: List[str]</p>
<p>List of user profile attributes that would be concealed on registration form in HomePort. Possible values are: job_title, registration_method, phone_number</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-use_atomic_transaction">USE_ATOMIC_TRANSACTION</h3>
<p>Type: bool</p>
<p>Wrap action views in atomic transaction.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-validate_invitation_email">VALIDATE_INVITATION_EMAIL</h3>
<p>Type: bool</p>
<p>Ensure that invitation and user emails match.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_freeipa-plugin">WALDUR_FREEIPA plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_FREEIPA</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;BLACKLISTED_USERNAMES&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">],</span>
 <span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;GROUPNAME_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;GROUP_SYNCHRONIZATION_ENABLED&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;HOSTNAME&#39;</span><span class="p">:</span> <span class="s1">&#39;ipa.example.com&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;secret&#39;</span><span class="p">,</span>
 <span class="s1">&#39;USERNAME&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span>
 <span class="s1">&#39;USERNAME_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;VERIFY_SSL&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-blacklisted_usernames">BLACKLISTED_USERNAMES</h3>
<p>Type: list</p>
<p>List of username that users are not allowed to select</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enabled">ENABLED</h3>
<p>Type: bool</p>
<p>Enable integration of identity provisioning in configured FreeIPA</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-groupname_prefix">GROUPNAME_PREFIX</h3>
<p>Type: str</p>
<p>Prefix to be appended to all group names created in FreeIPA by Waldur</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-group_synchronization_enabled">GROUP_SYNCHRONIZATION_ENABLED</h3>
<p>Type: bool</p>
<p>Optionally disable creation of user groups in FreeIPA matching Waldur structure</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-hostname">HOSTNAME</h3>
<p>Type: str</p>
<p>Hostname of FreeIPA server</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-password">PASSWORD</h3>
<p>Type: str</p>
<p>Password of FreeIPA user with administrative privileges</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-username">USERNAME</h3>
<p>Type: str</p>
<p>Username of FreeIPA user with administrative privileges</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-username_prefix">USERNAME_PREFIX</h3>
<p>Type: str</p>
<p>Prefix to be appended to all usernames created in FreeIPA by Waldur</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-verify_ssl">VERIFY_SSL</h3>
<p>Type: bool</p>
<p>Validate TLS certificate of FreeIPA web interface / REST API</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_hpc-plugin">WALDUR_HPC plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_HPC</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;EXTERNAL_AFFILIATIONS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;EXTERNAL_CUSTOMER_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EXTERNAL_EMAIL_PATTERNS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;EXTERNAL_LIMITS&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;INTERNAL_AFFILIATIONS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;INTERNAL_CUSTOMER_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;INTERNAL_EMAIL_PATTERNS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;INTERNAL_LIMITS&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;OFFERING_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PLAN_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enabled_1">ENABLED</h3>
<p>Type: bool</p>
<p>Enable HPC-specific hooks in Waldur deployment</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-external_affiliations">EXTERNAL_AFFILIATIONS</h3>
<p>Type: List[str]</p>
<p>List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to external organization.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-external_customer_uuid">EXTERNAL_CUSTOMER_UUID</h3>
<p>Type: str</p>
<p>UUID of a Waldur organization (aka customer) where new external users would be added</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-external_email_patterns">EXTERNAL_EMAIL_PATTERNS</h3>
<p>Type: List[str]</p>
<p>List of user email patterns (as regex) that define if the user belongs to external organization.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-external_limits">EXTERNAL_LIMITS</h3>
<p>Type: dict</p>
<p>Overrided default values for SLURM offering to be created for users belonging to external organization.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-internal_affiliations">INTERNAL_AFFILIATIONS</h3>
<p>Type: List[str]</p>
<p>List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to internal organization.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-internal_customer_uuid">INTERNAL_CUSTOMER_UUID</h3>
<p>Type: str</p>
<p>UUID of a Waldur organization (aka customer) where new internal users would be added</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-internal_email_patterns">INTERNAL_EMAIL_PATTERNS</h3>
<p>Type: List[str]</p>
<p>List of user email patterns (as regex) that define if the user belongs to internal organization.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-internal_limits">INTERNAL_LIMITS</h3>
<p>Type: dict</p>
<p>Overrided default values for SLURM offering to be created for users belonging to internal organization.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-offering_uuid">OFFERING_UUID</h3>
<p>Type: str</p>
<p>UUID of a Waldur SLURM offering, which will be used for creating allocations for users</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-plan_uuid">PLAN_UUID</h3>
<p>Type: str</p>
<p>UUID of a Waldur SLURM offering plan, which will be used for creating allocations for users</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_keycloak-plugin">WALDUR_KEYCLOAK plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_KEYCLOAK</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;BASE_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8080/auth&#39;</span><span class="p">,</span>
 <span class="s1">&#39;CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur&#39;</span><span class="p">,</span>
 <span class="s1">&#39;CLIENT_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;UUID&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;secret&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REALM&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur&#39;</span><span class="p">,</span>
 <span class="s1">&#39;USERNAME&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-base_url">BASE_URL</h3>
<p>Type: str</p>
<p>Base URL of Keycloak server</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-client_id">CLIENT_ID</h3>
<p>Type: str</p>
<p>Identification of Waldur client app</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-client_secret">CLIENT_SECRET</h3>
<p>Type: str</p>
<p>Credentials are generated in Keycloak admin console</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enabled_2">ENABLED</h3>
<p>Type: bool</p>
<p>Enable integration of group provisioning in configured Keycloak</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-password_1">PASSWORD</h3>
<p>Type: str</p>
<p>Password of Keycloak user with administrative privileges</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-realm">REALM</h3>
<p>Type: str</p>
<p>Realm used by Waldur</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-username_1">USERNAME</h3>
<p>Type: str</p>
<p>Username of Keycloak user with administrative privileges</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_marketplace-plugin">WALDUR_MARKETPLACE plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_MARKETPLACE</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ANONYMOUS_USER_CAN_VIEW_OFFERINGS&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;ANONYMOUS_USER_CAN_VIEW_PLANS&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_RESOURCE_END_DATE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_STALE_RESOURCE_NOTIFICATIONS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;NOTIFY_ABOUT_RESOURCE_CHANGE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;NOTIFY_STAFF_ABOUT_APPROVALS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;TELEMETRY_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://telemetry.waldur.com/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TELEMETRY_VERSION&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;THUMBNAIL_SIZE&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-anonymous_user_can_view_offerings">ANONYMOUS_USER_CAN_VIEW_OFFERINGS</h3>
<p>Type: bool</p>
<p>Allow anonymous users to see shared offerings in active, paused and archived states</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-anonymous_user_can_view_plans">ANONYMOUS_USER_CAN_VIEW_PLANS</h3>
<p>Type: bool</p>
<p>Allow anonymous users to see plans</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-disable_sending_notifications_about_resource_update">DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE</h3>
<p>Type: bool</p>
<p>Disable only resource update events.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enable_resource_end_date">ENABLE_RESOURCE_END_DATE</h3>
<p>Type: bool</p>
<p>Allow to view and update resource end date.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enable_stale_resource_notifications">ENABLE_STALE_RESOURCE_NOTIFICATIONS</h3>
<p>Type: bool</p>
<p>Enable reminders to owners about resources of shared offerings that have not generated any cost for the last 3 months.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-notify_about_resource_change">NOTIFY_ABOUT_RESOURCE_CHANGE</h3>
<p>Type: bool</p>
<p>If true, notify users about resource changes from Marketplace perspective. Can generate duplicate events if plugins also log</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-notify_staff_about_approvals">NOTIFY_STAFF_ABOUT_APPROVALS</h3>
<p>Type: bool</p>
<p>If true, users with staff role are notified when request for order approval is generated</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-telemetry_url">TELEMETRY_URL</h3>
<p>Type: str</p>
<p>URL for sending telemetry data.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-telemetry_version">TELEMETRY_VERSION</h3>
<p>Type: int</p>
<p>Telemetry service version.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-thumbnail_size">THUMBNAIL_SIZE</h3>
<p>Type: tuple</p>
<p>Size of the thumbnail to generate when screenshot is uploaded for an offering.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_marketplace_remote_slurm-plugin">WALDUR_MARKETPLACE_REMOTE_SLURM plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_MARKETPLACE_REMOTE_SLURM</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;USE_WALDUR_USERNAMES&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-use_waldur_usernames">USE_WALDUR_USERNAMES</h3>
<p>Type: bool</p>
<p>Fetch usernames from Waldur rather then FreeIPA profiles.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_marketplace_script-plugin">WALDUR_MARKETPLACE_SCRIPT plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_MARKETPLACE_SCRIPT</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;DOCKER_CLIENT&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;base_url&#39;</span><span class="p">:</span> <span class="s1">&#39;unix://var/run/docker.sock&#39;</span><span class="p">},</span>
 <span class="s1">&#39;DOCKER_IMAGES&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;python&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;command&#39;</span><span class="p">:</span> <span class="s1">&#39;python&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;python:3.11-alpine&#39;</span><span class="p">},</span>
                   <span class="s1">&#39;shell&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;command&#39;</span><span class="p">:</span> <span class="s1">&#39;sh&#39;</span><span class="p">,</span> <span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;alpine:3&#39;</span><span class="p">}},</span>
 <span class="s1">&#39;DOCKER_REMOVE_CONTAINER&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;DOCKER_RUN_OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;mem_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;512m&#39;</span><span class="p">},</span>
 <span class="s1">&#39;DOCKER_SCRIPT_DIR&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;K8S_CONFIG_PATH&#39;</span><span class="p">:</span> <span class="s1">&#39;~/.kube/config&#39;</span><span class="p">,</span>
 <span class="s1">&#39;K8S_JOB_TIMEOUT&#39;</span><span class="p">:</span> <span class="mi">1800</span><span class="p">,</span>
 <span class="s1">&#39;K8S_NAMESPACE&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SCRIPT_RUN_MODE&#39;</span><span class="p">:</span> <span class="s1">&#39;docker&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-docker_client">DOCKER_CLIENT</h3>
<p>Type: dict</p>
<p>Options for docker client. See also: <a href="https://docker-py.readthedocs.io/en/stable/client.html#docker.client.DockerClient">https://docker-py.readthedocs.io/en/stable/client.html#docker.client.DockerClient</a></p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-docker_images">DOCKER_IMAGES</h3>
<p>Type: dict</p>
<p>Key is command to execute script, value is a dictionary of image name and command.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-docker_remove_container">DOCKER_REMOVE_CONTAINER</h3>
<p>Type: bool</p>
<p>Remove Docker container after script execution</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-docker_run_options">DOCKER_RUN_OPTIONS</h3>
<p>Type: dict</p>
<p>Options for docker runtime. See also: <a href="https://docker-py.readthedocs.io/en/stable/containers.html#docker.models.containers.ContainerCollection.run">https://docker-py.readthedocs.io/en/stable/containers.html#docker.models.containers.ContainerCollection.run</a></p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-docker_script_dir">DOCKER_SCRIPT_DIR</h3>
<p>Type: Optional[str]</p>
<p>Path to folder on executor machine where to create temporary submission scripts. If None uses OS-dependent location. OS X users, see <a href="https://github.com/docker/for-mac/issues/1532">https://github.com/docker/for-mac/issues/1532</a></p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-k8s_config_path">K8S_CONFIG_PATH</h3>
<p>Type: str</p>
<p>Path to Kubernetes configuration file</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-k8s_job_timeout">K8S_JOB_TIMEOUT</h3>
<p>Type: int</p>
<p>Timeout for execution of one Kubernetes job in seconds</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-k8s_namespace">K8S_NAMESPACE</h3>
<p>Type: str</p>
<p>Kubernetes namespace where jobs will be executed</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-script_run_mode">SCRIPT_RUN_MODE</h3>
<p>Type: str</p>
<p>Type of jobs deployment. Valid values: "docker" for simple docker deployment, "k8s" for Kubernetes-based one</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_openstack-plugin">WALDUR_OPENSTACK plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_OPENSTACK</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;DEFAULT_BLACKLISTED_USERNAMES&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;service&#39;</span><span class="p">],</span>
 <span class="s1">&#39;DEFAULT_SECURITY_GROUPS&#39;</span><span class="p">:</span> <span class="p">({</span><span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Security group for secure shell &#39;</span>
                                             <span class="s1">&#39;access&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ssh&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="p">({</span><span class="s1">&#39;cidr&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0.0.0/0&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;from_port&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
                                         <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;tcp&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;to_port&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">},)},</span>
                             <span class="p">{</span><span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Security group for ping&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ping&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="p">({</span><span class="s1">&#39;cidr&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0.0.0/0&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;icmp_code&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                         <span class="s1">&#39;icmp_type&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                         <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;icmp&#39;</span><span class="p">},)},</span>
                             <span class="p">{</span><span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Security group for remote &#39;</span>
                                             <span class="s1">&#39;desktop access&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;rdp&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="p">({</span><span class="s1">&#39;cidr&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0.0.0/0&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;from_port&#39;</span><span class="p">:</span> <span class="mi">3389</span><span class="p">,</span>
                                         <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;tcp&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;to_port&#39;</span><span class="p">:</span> <span class="mi">3389</span><span class="p">},)},</span>
                             <span class="p">{</span><span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Security group for http and &#39;</span>
                                             <span class="s1">&#39;https access&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;web&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;rules&#39;</span><span class="p">:</span> <span class="p">({</span><span class="s1">&#39;cidr&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0.0.0/0&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;from_port&#39;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                                         <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;tcp&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;to_port&#39;</span><span class="p">:</span> <span class="mi">80</span><span class="p">},</span>
                                        <span class="p">{</span><span class="s1">&#39;cidr&#39;</span><span class="p">:</span> <span class="s1">&#39;0.0.0.0/0&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;from_port&#39;</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
                                         <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;tcp&#39;</span><span class="p">,</span>
                                         <span class="s1">&#39;to_port&#39;</span><span class="p">:</span> <span class="mi">443</span><span class="p">})}),</span>
 <span class="s1">&#39;SUBNET&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;ALLOCATION_POOL_END&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{first_octet}</span><span class="s1">.</span><span class="si">{second_octet}</span><span class="s1">.</span><span class="si">{third_octet}</span><span class="s1">.200&#39;</span><span class="p">,</span>
            <span class="s1">&#39;ALLOCATION_POOL_START&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{first_octet}</span><span class="s1">.</span><span class="si">{second_octet}</span><span class="s1">.</span><span class="si">{third_octet}</span><span class="s1">.10&#39;</span><span class="p">},</span>
 <span class="s1">&#39;TENANT_CREDENTIALS_VISIBLE&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-default_blacklisted_usernames">DEFAULT_BLACKLISTED_USERNAMES</h3>
<p>Type: list</p>
<p>Usernames that cannot be created by Waldur in OpenStack</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-default_security_groups">DEFAULT_SECURITY_GROUPS</h3>
<p>Type: tuple</p>
<p>Default security groups and rules created in each of the provisioned OpenStack tenants</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-subnet">SUBNET</h3>
<p>Type: dict</p>
<p>Default allocation pool for auto-created internal network</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-tenant_credentials_visible">TENANT_CREDENTIALS_VISIBLE</h3>
<p>Type: bool</p>
<p>If true, generated credentials of a tenant are exposed to project users</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_openstack_tenant-plugin">WALDUR_OPENSTACK_TENANT plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_OPENSTACK_TENANT</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ALLOW_CUSTOMER_USERS_OPENSTACK_CONSOLE_ACCESS&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;ALLOW_DIRECT_EXTERNAL_NETWORK_CONNECTION&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;MAX_CONCURRENT_PROVISION&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;OpenStackTenant.Instance&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                              <span class="s1">&#39;OpenStackTenant.Snapshot&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
                              <span class="s1">&#39;OpenStackTenant.Volume&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
 <span class="s1">&#39;REQUIRE_AVAILABILITY_ZONE&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-allow_customer_users_openstack_console_access">ALLOW_CUSTOMER_USERS_OPENSTACK_CONSOLE_ACCESS</h3>
<p>Type: bool</p>
<p>If true, customer users would be offered actions for accessing OpenStack Console</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-allow_direct_external_network_connection">ALLOW_DIRECT_EXTERNAL_NETWORK_CONNECTION</h3>
<p>Type: bool</p>
<p>If true, allow connecting of Instances directly to external networks</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-max_concurrent_provision">MAX_CONCURRENT_PROVISION</h3>
<p>Type: dict</p>
<p>Maximum parallel executions of provisioning operations for OpenStackTenant resources</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-require_availability_zone">REQUIRE_AVAILABILITY_ZONE</h3>
<p>Type: bool</p>
<p>If true, specification of availability zone during provisioning will become mandatory</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_pid-plugin">WALDUR_PID plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_PID</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;DATACITE&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;API_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://example.com&#39;</span><span class="p">,</span>
              <span class="s1">&#39;COLLECTION_DOI&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="s1">&#39;PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="s1">&#39;PUBLISHER&#39;</span><span class="p">:</span> <span class="s1">&#39;Waldur&#39;</span><span class="p">,</span>
              <span class="s1">&#39;REPOSITORY_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-datacite">DATACITE</h3>
<p>Type: dict</p>
<p>Settings for integration of Waldur with Datacite PID service. Collection DOI is used to aggregate generated DOIs.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_slurm-plugin">WALDUR_SLURM plugin</h2>
<p>Default value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_SLURM</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ALLOCATION_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_allocation_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;CUSTOMER_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_customer_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DEFAULT_LIMITS&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;CPU&#39;</span><span class="p">:</span> <span class="mi">16000</span><span class="p">,</span> <span class="s1">&#39;GPU&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">&#39;RAM&#39;</span><span class="p">:</span> <span class="mi">102400000</span><span class="p">},</span>
 <span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;PRIVATE_KEY_PATH&#39;</span><span class="p">:</span> <span class="s1">&#39;/etc/waldur/id_rsa&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PROJECT_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_project_&#39;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-allocation_prefix">ALLOCATION_PREFIX</h3>
<p>Type: str</p>
<p>Prefix for SLURM account name corresponding to Waldur allocation</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-customer_prefix">CUSTOMER_PREFIX</h3>
<p>Type: str</p>
<p>Prefix for SLURM account name corresponding to Waldur organization.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-default_limits">DEFAULT_LIMITS</h3>
<p>Type: dict</p>
<p>Default limits of account that are set when SLURM account is provisioned.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-enabled_3">ENABLED</h3>
<p>Type: bool</p>
<p>Enable support for SLURM plugin in a deployment</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-private_key_path">PRIVATE_KEY_PATH</h3>
<p>Type: str</p>
<p>Path to private key file used as SSH identity file for accessing SLURM master.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-project_prefix">PROJECT_PREFIX</h3>
<p>Type: str</p>
<p>Prefix for SLURM account name corresponding to Waldur project.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-other-variables">Other variables</h2>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-default_from_email">DEFAULT_FROM_EMAIL</h3>
<p>Type: str, default value: webmaster@localhost</p>
<p>Default email address to use for automated correspondence from Waldur.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-default_reply_to_email">DEFAULT_REPLY_TO_EMAIL</h3>
<p>Type: str</p>
<p>Default email address to use for email replies.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-email_hook_from_email">EMAIL_HOOK_FROM_EMAIL</h3>
<p>Type: str</p>
<p>Alternative email address to use for email hooks.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-import_export_use_transactions">IMPORT_EXPORT_USE_TRANSACTIONS</h3>
<p>Type: bool, default value: True</p>
<p>Controls if resource importing should use database transactions. Using transactions makes imports safer as a failure during import won’t import only part of the data set.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-ipstack_access_key">IPSTACK_ACCESS_KEY</h3>
<p>Type: Optional[str]</p>
<p>Unique authentication key used to gain access to the ipstack API.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-languages">LANGUAGES</h3>
<p>Type: List[tuple[str, str]], default value: (('en', 'English'), ('et', 'Eesti'))</p>
<p>The list is a list of two-tuples in the format (language code, language name) – for example, ('ja', 'Japanese').</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-language_code">LANGUAGE_CODE</h3>
<p>Type: str, default value: en</p>
<p>Represents the name of a default language.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-use_protected_url">USE_PROTECTED_URL</h3>
<p>Type: bool, default value: False</p>
<p>Protect media URLs using signed token.</p>
<h3 id="admin-guide-mastermind-configuration-configuration-guide-verify_webhook_requests">VERIFY_WEBHOOK_REQUESTS</h3>
<p>Type: bool, default value: True</p>
<p>When webook is processed, requests verifies SSL certificates for HTTPS requests, just like a web browser.</p></section><section class="print-page" id="admin-guide-mastermind-configuration-features"><h1 id="admin-guide-mastermind-configuration-features-features">Features</h1>
<h2 id="admin-guide-mastermind-configuration-features-customerpayments_for_staff_only">customer.payments_for_staff_only</h2>
<p>Make payments menu visible for staff users only.</p>
<h2 id="admin-guide-mastermind-configuration-features-customershow_domain">customer.show_domain</h2>
<p>Allows to hide domain field in organization detail.</p>
<h2 id="admin-guide-mastermind-configuration-features-invitationscivil_number_required">invitations.civil_number_required</h2>
<p>Make civil number field mandatory in invitation creation form.</p>
<h2 id="admin-guide-mastermind-configuration-features-invitationsconceal_civil_number">invitations.conceal_civil_number</h2>
<p>Conceal civil number in invitation creation dialog.</p>
<h2 id="admin-guide-mastermind-configuration-features-invitationsrequire_user_details">invitations.require_user_details</h2>
<p>Render "Show user details" button in invitation creation form.</p>
<h2 id="admin-guide-mastermind-configuration-features-invitationsshow_tax_number">invitations.show_tax_number</h2>
<p>Show tax number field in invitation creation form.</p>
<h2 id="admin-guide-mastermind-configuration-features-invitationstax_number_required">invitations.tax_number_required</h2>
<p>Make tax number field mandatory in invitation creation form.</p>
<h2 id="admin-guide-mastermind-configuration-features-marketplaceconceal_prices">marketplace.conceal_prices</h2>
<p>Do not render prices in shopping cart and order details.</p>
<h2 id="admin-guide-mastermind-configuration-features-marketplaceimport_resources">marketplace.import_resources</h2>
<p>Allow to import resources from service provider to project.</p>
<h2 id="admin-guide-mastermind-configuration-features-marketplacelexis_links">marketplace.lexis_links</h2>
<p>Enabled LEXIS link integrations for offerings.</p>
<h2 id="admin-guide-mastermind-configuration-features-marketplaceshow_call_management_functionality">marketplace.show_call_management_functionality</h2>
<p>Enabled display of call management functionality.</p>
<h2 id="admin-guide-mastermind-configuration-features-marketplaceshow_experimental_ui_components">marketplace.show_experimental_ui_components</h2>
<p>Enabled display of experimental or mocked components in marketplace.</p>
<h2 id="admin-guide-mastermind-configuration-features-openstackhide_volume_type_selector">openstack.hide_volume_type_selector</h2>
<p>Allow to hide OpenStack volume type selector when instance or volume is provisioned.</p>
<h2 id="admin-guide-mastermind-configuration-features-projectestimated_cost">project.estimated_cost</h2>
<p>Render estimated cost column in projects list.</p>
<h2 id="admin-guide-mastermind-configuration-features-projectoecd_fos_2007_code">project.oecd_fos_2007_code</h2>
<p>Enable OECD code.</p>
<h2 id="admin-guide-mastermind-configuration-features-projectshow_industry_flag">project.show_industry_flag</h2>
<p>Show industry flag.</p>
<h2 id="admin-guide-mastermind-configuration-features-ranchervolume_mount_point">rancher.volume_mount_point</h2>
<p>Allow to select mount point for data volume when Rancher cluster is provisioned.</p>
<h2 id="admin-guide-mastermind-configuration-features-slurmjobs">slurm.jobs</h2>
<p>Render list of SLURM jobs as a separate tab in allocation details page.</p>
<h2 id="admin-guide-mastermind-configuration-features-supportconceal_change_request">support.conceal_change_request</h2>
<p>Conceal "Change request" from a selection of issue types for non-staff/non-support users.</p>
<h2 id="admin-guide-mastermind-configuration-features-supportpricelist">support.pricelist</h2>
<p>Render marketplace plan components pricelist in support workspace.</p>
<h2 id="admin-guide-mastermind-configuration-features-supportshared_providers">support.shared_providers</h2>
<p>Render overview of shared marketplace service providers in support workspace.</p>
<h2 id="admin-guide-mastermind-configuration-features-supportusers">support.users</h2>
<p>Render list of users in support workspace.</p>
<h2 id="admin-guide-mastermind-configuration-features-supportvm_type_overview">support.vm_type_overview</h2>
<p>Enable VM type overview in support workspace.</p>
<h2 id="admin-guide-mastermind-configuration-features-telemetrysend_metrics">telemetry.send_metrics</h2>
<p>Send telemetry metrics.</p>
<h2 id="admin-guide-mastermind-configuration-features-usercompetence">user.competence</h2>
<p>Render competence column in users list.</p>
<h2 id="admin-guide-mastermind-configuration-features-usernotifications">user.notifications</h2>
<p>Enable email and webhook notifications management in user workspace.</p>
<h2 id="admin-guide-mastermind-configuration-features-userpreferred_language">user.preferred_language</h2>
<p>Render preferred language column in users list.</p>
<h2 id="admin-guide-mastermind-configuration-features-userssh_keys">user.ssh_keys</h2>
<p>Enable SSH keys management in user workspace.</p></section><section class="print-page" id="admin-guide-mastermind-configuration-general"><h1 id="admin-guide-mastermind-configuration-general-general-configuration">General Configuration</h1>
<p>Outline:</p>
<ul>
<li><a href="#admin-guide-mastermind-configuration-general-general-configuration">General Configuration</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-introduction">Introduction</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-admin-dashboard-configuration">Admin dashboard configuration</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-custom-templates-configuration">Custom templates configuration</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-local-time-zone-configuration">Local time zone configuration</a></li>
</ul>
<h2 id="admin-guide-mastermind-configuration-general-introduction">Introduction</h2>
<p>Waldur is a <a href="https://www.djangoproject.com">Django</a>-based application, so configuration is done by modifying <code>settings.py</code> file.</p>
<p>If you want to configure options related to Django, such as tune caches, database connection, configure custom logging, etc, please refer to <a href="https://docs.djangoproject.com/en/2.2/">Django documentation</a>.</p>
<p>Please consult <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a> to learn more.</p>
<h2 id="admin-guide-mastermind-configuration-general-admin-dashboard-configuration">Admin dashboard configuration</h2>
<p>An admin dashboard supports custom links on Quick access panel. For instance, a panel below was configured with one additional link to <strong><a href="https://waldur.com">https://waldur.com</a></strong>:</p>
<p><a class="glightbox" href="../admin-guide/mastermind-configuration/img/admin-example.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="admin example" src="../admin-guide/mastermind-configuration/img/admin-example.png" /></a></p>
<p>Configuration of custom links is stored under <code>FLUENT_DASHBOARD_QUICK_ACCESS_LINKS</code> settings key and for current example has following structure:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">FLUENT_DASHBOARD_QUICK_ACCESS_LINKS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
   <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;[Custom] Waldur - Cloud Service&#39;</span><span class="p">,</span>
   <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://waldur.com&#39;</span><span class="p">,</span>
   <span class="s1">&#39;external&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="c1"># adds an icon specifying that this link is external,</span>
   <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Open-source Cloud Brokerage Platform&#39;</span><span class="p">,</span>
   <span class="s1">&#39;attrs&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="s1">&#39;_blank&#39;</span><span class="p">}</span> <span class="c1"># add an attribute to generated anchor element which will open link in a new tab.</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Here is a short description of link parameters:</p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Required</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>string</td>
<td>No</td>
<td>Tool tip on the link</td>
</tr>
<tr>
<td>external</td>
<td>boolean</td>
<td>No</td>
<td>Specifies whether additional icon indicating an external URL has to be added</td>
</tr>
<tr>
<td>url</td>
<td>URL</td>
<td>Yes</td>
<td>A URL of the link</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Yes</td>
<td>A title of the generated link</td>
</tr>
<tr>
<td>attrs</td>
<td>dict</td>
<td>No</td>
<td>A dictionary of anchor attributes to be added to generated element</td>
</tr>
</tbody>
</table>
<p>It is also possible to omit optional fields and add links by specifying only a title and a URL to the generated link.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">FLUENT_DASHBOARD_QUICK_ACCESS_LINKS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="s1">&#39;[Custom] Waldur - Cloud Service&#39;</span><span class="p">,</span> <span class="s1">&#39;https://waldur.com&#39;</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">&#39;Find us on GitHub&#39;</span><span class="p">,</span> <span class="s1">&#39;https://github.com/opennode/waldur-core&#39;</span><span class="p">],</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-general-custom-templates-configuration">Custom templates configuration</h2>
<p>To overwrite default templates you should use <a href="https://github.com/jazzband/django-dbtemplates">django-dbtemplates</a>. It allows creation of templates through <code>/admin</code>.</p>
<h2 id="admin-guide-mastermind-configuration-general-local-time-zone-configuration">Local time zone configuration</h2>
<p>Set <code>TIME_ZONE</code> setting in <code>/etc/waldur/override.conf.py</code> to use local time zone. By default it is set to UTC. See the <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">list of time zones</a> for possible options.</p></section><section class="print-page" id="admin-guide-mastermind-configuration-google-calendar"><h1 id="admin-guide-mastermind-configuration-google-calendar-configuration-of-the-google-calendar">Configuration of the Google Calendar</h1></section><section class="print-page" id="admin-guide-mastermind-configuration-notification-templates"><h1 id="admin-guide-mastermind-configuration-notification-templates-overriding-notification-templates-via-admin-panel">Overriding notification templates via admin panel</h1>
<p>An admin can override(edit the content) the templates of notifications with the following sequence of actions:</p>
<ul>
<li>
<p>Go to admin panel (e.g. <code>http://localhost:8080/admin/</code>)</p>
</li>
<li>
<p>Open Templates: <code>Utilities</code> -&gt; <code>Database templates</code> -&gt; <code>Templates</code></p>
</li>
</ul>
<p><a class="glightbox" href="../admin-guide/mastermind-configuration/img/notification_templates_step_1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Go to admin panel" src="../admin-guide/mastermind-configuration/img/notification_templates_step_1.png" /></a></p>
<ul>
<li>Click on <code>Add template</code> on the right side.</li>
</ul>
<p><a class="glightbox" href="../admin-guide/mastermind-configuration/img/notification_templates_step_2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Go to admin panel" src="../admin-guide/mastermind-configuration/img/notification_templates_step_2.png" /></a></p>
<ul>
<li>
<p>Enter the path to the template file into the <code>Name</code> input field as shown below.</p>
<p>The name should have a <code>&lt;waldur_application_name&gt;/&lt;event_name&gt;_&lt;postfix&gt;.&lt;extension&gt;</code> format, where <code>&lt;postfix&gt;</code> can be either <code>message</code> or <code>subject</code>, and <code>&lt;extension&gt;</code> - either <code>txt</code> or <code>html</code>.</p>
<p>You can find a list of all notification templates <a href="#admin-guide-mastermind-configuration-notifications">here</a></p>
</li>
</ul>
<p><a class="glightbox" href="../admin-guide/mastermind-configuration/img/notification_templates_step_3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Go to admin panel" src="../admin-guide/mastermind-configuration/img/notification_templates_step_3.png" /></a></p>
<ul>
<li>Scroll down and click on <code>Save and continue editing</code> and you should have the content of the template loaded automatically</li>
</ul>
<p><a class="glightbox" href="../admin-guide/mastermind-configuration/img/notification_templates_step_4.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Go to admin panel" src="../admin-guide/mastermind-configuration/img/notification_templates_step_4.png" /></a></p>
<ul>
<li>Edit the <code>Content</code> field as you like and <code>Save</code> the changes.</li>
</ul>
<p><a class="glightbox" href="../admin-guide/mastermind-configuration/img/notification_templates_step_5.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Go to admin panel" src="../admin-guide/mastermind-configuration/img/notification_templates_step_5.png" /></a></p></section><section class="print-page" id="admin-guide-mastermind-configuration-notifications"><h1 id="admin-guide-mastermind-configuration-notifications-notifications">Notifications</h1>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_corestructure">WALDUR_CORE.STRUCTURE</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-structurechange_email_request">structure.change_email_request</h3>
<p>A notification sent out when an email change is requested. Recipient is the old email address.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_1_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_1_1">structure/change_email_request_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Verify new email address.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_2_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_2_1">structure/change_email_request_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the {{ link }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_3_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_3_1">structure/change_email_request_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;p&gt;To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the &lt;a href=&quot;{{ link }}&quot;&gt;link&lt;/a&gt;.&lt;/p&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-structurenotifications_profile_changes_operator">structure.notifications_profile_changes_operator</h3>
<p>A notification sent out to notify about profile changes. The recipients are Waldur operators.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_1">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_4_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_4_1">structure/notifications_profile_changes_operator_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Owner details have been updated
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_5_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_5_1">structure/notifications_profile_changes_operator_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>    Owner of
    {% for o in organizations %}
        {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %}
    {% endfor %}

    {{user.full_name}} (id={{ user.id }}) has changed

    {% for f in fields %}
        {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %}
    {% endfor %}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_6_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_6_1">structure/notifications_profile_changes_operator_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>    Owner of
    {% for o in organizations %}
        {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %}
    {% endfor %}

    {{user.full_name}} (id={{ user.id }}) has changed

    {% for f in fields %}
        {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %}
    {% endfor %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-structurestructure_role_granted">structure.structure_role_granted</h3>
<p>A notification sent out when a role is granted. The recipient is the user who received the role.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_2">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="7:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_7_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_7_1">structure/structure_role_granted_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Role granted.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_8_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_8_1">structure/structure_role_granted_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Role {{ permission.role }}  for {{ structure }} has been granted.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_9_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_9_1">structure/structure_role_granted_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;p&gt;Role {{ permission.role }}  for {{ structure }} has been granted.&lt;/p&gt;
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_coreusers">WALDUR_CORE.USERS</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-usersinvitation_approved">users.invitation_approved</h3>
<p>A notification sent to notify the user that his invitation has been approved. The recipient is the user who's being invited.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_3">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="10:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_10_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_10_1">users/invitation_approved_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Account has been created
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_11_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_11_1">users/invitation_approved_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.
    Please visit the link below to sign up and accept your invitation:
    {{ link }}

    Your credentials are as following.

    Username is {{ username }}

    Your password is {{ password }}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_12_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_12_1">users/invitation_approved_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Account has been created&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.&lt;br&gt;
        Please visit &lt;a href=&quot;{{ link }}&quot;&gt;this page&lt;/a&gt; to sign up and accept your invitation.
    &lt;/p&gt;
    &lt;p&gt;
      Your credentials are as following.
    &lt;/p&gt;
    &lt;p&gt;
      Your username is {{ username }}
    &lt;/p&gt;
    &lt;p&gt;
      Your password is {{ password }}
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-usersinvitation_created">users.invitation_created</h3>
<p>A notification sent to the user so that he can accept it and receive permissions. The recipient is the user who's being invited.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_4">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="13:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_13_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_13_1">users/invitation_created_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>    {% if reminder %}
    REMINDER: Invitation to {{ name }} {{ type }}
    {% else %}
    Invitation to {{ name }} {{ type }}
    {% endif %}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_14_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_14_1">users/invitation_created_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.
    Please visit the link below to sign up and accept your invitation:
    {{ link }}
    {{ extra_invitation_text }}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="15:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_15_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_15_1">users/invitation_created_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Invitation to {{ name }} {{ type }}&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.&lt;br&gt;
        Please visit &lt;a href=&quot;{{ link }}&quot;&gt;this page&lt;/a&gt; to sign up and accept your invitation.
        Please note: this invitation expires at {{ invitation.get_expiration_time|date:&#39;d.m.Y H:i&#39; }}!
    &lt;/p&gt;
    &lt;p&gt;
        {{ extra_invitation_text }}
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-usersinvitation_expired">users.invitation_expired</h3>
<p>A notification sent out to notify the user that his invitation has expired. The recipient is the user who's being invited.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_5">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="16:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_16_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_16_1">users/invitation_expired_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Invitation has expired
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="17:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_17_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_17_1">users/invitation_expired_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    An invitation to {{ invitation.email }} has expired.
    This invitation expires at {{ invitation.get_expiration_time|date:&#39;d.m.Y H:i&#39; }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="18:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_18_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_18_1">users/invitation_expired_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Invitation to {{ invitation.email }} has expired&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        An invitation to {{ invitation.email }} has expired &lt;br&gt;
        An invitation to {{ invitation.email }} has expired at {{ invitation.get_expiration_time|date:&#39;d.m.Y H:i&#39; }}.

    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-usersinvitation_rejected">users.invitation_rejected</h3>
<p>A notification sent to notify the user that his invitation has been rejected. The recipient is the user who's being invited.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_6">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="19:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_19_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_19_1">users/invitation_rejected_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Invitation has been rejected
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="20:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_20_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_20_1">users/invitation_rejected_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    The following invitation has been rejected.

    Full name: {{ invitation.full_name }}

    Target: {{ name }} {{ type }}

    Role: {{ role }}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="21:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_21_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_21_1">users/invitation_rejected_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Invitation to {{ name }} {{ type }}&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
      The following invitation has been rejected.
    &lt;/p&gt;

    &lt;p&gt;
      Full name: {{ invitation.full_name }}
    &lt;/p&gt;

    &lt;p&gt;
      Target: {{ name }} {{ type }}
    &lt;/p&gt;

    &lt;p&gt;
      Role: {{ role }}
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-usersinvitation_requested">users.invitation_requested</h3>
<p>A notification sent to staff users so that they can approve or reject invitation. The recipients are active staff users.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_7">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="22:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_22_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_22_1">users/invitation_requested_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Invitation request
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="23:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_23_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_23_1">users/invitation_requested_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    {{ sender }} has created invitation request for the following user
    to join {{ name }} {{ type }} in {{ role }} role.

    {% if invitation.civil_number %}
    Civil number: {{ invitation.civil_number }}
    {% endif %}

    {% if invitation.tax_number %}
    Tax number: {{ invitation.tax_number }}
    {% endif %}

    {% if invitation.phone_number %}
    Phone number: {{ invitation.phone_number }}
    {% endif %}

    E-mail: {{ invitation.email }}

    {% if invitation.full_name %}
    Full name: {{ invitation.full_name }}
    {% endif %}

    {% if invitation.native_name %}
    Native name: {{ invitation.native_name }}
    {% endif %}

    {% if invitation.organization %}
    Organization: {{ invitation.organization }}
    {% endif %}

    {% if invitation.job_title %}
    Job title: {{ invitation.job_title }}
    {% endif %}

    Please visit the link below to approve invitation: {{ approve_link }}

    Alternatively, you may reject invitation: {{ reject_link }}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="24:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_24_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_24_1">users/invitation_requested_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
      &lt;meta charset=&quot;UTF-8&quot;&gt;
      &lt;title&gt;Invitation request&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
      Hello!
    &lt;/p&gt;
    &lt;p&gt;
      {{ sender }} has created invitation request for the following user
      to join {{ name }} {{ type }} in {{ role }} role.
    &lt;/p&gt;

    {% if invitation.civil_number %}
      &lt;p&gt;
        Civil number: {{ invitation.civil_number }}
      &lt;/p&gt;
    {% endif %}

    {% if invitation.tax_number %}
      &lt;p&gt;
        Tax number: {{ invitation.tax_number }}
      &lt;/p&gt;
    {% endif %}

    {% if invitation.phone_number %}
      &lt;p&gt;
        Phone number: {{ invitation.phone_number }}
      &lt;/p&gt;
    {% endif %}

    &lt;p&gt;
      E-mail: {{ invitation.email }}
    &lt;/p&gt;

    {% if invitation.full_name %}
      &lt;p&gt;
        Full name: {{ invitation.full_name }}
      &lt;/p&gt;
    {% endif %}

    {% if invitation.native_name %}
      &lt;p&gt;
        Native name: {{ invitation.native_name }}
      &lt;/p&gt;
    {% endif %}

    {% if invitation.organization %}
      &lt;p&gt;
        Organization: {{ invitation.organization }}
      &lt;/p&gt;
    {% endif %}

    {% if invitation.job_title %}
      &lt;p&gt;
        Job title: {{ invitation.job_title }}
      &lt;/p&gt;
    {% endif %}

    &lt;p&gt;
      Please &lt;a href=&quot;{{ approve_link }}&quot;&gt;approve&lt;/a&gt; or &lt;a href=&quot;{{ reject_link }}&quot;&gt;reject&lt;/a&gt; invitation.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-userspermission_request_submitted">users.permission_request_submitted</h3>
<p>A notification sent out to notify about submitted permission request. The recipients are active staff users or customer owners.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_8">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="25:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_25_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_25_1">users/permission_request_submitted_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Permission request has been submitted.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="26:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_26_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_26_1">users/permission_request_submitted_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}.

    Please visit the link below to approve or reject permission request: {{ requests_link }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="27:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_27_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_27_1">users/permission_request_submitted_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
      &lt;meta charset=&quot;UTF-8&quot;&gt;
      &lt;title&gt;Permission request has been submitted.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
      Hello!
    &lt;/p&gt;
    &lt;p&gt;
      User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}.
    &lt;/p&gt;
    &lt;p&gt;
      Please visit the &lt;a href=&quot;{{ requests_link }}&quot;&gt;link&lt;/a&gt; to approve or reject permission request.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_mastermindbooking">WALDUR_MASTERMIND.BOOKING</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-bookingnotification">booking.notification</h3>
<p>A notification sent out to notify about upcoming bookings. The recipients are users who have upcoming bookings.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_9">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="28:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_28_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_28_1">booking/notification_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Reminder about upcoming booking.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="29:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_29_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_29_1">booking/notification_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Please do not forget about upcoming booking:
    {% for resource in resources %}
        {{ resource.name }}{% if not forloop.last %}, {% endif %}
    {% endfor %}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="30:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_30_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_30_1">booking/notification_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Reminder about upcoming booking.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Please do not forget about upcoming booking: &lt;br /&gt;
        {% for resource in resources %}
            {{ resource.name }}
            {% if not forloop.last %}
                &lt;br /&gt;
            {% endif %}
        {% endfor %}
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_mastermindinvoices">WALDUR_MASTERMIND.INVOICES</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-invoicesnotification">invoices.notification</h3>
<p>A notification of invoice. The recipients are organization owners.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_10">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="31:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_31_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_31" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_31_1">invoices/notification_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    {{ customer }}&#39;s invoice for {{ month }}/{{ year }}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="32:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_32_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_32" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_32_1">invoices/notification_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello,

    Please follow the link below to see {{ customer }}&#39;s accounting information for {{ month }}/{{ year }}:
    {{ link }}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="33:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_33_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_33" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_33_1">invoices/notification_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html xmlns=&quot;http://www.w3.org/1999/html&quot;&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;{{ customer }}&#39;s invoice for {{ month }}/{{ year }}&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Dear Sir or Madam,
    &lt;/p&gt;
    &lt;p&gt;
        Attached is invoice for services consumed by {{ customer }}&#39;s during {{ month }}/{{ year }}.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-invoicesupcoming_ends_notification">invoices.upcoming_ends_notification</h3>
<p>A notification about upcoming contract ending. The recipients are organization owners.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_11">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="34:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_34_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_34" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_34_1">invoices/upcoming_ends_notification_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    {{ organization_name }}&#39;s fixed price contract {{ contract_number }} is coming to an end
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="35:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_35_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_35" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_35_1">invoices/upcoming_ends_notification_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello,

    this is a reminder that {{ organization_name }}&#39;s fixed price contract {{ contract_number }} is ending on {{ end }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="36:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_36_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_36" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_36_1">invoices/upcoming_ends_notification_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;{{ organization_name }}&#39;s fixed price contract {{ contract_number }} is coming to an end.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello,
        &lt;br/&gt;
        this is a reminder that {{ organization_name }}&#39;s fixed price contract {{ contract_number }} is ending on {{ end }}.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_mastermindmarketplace">WALDUR_MASTERMIND.MARKETPLACE</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_create_failed">marketplace.marketplace_resource_create_failed</h3>
<p>A notification of a failed resource creation</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_12">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="37:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_37_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_37" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_37_1">marketplace/marketplace_resource_create_failed_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} creation has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="38:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_38_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_38" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_38_1">marketplace/marketplace_resource_create_failed_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Resource {{ resource_name }} creation has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="39:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_39_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_39" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_39_1">marketplace/marketplace_resource_create_failed_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} creation has failed.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Resource {{ resource_name }} creation has failed.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_create_succeeded">marketplace.marketplace_resource_create_succeeded</h3>
<p>A notification of a successful resource creation</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_13">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="40:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_40_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_40" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_40_1">marketplace/marketplace_resource_create_succeeded_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} has been created.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="41:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_41_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_41" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_41_1">marketplace/marketplace_resource_create_succeeded_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Resource {{ resource_name }} has been created.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="42:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_42_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_42" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_42_1">marketplace/marketplace_resource_create_succeeded_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} has been created.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Resource {{ resource_name }} has been created.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_terminate_failed">marketplace.marketplace_resource_terminate_failed</h3>
<p>A notification of a failed resource termination</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_14">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="43:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_43_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_43" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_43_1">marketplace/marketplace_resource_terminate_failed_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} deletion has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="44:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_44_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_44" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_44_1">marketplace/marketplace_resource_terminate_failed_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Resource {{ resource_name }} deletion has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="45:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_45_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_45" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_45_1">marketplace/marketplace_resource_terminate_failed_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} deletion has failed.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Resource {{ resource_name }} deletion has failed.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_terminate_succeeded">marketplace.marketplace_resource_terminate_succeeded</h3>
<p>A notification of a successful resource termination</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_15">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="46:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_46_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_46" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_46_1">marketplace/marketplace_resource_terminate_succeeded_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} has been deleted.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="47:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_47_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_47" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_47_1">marketplace/marketplace_resource_terminate_succeeded_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Resource {{ resource_name }} has been deleted.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="48:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_48_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_48" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_48_1">marketplace/marketplace_resource_terminate_succeeded_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} has been deleted.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Resource {{ resource_name }} has been deleted.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_termination_scheduled">marketplace.marketplace_resource_termination_scheduled</h3>
<p>A notification of a scheduled resource termination. The recipients are project administrators and managers</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_16">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="49:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_49_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_49" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_49_1">marketplace/marketplace_resource_termination_scheduled_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource.name }} termination has been scheduled.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="50:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_50_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_50" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_50_1">marketplace/marketplace_resource_termination_scheduled_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="51:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_51_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_51" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_51_1">marketplace/marketplace_resource_termination_scheduled_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource.name }} termination has been scheduled.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        The resource you have - &lt;a href=&quot;{{ resource_url }}&quot;&gt;{{ resource.name }}&lt;/a&gt; has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}.
        If you feel that you still want to keep it, please &lt;a href=&quot;{{ resource_url }}&quot;&gt;&lt;/a&gt;remove the resource end date&lt;/a&gt;.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_termination_scheduled_staff">marketplace.marketplace_resource_termination_scheduled_staff</h3>
<p>A notification of a resource termination. The recipients are project administrators and managers.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_17">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="52:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_52_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_52" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_52_1">marketplace/marketplace_resource_termination_scheduled_staff_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource.name }} termination has been scheduled.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="53:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_53_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_53" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_53_1">marketplace/marketplace_resource_termination_scheduled_staff_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="54:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_54_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_54" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_54_1">marketplace/marketplace_resource_termination_scheduled_staff_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource.name }} termination has been scheduled.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        The resource you have - &lt;a href=&quot;{{ resource_url }}&quot;&gt;{{ resource.name }}&lt;/a&gt; has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}.
        If you feel that you still want to keep it, please &lt;a href=&quot;{{ resource_url }}&quot;&gt;&lt;/a&gt;remove the resource end date&lt;/a&gt;.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_update_failed">marketplace.marketplace_resource_update_failed</h3>
<p>A notification of failed resource update</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_18">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="55:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_55_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_55" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_55_1">marketplace/marketplace_resource_update_failed_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} update has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="56:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_56_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_56" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_56_1">marketplace/marketplace_resource_update_failed_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Resource {{ resource_name }} update has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="57:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_57_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_57" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_57_1">marketplace/marketplace_resource_update_failed_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} update has failed.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Resource {{ resource_name }} update has failed.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_update_limits_failed">marketplace.marketplace_resource_update_limits_failed</h3>
<p>A notification of failed resource limits update</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_19">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="58:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_58_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_58" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_58_1">marketplace/marketplace_resource_update_limits_failed_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} limits update has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="59:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_59_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_59" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_59_1">marketplace/marketplace_resource_update_limits_failed_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Resource {{ resource_name }} limits update has failed.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="60:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_60_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_60" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_60_1">marketplace/marketplace_resource_update_limits_failed_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} limits update has failed.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Resource {{ resource_name }} limits update has failed.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_update_limits_succeeded">marketplace.marketplace_resource_update_limits_succeeded</h3>
<p>A notification of a successful resource limit update. The recipients are all the users in the project.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_20">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="61:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_61_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_61" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_61_1">marketplace/marketplace_resource_update_limits_succeeded_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} limits have been updated.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="62:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_62_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_62" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_62_1">marketplace/marketplace_resource_update_limits_succeeded_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Following request from {{ order_user }}, resource {{ resource_name }} limits have been updated from:
        {{ resource_old_limits }}
    to:
        {{ resource_limits }}.

    {% if support_email or support_phone %}
    If you have any additional questions, please contact support.
    {% if support_email %}
    Email: {{ support_email }}
    {% endif %}
    {% if support_phone %}
    Phone: {{ support_phone }}
    {% endif %}
    {% endif %}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="63:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_63_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_63" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_63_1">marketplace/marketplace_resource_update_limits_succeeded_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} limits have been updated.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Following request from {{ order_user }}, resource {{ resource_name }} limits have been updated from:&lt;br&gt;
        &lt;blockquote&gt;
            {{ resource_old_limits }}
        &lt;/blockquote&gt;
        to:
        &lt;blockquote&gt;
            {{ resource_limits }}
        &lt;/blockquote&gt;
    &lt;/p&gt;
    {% if support_email or support_phone %}
    &lt;p&gt;
        If you have any additional questions, please contact support.
    &lt;/p&gt;
    {% if support_email %}
    &lt;p&gt;
        Email: {{ support_email }}
    &lt;/p&gt;
    {% endif %}
    {% if support_phone %}
    &lt;p&gt;
        Phone: {{ support_phone }}
    &lt;/p&gt;
    {% endif %}
    {% endif %}
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacemarketplace_resource_update_succeeded">marketplace.marketplace_resource_update_succeeded</h3>
<p>A notification of a successful resource update. The recipients are all the users in the project.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_21">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="64:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_64_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_64" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_64_1">marketplace/marketplace_resource_update_succeeded_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Resource {{ resource_name }} has been updated.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="65:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_65_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_65" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_65_1">marketplace/marketplace_resource_update_succeeded_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Following request from {{ order_user }}, resource {{ resource_name }} has been updated.

    {% if resource_old_plan %}
    The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}.
    {% endif %}

    {% if support_email or support_phone %}
    If you have any additional questions, please contact support.
    {% if support_email %}
    Email: {{ support_email }}
    {% endif %}
    {% if support_phone %}
    Phone: {{ support_phone }}
    {% endif %}
    {% endif %}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="66:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_66_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_66" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_66_1">marketplace/marketplace_resource_update_succeeded_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Resource {{ resource_name }} has been updated.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Following request from {{ order_user }}, resource {{ resource_name }} has been updated.
    &lt;/p&gt;
    {% if resource_old_plan %}
    &lt;p&gt;
        The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}.
    &lt;/p&gt;
    {% endif %}
    {% if support_email or support_phone %}
    &lt;p&gt;
        If you have any additional questions, please contact support.
    &lt;/p&gt;
    {% if support_email %}
    &lt;p&gt;
        Email: {{ support_email }}
    &lt;/p&gt;
    {% endif %}
    {% if support_phone %}
    &lt;p&gt;
        Phone: {{ support_phone }}
    &lt;/p&gt;
    {% endif %}
    {% endif %}
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacenotification_about_project_ending">marketplace.notification_about_project_ending</h3>
<p>A notification about project ending. The recipients are project managers and customer owners.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_22">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="67:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_67_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_67" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_67_1">marketplace/notification_about_project_ending_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Project {{ project.name }} will be deleted.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="68:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_68_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_68" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_68_1">marketplace/notification_about_project_ending_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>    Dear {{ user.full_name }},

    Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project.
    If you are aware of that, then no actions are needed from your side.
    If you need to update project end date, please update it in project details {{ project_url }}.

    Thank you!
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="69:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_69_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_69" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_69_1">marketplace/notification_about_project_ending_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Project {{ project.name }} will be deleted.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;Dear {{ user.full_name }},&lt;/p&gt;

    &lt;p&gt;Your project {{ project.name }} is ending
        {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}.
        End of the project will lead to termination of all resources in the project. &lt;br /&gt;
        If you are aware of that, then no actions are needed from your side. &lt;br /&gt;
        If you need to update project end date, please update it in project details {{ project_url }}.
    &lt;/p&gt;

    &lt;p&gt;Thank you!&lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacenotification_about_stale_resources">marketplace.notification_about_stale_resources</h3>
<p>A notification about stale resources. The recipients are organization owners.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_23">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="70:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_70_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_70" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_70_1">marketplace/notification_about_stale_resources_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Reminder about stale resources.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="71:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_71_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_71" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_71_1">marketplace/notification_about_stale_resources_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    We noticed that you have stale resources that have not cost you anything for the last 3 months.
    Perhaps some of them are not needed any more?

    The resource names are:
    {% for resource in resources %}
        {{ resource.resource.name }} {{ resource.resource_url }}
    {% endfor %}
    Thank you!
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="72:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_72_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_72" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_72_1">marketplace/notification_about_stale_resources_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Reminder about stale resources.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        We noticed that you have stale resources that have not cost you anything for the last 3 months. &lt;br /&gt;
        Perhaps some of them are not needed any more?&lt;br /&gt;

        The resource names are:
        &lt;ul&gt;
            {% for resource in resources %}
                &lt;li&gt;&lt;a href=&#39;{{ resource.resource_url }}&#39;&gt;{{ resource.resource.name }}&lt;/a&gt;&lt;/li&gt;
            {% endfor %}
        &lt;/ul&gt;
        Thank you!
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacenotification_usages">marketplace.notification_usages</h3>
<p>A notification about usages. The recipients are organization owners.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_24">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="73:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_73_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_73" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_73_1">marketplace/notification_usages_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Reminder about missing usage reports.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="74:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_74_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_74" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_74_1">marketplace/notification_usages_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    Please do not forget to add usage for the resources you provide:
    {% regroup resources by offering as offering_list %}{% for offering in offering_list %}
    {{forloop.counter}}. {{ offering.grouper.name }}:{% for resource in offering.list %}
        - {{ resource.name }}
    {% endfor %}{% endfor %}
    You can submit resource usage via API or do it manually at {{ public_resources_url }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="75:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_75_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_75" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_75_1">marketplace/notification_usages_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Reminder about missing usage reports.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;Please do not forget to add usage for the resources you provide:&lt;/p&gt;
    {% regroup resources by offering as offering_list %}

    &lt;ol&gt;
    {% for offering in offering_list %}
        &lt;li&gt;
            {{ offering.grouper.name }}:
            &lt;ul&gt;
                {% for resource in offering.list %}
                &lt;li&gt;{{ resource.name }}&lt;/li&gt;
                {% endfor %}
            &lt;/ul&gt;
        &lt;/li&gt;
    {% endfor %}
    &lt;/ol&gt;

    &lt;p&gt;
        You can submit resource usage via API or do it &lt;a href=&#39;{{ public_resources_url }}&#39;&gt;manually&lt;/a&gt;.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacenotify_consumer_about_pending_order">marketplace.notify_consumer_about_pending_order</h3>
<p>A notification for consumer about pending order. The recipients are users that have permissions to approve the order.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_25">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="76:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_76_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_76" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_76_1">marketplace/notify_consumer_about_pending_order_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="77:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_77_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_77" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_77_1">marketplace/notify_consumer_about_pending_order_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="78:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_78_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_78" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_78_1">marketplace/notify_consumer_about_pending_order_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;A new order by {{ order.created_by.get_full_name }} is waiting for approval.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Please visit &lt;a href=&quot;{{ order_link }}&quot;&gt;{{ site_name }}&lt;/a&gt; to find out more details.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplacenotify_provider_about_pending_order">marketplace.notify_provider_about_pending_order</h3>
<p>A notification for provider about pending order. The recipients are users that have permissions to approve the order.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_26">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="79:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_79_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_79" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_79_1">marketplace/notify_provider_about_pending_order_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="80:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_80_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_80" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_80_1">marketplace/notify_provider_about_pending_order_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="81:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_81_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_81" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_81_1">marketplace/notify_provider_about_pending_order_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;A new order by {{ order.created_by.get_full_name }} is waiting for approval.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Please visit &lt;a href=&quot;{{ order_url }}&quot;&gt;{{ site_name }}&lt;/a&gt; to find out more details.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_rancher">WALDUR_RANCHER</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-ranchernotification_create_user">rancher.notification_create_user</h3>
<p>A notification for created rancher user. The recipients is the user who requested the creation.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_27">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="82:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_82_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_82" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_82_1">rancher/notification_create_user_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    New account has been created.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="83:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_83_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_83" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_83_1">rancher/notification_create_user_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    User with login {{ user.username }} and temporary password {{ password }} has been created.
    Please go to management console {{ rancher_url }} to change the password.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="84:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_84_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_84" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_84_1">rancher/notification_create_user_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;A new user account has been created for you.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        User with login {{ user.username }} and temporary password {{ password }} has been created.&lt;br /&gt;
        Please go to &lt;a href=&quot;{{ rancher_url }}&quot;&gt;management console&lt;/a&gt; to change the password.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_mastermindmarketplace_remote">WALDUR_MASTERMIND.MARKETPLACE_REMOTE</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplace_remotenotification_about_pending_project_updates">marketplace_remote.notification_about_pending_project_updates</h3>
<p>A notification about pending project updates. The recipients are customer owners</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_28">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="85:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_85_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_85" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_85_1">marketplace_remote/notification_about_pending_project_updates_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Reminder about pending project updates.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="86:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_86_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_86" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_86_1">marketplace_remote/notification_about_pending_project_updates_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    We noticed that you have pending project update requests.
    Perhaps you would like to have a look at them?

    The project is:
        {{ project_update_request.project.name }} {{ project_url }}
    Thank you!
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="87:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_87_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_87" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_87_1">marketplace_remote/notification_about_pending_project_updates_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Reminder about pending project updates.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        We noticed that you have pending project update requests.&lt;br /&gt;
        Perhaps you would like to have a look at them?&lt;br /&gt;

        The project is:
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=&#39;{{ project_url }}&#39;&gt;{{ project_update_request.project.name }}&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
        Thank you!
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplace_remotenotification_about_project_details_update">marketplace_remote.notification_about_project_details_update</h3>
<p>A notification about project details update. The recipients the user who requested project details update and the user that reviewed it.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_29">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="88:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_88_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_88" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_88_1">marketplace_remote/notification_about_project_details_update_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    A notification about project details update.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="89:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_89_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_89" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_89_1">marketplace_remote/notification_about_project_details_update_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    We would like to notify you about recent updates in project details.
    Perhaps you would like to have a look at them?

    The project is:
        {{ new_name }} {{ project_url }}

        Details after the update are below:
            {% if new_description %}
                Old description: {{ old_description }}
                New description: {{ new_description }}
            {% endif %}

            {% if new_name %}
                Old name: {{ old_name }}
                New name: {{ new_name }}
            {% endif %}

            {% if new_end_date %}
               Old end date: {{ old_end_date }}
               New end date: {{ new_end_date }}
            {% endif %}

            {% if new_oecd_fos_2007_code %}
               Old OECD FOS 2007 code: {{ old_oecd_fos_2007_code }}
               New OECD FOS 2007 code: {{ new_oecd_fos_2007_code }}
            {% endif %}

            {% if new_is_industry %}
               Old is_industry: {{ old_is_industry }}
               New is_industry: {{ new_is_industry }}
            {% endif %}

        Reviewed by: {{ reviewed_by }}
    Thank you!
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="90:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_90_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_90" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_90_1">marketplace_remote/notification_about_project_details_update_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;A notification about project details update.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        We would like to notify you about recent updates in project details.&lt;br /&gt;
        Perhaps you would like to have a look at them?&lt;br /&gt;

        The project is:
        &lt;ul&gt;
            &lt;li&gt;&lt;a href=&#39;{{ project_url }}&#39;&gt;{{ new_name }}&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;

        &lt;div&gt;
            Details after the update are below:
            &lt;ul&gt;
                {% if new_description %}
                    &lt;li&gt;Old description: {{ old_description }}&lt;/li&gt;
                    &lt;li&gt;New description: {{ new_description }}&lt;/li&gt;
                {% endif %}

                {% if new_name %}
                    &lt;li&gt;Old name: {{ old_name }}&lt;/li&gt;
                    &lt;li&gt;New name: {{ new_name }}&lt;/li&gt;
                {% endif %}

                {% if new_end_date %}
                    &lt;li&gt;Old end date: {{ old_end_date }}&lt;/li&gt;
                    &lt;li&gt;New end date: {{ new_end_date }}&lt;/li&gt;
                {% endif %}

                {% if new_oecd_fos_2007_code %}
                    &lt;li&gt;Old OECD FOS 2007 code: {{ old_oecd_fos_2007_code }}&lt;/li&gt;
                    &lt;li&gt;New OECD FOS 2007 code: {{ new_oecd_fos_2007_code }}&lt;/li&gt;
                {% endif %}

                {% if new_is_industry %}
                    &lt;li&gt;Old is_industry: {{ old_is_industry }}&lt;/li&gt;
                    &lt;li&gt;New is_industry: {{ new_is_industry }}&lt;/li&gt;
                {% endif %}
                &lt;li&gt;Reviewed by: {{ reviewed_by }}&lt;/li&gt;
            &lt;/ul&gt;

        &lt;/div&gt;
        Thank you!
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-marketplace_policynotification_about_project_cost_exceeded_limit">marketplace_policy.notification_about_project_cost_exceeded_limit</h3>
<p>Notification about project cost exceeded limit. The recipients are all customer owners of the project.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_30">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="91:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_91_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_91" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_91_1">marketplace_policy/notification_about_project_cost_exceeded_limit_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Project {{ project_name }} cost has exceeded the limit.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="92:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_92_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_92" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_92_1">marketplace_policy/notification_about_project_cost_exceeded_limit_message.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!
    Project {{ project_name }} ({{ project_url }}) cost has exceeded the limit of {{ limit }}.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="93:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_93_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_93" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_93_1">marketplace_policy/notification_about_project_cost_exceeded_limit_message.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;Project {{ project_name }} cost has exceeded the limit.&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    &lt;p&gt;
        Project &lt;a href=&#39;{{ project_url }}&#39;&gt;{{ project_name }}&lt;/a&gt; cost has exceeded the limit of {{ limit }}.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-notifications-waldur_mastermindsupport">WALDUR_MASTERMIND.SUPPORT</h2>
<h3 id="admin-guide-mastermind-configuration-notifications-supportdescription">support.description</h3>
<p>A notification used for issue creation.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_31">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="94:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_94_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_94" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_94_1">support/description.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>    {{issue.description}}

    Additional Info:
    {% if issue.customer %}- Organization: {{issue.customer.name}}{% endif %}
    {% if issue.project %}- Project: {{issue.project.name}}{% endif %}
    {% if issue.resource %}
        {% if issue.resource.service_settings %}
            {% if issue.resource.service_settings.type %}- Service type: {{issue.resource.service_settings.type}}{% endif %}
            - Offering name: {{ issue.resource.service_settings.name }}
            - Offering provided by: {{ issue.resource.service_settings.customer.name }}
        {% endif %}
        - Affected resource: {{issue.resource}}
        - Backend ID: {{issue.resource.backend_id}}
    {% endif %}
    - Site name: {{ settings.WALDUR_CORE.SITE_NAME }}
    - Site URL: {{ settings.WALDUR_CORE.HOMEPORT_URL }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-supportnotification_comment_added">support.notification_comment_added</h3>
<p>Notification about a new comment in the issue. The recipient is issue caller.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_32">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="95:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_95_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_95" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_95_1">support/notification_comment_added.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    The issue you have created has a new comment. Please go to {{issue_url}} to see it.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="96:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_96_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_96" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_96_1">support/notification_comment_added.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;The issue you have created ({{ issue.key }}) has a new comment&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        {% if is_system_comment %}
            Added a new comment.
        {% else %}
            {{ comment.author.name }} added a new comment.
        {% endif %}
    &lt;/p&gt;
    &lt;p&gt;
        &lt;a href=&quot;{{ issue_url }}&quot;&gt;[{{ issue.key }}] {{ issue.summary }}&lt;/a&gt;
    &lt;/p&gt;
    &lt;div&gt;
        {{ description|safe }}
    &lt;/div&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="97:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_97_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_97" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_97_1">support/notification_comment_added_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    The issue ({{ issue.key }}) you have created has a new comment
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-supportnotification_comment_updated">support.notification_comment_updated</h3>
<p>Notification about an update in the issue comment. The recipient is issue caller.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_33">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="98:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_98_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_98" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_98_1">support/notification_comment_updated.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    The comment has been updated. Please go to {{issue_url}} to see it.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="99:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_99_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_99" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_99_1">support/notification_comment_updated.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;The comment has been updated ({{ issue.key }})&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        {{ comment.author.name }} updated comment.
    &lt;/p&gt;
    &lt;p&gt;
        &lt;a href=&quot;{{ issue_url }}&quot;&gt;[{{ issue.key }}] {{ issue.summary }}&lt;/a&gt;
    &lt;/p&gt;
    &lt;p&gt;
        Old comment:
    &lt;/p&gt;
    &lt;p&gt;
        {{ old_description|safe }}
    &lt;/p&gt;
    &lt;p&gt;
        New comment:
    &lt;/p&gt;
    &lt;p&gt;
        {{ description|safe }}
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="100:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_100_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_100" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_100_1">support/notification_comment_updated_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Issue {{ issue.key }}. The comment has been updated
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-supportnotification_issue_feedback">support.notification_issue_feedback</h3>
<p>Notification about a feedback related to the issue. The recipient is issue caller.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_34">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="101:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_101_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_101" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_101_1">support/notification_issue_feedback.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello, {{issue.caller.full_name}}!

    We would like to hear your feedback regarding your recent experience with support for {{issue_url}}.

    Click on the evaluations below to provide the feedback.

    {% for link in feedback_links%}
        {{link.label}}: {{link.link}}
    {% endfor %}
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="102:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_102_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_102" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_102_1">support/notification_issue_feedback.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;The issue you have ({{ issue.key }}) has been updated&lt;/title&gt;

        &lt;style&gt;
            * {
              font-family: sans-serif;
            }
            .rating {
              unicode-bidi: bidi-override;
              direction: rtl;
              width: 500px;
            }
            .rating &gt; a {
              display: inline-block;
              position: relative;
              width: 1.1em;
              text-decoration: none;
              font-size: xx-large;
              color: rgba(180, 179, 178, 1);
            }
            .rating &gt; a:hover:before,
            .rating &gt; a:hover ~ a:before {
               content: &quot;\2605&quot;;
               position: absolute;
               color: rgba(224, 194, 75, 1);
            }
        &lt;/style&gt;

    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;Hello, {{issue.caller.full_name}}!&lt;/p&gt;
    &lt;p&gt;We would like to hear your feedback regarding your recent experience with support for
        &lt;a href=&#39;{{issue_url}}&#39;&gt;{{ issue.summary }}&lt;/a&gt;.
    &lt;/p&gt;
    &lt;p&gt;Click the stars below to provide your feedback:&lt;/p&gt;
    &lt;div class=&quot;rating&quot;&gt;
        {% for link in feedback_links reversed %}
            &lt;a href=&#39;{{link.link}}&#39;&gt;☆&lt;/a&gt;
        {% endfor %}
    &lt;/div&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="103:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_103_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_103" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_103_1">support/notification_issue_feedback_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Please share your feedback: {{issue.key}} {{issue.summary}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-supportnotification_issue_updated">support.notification_issue_updated</h3>
<p>Notification about an update in the issue. The recipient is issue caller.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_35">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="104:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_104_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_104" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_104_1">support/notification_issue_updated.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code>    Hello!

    The issue you have has been updated.

    {% if changed.status %}
    Status has been changed from {{ changed.status }} to {{ issue.status }}.
    {% endif %}
    {% if changed.description %}
    Description has been changed from {{ changed.description }} to {{ issue.description }}.
    {% endif %}
    {% if changed.summary %}
    Summary has been changed from {{ changed.summary }} to {{ issue.summary }}.
    {% endif %}
    {% if changed.priority %}
    Priority has been changed from {{ changed.priority }} to {{ issue.priority }}.
    {% endif %}

    Please go to {{issue_url}} to see it.
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="105:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_105_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_105" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_105_1">support/notification_issue_updated.html</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code>    &lt;html&gt;
    &lt;head lang=&quot;en&quot;&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;title&gt;The issue you have ({{ issue.key }}) has been updated&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Hello!
    &lt;/p&gt;
    {% if changed.status %}
    &lt;p&gt;
        Status has been changed from &lt;strong&gt;{{ changed.status }}&lt;/strong&gt; to &lt;strong&gt;{{ issue.status }}&lt;/strong&gt;.
    &lt;/p&gt;
    {% endif %}
    {% if old_description %}
    &lt;p&gt;
        Description has been changed from &lt;strong&gt;{{ old_description|safe }}&lt;/strong&gt; to &lt;strong&gt;{{ description|safe }}&lt;/strong&gt;.
    &lt;/p&gt;
    {% endif %}
    {% if changed.summary %}
    &lt;p&gt;
        Summary has been changed from &lt;strong&gt;{{ changed.summary }}&lt;/strong&gt; to &lt;strong&gt;{{ issue.summary }}&lt;/strong&gt;.
    &lt;/p&gt;
    {% endif %}
    {% if changed.priority %}
    &lt;p&gt;
        Priority has been changed from &lt;strong&gt;{{ changed.priority }}&lt;/strong&gt; to &lt;strong&gt;{{ issue.priority }}&lt;/strong&gt;.
    &lt;/p&gt;
    {% endif %}
    &lt;p&gt;
        Please visit &lt;a href=&quot;{{ issue_url }}&quot;&gt;{{ site_name }}&lt;/a&gt; to find out more details.
    &lt;/p&gt;
    &lt;/body&gt;
    &lt;/html&gt;
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="106:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_106_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_106" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_106_1">support/notification_issue_updated_subject.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    Updated issue: {{issue.key}} {{issue.summary}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-notifications-supportsummary">support.summary</h3>
<p>A notification used for issue creation.</p>
<h4 id="admin-guide-mastermind-configuration-notifications-templates_36">Templates</h4>
<div class="tabbed-set tabbed-alternate" data-tabs="107:1"><input checked="checked" id="admin-guide-mastermind-configuration-notifications-__tabbed_107_1" name="admin-guide-mastermind-configuration-notifications-__tabbed_107" type="radio" /><div class="tabbed-labels"><label for="admin-guide-mastermind-configuration-notifications-__tabbed_107_1">support/summary.txt</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>    {% if issue.customer.abbreviation %}{{issue.customer.abbreviation}}: {% endif %}{{issue.summary}}
</code></pre></div></td></tr></table></div></section><section class="print-page" id="admin-guide-mastermind-configuration-templates"><h1 id="admin-guide-mastermind-configuration-templates-message-templates">Message templates</h1>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_corelogging">waldur_core.logging</h2>
<h3 id="admin-guide-mastermind-configuration-templates-emailhtml-waldur_corelogging">email.html (waldur_core.logging)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Notifications from waldur_core<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    {% for event in events %}
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
        {{ event.message }}
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ event.created|date:&quot;M d H:i e&quot;}}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    {% endfor %}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_corestructure">waldur_core.structure</h2>
<h3 id="admin-guide-mastermind-configuration-templates-notifications_profile_changes_operator_subjecttxt-waldur_corestructure">notifications_profile_changes_operator_subject.txt (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Owner details have been updated
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notifications_profile_changeshtml-waldur_corestructure">notifications_profile_changes.html (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>User {{user.full_name}} (id={{ user.id }}) profile has been updated:

{% for f in fields %}
    {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %}
{% endfor %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-change_email_request_subjecttxt-waldur_corestructure">change_email_request_subject.txt (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Verify new email address.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notifications_profile_changes_operator_messagehtml-waldur_corestructure">notifications_profile_changes_operator_message.html (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>Owner of
{% for o in organizations %}
    {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %}
{% endfor %}

{{user.full_name}} (id={{ user.id }}) has changed

{% for f in fields %}
    {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %}
{% endfor %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-structure_role_granted_messagetxt-waldur_corestructure">structure_role_granted_message.txt (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Role {{ permission.role }}  for {{ structure }} has been granted.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-structure_role_granted_subjecttxt-waldur_corestructure">structure_role_granted_subject.txt (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Role granted.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-change_email_request_messagehtml-waldur_corestructure">change_email_request_message.html (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ link }}&quot;</span><span class="p">&gt;</span>link<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-change_email_request_messagetxt-waldur_corestructure">change_email_request_message.txt (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>To confirm the change of email address from {{ request.user.email }} to {{ request.email }}, follow the {{ link }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notifications_profile_changes_operator_messagetxt-waldur_corestructure">notifications_profile_changes_operator_message.txt (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>Owner of
{% for o in organizations %}
    {{ o.name }} {% if o.abbreviation %} ({{ o.abbreviation }}){% endif %}{% if not forloop.last %}, {% endif %}
{% endfor %}

{{user.full_name}} (id={{ user.id }}) has changed

{% for f in fields %}
    {{ f.name }} from {{ f.old_value }} to {{ f.new_value }}{% if not forloop.last %}, {% else %}.{% endif %}
{% endfor %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-service_settings_descriptionhtml-waldur_corestructure">service_settings_description.html (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code>{% for name, service in services %}
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;id_{{ name }}&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;service-fields&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h4</span><span class="p">&gt;</span>{{ name }}<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>

    {% if service.fields.items %}
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Fields:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
            {% for name, field in service.fields.items %}
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">code</span><span class="p">&gt;</span>{{ name }}<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;</span>
                    {% if field.label or field.help_text %} — {% endif %}
                    {% if field.label %} {{ field.label }} {% endif %}
                    {% if field.help_text %} {{ field.help_text }} {% endif %}
                <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endfor %}
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    {% endif %}

    {% if service.extra_fields.items %}
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Options:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
            {% for name, field in service.extra_fields.items %}
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">code</span><span class="p">&gt;</span>{{ name }}<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;</span>
                    {% if field.label or field.help_text %} — {% endif %}
                    {% if not field.required %} (optional) {% endif %}
                    {% if field.label %} {{ field.label }} {% endif %}
                    {% if field.help_text %} {{ field.help_text }} {% endif %}
                <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endfor %}
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    {% endif %}
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endfor %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-structure_role_granted_messagehtml-waldur_corestructure">structure_role_granted_message.html (waldur_core.structure)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Role {{ permission.role }}  for {{ structure }} has been granted.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_coreusers">waldur_core.users</h2>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_approved_subjecttxt-waldur_coreusers">invitation_approved_subject.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Account has been created
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_created_messagehtml-waldur_coreusers">invitation_created_message.html (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Invitation to {{ name }} {{ type }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    Please visit <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ link }}&quot;</span><span class="p">&gt;</span>this page<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> to sign up and accept your invitation.
    Please note: this invitation expires at {{ invitation.get_expiration_time|date:&#39;d.m.Y H:i&#39; }}!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    {{ extra_invitation_text }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-permission_request_submitted_messagehtml-waldur_coreusers">permission_request_submitted_message.html (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Permission request has been submitted.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Please visit the <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ requests_link }}&quot;</span><span class="p">&gt;</span>link<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> to approve or reject permission request.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_approved_messagetxt-waldur_coreusers">invitation_approved_message.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

{{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.
Please visit the link below to sign up and accept your invitation:
{{ link }}

Your credentials are as following.

Username is {{ username }}

Your password is {{ password }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_created_messagetxt-waldur_coreusers">invitation_created_message.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

{{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.
Please visit the link below to sign up and accept your invitation:
{{ link }}
{{ extra_invitation_text }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_expired_messagehtml-waldur_coreusers">invitation_expired_message.html (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Invitation to {{ invitation.email }} has expired<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    An invitation to {{ invitation.email }} has expired <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    An invitation to {{ invitation.email }} has expired at {{ invitation.get_expiration_time|date:&#39;d.m.Y H:i&#39; }}.

<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_approved_messagehtml-waldur_coreusers">invitation_approved_message.html (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Account has been created<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    {{ sender }} has invited you to join {{ name }} {{ type }} in {{ role }} role.<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    Please visit <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ link }}&quot;</span><span class="p">&gt;</span>this page<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> to sign up and accept your invitation.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Your credentials are as following.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Your username is {{ username }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Your password is {{ password }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_expired_subjecttxt-waldur_coreusers">invitation_expired_subject.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Invitation has expired
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_expired_messagetxt-waldur_coreusers">invitation_expired_message.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

An invitation to {{ invitation.email }} has expired.
This invitation expires at {{ invitation.get_expiration_time|date:&#39;d.m.Y H:i&#39; }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_rejected_messagetxt-waldur_coreusers">invitation_rejected_message.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

The following invitation has been rejected.

Full name: {{ invitation.full_name }}

Target: {{ name }} {{ type }}

Role: {{ role }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_rejected_subjecttxt-waldur_coreusers">invitation_rejected_subject.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Invitation has been rejected
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_created_subjecttxt-waldur_coreusers">invitation_created_subject.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>{% if reminder %}
REMINDER: Invitation to {{ name }} {{ type }}
{% else %}
Invitation to {{ name }} {{ type }}
{% endif %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-permission_request_submitted_subjecttxt-waldur_coreusers">permission_request_submitted_subject.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Permission request has been submitted.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_requested_messagetxt-waldur_coreusers">invitation_requested_message.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

{{ sender }} has created invitation request for the following user
to join {{ name }} {{ type }} in {{ role }} role.

{% if invitation.civil_number %}
Civil number: {{ invitation.civil_number }}
{% endif %}

{% if invitation.tax_number %}
Tax number: {{ invitation.tax_number }}
{% endif %}

{% if invitation.phone_number %}
Phone number: {{ invitation.phone_number }}
{% endif %}

E-mail: {{ invitation.email }}

{% if invitation.full_name %}
Full name: {{ invitation.full_name }}
{% endif %}

{% if invitation.native_name %}
Native name: {{ invitation.native_name }}
{% endif %}

{% if invitation.organization %}
Organization: {{ invitation.organization }}
{% endif %}

{% if invitation.job_title %}
Job title: {{ invitation.job_title }}
{% endif %}

Please visit the link below to approve invitation: {{ approve_link }}

Alternatively, you may reject invitation: {{ reject_link }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_rejected_messagehtml-waldur_coreusers">invitation_rejected_message.html (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Invitation to {{ name }} {{ type }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  The following invitation has been rejected.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Full name: {{ invitation.full_name }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Target: {{ name }} {{ type }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Role: {{ role }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-permission_request_submitted_messagetxt-waldur_coreusers">permission_request_submitted_message.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

User {{ permission_request.created_by }} with email {{ permission_request.created_by.email }} created permission request for {{ permission_request.invitation }}.

Please visit the link below to approve or reject permission request: {{ requests_link }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_requested_messagehtml-waldur_coreusers">invitation_requested_message.html (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Invitation request<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  {{ sender }} has created invitation request for the following user
  to join {{ name }} {{ type }} in {{ role }} role.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

{% if invitation.civil_number %}
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Civil number: {{ invitation.civil_number }}
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

{% if invitation.tax_number %}
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Tax number: {{ invitation.tax_number }}
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

{% if invitation.phone_number %}
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Phone number: {{ invitation.phone_number }}
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  E-mail: {{ invitation.email }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

{% if invitation.full_name %}
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Full name: {{ invitation.full_name }}
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

{% if invitation.native_name %}
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Native name: {{ invitation.native_name }}
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

{% if invitation.organization %}
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Organization: {{ invitation.organization }}
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

{% if invitation.job_title %}
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Job title: {{ invitation.job_title }}
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
  Please <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ approve_link }}&quot;</span><span class="p">&gt;</span>approve<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> or <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ reject_link }}&quot;</span><span class="p">&gt;</span>reject<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> invitation.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invitation_requested_subjecttxt-waldur_coreusers">invitation_requested_subject.txt (waldur_core.users)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Invitation request
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_mastermindbooking">waldur_mastermind.booking</h2>
<h3 id="admin-guide-mastermind-configuration-templates-notification_messagetxt-waldur_mastermindbooking">notification_message.txt (waldur_mastermind.booking)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Please do not forget about upcoming booking:
{% for resource in resources %}
    {{ resource.name }}{% if not forloop.last %}, {% endif %}
{% endfor %}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_messagehtml-waldur_mastermindbooking">notification_message.html (waldur_mastermind.booking)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Reminder about upcoming booking.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Please do not forget about upcoming booking: <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    {% for resource in resources %}
        {{ resource.name }}
        {% if not forloop.last %}
            <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        {% endif %}
    {% endfor %}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_subjecttxt-waldur_mastermindbooking">notification_subject.txt (waldur_mastermind.booking)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Reminder about upcoming booking.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_mastermindinvoices">waldur_mastermind.invoices</h2>
<h3 id="admin-guide-mastermind-configuration-templates-monthly_invoicing_reportshtml-waldur_mastermindinvoices">monthly_invoicing_reports.html (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code>{% load i18n %}
{% load static %}
{% load humanize %}
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
<span class="w">        </span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">&quot;./style.css&quot;</span><span class="w"> </span><span class="err">%</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{% trans &#39;Fixed price contracts:&#39; %}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
{% if contracts %}
    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;invoice-table&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Organization&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Contract end date&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Till the end of contract. [days]&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Contract sum&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Payment sum&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
            {% for contract in contracts %}
                <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{{ forloop.counter }}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ contract.name }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ contract.end|date:&quot;Y-m-d&quot;|default_if_none:&quot;&quot; }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span> <span class="err">{%</span> <span class="na">if</span> <span class="na">contract</span><span class="err">.</span><span class="na">end_date_alarm</span> <span class="err">%}</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span> <span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span><span class="p">&gt;</span>{{ contract.till_end|default_if_none:&quot;&quot; }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span> <span class="err">{%</span> <span class="na">if</span> <span class="na">contract</span><span class="err">.</span><span class="na">payments_alarm</span> <span class="err">%}</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span> <span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span><span class="p">&gt;</span>
                        {{ contract.contract_sum|default_if_none:0|floatformat:&quot;2&quot;|intcomma }}
                    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">td</span> <span class="err">{%</span> <span class="na">if</span> <span class="na">contract</span><span class="err">.</span><span class="na">payments_alarm</span> <span class="err">%}</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-danger&quot;</span> <span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span><span class="p">&gt;</span>
                        {{ contract.payments_sum|default_if_none:0|floatformat:&quot;2&quot;|intcomma }}
                    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
            {% endfor %}
        <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
{% else %}
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{% trans &#39;Contracts do not exist.&#39; %}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}

<span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>{% blocktrans %}Invoices for month {{ month }}-{{ year }}:{% endblocktrans %}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;invoice-table&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Organization&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Invoice date&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{% trans &#39;Invoice sum&#39; %}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
        {% for invoice in invoices %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>{{ forloop.counter }}<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{% if invoice.customer.abbreviation %}
                        {{ invoice.customer.abbreviation }}
                    {% else %}
                        {{ invoice.customer.name }}
                    {% endif %}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ invoice.invoice_date|date:&quot;Y-m-d&quot; }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ invoice.total|floatformat:&quot;2&quot;|intcomma }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
    <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-report_bodytxt-waldur_mastermindinvoices">report_body.txt (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Attached is an accounting report for {{ month }}/{{ year }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-invoicehtml-waldur_mastermindinvoices">invoice.html (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code>{% load i18n %}
{% load humanize %}

<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Invoice<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">style</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/css&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">&quot;waldur_core/font.css&quot;</span><span class="w"> </span><span class="err">%</span><span class="p">}</span>
<span class="w">      </span><span class="p">{</span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">&quot;./style.css&quot;</span><span class="w"> </span><span class="err">%</span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
      {% if deployment_logo %}
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;logo&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;data:image/png;base64,{{ deployment_logo }}&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      {% endif %}
      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{% trans &quot;Invoice No.&quot; %} {{ invoice.number|upper }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-right&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{% trans &quot;Invoice date&quot; %}:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {% if invoice.invoice_date %}
        {{ invoice.invoice_date|date:&quot;Y-m-d&quot; }} {% else %} {% trans &quot;Pending&quot; %} {% endif %}<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
          {% if invoice.due_date %}<span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{% trans &quot;Due date&quot; %}:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ invoice.due_date|date:&quot;Y-m-d&quot; }}<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>{% endif %}
          <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{% trans &quot;Invoice period&quot; %}:<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> {{ invoice.year }}-{{ invoice.month }}<span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;</span>From<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ issuer_details.company }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ issuer_details.address }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ issuer_details.country }}, {{ issuer_details.postal }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">abbr</span><span class="p">&gt;</span>P:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span> ({{ issuer_details.phone.country_code }}) {{ issuer_details.phone.national_number }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ issuer_details.bank }}, {{ issuer_details.account }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">abbr</span><span class="p">&gt;</span>{% trans &quot;VAT&quot; %}:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span>{{ issuer_details.vat_code }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ issuer_details.email }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h3</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;</span>To<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ invoice.customer.name }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

        {% if invoice.customer.address %}
          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ invoice.customer.address }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        {% endif %}

        {% if invoice.customer.country and invoice.customer.postal %}
          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ invoice.customer.country }}, {{ invoice.customer.postal }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        {% endif %}

        {% if invoice.customer.phone_number %}
          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">abbr</span><span class="p">&gt;</span>P:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span> {{ invoice.customer.phone_number }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        {% endif %}

        {% if invoice.customer.bank_name and invoice.customer.bank_account %}
          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ invoice.customer.bank_name }}, {{ invoice.customer.bank_account }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        {% endif %}

        {% if customer.vat_code %}
          <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;&lt;</span><span class="nt">abbr</span><span class="p">&gt;</span>{% trans &quot;VAT&quot; %}:<span class="p">&lt;/</span><span class="nt">abbr</span><span class="p">&gt;</span> {{ customer.vat_code }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        {% endif %}

        <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>{{ invoice.customer.email }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;m-t&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;invoice-table&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Item<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Quantity<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Unit price<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Total price<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>

          {% regroup items|dictsort:&quot;project_name&quot; by project_name as project_list %}
          {% for project in project_list %}
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">td</span> <span class="na">colspan</span><span class="o">=</span><span class="s">&quot;4&quot;</span><span class="p">&gt;&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>{{ project.grouper }}<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
            {% for item in project.list %}
              <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
                  <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ item.name }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>
                  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
                    <span class="p">&lt;</span><span class="nt">small</span><span class="p">&gt;</span>
                      {% trans &quot;Start time&quot; %}: {{ item.start | date:&quot;Y-m-d H:i&quot; }}.
                      {% trans &quot;End time&quot; %}: {{ item.end | date:&quot;Y-m-d H:i&quot; }}.
                    <span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>
                  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
                <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ item.quantity }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ currency }} {{ item.unit_price | floatformat:2 | intcomma }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ currency }} {{ item.total | floatformat:2 | intcomma }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
            {% endfor %}
          {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;m-t invoice-total&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{% trans &quot;Subtotal&quot; %}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ currency }} {{ invoice.price | floatformat:2 | intcomma}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% if invoice.tax %}
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{% trans &quot;VAT&quot; %}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ currency }} {{ invoice.tax | floatformat:2 | intcomma}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endif %}
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{% trans &quot;TOTAL&quot; %}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ currency }} {{ invoice.total | floatformat:2 | intcomma}}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_messagetxt-waldur_mastermindinvoices">notification_message.txt (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello,

Please follow the link below to see {{ customer }}&#39;s accounting information for {{ month }}/{{ year }}:
{{ link }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-upcoming_ends_notification_messagetxt-waldur_mastermindinvoices">upcoming_ends_notification_message.txt (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello,

this is a reminder that {{ organization_name }}&#39;s fixed price contract {{ contract_number }} is ending on {{ end }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-upcoming_ends_notification_subjecttxt-waldur_mastermindinvoices">upcoming_ends_notification_subject.txt (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>{{ organization_name }}&#39;s fixed price contract {{ contract_number }} is coming to an end
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-report_subjecttxt-waldur_mastermindinvoices">report_subject.txt (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Waldur accounting report for {{ month }}/{{ year }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_messagehtml-waldur_mastermindinvoices">notification_message.html (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/html&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ customer }}&#39;s invoice for {{ month }}/{{ year }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Dear Sir or Madam,
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Attached is invoice for services consumed by {{ customer }}&#39;s during {{ month }}/{{ year }}.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-upcoming_ends_notification_messagehtml-waldur_mastermindinvoices">upcoming_ends_notification_message.html (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ organization_name }}&#39;s fixed price contract {{ contract_number }} is coming to an end.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello,
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
    this is a reminder that {{ organization_name }}&#39;s fixed price contract {{ contract_number }} is ending on {{ end }}.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_subjecttxt-waldur_mastermindinvoices">notification_subject.txt (waldur_mastermind.invoices)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>{{ customer }}&#39;s invoice for {{ month }}/{{ year }}
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_mastermindmarketplace">waldur_mastermind.marketplace</h2>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_project_ending_subjecttxt-waldur_mastermindmarketplace">notification_about_project_ending_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Project {{ project.name }} will be deleted.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_limits_succeeded_messagetxt-waldur_mastermindmarketplace">marketplace_resource_update_limits_succeeded_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Following request from {{ order_user }}, resource {{ resource_name }} limits have been updated from:
    {{ resource_old_limits }}
to:
    {{ resource_limits }}.

{% if support_email or support_phone %}
If you have any additional questions, please contact support.
{% if support_email %}
Email: {{ support_email }}
{% endif %}
{% if support_phone %}
Phone: {{ support_phone }}
{% endif %}
{% endif %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_limits_succeeded_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_update_limits_succeeded_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} limits have been updated.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_stale_resources_messagetxt-waldur_mastermindmarketplace">notification_about_stale_resources_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

We noticed that you have stale resources that have not cost you anything for the last 3 months.
Perhaps some of them are not needed any more?

The resource names are:
{% for resource in resources %}
    {{ resource.resource.name }} {{ resource.resource_url }}
{% endfor %}
Thank you!
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_plan_templatetxt-waldur_mastermindmarketplace">marketplace_plan_template.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Plan: {{ plan.name }}{% for component in components %}
{{component.name}}; amount: {{component.amount}}; price: {{component.price|floatformat }};
{% endfor %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_usages_messagetxt-waldur_mastermindmarketplace">notification_usages_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Please do not forget to add usage for the resources you provide:
{% regroup resources by offering as offering_list %}{% for offering in offering_list %}
{{forloop.counter}}. {{ offering.grouper.name }}:{% for resource in offering.list %}
    - {{ resource.name }}
{% endfor %}{% endfor %}
You can submit resource usage via API or do it manually at {{ public_resources_url }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notify_consumer_about_pending_order_subjecttxt-waldur_mastermindmarketplace">notify_consumer_about_pending_order_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_termination_scheduled_staff_messagehtml-waldur_mastermindmarketplace">marketplace_resource_termination_scheduled_staff_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource.name }} termination has been scheduled.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    The resource you have - <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ resource_url }}&quot;</span><span class="p">&gt;</span>{{ resource.name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}.
    If you feel that you still want to keep it, please <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ resource_url }}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>remove the resource end date<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_succeeded_messagehtml-waldur_mastermindmarketplace">marketplace_resource_update_succeeded_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} has been updated.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Following request from {{ order_user }}, resource {{ resource_name }} has been updated.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% if resource_old_plan %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% if support_email or support_phone %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    If you have any additional questions, please contact support.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% if support_email %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Email: {{ support_email }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% if support_phone %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Phone: {{ support_phone }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% endif %}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_failed_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_update_failed_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} update has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notify_provider_about_pending_order_messagehtml-waldur_mastermindmarketplace">notify_provider_about_pending_order_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>A new order by {{ order.created_by.get_full_name }} is waiting for approval.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Please visit <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ order_url }}&quot;</span><span class="p">&gt;</span>{{ site_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> to find out more details.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_terminate_failed_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_terminate_failed_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} deletion has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_succeeded_messagetxt-waldur_mastermindmarketplace">marketplace_resource_update_succeeded_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Following request from {{ order_user }}, resource {{ resource_name }} has been updated.

{% if resource_old_plan %}
The plan has been changed from {{ resource_old_plan }} to {{ resource_plan }}.
{% endif %}

{% if support_email or support_phone %}
If you have any additional questions, please contact support.
{% if support_email %}
Email: {{ support_email }}
{% endif %}
{% if support_phone %}
Phone: {{ support_phone }}
{% endif %}
{% endif %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_failed_messagetxt-waldur_mastermindmarketplace">marketplace_resource_update_failed_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Resource {{ resource_name }} update has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_stale_resources_messagehtml-waldur_mastermindmarketplace">notification_about_stale_resources_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Reminder about stale resources.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    We noticed that you have stale resources that have not cost you anything for the last 3 months. <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Perhaps some of them are not needed any more?<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>

    The resource names are:
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        {% for resource in resources %}
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;{{ resource.resource_url }}&#39;</span><span class="p">&gt;</span>{{ resource.resource.name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        {% endfor %}
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    Thank you!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_create_failed_messagehtml-waldur_mastermindmarketplace">marketplace_resource_create_failed_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} creation has failed.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Resource {{ resource_name }} creation has failed.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notify_consumer_about_pending_order_messagetxt-waldur_mastermindmarketplace">notify_consumer_about_pending_order_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_create_succeeded_messagehtml-waldur_mastermindmarketplace">marketplace_resource_create_succeeded_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} has been created.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Resource {{ resource_name }} has been created.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_limits_failed_messagehtml-waldur_mastermindmarketplace">marketplace_resource_update_limits_failed_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} limits update has failed.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Resource {{ resource_name }} limits update has failed.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_limits_succeeded_messagehtml-waldur_mastermindmarketplace">marketplace_resource_update_limits_succeeded_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} limits have been updated.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Following request from {{ order_user }}, resource {{ resource_name }} limits have been updated from:<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">blockquote</span><span class="p">&gt;</span>
        {{ resource_old_limits }}
    <span class="p">&lt;/</span><span class="nt">blockquote</span><span class="p">&gt;</span>
    to:
    <span class="p">&lt;</span><span class="nt">blockquote</span><span class="p">&gt;</span>
        {{ resource_limits }}
    <span class="p">&lt;/</span><span class="nt">blockquote</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% if support_email or support_phone %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    If you have any additional questions, please contact support.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% if support_email %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Email: {{ support_email }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% if support_phone %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Phone: {{ support_phone }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% endif %}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_failed_messagehtml-waldur_mastermindmarketplace">marketplace_resource_update_failed_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} update has failed.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Resource {{ resource_name }} update has failed.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_project_ending_messagehtml-waldur_mastermindmarketplace">notification_about_project_ending_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Project {{ project.name }} will be deleted.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Dear {{ user.full_name }},<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Your project {{ project.name }} is ending
    {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}.
    End of the project will lead to termination of all resources in the project. <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    If you are aware of that, then no actions are needed from your side. <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    If you need to update project end date, please update it in project details {{ project_url }}.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Thank you!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_create_failed_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_create_failed_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} creation has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_limits_failed_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_update_limits_failed_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} limits update has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_terminate_failed_messagehtml-waldur_mastermindmarketplace">marketplace_resource_terminate_failed_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} deletion has failed.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Resource {{ resource_name }} deletion has failed.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_usages_messagehtml-waldur_mastermindmarketplace">notification_usages_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Reminder about missing usage reports.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Please do not forget to add usage for the resources you provide:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% regroup resources by offering as offering_list %}

<span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;</span>
{% for offering in offering_list %}
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
        {{ offering.grouper.name }}:
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
            {% for resource in offering.list %}
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>{{ resource.name }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endfor %}
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
{% endfor %}
<span class="p">&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    You can submit resource usage via API or do it <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;{{ public_resources_url }}&#39;</span><span class="p">&gt;</span>manually<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_terminate_succeeded_messagehtml-waldur_mastermindmarketplace">marketplace_resource_terminate_succeeded_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource_name }} has been deleted.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Resource {{ resource_name }} has been deleted.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_termination_scheduled_staff_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_termination_scheduled_staff_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource.name }} termination has been scheduled.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_stale_resources_subjecttxt-waldur_mastermindmarketplace">notification_about_stale_resources_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Reminder about stale resources.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notify_provider_about_pending_order_subjecttxt-waldur_mastermindmarketplace">notify_provider_about_pending_order_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_terminate_succeeded_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_terminate_succeeded_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} has been deleted.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_termination_scheduled_messagetxt-waldur_mastermindmarketplace">marketplace_resource_termination_scheduled_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_project_ending_messagetxt-waldur_mastermindmarketplace">notification_about_project_ending_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code>Dear {{ user.full_name }},

Your project {{ project.name }} is ending {% if delta == 1 %} tomorrow {% else %} in {{ delta }} days{% endif %}. End of the project will lead to termination of all resources in the project.
If you are aware of that, then no actions are needed from your side.
If you need to update project end date, please update it in project details {{ project_url }}.

Thank you!
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_succeeded_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_update_succeeded_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} has been updated.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_update_limits_failed_messagetxt-waldur_mastermindmarketplace">marketplace_resource_update_limits_failed_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Resource {{ resource_name }} limits update has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_termination_scheduled_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_termination_scheduled_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource.name }} termination has been scheduled.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notify_consumer_about_pending_order_messagehtml-waldur_mastermindmarketplace">notify_consumer_about_pending_order_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>A new order by {{ order.created_by.get_full_name }} is waiting for approval.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Please visit <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ order_link }}&quot;</span><span class="p">&gt;</span>{{ site_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> to find out more details.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_terminate_failed_messagetxt-waldur_mastermindmarketplace">marketplace_resource_terminate_failed_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Resource {{ resource_name }} deletion has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_termination_scheduled_messagehtml-waldur_mastermindmarketplace">marketplace_resource_termination_scheduled_message.html (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Resource {{ resource.name }} termination has been scheduled.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    The resource you have - <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ resource_url }}&quot;</span><span class="p">&gt;</span>{{ resource.name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}.
    If you feel that you still want to keep it, please <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ resource_url }}&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>remove the resource end date<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_create_failed_messagetxt-waldur_mastermindmarketplace">marketplace_resource_create_failed_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Resource {{ resource_name }} creation has failed.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_termination_scheduled_staff_messagetxt-waldur_mastermindmarketplace">marketplace_resource_termination_scheduled_staff_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

The resource you have - {{ resource.name }} has not been used for the past 3 months. {{ user.full_name }} has scheduled termination of that resource on {{ resource.end_date|date:&quot;SHORT_DATE_FORMAT&quot; }}. If you feel that you still want to keep it, please remove the resource end date {{ resource_url }}.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_create_succeeded_subjecttxt-waldur_mastermindmarketplace">marketplace_resource_create_succeeded_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Resource {{ resource_name }} has been created.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_terminate_succeeded_messagetxt-waldur_mastermindmarketplace">marketplace_resource_terminate_succeeded_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Resource {{ resource_name }} has been deleted.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notify_provider_about_pending_order_messagetxt-waldur_mastermindmarketplace">notify_provider_about_pending_order_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

A new order by {{ order.created_by.get_full_name }} is waiting for approval.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-marketplace_resource_create_succeeded_messagetxt-waldur_mastermindmarketplace">marketplace_resource_create_succeeded_message.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

Resource {{ resource_name }} has been created.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_usages_subjecttxt-waldur_mastermindmarketplace">notification_usages_subject.txt (waldur_mastermind.marketplace)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Reminder about missing usage reports.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_mastermindmarketplace_remote">waldur_mastermind.marketplace_remote</h2>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_pending_project_updates_messagetxt-waldur_mastermindmarketplace_remote">notification_about_pending_project_updates_message.txt (waldur_mastermind.marketplace_remote)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

We noticed that you have pending project update requests.
Perhaps you would like to have a look at them?

The project is:
    {{ project_update_request.project.name }} {{ project_url }}
Thank you!
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_pending_project_updates_subjecttxt-waldur_mastermindmarketplace_remote">notification_about_pending_project_updates_subject.txt (waldur_mastermind.marketplace_remote)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Reminder about pending project updates.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_project_details_update_messagetxt-waldur_mastermindmarketplace_remote">notification_about_project_details_update_message.txt (waldur_mastermind.marketplace_remote)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

We would like to notify you about recent updates in project details.
Perhaps you would like to have a look at them?

The project is:
    {{ new_name }} {{ project_url }}

    Details after the update are below:
        {% if new_description %}
            Old description: {{ old_description }}
            New description: {{ new_description }}
        {% endif %}

        {% if new_name %}
            Old name: {{ old_name }}
            New name: {{ new_name }}
        {% endif %}

        {% if new_end_date %}
           Old end date: {{ old_end_date }}
           New end date: {{ new_end_date }}
        {% endif %}

        {% if new_oecd_fos_2007_code %}
           Old OECD FOS 2007 code: {{ old_oecd_fos_2007_code }}
           New OECD FOS 2007 code: {{ new_oecd_fos_2007_code }}
        {% endif %}

        {% if new_is_industry %}
           Old is_industry: {{ old_is_industry }}
           New is_industry: {{ new_is_industry }}
        {% endif %}

    Reviewed by: {{ reviewed_by }}
Thank you!
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_project_details_update_messagehtml-waldur_mastermindmarketplace_remote">notification_about_project_details_update_message.html (waldur_mastermind.marketplace_remote)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>A notification about project details update.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    We would like to notify you about recent updates in project details.<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Perhaps you would like to have a look at them?<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>

    The project is:
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;{{ project_url }}&#39;</span><span class="p">&gt;</span>{{ new_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
        Details after the update are below:
        <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
            {% if new_description %}
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Old description: {{ old_description }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>New description: {{ new_description }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endif %}

            {% if new_name %}
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Old name: {{ old_name }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>New name: {{ new_name }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endif %}

            {% if new_end_date %}
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Old end date: {{ old_end_date }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>New end date: {{ new_end_date }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endif %}

            {% if new_oecd_fos_2007_code %}
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Old OECD FOS 2007 code: {{ old_oecd_fos_2007_code }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>New OECD FOS 2007 code: {{ new_oecd_fos_2007_code }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endif %}

            {% if new_is_industry %}
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Old is_industry: {{ old_is_industry }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>New is_industry: {{ new_is_industry }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
            {% endif %}
            <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Reviewed by: {{ reviewed_by }}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>

    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    Thank you!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_pending_project_updates_messagehtml-waldur_mastermindmarketplace_remote">notification_about_pending_project_updates_message.html (waldur_mastermind.marketplace_remote)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Reminder about pending project updates.<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    We noticed that you have pending project update requests.<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    Perhaps you would like to have a look at them?<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>

    The project is:
    <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;{{ project_url }}&#39;</span><span class="p">&gt;</span>{{ project_update_request.project.name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
    Thank you!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_about_project_details_update_subjecttxt-waldur_mastermindmarketplace_remote">notification_about_project_details_update_subject.txt (waldur_mastermind.marketplace_remote)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>A notification about project details update.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_mastermindmarketplace_support">waldur_mastermind.marketplace_support</h2>
<h3 id="admin-guide-mastermind-configuration-templates-terminate_resource_templatetxt-waldur_mastermindmarketplace_support">terminate_resource_template.txt (waldur_mastermind.marketplace_support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>{% load waldur_marketplace %}[Terminate resource {{order.resource.scope.name}}|{{request_url}}].
{% plan_details order.resource.plan %}
Marketplace resource UUID: {{order.resource.uuid.hex}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-update_resource_templatetxt-waldur_mastermindmarketplace_support">update_resource_template.txt (waldur_mastermind.marketplace_support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>[Switch plan for resource {{order.resource.scope.name}}|{{request_url}}].
Switch from {{order.resource.plan.name}} plan to {{order.plan.name}}.
Marketplace resource UUID: {{order.resource.uuid.hex}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-create_resource_templatetxt-waldur_mastermindmarketplace_support">create_resource_template.txt (waldur_mastermind.marketplace_support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>{% load waldur_marketplace %}[Order|{{order_url}}].
Provider: {{order.offering.customer.name}}
Resource UUID: {{resource.uuid}}
Resource name: {{resource.name}}
Plan details:
    {% plan_details order.plan %}
Full name: {{order.created_by.full_name|default:&quot;none&quot;}}
Civil code: {{order.created_by.civil_number|default:&quot;none&quot;}}
Email: {{order.created_by.email}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-update_limits_templatetxt-waldur_mastermindmarketplace_support">update_limits_template.txt (waldur_mastermind.marketplace_support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>[Update limits for resource {{order.resource.scope.name}}|{{request_url}}].
Marketplace resource UUID: {{order.resource.uuid.hex}}
Old limits: {{ old_limits }}.
New limits: {{ new_limits }}.
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-mastermind-configuration-templates-waldur_mastermindsupport">waldur_mastermind.support</h2>
<h3 id="admin-guide-mastermind-configuration-templates-notification_comment_updatedtxt-waldur_mastermindsupport">notification_comment_updated.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

The comment has been updated. Please go to {{issue_url}} to see it.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_issue_feedbacktxt-waldur_mastermindsupport">notification_issue_feedback.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello, {{issue.caller.full_name}}!

We would like to hear your feedback regarding your recent experience with support for {{issue_url}}.

Click on the evaluations below to provide the feedback.

{% for link in feedback_links%}
    {{link.label}}: {{link.link}}
{% endfor %}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-descriptiontxt-waldur_mastermindsupport">description.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code>{{issue.description}}

Additional Info:
{% if issue.customer %}- Organization: {{issue.customer.name}}{% endif %}
{% if issue.project %}- Project: {{issue.project.name}}{% endif %}
{% if issue.resource %}
    {% if issue.resource.service_settings %}
        {% if issue.resource.service_settings.type %}- Service type: {{issue.resource.service_settings.type}}{% endif %}
        - Offering name: {{ issue.resource.service_settings.name }}
        - Offering provided by: {{ issue.resource.service_settings.customer.name }}
    {% endif %}
    - Affected resource: {{issue.resource}}
    - Backend ID: {{issue.resource.backend_id}}
{% endif %}
- Site name: {{ settings.WALDUR_CORE.SITE_NAME }}
- Site URL: {{ settings.WALDUR_CORE.HOMEPORT_URL }}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-summarytxt-waldur_mastermindsupport">summary.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>{% if issue.customer.abbreviation %}{{issue.customer.abbreviation}}: {% endif %}{{issue.summary}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_issue_updated_subjecttxt-waldur_mastermindsupport">notification_issue_updated_subject.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Updated issue: {{issue.key}} {{issue.summary}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_comment_addedhtml-waldur_mastermindsupport">notification_comment_added.html (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>The issue you have created ({{ issue.key }}) has a new comment<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    {% if is_system_comment %}
        Added a new comment.
    {% else %}
        {{ comment.author.name }} added a new comment.
    {% endif %}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ issue_url }}&quot;</span><span class="p">&gt;</span>[{{ issue.key }}] {{ issue.summary }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    {{ description|safe }}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_issue_updatedhtml-waldur_mastermindsupport">notification_issue_updated.html (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>The issue you have ({{ issue.key }}) has been updated<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Hello!
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% if changed.status %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Status has been changed from <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ changed.status }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> to <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ issue.status }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% if old_description %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Description has been changed from <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ old_description|safe }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> to <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ description|safe }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% if changed.summary %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Summary has been changed from <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ changed.summary }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> to <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ issue.summary }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
{% if changed.priority %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Priority has been changed from <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ changed.priority }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> to <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>{{ issue.priority }}<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Please visit <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ issue_url }}&quot;</span><span class="p">&gt;</span>{{ site_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> to find out more details.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_comment_addedtxt-waldur_mastermindsupport">notification_comment_added.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

The issue you have created has a new comment. Please go to {{issue_url}} to see it.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_issue_feedback_subjecttxt-waldur_mastermindsupport">notification_issue_feedback_subject.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Please share your feedback: {{issue.key}} {{issue.summary}}
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_issue_feedbackhtml-waldur_mastermindsupport">notification_issue_feedback.html (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>The issue you have ({{ issue.key }}) has been updated<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="w">        </span><span class="o">*</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">font-family</span><span class="p">:</span><span class="w"> </span><span class="kc">sans-serif</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">rating</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">unicode-bidi</span><span class="p">:</span><span class="w"> </span><span class="kc">bidi-override</span><span class="p">;</span>
<span class="w">          </span><span class="k">direction</span><span class="p">:</span><span class="w"> </span><span class="kc">rtl</span><span class="p">;</span>
<span class="w">          </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="kt">px</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">rating</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">inline-block</span><span class="p">;</span>
<span class="w">          </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">relative</span><span class="p">;</span>
<span class="w">          </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1</span><span class="kt">em</span><span class="p">;</span>
<span class="w">          </span><span class="k">text-decoration</span><span class="p">:</span><span class="w"> </span><span class="kc">none</span><span class="p">;</span>
<span class="w">          </span><span class="k">font-size</span><span class="p">:</span><span class="w"> </span><span class="kc">xx-large</span><span class="p">;</span>
<span class="w">          </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span><span class="w"> </span><span class="mi">179</span><span class="p">,</span><span class="w"> </span><span class="mi">178</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="p">.</span><span class="nc">rating</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="p">:</span><span class="nd">before</span><span class="o">,</span>
<span class="w">        </span><span class="p">.</span><span class="nc">rating</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">hover</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nt">a</span><span class="p">:</span><span class="nd">before</span><span class="w"> </span><span class="p">{</span>
<span class="w">           </span><span class="k">content</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\2605&quot;</span><span class="p">;</span>
<span class="w">           </span><span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">absolute</span><span class="p">;</span>
<span class="w">           </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="nb">rgba</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span><span class="w"> </span><span class="mi">194</span><span class="p">,</span><span class="w"> </span><span class="mi">75</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hello, {{issue.caller.full_name}}!<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>We would like to hear your feedback regarding your recent experience with support for
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;{{issue_url}}&#39;</span><span class="p">&gt;</span>{{ issue.summary }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Click the stars below to provide your feedback:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;rating&quot;</span><span class="p">&gt;</span>
    {% for link in feedback_links reversed %}
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;{{link.link}}&#39;</span><span class="p">&gt;</span>☆<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    {% endfor %}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_comment_added_subjecttxt-waldur_mastermindsupport">notification_comment_added_subject.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>The issue ({{ issue.key }}) you have created has a new comment
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_issue_updatedtxt-waldur_mastermindsupport">notification_issue_updated.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code>Hello!

The issue you have has been updated.

{% if changed.status %}
Status has been changed from {{ changed.status }} to {{ issue.status }}.
{% endif %}
{% if changed.description %}
Description has been changed from {{ changed.description }} to {{ issue.description }}.
{% endif %}
{% if changed.summary %}
Summary has been changed from {{ changed.summary }} to {{ issue.summary }}.
{% endif %}
{% if changed.priority %}
Priority has been changed from {{ changed.priority }} to {{ issue.priority }}.
{% endif %}

Please go to {{issue_url}} to see it.
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_comment_updatedhtml-waldur_mastermindsupport">notification_comment_updated.html (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;UTF-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>The comment has been updated ({{ issue.key }})<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    {{ comment.author.name }} updated comment.
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ issue_url }}&quot;</span><span class="p">&gt;</span>[{{ issue.key }}] {{ issue.summary }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    Old comment:
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    {{ old_description|safe }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    New comment:
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
    {{ description|safe }}
<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-mastermind-configuration-templates-notification_comment_updated_subjecttxt-waldur_mastermindsupport">notification_comment_updated_subject.txt (waldur_mastermind.support)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>Issue {{ issue.key }}. The comment has been updated
</code></pre></div></td></tr></table></div></section><h1 class='nav-section-title-end'>Ended: Mastermind configuration</h1>
                        <h2 class='nav-section-title' id='section-providers'>
                            Providers <a class='headerlink' href='#section-providers' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="admin-guide-providers-adding-an-offering"><h1 id="admin-guide-providers-adding-an-offering-adding-an-offering">Adding an offering</h1>
<p>Waldur supports a number of different types of service providers when creating a shared offering. A common way of
creating an offering is through a HomePort.</p>
<ol>
<li>
<p>Select organization, which will provide the offering.</p>
</li>
<li>
<p>Make sure that organization is a service provider. Make it one with a staff user if the flag is not set.</p>
<p><a href="../admin-guide/providers/img/provider-manage.png"><img alt="Register provider" src="../admin-guide/providers/img/provider-manage.png" /></a></p>
</li>
<li>
<p>Go to Provider dashboard and click on "Add new offering":</p>
<p><a href="../admin-guide/providers/img/add-offering.png"><img alt="Adding an offering" src="../admin-guide/providers/img/add-offering.png" /></a></p>
</li>
<li>
<p>Fill in the name for the offering, category and type:</p>
<p><a href="../admin-guide/providers/img/add-offering-name.png"><img alt="Adding details" src="../admin-guide/providers/img/add-offering-name.png" /></a></p>
</li>
<li>
<p>From the offerings' list, select offering and click on "Actions"-&gt;"Edit"</p>
<p><a href="../admin-guide/providers/img/offering-edit.png"><img alt="Adding details" src="../admin-guide/providers/img/offering-edit.png" /></a></p>
</li>
<li>
<p>Fill in the details of the offering and click "Activate" to make it visible to everybody.</p>
<p><a href="../admin-guide/providers/img/add-offering-details.png"><img alt="Activate offering" src="../admin-guide/providers/img/add-offering-details.png" /></a></p>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For more advanced cases of management of offerings, take a look at how a SLURM offering can be managed using</p>
</div>
<p><a href="https://github.com/waldur/ansible-waldur-module/blob/develop/waldur_batch_offering.py">Ansible module</a>.</p></section><section class="print-page" id="admin-guide-providers-azure"><h1 id="admin-guide-providers-azure-azure">Azure</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Documentation is in progress. Plugin development is in progress.</p>
</div>
<h2 id="admin-guide-providers-azure-setting-up-tenant">Setting up Tenant</h2>
<p><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant">https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant</a></p>
<h2 id="admin-guide-providers-azure-setting-up-a-client">Setting up a Client</h2>
<p><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app">https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app</a></p>
<h2 id="admin-guide-providers-azure-add-permissions">Add permissions</h2>
<p>Make sure that client is able to perform operations on the different resources.</p>
<p><a href="https://stackoverflow.com/questions/42134892/the-client-with-object-id-does-not-have-authorization-to-perform-action-microso">https://stackoverflow.com/questions/42134892/the-client-with-object-id-does-not-have-authorization-to-perform-action-microso</a></p>
<h2 id="admin-guide-providers-azure-collecting-azure-credentials-for-waldur">Collecting Azure credentials for Waldur</h2>
<p>You need to provide following Azure credentials to Waldur: subscription ID, tenant ID, client ID and client secret.</p>
<h3 id="admin-guide-providers-azure-get-subscription-id">Get Subscription ID</h3>
<ul>
<li>Login into your Azure account.</li>
<li>Select <strong>Subscriptions</strong> in the left sidebar.</li>
<li>Select whichever subscription is needed.</li>
<li>Click on <strong>Overview</strong>.</li>
<li>Copy the <strong>Subscription ID</strong>.</li>
</ul>
<h3 id="admin-guide-providers-azure-get-tenant-id">Get Tenant ID</h3>
<ul>
<li>Login into your Azure account.</li>
<li>Select <strong>Azure Active Directory</strong> in the left sidebar.</li>
<li>Click <strong>Properties</strong>.</li>
<li>Copy the <strong>Directory ID</strong>.</li>
</ul>
<h3 id="admin-guide-providers-azure-get-client-id">Get Client ID</h3>
<ul>
<li>Login into your Azure account.</li>
<li>Select <strong>Azure Active Directory</strong> in the left sidebar.</li>
<li>Click <strong>Enterprise applications</strong>.</li>
<li>Click <strong>All applications</strong>.</li>
<li>Select the application which you have created.</li>
<li>Click <strong>Properties</strong>.</li>
<li>Copy the <strong>Application ID</strong>.</li>
</ul>
<h3 id="admin-guide-providers-azure-get-client-secret">Get Client secret</h3>
<ul>
<li>Login into your Azure account.</li>
<li>Select <strong>Azure Active Directory</strong> in the left sidebar.</li>
<li>Click <strong>App registrations</strong>.</li>
<li>Select the application which you have created.</li>
<li>Click on <strong>All settings</strong>.</li>
<li>Click on <strong>Keys</strong>.</li>
<li>Type <strong>Key description</strong> and select the <strong>Duration</strong>.</li>
<li>Click save.</li>
<li>Copy and store the key value. You won’t be able to retrieve it after you leave this page.</li>
</ul>
<p>See also: <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal">How to: Use the portal to create an Azure AD application and service principal that can access resources</a></p></section><section class="print-page" id="admin-guide-providers-moab"><h1 id="admin-guide-providers-moab-moab">MOAB</h1>
<p>MOAB is a scheduling engine for HPC centers.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As adoption of MOAB has significantly reduced over the last years and there are no active users of Waldur with
MOAB requirements, we have deprecated and removed MOAB provider.</p>
</div>
<h2 id="admin-guide-providers-moab-migration-from-moab-to-slurm">Migration from MOAB to SLURM</h2>
<p>If you are still running MOAB and would like to move to a supported scheduler - SLURM, please find the suggested
articles below. They are provided by external parties with no affiliation to Waldur team.</p>
<ul>
<li><a href="https://rcc.fsu.edu/moab-slurm-migration-guide-archive">Moab to SLURM migration guide</a></li>
<li><a href="https://kb.northwestern.edu/page.php?id=89454">Converting Moab/Torque scripts to Slurm</a></li>
<li><a href="https://docs-research-it.berkeley.edu/services/high-performance-computing/user-guide/running-your-jobs/migrating-from-pbs/">Converting Moab/Torque script to Slurm #2</a></li>
<li><a href="https://hpcc.umd.edu/hpcc/help/slurm-vs-moab.html">Slurm vs Moab/Torque</a></li>
</ul></section><section class="print-page" id="admin-guide-providers-openstack"><h1 id="admin-guide-providers-openstack-openstack-tenant">OpenStack (Tenant)</h1>
<h2 id="admin-guide-providers-openstack-requirements-for-openstack-tenant">Requirements for OpenStack (Tenant)</h2>
<p>OpenStack versions tested:</p>
<ul>
<li>Queens</li>
<li>Rocky</li>
<li>Stein</li>
<li>Train</li>
<li>Ussuri</li>
<li>Victoria</li>
</ul>
<p>In order to integrate an OpenStack-based cloud as a shared provider, the following data is required:</p>
<ul>
<li>URL of Keystone's public endpoint (v3).</li>
<li>Access to public interfaces of Keystone, Nova, Cinder, Neutron and Glance should be opened to Waldur MasterMind server.</li>
<li>Admin credentials (username/password) as well as domain name (in case non-default domain is used).</li>
<li>External network UUID - the network will be by default connected to all created OpenStack Projects (Tenants).</li>
</ul>
<h2 id="admin-guide-providers-openstack-advanced-settings">Advanced settings</h2>
<p>It's possible to override some settings for OpenStack in MasterMind admin interface.
To do that, please go to Waldur MasterMind Admin interface with a staff account.</p>
<p>Go to Structure → Shared provider settings and select the one you want to update.</p>
<p>Define specific customisation options. To add an option select append on item block under the object tree. Most typical are:</p>
<ul>
<li>external_network_id – external network to connect to when creating a VPC from this provider.</li>
<li>access_url - a URL to access OpenStack Horizon dashboard from a public network. Typically a reverse proxy URL in production deployments.</li>
<li>flavor_exclude_regex - flavors matching this regex expression will not be pulled from the backend.</li>
<li>dns_nameservers - default value for new subnets DNS name servers. Should be defined as list.</li>
<li>create_ha_routers - create highly available Neutron routers when creating Tenants.</li>
</ul>
<h2 id="admin-guide-providers-openstack-support-for-organization-specific-openstack-networks">Support for Organization specific OpenStack networks</h2>
<p>You can provide specific external network for all OpenStack Tenants created by Organiztion by providing external
network UUIDs in Organization configuration in Waldur Mastermind admin portal.</p>
<p><a href="../admin-guide/providers/img/org-specific-os-network.png"><img alt="Organization specific OS networks" src="../admin-guide/providers/img/org-specific-os-network.png" /></a></p></section><section class="print-page" id="admin-guide-providers-remote-slurm"><h1 id="admin-guide-providers-remote-slurm-agent-for-service-provider-integration">Agent for Service Provider Integration</h1>
<p>Agent for Mastermind integration with a provider's site.
The main purpose of the agent is data syncronization between Waldur instance and an application (for example SLURM or MOAB cluster).
The application uses order-related information from Waldur to manage accounts in the site and
accounting-related info from the site to update usage data in Waldur.
For now, the agent supports only SLURM cluster as a site.</p>
<h2 id="admin-guide-providers-remote-slurm-architecture">Architecture</h2>
<p>This is a stateless application, which is deployed on a machine having access to SLURM cluster data.
The agent consists of two sub-applications:</p>
<ul>
<li>agent-pull, which fetches data from Waldur and updates a state of a SLURM cluster correspondingly (e.g. creation of SLURM accounts ordered in Waldur);</li>
<li>agent-push, which sends data from SLURM cluster to Waldur (e.g. update of resource usages).</li>
</ul>
<h3 id="admin-guide-providers-remote-slurm-integration-with-waldur">Integration with Waldur</h3>
<p>For this, the agent uses <a href="https://github.com/waldur/python-waldur-client">Waldur client</a> based on Python and REST communication with <a href="https://github.com/waldur/waldur-mastermind">Waldur backend</a>. <code>Agent-pull</code> application pulls data of orders created for a specific offering linked to the site and creates/updates/removes SLURM accounts based on this info. <code>Agent-push</code> fetches data of usage, limits and associations from the site and pushes it to Waldur.</p>
<h3 id="admin-guide-providers-remote-slurm-integration-with-the-site">Integration with the site</h3>
<h4 id="admin-guide-providers-remote-slurm-slurm-cluster">SLURM cluster</h4>
<p>For this, the agent uses SLURM command line utilities (e.g. <code>sacct</code> and <code>sacctmgr</code>).
The access to the binaries can be either direct or using docker client.
In the latter case, the agent is required to have access to <code>docker</code> binary and to docker socket (e.g. <code>/var/run/docker.sock</code>).</p>
<h2 id="admin-guide-providers-remote-slurm-setup">Setup</h2>
<p>The application supports the following environmental variables (required ones formatted with bold font):</p>
<ul>
<li><strong><code>WALDUR_API_URL</code></strong> - URL of Waldur Mastermind API (e.g. <code>http://localhost:8081/api/</code>).</li>
<li><strong><code>WALDUR_API_TOKEN</code></strong> - token for access to Mastermind API.</li>
<li><strong><code>WALDUR_SYNC_DIRECTION</code></strong> - accepts two values: <code>push</code> and <code>pull</code>. If <code>pull</code>, then application sends data from SLURM cluster to Waldur, vice versa if <code>push</code>.</li>
<li><strong><code>WALDUR_OFFERING_UUID</code></strong> - UUID of corresponding offering in Waldur.</li>
<li><code>REQUESTS_VERIFY_SSL</code> - flag for SSL verification for Waldur client, default is <code>true</code>.</li>
<li><code>SLURM_TRES_CONFIG_PATH</code> - a path to the SLURM TRES configuration, default is <code>./config-components.yaml</code>.</li>
<li><code>SLURM_DEPLOYMENT_TYPE</code> - type of SLURM deployment. accepts two values: <code>docker</code> and <code>native</code>, default is <code>docker</code>.</li>
<li><code>SLURM_CUSTOMER_PREFIX</code> - prefix used for customer's accounts, default is <code>hpc_</code>.</li>
<li><code>SLURM_PROJECT_PREFIX</code> - prefix used for project's accounts, default is <code>hpc_</code>.</li>
<li><code>SLURM_ALLOCATION_PREFIX</code> - prefix used for allocation's accounts, default is <code>hpc_</code>.</li>
<li><code>SLURM_ALLOCATION_NAME_MAX_LEN</code> - maximum length of account name created by the application.</li>
<li><code>SLURM_DEFAULT_ACCOUNT</code> - default account name existing in SLURM cluster for creation of new accounts. Default is <code>waldur</code>.</li>
<li><code>SLURM_CONTAINER_NAME</code> - name of a headnode SLURM container; must be set if SLURM_DEPLOYMENT_TYPE is docker.</li>
<li><code>ENABLE_USER_HOMEDIR_ACCOUNT_CREATION</code> - whether to create home directories for users related to accounts.</li>
<li><code>SENTRY_DSN</code> - Data Source Name for Sentry (more info <a href="https://docs.sentry.io/product/sentry-basics/dsn-explainer/">here</a>).</li>
<li><code>SENTRY_ENVIRONMENT</code> - name of the Sentry environment.</li>
</ul>
<p>Alternatively, the agent can serve several offerings. For this:</p>
<ol>
<li>
<p>Create a config file for offerings with the following format:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">offerings</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example-offering-01</span>
<span class="w">  </span><span class="nt">waldur_api_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://waldur1.exmaple.com/api/</span>
<span class="w">  </span><span class="nt">waldur_api_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;token1&gt;</span>
<span class="w">  </span><span class="nt">waldur_offering_uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;uuid1&gt;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example-offering-02</span>
<span class="w">  </span><span class="nt">waldur_api_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://waldur2.exmaple.com/api/</span>
<span class="w">  </span><span class="nt">waldur_api_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;token2&gt;</span>
<span class="w">  </span><span class="nt">waldur_offering_uuid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;uuid2&gt;</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Add a variable <code>WALDUR_CONFIG_FILE_PATH</code> to the environment, for example:</p>
</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">WALDUR_CONFIG_FILE_PATH</span><span class="o">=</span>/etc/waldur-site-agent/offerings.yaml
</code></pre></div></td></tr></table></div>
<p><strong>NB</strong>: Environment variables take precedence over the config file, so if you define <code>WALDUR_API_URL</code>, <code>WALDUR_API_TOKEN</code> and <code>WALDUR_OFFERING_UUID</code>, the file is ignored.</p>
<h2 id="admin-guide-providers-remote-slurm-deployment">Deployment</h2>
<h3 id="admin-guide-providers-remote-slurm-test-environment">Test environment</h3>
<p>In order to test the agent, a user should deploy 2 separate instances of it.
The first one (called agent-pull) is for fetching data from Waldur with further processing and the second one (called agent-push) is for sending data from SLURM cluster to Waldur.
Both instances must be configured with environment variables (from e.g. .env-file), file for computing components and an optional file for multiple offerings.</p>
<p>The example of <code>.env-file</code> for agent-pull:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>WALDUR_SYNC_DIRECTION=pull # The setup for agent-pull
WALDUR_API_URL=http://waldur.example.com/api/ # Waldur API URL
WALDUR_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Waldur
WALDUR_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Waldur
SLURM_DEFAULT_ACCOUNT=root # Default account for SLURM
SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container
</code></pre></div></td></tr></table></div>
<p>The example of .env-file for agent-push:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>WALDUR_SYNC_DIRECTION=push # The setup for agent-push
WALDUR_API_URL=http://waldur.example.com/api/ # Waldur API URL
WALDUR_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Waldur
WALDUR_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Waldur
SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-providers-remote-slurm-docker-based-deployment">Docker-based deployment</h3>
<p>You can find the Docker Compose configuration for testing in <a href="#admin-guide-providers-remote-slurm-examples-docker-compose">examples/docker-compose/</a> folder:</p>
<ul>
<li><a href="../admin-guide/providers/examples/docker-compose/docker-compose.yml">docker-compose.yml</a></li>
<li><a href="#admin-guide-providers-examples-docker-compose-waldur-agent-pull-env">agent-pull</a></li>
<li><a href="#admin-guide-providers-examples-docker-compose-waldur-agent-push-env">agent-push</a></li>
</ul>
<p>In order to test it, you need to execute following commands in your terminal app:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>examples/docker-compose
docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-providers-remote-slurm-systemd-deployment">Systemd deployment</h3>
<p>In case of native deployment, you need to setup and run the a systemd service executing Python module.</p>
<h4 id="admin-guide-providers-remote-slurm-slurm-agent">SLURM agent</h4>
<p>The agent requires <code>sacct</code> and <code>sacctmgr</code> to be accessible on a machine, so it should run on a headnode of the SLURM cluster.
Firstly, install the waldur-site-agent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>waldur-site-agent
</code></pre></div></td></tr></table></div>
<p>Secondly, put systemd unit, environment and and TRES config files to the corresponding locations.
Don't forget to modify Waldur-related values the env files.</p>
<h5 id="admin-guide-providers-remote-slurm-agent-pull-files-for-a-slurm-agent">agent-pull files for a SLURM agent</h5>
<ul>
<li><code>systemd unit</code>: <a href="../admin-guide/providers/systemd-conf/agent-pull/waldur-site-agent-pull.service">waldur-site-agent-pull.service</a></li>
<li><code>example .env</code>: <a href="../admin-guide/providers/systemd-conf/agent-pull/waldur-site-agent-pull.env">waldur-site-agent-pull.env</a></li>
</ul>
<h5 id="admin-guide-providers-remote-slurm-agent-push-files-for-a-slurm-agent">agent-push files for a SLURM agent</h5>
<ul>
<li><code>systemd unit</code>: <a href="../admin-guide/providers/systemd-conf/agent-push/waldur-site-agent-push.service">waldur-site-agent-push.service</a></li>
<li><code>example .env</code>: <a href="../admin-guide/providers/systemd-conf/agent-push/waldur-site-agent-push.env">waldur-site-agent-push.env</a></li>
</ul>
<h4 id="admin-guide-providers-remote-slurm-common-files">Common files</h4>
<ul>
<li><a href="https://github.com/waldur/waldur-site-agent/blob/main/config-components.yaml.example">example of a file for config components</a></li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># For agent-pull</span>
cp<span class="w"> </span>systemd-conf/agent-pull/waldur-site-agent-pull.service<span class="w"> </span>/etc/systemd/system/
mkdir<span class="w"> </span>/etc/waldur-site-agent/
cp<span class="w"> </span>systemd-conf/agent-pull/waldur-site-agent-pull.env<span class="w"> </span>/etc/waldur-site-agent/pull.env
cp<span class="w"> </span>./config-components.yaml.example<span class="w"> </span>/etc/waldur-site-agent/tres.yaml<span class="w"> </span><span class="c1"># you can use a different path and set SLURM_TRES_CONFIG_PATH to it</span>


<span class="c1"># For agent-push</span>
cp<span class="w"> </span>systemd-conf/agent-push/waldur-site-agent-push.service<span class="w"> </span>/etc/systemd/system/
cp<span class="w"> </span>systemd-conf/agent-push/waldur-site-agent-push.env<span class="w"> </span>/etc/waldur-site-agent/push.env
</code></pre></div></td></tr></table></div>
<p>After these preparation steps, run the following script to apply the changes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>systemctl<span class="w"> </span>daemon-reload
systemctl<span class="w"> </span>start<span class="w"> </span>waldur-site-agent-pull
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>waldur-site-agent-pull<span class="w"> </span><span class="c1"># to start after reboot</span>
systemctl<span class="w"> </span>start<span class="w"> </span>waldur-site-agent-push
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>waldur-site-agent-push<span class="w"> </span><span class="c1"># to start after reboot</span>
</code></pre></div></td></tr></table></div>
<h4 id="admin-guide-providers-remote-slurm-older-systemd-versions">Older systemd versions</h4>
<p>If you want to deploy the agents on a machine with systemd revision older than 240, you should use files with legacy configuration:</p>
<ul>
<li>systemd legacy unit file for agent-pull: <a href="../admin-guide/providers/systemd-conf/agent-pull/waldur-site-agent-pull-legacy.service">waldur-site-agent-pull-legacy.service</a></li>
<li>systemd legacy unit file for agent-push: <a href="../admin-guide/providers/systemd-conf/agent-push/waldur-site-agent-push-legacy.service">waldur-site-agent-push-legacy.service</a></li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># For pulling agent</span>
cp<span class="w"> </span>systemd-conf/agent-pull/waldur-site-agent-pull-legacy.service<span class="w"> </span>/etc/systemd/system/waldur-site-agent-pull.service
<span class="c1"># For pushing agent</span>
cp<span class="w"> </span>systemd-conf/agent-push/waldur-site-agent-push-legacy.service<span class="w"> </span>/etc/systemd/system/waldur-site-agent-push.service
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-providers-remote-slurm-tres-configuration">TRES configuration</h3>
<p>To setup TRES-related info, the agent uses the corresponding configuration file configured by <code>SLURM_TRES_CONFIG_PATH</code> environment variable (<code>config-components.yaml</code> by default). Each entry of the file incudes key-value-formatted data.
A key is a type of TRES (with optional name if type is <code>gres</code>) and the value contains limit, measured unit, type of accounting and label.
The script <code>waldur_slurm_load_components</code> sends this data to Waldur:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>waldur_slurm_load_components
</code></pre></div></td></tr></table></div>
<p>If a user wants to change this information, a path of a custom config file should be set for <code>SLURM_TRES_CONFIG_PATH</code> variable.</p>
<h2 id="admin-guide-providers-remote-slurm-service-provider-configuration">Service provider configuration</h2>
<h3 id="admin-guide-providers-remote-slurm-slurm">SLURM</h3>
<p>The agents require existing offering data in Waldur.
As a service provider owner, you should create an offering in the marketplace:</p>
<ul>
<li>Go to <code>Provider</code> section on the left tab -&gt; <code>Add new offering</code> button</li>
<li>Input a name, choose a category, select <code>SLURM remote allocation</code> from the drop-down list on the bottom and click <code>Create</code> button</li>
</ul>
<p><a class="glightbox" href="../admin-guide/providers/img/remote-slurm-offering.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="offering-uuid" src="../admin-guide/providers/img/remote-slurm-offering.png" /></a></p>
<ul>
<li>Open the offering page and create a plan in the <code>Accounting</code> section: click <code>Add plan</code> and input the necessary details</li>
<li>Go to <code>Integration</code> section, click <code>Show integration steps</code> and ensure they are completed within your SLURM cluster.</li>
</ul></section><section class="print-page" id="admin-guide-providers-remote-waldur"><h1 id="admin-guide-providers-remote-waldur-remote-offering">Remote Offering</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Documentation is in progress. Plugin development is in progress.</p>
</div>
<h2 id="admin-guide-providers-remote-waldur-introduction">Introduction</h2>
<p>It is possible to import into a Waldur offerings from a remote Waldur.</p>
<h2 id="admin-guide-providers-remote-waldur-pre-requisites">Pre-requisites</h2>
<ul>
<li>An organization in the remote Waldur, which will contain requests and projects from the local Waldur.</li>
<li>Account with owner role that will be used for integration.</li>
<li>Access to APIs of remote Waldur.</li>
</ul>
<h2 id="admin-guide-providers-remote-waldur-high-level-process">High level process</h2>
<ul>
<li>In local Waldur, make sure that you have a <a href="#admin-guide-providers-adding-an-offering">service provider</a> organization available.</li>
<li>Click on "Import offering".</li>
<li>Input remote Waldur API and authentication token.</li>
<li>Select the remote organization and offering to be imported.</li>
<li>Review and activate the offering.</li>
</ul>
<h2 id="admin-guide-providers-remote-waldur-eduteams-account-sync">eduTEAMS account SYNC</h2>
<p>In case both local and remote Waldurs are relying on a common set of identities
from <a href="#admin-guide-identities-eduteams">eduTEAMS</a>, it is possible to configure synchronisation of the identities as well,
i.e. when a resource is provisioned in a remote Waldur, local accounts from organization and project are pushed and
mapped to the remote project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this to work, remote Waldur must be integrated with eduTEAMS registry and integration user must have
<code>identity_manager</code> role.</p>
</div>
<h2 id="admin-guide-providers-remote-waldur-remote-offering-actions">Remote offering actions</h2>
<p>Remote offering actions are available in the integration section of the offering edit page.</p>
<p><a href="../admin-guide/providers/img/remote-offering-actions.png"><img alt="Remote Offering Actions" src="../admin-guide/providers/img/remote-offering-actions.png" /></a></p></section><section class="print-page" id="admin-guide-providers-slurm"><h1 id="admin-guide-providers-slurm-slurm-provider">SLURM provider</h1>
<p>SLURM plugin enables sharing of access to a <a href="https://slurm.schedmd.com/">SLURM</a> cluster.
SLURM is a scheduling system used typically for managing High-performance clusters. Waldur allows to
share access by creating Slurm accounts and managing permission rights of users.</p>
<h2 id="admin-guide-providers-slurm-configure-waldur-slurm-plugin">Configure Waldur SLURM plugin</h2>
<p>By default, Waldur creates a hierarchical account structure in SLURM, where:</p>
<ul>
<li>Organization gets an account under a default account, defined when configuring SLURM service offering;</li>
<li>Each project is created as a an allocation, which is a child of organization's account.</li>
<li>Each resource created in Waldur (aka SLURM Allocation) gets its own SLURM account with project account as a parent.</li>
</ul>
<p>These accounts get standard prefixes along with unique values and user provided input.
It is possible to customize prefixes in Waldur configuration. Check WALDUR_SLURM variables in
<a href="#admin-guide-mastermind-configuration-configuration-guide">Waldur configuration guide</a>.</p>
<h2 id="admin-guide-providers-slurm-add-slurm-provider">Add SLURM provider</h2>
<p>To add SLURM as a <a href="#admin-guide-providers-adding-an-offering">provider</a> to Waldur, you will need the following information:</p>
<ul>
<li>SSH host address to a node, from where SLURM commands could be executed.</li>
<li>Username that has Slurm <a href="https://slurm.schedmd.com/user_permissions.html">operator role</a>.
  Operator is needed as Waldur dynamically creates accounts based on user's choice of FreeIPA account.</li>
<li>Waldur public key must be added as authorized_key for the operator's username.</li>
<li>Slurm login node must be configured to authenticate users coming from FreeIPA connected to Waldur.</li>
</ul>
<h2 id="admin-guide-providers-slurm-slurm-auto-provisioning-hooks">SLURM auto-provisioning hooks</h2>
<p>It is possible to streamline creation of SLURM allocations for new users based on affiliation of a user profile.
Configuration settings are described in <a href="#admin-guide-mastermind-configuration-configuration-guide">Waldur configuration guide</a>
under WALDUR_HPC settings.</p>
<p>The logic is as follows:</p>
<ul>
<li>Once a user is created (e.g. via eduGAIN login), user's affiliation and email are checked to see if user belongs
  to internal or external organization.</li>
<li>If so, a project is created for the user in a corresponding organization.</li>
<li>For users belonging to internal organization, SLURM request is pre-filled and created using account limits of
  internal organizations.</li>
<li>For users belonging to external organization, SLURM request is pre-filled only - it would require a manual confirmation
  from the organization owner of the external organization to be provisioned. Default limits of SLURM apply.</li>
</ul>
<h2 id="admin-guide-providers-slurm-configure-slurm-cluster">Configure SLURM cluster</h2>
<p>Waldur might work out of the box with most of the reasonably modern deployments of SLURM, which have
accounting enabled and limits enforced.</p>
<p>Please refer to SLURM documentation for details:</p>
<ul>
<li><a href="https://slurm.schedmd.com/accounting.html">SLURM Accounting</a></li>
<li><a href="https://slurm.schedmd.com/resource_limits.html">SLURM Resource Limits</a></li>
<li><a href="https://slurm.schedmd.com/priority_multifactor.html">SLURM Multifactor Priority Plugin</a></li>
</ul>
<p>We provide a snapshot of instructions for the convenience of the reader.</p>
<h3 id="admin-guide-providers-slurm-add-slurm-cluster">Add SLURM cluster</h3>
<p>SLURM accounting plugin assumes that at least one cluster is configured. For example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>sacctmgr<span class="w"> </span>add<span class="w"> </span>cluster<span class="w"> </span>linux
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-providers-slurm-enforce-slurm-accounting-limits">Enforce SLURM accounting limits</h3>
<p>In order to enforce limits set on associations and QoS, please modify slurm.conf:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">AccountingStorageEnforce</span><span class="o">=</span>limits
</code></pre></div></td></tr></table></div>
<p>Please note, that when AccountingStorageEnforce is changed, a restart of the slurmctld daemon is required (not just a <code>scontrol reconfig</code>):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>systemctl<span class="w"> </span>restart<span class="w"> </span>slurmctld
</code></pre></div></td></tr></table></div>
<h3 id="admin-guide-providers-slurm-enable-slurm-multi-priority-plugin">Enable SLURM Multi Priority plugin</h3>
<p>In order to enable ordering for the queue of jobs waiting to be scheduled, please modify slurm.conf:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">PriorityType</span><span class="o">=</span>priority/multifactor
</code></pre></div></td></tr></table></div>
<p>When slurm.conf is changed, you should reload configuration:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>scontrol<span class="w"> </span>reconfig
</code></pre></div></td></tr></table></div></section><h1 class='nav-section-title-end'>Ended: Providers</h1>
                        <h2 class='nav-section-title' id='section-rke2-setup'>
                            Rke2 setup <a class='headerlink' href='#section-rke2-setup' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="admin-guide-rke2-setup-rke2-setup"><h1 id="admin-guide-rke2-setup-rke2-setup-waldur-on-rke2">Waldur on RKE2</h1>
<h2 id="admin-guide-rke2-setup-rke2-setup-rke2-installation-and-setup">RKE2 installation and setup</h2>
<p>To install Waldur on top of <a href="https://docs.rke2.io/">RKE2</a> you need to:</p>
<ol>
<li>
<p>Install <a href="https://docs.ansible.com/ansible/2.10/">Ansible</a> with version &gt;= 2.10 and ensure python3 is installed.</p>
</li>
<li>
<p>Download this repository</p>
</li>
<li>
<p>At least 3 nodes with minimal requirements for Kubernetes nodes</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>8GB<span class="w"> </span>RAM
<span class="m">4</span><span class="w"> </span>vCPU
30GB<span class="w"> </span><span class="k">for</span><span class="w"> </span>system<span class="w"> </span>volume<span class="w"> </span>and<span class="w"> </span>a<span class="w"> </span>dedicated<span class="w"> </span>60GB<span class="w"> </span><span class="k">for</span><span class="w"> </span>storage<span class="w"> </span><span class="o">(</span>Longhorn<span class="o">)</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Install <code>kubernetes.core</code> collection from ansible galaxy.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>kubernetes.core
ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>ansible.posix
<span class="c1"># or</span>
curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>ansible-galaxy/kubernetes-core-2.3.2.tar.gz<span class="w"> </span>--create-dirs<span class="w"> </span>https://galaxy.ansible.com/download/kubernetes-core-2.3.2.tar.gz
ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>ansible-galaxy/kubernetes-core-2.3.2.tar.gz

curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>ansible-galaxy/ansible-posix-1.4.0.tar.gz<span class="w"> </span>https://galaxy.ansible.com/download/ansible-posix-1.4.0.tar.gz
ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>ansible-galaxy/ansible-posix-1.4.0.tar.gz
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Adjust variables in <code>ansible-config/rke2_vars</code> file</p>
</li>
<li>
<p>(Optional) Run the playbook to setup infrastructure (Kubernetes and Longhorn):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>ansible-config
ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>install-infrastructure.yaml
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Run the playbook to install Waldur and dependencies:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>ansible-config
ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>install-applications.yaml
</code></pre></div></td></tr></table></div>
</li>
</ol>
<p>You can check Waldur release installation with the following steps:</p>
<ol>
<li>
<p>ssh to a node from inventory with <code>initial_server=true</code> and check all the pods from the default namespace:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span>/etc/rancher/rke2/rke2.yaml
kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>default
</code></pre></div></td></tr></table></div>
</li>
</ol>
<p>If you run Waldur in a different namespace, please adjust the value of the <code>-n</code> option in the last command above.</p>
<h2 id="admin-guide-rke2-setup-rke2-setup-add-admin-ssh-keys">Add admin ssh keys</h2>
<ol>
<li>Setup <code>admin_keys</code> and <code>revoked_admin_keys</code> vars in the <code>ansible-config/rke2_vars</code> file</li>
<li>
<p>Run the corresponding playbook</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>ansible-config
ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>add-ssh-keys.yml
</code></pre></div></td></tr></table></div>
</li>
</ol>
<h2 id="admin-guide-rke2-setup-rke2-setup-add-haproxy-load-balancer">Add haproxy load balancer</h2>
<ol>
<li>Setup <code>haproxy_stats_password</code> var in the <code>ansible-config/rke2_vars</code> file</li>
<li>
<p>Run the corresponding playbook</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>ansible-config
ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>add-haproxy-host.yml
</code></pre></div></td></tr></table></div>
</li>
</ol>
<h2 id="admin-guide-rke2-setup-rke2-setup-waldur-helm-configuration">Waldur Helm configuration</h2>
<p>A user can override default settings for Waldur Helm. The <code>ansible-config/waldur/values.yaml</code> is the main settings file. Additional configuration features files (e.g. for SAML2, whitelabeling, bootstrapping, etc.) can be included by placing into corresponding subdirectories of <code>ansible-config/waldur/</code> folder. The paths to the subdirectories should be specified in <code>ansible-config/waldur/values.yaml</code>, e.g. <code>waldur.saml2.dir</code> value.</p>
<p>Waldur Helm configuration is described in <a href="https://docs.waldur.com/admin-guide/deployment/helm/">the public docs</a>; example <code>values.yaml</code> file: <a href="https://github.com/waldur/waldur-helm/blob/master/waldur/values.yaml">link</a>, example additional files: <a href="https://github.com/waldur/waldur-helm/tree/master/waldur/test">link</a>.</p>
<h2 id="admin-guide-rke2-setup-rke2-setup-update-of-waldur">Update of Waldur</h2>
<p>To update Waldur user needs to execute the corresponding playbook:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>ansible-config
ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>update-waldur.yaml
</code></pre></div></td></tr></table></div>
<h2 id="admin-guide-rke2-setup-rke2-setup-update-of-waldur-dependencies">Update of Waldur dependencies</h2>
<p>To update Waldur dependencies, a user should:</p>
<ol>
<li>Setup the desired components for update in <code>ansible-config/rke2_vars</code> file, e.g. set <code>setup_postgresql</code> to <code>yes</code> in case of PostgreSQL Helm chart update. <strong>NB: please, don't change chart versions manually, it can cause failure of Waldur application</strong></li>
<li>
<p>Run the corresponding playbook:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>ansible-config
ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>install-applications.yaml
</code></pre></div></td></tr></table></div>
</li>
</ol>
<p>Example of changes in <code>ansible-config/rke2_vars</code> file:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Waldur dependency setup</span>
<span class="nt">setup_postgresql</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span><span class="w"> </span><span class="c1"># User can skip PostgreSQL setup</span>
<span class="nt">postgresql_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11.9.1</span><span class="w"> </span><span class="c1"># Version of PostgreSQL Helm chart</span>

<span class="nt">setup_rabbitmq</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span><span class="w"> </span><span class="c1"># User can skip RabbitMQ setup</span>
<span class="nt">rabbitmq_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.3.5</span><span class="w"> </span><span class="c1"># Version of RabbitMQ Helm chart</span>

<span class="nt">setup_minio</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span><span class="w"> </span><span class="c1"># User can skip MinIO setup</span>
<span class="nt">minio_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11.10.16</span><span class="w"> </span><span class="c1"># Version of MinIO Helm chart</span>
</code></pre></div></td></tr></table></div>
<p>With this setup, the playbook will update PostgreSQL release only. If the user wants to update RabbitMQ too, they should set <code>setup_rabbitmq: yes</code></p>
<h2 id="admin-guide-rke2-setup-rke2-setup-waldur-log-fetching">Waldur log fetching</h2>
<p>To get logs from Waldur containers, a users needs to connect to one of the RKE2 nodes:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ssh<span class="w"> </span>&lt;node-ip&gt;
</code></pre></div></td></tr></table></div>
<p>A node IP should be chosen from the inventory file (e.g. <code>rke2_inventory</code>).</p>
<p>In the node's shell, the user should run the following to setup Kubernetes client:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span>/etc/rancher/rke2/rke2.yaml
</code></pre></div></td></tr></table></div>
<p>After this, the user can get Waldur API logs:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>--tail<span class="w"> </span><span class="m">100</span><span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>waldur-mastermind-api<span class="w"> </span>-n<span class="w"> </span>default
</code></pre></div></td></tr></table></div>
<p>Same works for Celery worker:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>--tail<span class="w"> </span><span class="m">100</span><span class="w"> </span>-l<span class="w"> </span><span class="nv">app</span><span class="o">=</span>waldur-mastermind-worker<span class="w"> </span>-n<span class="w"> </span>default
</code></pre></div></td></tr></table></div>
<p><strong>Note</strong>: if you use a non-default namespace for Waldur release, please change the value for <code>-n</code> option in the aforementioned command</p>
<h2 id="admin-guide-rke2-setup-rke2-setup-setup-ssl-certificates">Setup SSL certificates</h2>
<p><em>NB</em>: do not forget to set <code>apiScheme</code> ans <code>homeportScheme</code> to <code>https</code> in <code>ansible-config/waldur/values.yaml</code></p>
<h3 id="admin-guide-rke2-setup-rke2-setup-custom-certificates">Custom certificates</h3>
<p>To setup the SSL certificates, please do the following steps:</p>
<ol>
<li>Copy the certificate and key to the <code>ansible-config/waldur/tls</code> directory. <strong>NB: key must be named <code>tls.key</code> and cert itself - <code>tls.crt</code></strong></li>
<li>In <code>ansible-config/waldur/values.yaml</code>, set <code>ingress.tls.source</code> to <code>secret</code></li>
<li><a href="#admin-guide-rke2-setup-rke2-setup-update-of-waldur">Update Waldur release</a></li>
</ol>
<h3 id="admin-guide-rke2-setup-rke2-setup-lets-encrypt">Let's Encrypt</h3>
<p>To setup SSL certificates using Let's Encrypt, please do the following steps:</p>
<ol>
<li>In <code>ansible-config/rke2_vars</code>, set <code>setup_lets_encrypt</code> to <code>yes</code></li>
<li>In <code>ansible-config/waldur/values.yaml</code>, set <code>ingress.tls.source</code> to <code>letsEncrypt</code></li>
<li>Install Let's Encrypt via <code>install-applications.yaml</code> playbook</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;setup_k8s_dashboard=no setup_loki_prom_grafana=no setup_postgresql=no setup_rabbitmq=no setup_minio=no&quot;</span><span class="w"> </span>install-applications.yaml
</code></pre></div></td></tr></table></div>
<ol>
<li><a href="#admin-guide-rke2-setup-rke2-setup-update-of-waldur">Update Waldur release</a></li>
</ol>
<h2 id="admin-guide-rke2-setup-rke2-setup-enable-k8s-dashboard">Enable K8s dashboard</h2>
<p>Make sure that K8s dashboard is deployed. Login to one of the K8s nodes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># create / renew token for admin user</span>
kubectl<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>create<span class="w"> </span>token<span class="w"> </span>admin-user

<span class="c1"># setup kubectl port fortward to k8s-dashboard service</span>
kubectl<span class="w"> </span>port-forward<span class="w"> </span>-n<span class="w"> </span>kubernetes-dashboard<span class="w"> </span>service/kubernetes-dashboard<span class="w"> </span>--address<span class="w"> </span><span class="m">0</span>.0.0.0<span class="w"> </span><span class="m">8001</span>:443
</code></pre></div></td></tr></table></div>
<p>K8s dashboard should now be accessible on port 8001 in that node -- or load balancer node on port 8001 if configured.</p>
<h2 id="admin-guide-rke2-setup-rke2-setup-recover-data-from-db-backup">Recover data from DB backup</h2>
<p>In order to apply an existing backup to database, a corresponding playbook exists.</p>
<p><strong>NB:</strong></p>
<ul>
<li><strong>This operation drops an existing database, creates an empty one and applies the pre-created backup</strong></li>
<li><strong>During restoration process, the site will be unavailable</strong></li>
</ul>
<p>During execution, you will be asked about backup name. You should input it in a correct way. Example of running playbook:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code>TASK [List backups] ****************************************************************************************************************************************
ok: [csl-stg-kubs01] =&gt; {}

MSG:

[+] LOCAL_PG_BACKUPS_DIR :
[+] MINIO_PG_BACKUPS_DIR : pg/data/backups/postgres
[+] Setting up the postgres alias for minio server (http://minio.default.svc.cluster.local:9000)
[+] Last 5 backups
[2022-12-01 05:00:02 UTC]  91KiB backup-2022-12-01-05-00.sql.gz
[2022-11-30 05:00:02 UTC]  91KiB backup-2022-11-30-05-00.sql.gz
[2022-11-29 05:00:02 UTC]  91KiB backup-2022-11-29-05-00.sql.gz
[2022-11-28 16:30:37 UTC]  91KiB backup-2022-11-28-16-30.sql.gz
[2022-11-28 16:28:27 UTC]  91KiB backup-2022-11-28-16-28.sql.gz
[+] Finished
[Choose backup]
Please enter backup&#39;s name:
</code></pre></div></td></tr></table></div>
<p>After this, you should input one of the following lines:</p>
<ul>
<li>backup-2022-12-01-05-00.sql.gz</li>
<li>backup-2022-11-30-05-00.sql.gz</li>
<li>backup-2022-11-29-05-00.sql.gz</li>
<li>backup-2022-11-28-16-30.sql.gz</li>
<li>backup-2022-11-28-16-28.sql.gz</li>
</ul>
<p>Otherwise, the entire process will fail, but the site and database with old data will be still available.</p>
<p>To start the process, please, execute the following line in the machine connected to RKE2 nodes:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ansible-playbook<span class="w"> </span>-D<span class="w"> </span>-i<span class="w"> </span>rke2_inventory<span class="w"> </span>restore-data.yaml
</code></pre></div></td></tr></table></div></section><h1 class='nav-section-title-end'>Ended: Rke2 setup</h1><h1 class='nav-section-title-end'>Ended: Admin guide</h1>
                        <h1 class='nav-section-title' id='section-developer-guide'>
                            Developer guide <a class='headerlink' href='#section-developer-guide' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="developer-guide"><h1 id="developer-guide-developer-documentation">Developer documentation</h1>
<ul>
<li><a href="#developer-guide-install-from-src">Installation from source code</a></li>
<li><a href="#developer-guide-workflow">Workflow</a></li>
<li><a href="#developer-guide-settings-policy">Settings policy</a></li>
<li><a href="#developer-guide-permissions">Permissions</a></li>
<li><a href="#developer-guide-managed-entities">Managed entities</a></li>
<li><a href="#developer-guide-resource-actions">Resource actions</a></li>
<li><a href="#developer-guide-logging">Logging</a></li>
<li><a href="#developer-guide-background">Background processing</a></li>
<li><a href="#developer-guide-quotas">Quotas</a></li>
<li><a href="#developer-guide-tasks-and-executors">Tasks and executors</a></li>
<li><a href="#developer-guide-how-to-write-serializers">How to write serializers</a></li>
<li><a href="#developer-guide-how-to-write-views">How to write views</a></li>
<li><a href="#developer-guide-how-to-write-tests">How to write tests</a></li>
<li><a href="#developer-guide-how-to-write-docs">How to write docs</a></li>
<li><a href="#developer-guide-how-to-add-new-language">How to add a new language</a></li>
<li><a href="#developer-guide-i18n">Internationalization</a></li>
<li><a href="#developer-guide-plugins">Plugins</a></li>
<li><a href="#developer-guide-events">Events</a></li>
<li><a href="#developer-guide-models">Models</a></li>
<li><a href="#developer-guide-templates">Templates</a></li>
</ul></section><section class="print-page" id="developer-guide-ad-hoc-scripts"><h1 id="developer-guide-ad-hoc-scripts-ad-hoc-scripts">Ad-hoc scripts</h1>
<p>This section describes different ad-hoc scripts used by Waldur developers.</p>
<h2 id="developer-guide-ad-hoc-scripts-usage-related-scripts">Usage-related scripts</h2>
<h3 id="developer-guide-ad-hoc-scripts-restore-cpugpuram-usages-for-a-month">Restore CPU/GPU/RAM usages for a month</h3>
<p>Sometimes, Waldur can have issues with data correctness. They can be caused by different circumstansies, e.g. problems with data syncronization between Waldur backend and service provider software. In order to resolve these issues, a user can restore usage data with <a href="../developer-guide/scripts/update_usages.py">restore_usages.py</a> script.</p>
<h3 id="developer-guide-ad-hoc-scripts-generate-openmetrics-file-with-usages-for-several-months">Generate openmetrics file with usages for several months</h3>
<p>If a user needs to create openmetrics file with usages, e.g. for <a href="https://medium.com/tlvince/prometheus-backfilling-a92573eb712c">historical data backfilling in Prometheus</a>, the <a href="../developer-guide/scripts/generate_openmetrics_usages.py">generate_openmetrics_usages.py</a> can be used.</p>
<h3 id="developer-guide-ad-hoc-scripts-prolong-expired-projects">Prolong expired projects</h3>
<p>If a user needs to prolong an expired project with remote resources, <a href="../developer-guide/scripts/prolong_remote_projects.py">this script</a> should be used. It can:</p>
<ol>
<li>automatically detect projects with pending update requests</li>
<li>approve the requests</li>
<li>set state OK for terminating resources both in a local Waldur and remote one</li>
</ol>
<p><strong>Note:</strong> the script must be executed in a local Waldur instance</p>
<h3 id="developer-guide-ad-hoc-scripts-wipe-tenants-and-all-related-resources-from-openstack">Wipe tenants and all related resources from OpenStack</h3>
<p>If a user needs to remove a tenant with all related objects (instances, volumes, backups, etc.) manually, <a href="../developer-guide/scripts/wipe-tenants.py">this script</a> should be used. It removes all the tenants with names from <code>tenant_names</code> list using an OpenStack administrator project. Please, replace <code>&lt;main-tenant-uuid&gt;</code> (line 13) with the corresponding UUID of the admin tenant in Waldur.</p></section><section class="print-page" id="developer-guide-background"><h1 id="developer-guide-background-background-processing">Background processing</h1>
<p>For executing heavier requests and performing background tasks Waldur is
using <a href="https://docs.celeryproject.org/en/stable/">Celery</a>. Celery is a task queue
that supports multiple backends for storing the tasks and results.
Currently Waldur is relying on <a href="https://redis.io/">Redis</a> backend - Redis
server <strong>must be</strong> running for requests triggering background scheduling
to succeed.</p>
<p>If you are developing on OS X and have brew installed:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>brew<span class="w"> </span>install<span class="w"> </span>redis-server
redis-server
</code></pre></div></td></tr></table></div>
<p>Please see Redis docs for installation on other platforms.</p>
<h2 id="developer-guide-background-finite-state-machines">Finite state machines</h2>
<p>Some of the models in Waldur have a state field representing their
current condition. The state field is implemented as a finite state
machine. Both user requests and background tasks can trigger state
transition. A REST client can observe changes to the model instance
through polling the <code>state</code> field of the object.</p>
<p>Let's take VM instance in 'offline' state. A user can request the
instance to start by issuing a corresponding request over REST. This
will schedule a task in Celery and transition instance status to
'starting_scheduled'. Further user requests for starting an instance
will get state transition validation error. Once the background worker
starts processing the queued task, it updates the Instance status to the
'starting'. On task successful completion, the state is transitioned
to 'online' by the background task.</p>
<h2 id="developer-guide-background-error-state-of-background-tasks">Error state of background tasks</h2>
<p>If a background task has failed to achieve it's goal, it should transit
into an error state. To propagate more information to the user each
model with an FSM field should include a field for error message
information - <strong>error_message</strong>. The field should be exposed via REST.
Background task should update this field before transiting into an erred
state.</p>
<p>Cleaning of the error state of the model instance should clean up also
<code>error_message</code> field.</p></section><section class="print-page" id="developer-guide-events"><h1 id="developer-guide-events-events">Events</h1>
<h2 id="developer-guide-events-access_subnets">Access_subnets</h2>
<ul>
<li>access_subnet_creation_succeeded</li>
<li>access_subnet_deletion_succeeded</li>
<li>access_subnet_update_succeeded</li>
</ul>
<h2 id="developer-guide-events-auth">Auth</h2>
<ul>
<li>auth_logged_in_with_username</li>
<li>auth_logged_out</li>
<li>auth_login_failed_with_username</li>
<li>token_created</li>
<li>token_lifetime_updated</li>
</ul>
<h2 id="developer-guide-events-call">Call</h2>
<ul>
<li>call_document_added</li>
<li>call_document_removed</li>
</ul>
<h2 id="developer-guide-events-customers">Customers</h2>
<ul>
<li>customer_creation_succeeded</li>
<li>customer_deletion_succeeded</li>
<li>customer_update_succeeded</li>
<li>invoice_canceled</li>
<li>invoice_created</li>
<li>invoice_item_created</li>
<li>invoice_item_deleted</li>
<li>invoice_item_updated</li>
<li>invoice_paid</li>
<li>payment_added</li>
<li>payment_created</li>
<li>payment_removed</li>
</ul>
<h2 id="developer-guide-events-invoices">Invoices</h2>
<ul>
<li>invoice_canceled</li>
<li>invoice_created</li>
<li>invoice_creation_succeeded</li>
<li>invoice_deletion_succeeded</li>
<li>invoice_item_created</li>
<li>invoice_item_deleted</li>
<li>invoice_item_updated</li>
<li>invoice_paid</li>
<li>invoice_update_succeeded</li>
<li>payment_created</li>
<li>payment_removed</li>
</ul>
<h2 id="developer-guide-events-jira">Jira</h2>
<ul>
<li>comment_creation_succeeded</li>
<li>comment_deletion_succeeded</li>
<li>comment_update_succeeded</li>
<li>issue_creation_succeeded</li>
<li>issue_deletion_succeeded</li>
<li>issue_update_succeeded</li>
</ul>
<h2 id="developer-guide-events-payments">Payments</h2>
<ul>
<li>payment_approval_succeeded</li>
<li>payment_cancel_succeeded</li>
<li>payment_creation_succeeded</li>
</ul>
<h2 id="developer-guide-events-permissions">Permissions</h2>
<ul>
<li>role_granted</li>
<li>role_revoked</li>
<li>role_updated</li>
</ul>
<h2 id="developer-guide-events-projects">Projects</h2>
<ul>
<li>project_creation_succeeded</li>
<li>project_deletion_succeeded</li>
<li>project_deletion_triggered</li>
<li>project_update_request_approved</li>
<li>project_update_request_created</li>
<li>project_update_request_rejected</li>
<li>project_update_succeeded</li>
</ul>
<h2 id="developer-guide-events-proposal">Proposal</h2>
<ul>
<li>proposal_document_added</li>
<li>proposal_document_removed</li>
</ul>
<h2 id="developer-guide-events-providers">Providers</h2>
<ul>
<li>marketplace_resource_create_canceled</li>
<li>marketplace_resource_create_failed</li>
<li>marketplace_resource_create_requested</li>
<li>marketplace_resource_create_succeeded</li>
<li>marketplace_resource_renamed</li>
<li>marketplace_resource_terminate_failed</li>
<li>marketplace_resource_terminate_requested</li>
<li>marketplace_resource_terminate_succeeded</li>
<li>marketplace_resource_update_failed</li>
<li>marketplace_resource_update_limits_failed</li>
<li>marketplace_resource_update_limits_succeeded</li>
<li>marketplace_resource_update_requested</li>
<li>resource_robot_account_created</li>
<li>resource_robot_account_deleted</li>
<li>resource_robot_account_updated</li>
</ul>
<h2 id="developer-guide-events-resources">Resources</h2>
<ul>
<li>marketplace_order_approved</li>
<li>marketplace_order_completed</li>
<li>marketplace_order_created</li>
<li>marketplace_order_failed</li>
<li>marketplace_order_rejected</li>
<li>marketplace_order_terminated</li>
<li>marketplace_resource_create_canceled</li>
<li>marketplace_resource_create_failed</li>
<li>marketplace_resource_create_requested</li>
<li>marketplace_resource_create_succeeded</li>
<li>marketplace_resource_downscaled</li>
<li>marketplace_resource_erred_on_backend</li>
<li>marketplace_resource_renamed</li>
<li>marketplace_resource_terminate_canceled</li>
<li>marketplace_resource_terminate_failed</li>
<li>marketplace_resource_terminate_requested</li>
<li>marketplace_resource_terminate_succeeded</li>
<li>marketplace_resource_update_canceled</li>
<li>marketplace_resource_update_end_date_succeeded</li>
<li>marketplace_resource_update_failed</li>
<li>marketplace_resource_update_limits_failed</li>
<li>marketplace_resource_update_limits_succeeded</li>
<li>marketplace_resource_update_requested</li>
<li>marketplace_resource_update_succeeded</li>
<li>openstack_flavor_created</li>
<li>openstack_flavor_deleted</li>
<li>openstack_floating_ip_attached</li>
<li>openstack_floating_ip_connected</li>
<li>openstack_floating_ip_description_updated</li>
<li>openstack_floating_ip_detached</li>
<li>openstack_floating_ip_disconnected</li>
<li>openstack_network_cleaned</li>
<li>openstack_network_created</li>
<li>openstack_network_deleted</li>
<li>openstack_network_imported</li>
<li>openstack_network_pulled</li>
<li>openstack_network_updated</li>
<li>openstack_port_cleaned</li>
<li>openstack_port_created</li>
<li>openstack_port_deleted</li>
<li>openstack_port_imported</li>
<li>openstack_port_pulled</li>
<li>openstack_router_updated</li>
<li>openstack_security_group_cleaned</li>
<li>openstack_security_group_created</li>
<li>openstack_security_group_deleted</li>
<li>openstack_security_group_imported</li>
<li>openstack_security_group_pulled</li>
<li>openstack_security_group_rule_cleaned</li>
<li>openstack_security_group_rule_created</li>
<li>openstack_security_group_rule_deleted</li>
<li>openstack_security_group_rule_imported</li>
<li>openstack_security_group_rule_updated</li>
<li>openstack_security_group_updated</li>
<li>openstack_server_group_cleaned</li>
<li>openstack_server_group_created</li>
<li>openstack_server_group_deleted</li>
<li>openstack_server_group_imported</li>
<li>openstack_server_group_pulled</li>
<li>openstack_subnet_cleaned</li>
<li>openstack_subnet_created</li>
<li>openstack_subnet_deleted</li>
<li>openstack_subnet_imported</li>
<li>openstack_subnet_pulled</li>
<li>openstack_subnet_updated</li>
<li>openstack_tenant_quota_limit_updated</li>
<li>resource_assign_floating_ip_failed</li>
<li>resource_assign_floating_ip_scheduled</li>
<li>resource_assign_floating_ip_succeeded</li>
<li>resource_attach_failed</li>
<li>resource_attach_scheduled</li>
<li>resource_attach_succeeded</li>
<li>resource_backup_schedule_activated</li>
<li>resource_backup_schedule_cleaned_up</li>
<li>resource_backup_schedule_created</li>
<li>resource_backup_schedule_deactivated</li>
<li>resource_backup_schedule_deleted</li>
<li>resource_change_flavor_failed</li>
<li>resource_change_flavor_scheduled</li>
<li>resource_change_flavor_succeeded</li>
<li>resource_creation_failed</li>
<li>resource_creation_scheduled</li>
<li>resource_creation_succeeded</li>
<li>resource_deletion_failed</li>
<li>resource_deletion_scheduled</li>
<li>resource_deletion_succeeded</li>
<li>resource_detach_failed</li>
<li>resource_detach_scheduled</li>
<li>resource_detach_succeeded</li>
<li>resource_extend_failed</li>
<li>resource_extend_scheduled</li>
<li>resource_extend_succeeded</li>
<li>resource_extend_volume_failed</li>
<li>resource_extend_volume_scheduled</li>
<li>resource_extend_volume_succeeded</li>
<li>resource_import_succeeded</li>
<li>resource_pull_failed</li>
<li>resource_pull_scheduled</li>
<li>resource_pull_succeeded</li>
<li>resource_restart_failed</li>
<li>resource_restart_scheduled</li>
<li>resource_restart_succeeded</li>
<li>resource_retype_failed</li>
<li>resource_retype_scheduled</li>
<li>resource_retype_succeeded</li>
<li>resource_robot_account_created</li>
<li>resource_robot_account_deleted</li>
<li>resource_robot_account_updated</li>
<li>resource_snapshot_schedule_activated</li>
<li>resource_snapshot_schedule_cleaned_up</li>
<li>resource_snapshot_schedule_created</li>
<li>resource_snapshot_schedule_deactivated</li>
<li>resource_snapshot_schedule_deleted</li>
<li>resource_start_failed</li>
<li>resource_start_scheduled</li>
<li>resource_start_succeeded</li>
<li>resource_stop_failed</li>
<li>resource_stop_scheduled</li>
<li>resource_stop_succeeded</li>
<li>resource_unassign_floating_ip_failed</li>
<li>resource_unassign_floating_ip_scheduled</li>
<li>resource_unassign_floating_ip_succeeded</li>
<li>resource_update_allowed_address_pairs_failed</li>
<li>resource_update_allowed_address_pairs_scheduled</li>
<li>resource_update_allowed_address_pairs_succeeded</li>
<li>resource_update_floating_ips_failed</li>
<li>resource_update_floating_ips_scheduled</li>
<li>resource_update_floating_ips_succeeded</li>
<li>resource_update_internal_ips_failed</li>
<li>resource_update_internal_ips_scheduled</li>
<li>resource_update_internal_ips_succeeded</li>
<li>resource_update_security_groups_failed</li>
<li>resource_update_security_groups_scheduled</li>
<li>resource_update_security_groups_succeeded</li>
<li>resource_update_succeeded</li>
</ul>
<h2 id="developer-guide-events-ssh">Ssh</h2>
<ul>
<li>ssh_key_creation_succeeded</li>
<li>ssh_key_deletion_succeeded</li>
</ul>
<h2 id="developer-guide-events-support">Support</h2>
<ul>
<li>attachment_created</li>
<li>attachment_deleted</li>
<li>attachment_updated</li>
<li>issue_creation_succeeded</li>
<li>issue_deletion_succeeded</li>
<li>issue_update_succeeded</li>
</ul>
<h2 id="developer-guide-events-users">Users</h2>
<ul>
<li>auth_logged_in_with_oauth</li>
<li>auth_logged_in_with_saml2</li>
<li>auth_logged_out_with_saml2</li>
<li>freeipa_profile_created</li>
<li>freeipa_profile_deleted</li>
<li>freeipa_profile_disabled</li>
<li>freeipa_profile_enabled</li>
<li>marketplace_offering_user_created</li>
<li>marketplace_offering_user_deleted</li>
<li>ssh_key_creation_succeeded</li>
<li>ssh_key_deletion_succeeded</li>
<li>user_activated</li>
<li>user_creation_succeeded</li>
<li>user_deactivated</li>
<li>user_deletion_succeeded</li>
<li>user_details_update_succeeded</li>
<li>user_password_updated</li>
<li>user_profile_changed</li>
<li>user_update_succeeded</li>
</ul></section><section class="print-page" id="developer-guide-how-to-add-new-language"><h1 id="developer-guide-how-to-add-new-language-add-a-new-language-for-translatable-models">Add a new language for translatable models</h1>
<p>For translating fields of some models we use
<a href="https://django-modeltranslation.readthedocs.io/en/latest/">django modeltranslation</a>.</p>
<h2 id="developer-guide-how-to-add-new-language-first-run">First run</h2>
<p>To setup the database environment, after completing all migrations, execute in a console:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>waldur<span class="w"> </span>update_translation_fields
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-how-to-add-new-language-add-a-new-language">Add a new language</h2>
<p>To populate the generated language tables with initial content, run</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>waldur<span class="w"> </span>sync_translation_fields
</code></pre></div></td></tr></table></div></section><section class="print-page" id="developer-guide-how-to-write-docs"><h1 id="developer-guide-how-to-write-docs-how-to-write-docs">How to write docs</h1>
<h2 id="developer-guide-how-to-write-docs-documentation-for-sysadmins">Documentation for sysadmins</h2>
<p>Documentation for sysadmins should contain a description of settings
that allows to setup and customize Waldur MasterMind. It should be
located in <a href="https://docs.waldur.com/admin-guide/mastermind-configuration/configuration-guide/">wiki</a>.</p>
<h2 id="developer-guide-how-to-write-docs-documentation-for-developers">Documentation for developers</h2>
<p>If documentation describes basic concepts that are not related to any
particular part of code it should be located in <code>/docs</code> folder. All other documentation for developers should be located in code.</p>
<p>Tips for writing docs:</p>
<ul>
<li>add description for custom modules that are unique for particular plugin;</li>
<li>add description to base class methods that should be implemented by other developers;</li>
<li>don't add obvious comments for standard objects or parameters.</li>
</ul></section><section class="print-page" id="developer-guide-how-to-write-serializers"><h1 id="developer-guide-how-to-write-serializers-how-to-write-serializers">How to write serializers</h1>
<h2 id="developer-guide-how-to-write-serializers-object-identity">Object identity</h2>
<p>When you're writing serializer, you may want user to reliably specify
particular object in API request and serialize object in API response.
Basically there are six aspects to consider:</p>
<p>1) Consistency. We need to ensure consistent serialization format for
    API request and response not only within particular application, but
    also within whole system across different applications.
2) Reliability. We need to reliable identify object using some stable
    field so that value of this field would be the same even if all
    other fields are changed.
3) Security. We need to ensure that user has permission to get access
    to the object in question. Typically API renders 400 error if user
    specifies object he doesn't have access to in API request. On the
    backend side permission check should be done consistently.
4) Universality. There are generic API endpoints which accept objects
    from different application.
5) Performance. We need to consider how much data serializer fetches
    from database so that it wouldn't fetch data which is not used
    anyways and doesn't perform multiple queries when it's enough to
    issue single query.
6) Extensibility. Usually serializer does not have outside
    dependencies. But sometimes it makes sense to inject extra fields to
    the serializer defined in other application.</p>
<p>Therefore you may ask what is the best way to reliably and consistently
identify object in API.</p>
<p>In terms of frontend rendering, user is usually concerned with object
name. Typically we use name only as filtering parameter because names
are not unique. That's why object identity is implemented via a
<a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>.
Please note that usually we're not exposing ID in REST API in favor of
UUID because it allows easy <a href="https://blog.codinghorror.com/primary-keys-ids-versus-guids/">distribution of databases across multiple
servers</a>.</p>
<p>In order to decouple client and server we're implementing
<a href="https://en.wikipedia.org/wiki/HATEOAS">HATEOAS</a> component of REST API.
That's why usually we're using HyperlinkedRelatedField serializer, for
example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">project</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedRelatedField</span><span class="p">(</span>
    <span class="n">queryset</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span>
    <span class="n">view_name</span><span class="o">=</span><span class="s1">&#39;project-detail&#39;</span><span class="p">,</span>
    <span class="n">lookup_field</span><span class="o">=</span><span class="s1">&#39;uuid&#39;</span><span class="p">,</span>
    <span class="n">write_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>There are four notes here:</p>
<p>1) We need to specify <code>lookup_field</code> explicitly because it's default
    value is 'pk'.
2) We need to specify <code>view_name</code> explicitly in order to avoid clash of
    models names between different applications. You need to ensure that
    it matches view name specified in urls.py module.
3) When debug mode is enabled, you may navigate to related objects via
    hyperlinks using browsable API renderer and select related object
    from the list.
4) Serialized hyperlink contains not only UUID, but also application
    name and model. It allows to use serialized URL as request parameter
    for generic API endpoint. Generic API works with different models
    from arbitrary applications. Thus UUID alone is not enough for full
    unambiguous identification of the object in this case.</p>
<h2 id="developer-guide-how-to-write-serializers-generic-serializers">Generic serializers</h2>
<p>Typically serializer allows you to specify object related to one
particular database model. However it is not always the case. For
example, issue serializer allows you to specify object related to any
model with quota. In this case you would need to use GenericRelatedField
serializer. It is expected that related_models parameter provides a
list of all valid models.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">IssueSerializer</span><span class="p">(</span><span class="n">JiraPropertySerializer</span><span class="p">):</span>
    <span class="n">scope</span> <span class="o">=</span> <span class="n">core_serializers</span><span class="o">.</span><span class="n">GenericRelatedField</span><span class="p">(</span>
        <span class="n">source</span><span class="o">=</span><span class="s1">&#39;resource&#39;</span><span class="p">,</span>
        <span class="n">related_models</span><span class="o">=</span><span class="n">structure_models</span><span class="o">.</span><span class="n">ResourceMixin</span><span class="o">.</span><span class="n">get_all_models</span><span class="p">(),</span>
        <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Usually <code>get_all_models</code> method is implemented in base class and uses
Django application registry which provides access to all registered
models. Consider the following example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_all_models</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">model</span> <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">()</span> <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
<p>In terms of database model reference to the resource is stored as
generic foreign key, for example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">resource_content_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ContentType</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;jira_issues&#39;</span><span class="p">)</span>
<span class="n">resource_object_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">resource</span> <span class="o">=</span> <span class="n">GenericForeignKey</span><span class="p">(</span><span class="s1">&#39;resource_content_type&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_object_id&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-how-to-write-serializers-secure-serializers">Secure serializers</h2>
<p>In Waldur we're using role-based-access-control (RBAC) for restricting
system access to authorized users. In terms of serializers there are two
abstract base serializer classes, PermissionFieldFilteringMixin and
PermissionListSerializer which allow to filter related fields. They are
needed in order to constrain the list of entities that can be used as a
value for the field. Consider the following example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ResourceSerializer</span><span class="p">(</span><span class="n">PermissionFieldFilteringMixin</span><span class="p">,</span>
                         <span class="n">core_serializers</span><span class="o">.</span><span class="n">AugmentedSerializerMixin</span><span class="p">,</span>
                         <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedModelSerializer</span><span class="p">):</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedRelatedField</span><span class="p">(</span>
        <span class="n">queryset</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span>
        <span class="n">view_name</span><span class="o">=</span><span class="s1">&#39;project-detail&#39;</span><span class="p">,</span>
        <span class="n">lookup_field</span><span class="o">=</span><span class="s1">&#39;uuid&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="bp">NotImplemented</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s1">&#39;project&#39;</span><span class="p">,</span> <span class="s1">&#39;project_name&#39;</span><span class="p">,</span> <span class="s1">&#39;project_uuid&#39;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">related_paths</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;project&#39;</span><span class="p">,)</span>

    <span class="k">def</span> <span class="nf">get_filtered_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;project&#39;</span><span class="p">,</span>
</code></pre></div></td></tr></table></div>
<p>By using PermissionFieldFilteringMixin we ensure that value of project
field is validated against current user so that only authorized user
which has corresponding role in either project or customer is allowed to
use this serializer.</p>
<h2 id="developer-guide-how-to-write-serializers-high-performance-serializers">High-performance serializers</h2>
<h3 id="developer-guide-how-to-write-serializers-avoiding-over-fetching">Avoiding over-fetching</h3>
<p>By default serializer renders value for all fields specified in fields
parameter. However, sometimes user does not really need to transfer all
fields over the network. It is especially important when you're
targeting at mobile users with slow network or even regular users when
serializer renders a lot of data which is thrown away by application
anyways.</p>
<p>If you want to allow user to specify exactly and explicitly list of
fields to render, you just need to use RestrictedSerializerMixin.</p>
<h3 id="developer-guide-how-to-write-serializers-avoiding-under-fetching">Avoiding under-fetching</h3>
<p>By default Django doesn't optimize database queries to the related
objects, so separate query is executed each time when related object is
needed. Fortunately enough, Django provides you with powerful methods to
join database queries together and cache resulting queryset in RAM using
identity map, so that instead of performing multiple consequent queries
to the database it's enough to issue single query.</p>
<p>So in order to reduce number of requests to DB your view should use
EagerLoadMixin. It is expected that corresponding serializer implements
static method <code>eager_load</code>, which selects objects necessary for
serialization.</p>
<p>Consider the following example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BaseServiceViewSet</span><span class="p">(</span><span class="n">core_mixins</span><span class="o">.</span><span class="n">EagerLoadMixin</span><span class="p">,</span> <span class="n">core_views</span><span class="o">.</span><span class="n">ActionsViewSet</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">ServiceSettingsSerializer</span><span class="p">(</span><span class="n">PermissionFieldFilteringMixin</span><span class="p">,</span>
                                <span class="n">core_serializers</span><span class="o">.</span><span class="n">AugmentedSerializerMixin</span><span class="p">,</span>
                                <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedModelSerializer</span><span class="p">):</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">eager_load</span><span class="p">(</span><span class="n">queryset</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span><span class="s1">&#39;customer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="s1">&#39;quotas&#39;</span><span class="p">,</span> <span class="s1">&#39;certifications&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-how-to-write-serializers-extensible-serializers">Extensible serializers</h2>
<p>Usually serializer does not have outside dependencies, but sometimes it
makes sense to inject extra fields to the serializer defined in other
application so that it would not introduce <a href="https://en.wikipedia.org/wiki/Circular_dependency">circular
dependencies</a>. Please
note that this mechanism should be used with caution as it makes harder
to track dependencies.</p>
<p>The main idea is that instead of introducing circular dependency we're
introducing extension point. This extension point is used in depending
application in order to inject new fields to existing serializer.</p>
<p>Example of host serializer implementation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ProjectSerializer</span><span class="p">(</span><span class="n">core_serializers</span><span class="o">.</span><span class="n">RestrictedSerializerMixin</span><span class="p">,</span>
                        <span class="n">PermissionFieldFilteringMixin</span><span class="p">,</span>
                        <span class="n">core_serializers</span><span class="o">.</span><span class="n">AugmentedSerializerMixin</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
<p>Guest application should subscribe to <code>pre_serializer_fields</code> signal and
inject additional fields. Example of signal handler implementation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_price_estimate</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">fields</span><span class="p">[</span><span class="s1">&#39;billing_price_estimate&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SerializerMethodField</span><span class="p">()</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="s1">&#39;get_billing_price_estimate&#39;</span><span class="p">,</span> <span class="n">get_price_estimate</span><span class="p">)</span>


<span class="n">core_signals</span><span class="o">.</span><span class="n">pre_serializer_fields</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
    <span class="n">sender</span><span class="o">=</span><span class="n">structure_serializers</span><span class="o">.</span><span class="n">ProjectSerializer</span><span class="p">,</span>
    <span class="n">receiver</span><span class="o">=</span><span class="n">add_price_estimate</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="developer-guide-how-to-write-tests"><h1 id="developer-guide-how-to-write-tests-how-to-write-tests">How to write tests</h1>
<h2 id="developer-guide-how-to-write-tests-application-tests-structure">Application tests structure</h2>
<p>Application tests should follow next structure:</p>
<ul>
<li>
<p><strong>/tests/</strong> - folder for all application tests.</p>
</li>
<li>
<p><strong>/tests/test_my_entity.py</strong> - file for API calls tests that are logically related to entity.
  Example: test calls for project CRUD + actions.</p>
</li>
<li>
<p><strong>/tests/test_my_entity.py:MyEntityActionTest</strong> - class for tests that are related to particular endpoint.
  Examples: ProjectCreateTest, InstanceResizeTest.</p>
</li>
<li>
<p><strong>/tests/unittests/</strong> - folder for unittests of particular file.</p>
</li>
<li>
<p><strong>/tests/unittests/test_file_name.py</strong> - file for test of classes and methods
  from application file "file_name". Examples: test_models.py, test_handlers.py.</p>
</li>
<li>
<p><strong>/tests/unittests/test_file_name.py:MyClassOrFuncTest</strong> - class for test that is related to particular class or
  function from file. Examples: ProjectTest, ValidateServiceTypeTest.</p>
</li>
</ul>
<h2 id="developer-guide-how-to-write-tests-tips-for-writing-tests">Tips for writing tests</h2>
<ul>
<li>cover important or complex functions and methods with unittests;</li>
<li>write at least one test for a positive flow for each endpoint;</li>
<li>do not write tests for actions that does not exist. If you don't support
  "create" action for any user there is no need to write test for that;</li>
<li>use fixtures (module fixtures.py) to generate default structure.</li>
</ul>
<h2 id="developer-guide-how-to-write-tests-how-to-override-settings-in-unit-tests">How to override settings in unit tests</h2>
<p>Don't manipulate django.conf.settings directly as Django won't restore the original values after such manipulations.
Instead you should use standard <a href="https://docs.djangoproject.com/en/2.2/topics/testing/tools/#overriding-settings">context managers and decorators</a>.
They change a setting temporarily and revert to the original value after running the testing code.
If you modify settings directly, you break test isolation by modifying global variable.</p>
<p>If configuration setting is not plain text or number but dictionary, and you need to update only one parameter,
you should take whole dict, copy it, modify parameter, and override whole dict.</p>
<p>Wrong:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">(</span><span class="n">WALDUR_CORE</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;INVITATION_LIFETIME&#39;</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">1</span><span class="p">)}):</span>
    <span class="n">tasks</span><span class="o">.</span><span class="n">cancel_expired_invitations</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Right:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="n">waldur_settings</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">WALDUR_CORE</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
  <span class="n">waldur_settings</span><span class="p">[</span><span class="s1">&#39;INVITATION_LIFETIME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">weeks</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">(</span><span class="n">WALDUR_CORE</span><span class="o">=</span><span class="n">waldur_settings</span><span class="p">):</span>
    <span class="n">tasks</span><span class="o">.</span><span class="n">cancel_expired_invitations</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-how-to-write-tests-running-tests">Running tests</h2>
<p>In order to run unit tests for specific module please execute the following command.
Note that you should substitute module name instead of example waldur_openstack.
Also it is assumed that you've already activated virtual Python environment.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>waldur_core.server.test_settings<span class="w"> </span>waldur<span class="w"> </span><span class="nb">test</span><span class="w"> </span>waldur_openstack
</code></pre></div></td></tr></table></div></section><section class="print-page" id="developer-guide-how-to-write-views"><h1 id="developer-guide-how-to-write-views-how-to-write-views">How to write views</h1>
<h2 id="developer-guide-how-to-write-views-view-workflow">View workflow</h2>
<ul>
<li>
<p><strong>Filtering</strong> - filter objects that are visible to a user based on his request.
  Raise 404 error if object is not visible.</p>
</li>
<li>
<p><strong>Permissions check</strong> - make sure that user has right to execute chosen action.
  Raise 403 error if user does not have enough permissions.</p>
</li>
<li>
<p><strong>View validation</strong> - check object state and make sure that selected action can be executed.
  Raise 409 error if action cannot be executed with current object state.</p>
</li>
<li>
<p><strong>Serializer validation</strong> - check that user's data is valid.</p>
</li>
<li>
<p><strong>Action logic execution</strong> - do anything that should be done to execute action.
  For example: schedule tasks with executors, run backend tasks, save data to DB.</p>
</li>
<li>
<p><strong>Serialization and response output</strong> - return serialized data as response.</p>
</li>
</ul></section><section class="print-page" id="developer-guide-i18n"><h1 id="developer-guide-i18n-internationalization">Internationalization</h1>
<p>Per-request internationalization is enabled by default for English and Estonian languages.
Client requests will respect the <code>Accept-Language</code>.</p>
<p>Here are the guidelines for specifying translation strings:</p>
<ul>
<li>Build a proper sentence: start with a capital letter, end with a period.</li>
</ul>
<p><strong>Right:</strong> <code>_('Deletion was scheduled.')</code></p>
<p><strong>Wrong:</strong> <code>_('deletion was scheduled')</code></p>
<ul>
<li>Use named-string interpolation instead of positional interpolation if message has several parameters.</li>
</ul>
<p><strong>Right:</strong> <code>_('Operation was successfully scheduled for %(count)d instances: %(names)s.')</code></p>
<p><strong>Wrong:</strong> <code>_('Operation was successfully scheduled for %s instances: %s.')</code></p>
<ul>
<li>help_text, verbose_name, exception message and response message should be marked,
  but don't mark message template for event or alert logger.</li>
</ul></section><section class="print-page" id="developer-guide-install-from-src"><h1 id="developer-guide-install-from-src-installation-from-source">Installation from source</h1>
<h2 id="developer-guide-install-from-src-prerequisites">Prerequisites</h2>
<ul>
<li>Linux OS: Ubuntu or CentOS. If you use Windows, you should
    install Linux either via
    <a href="https://www.freecodecamp.org/news/how-to-install-ubuntu-with-oracle-virtualbox/">Virtualbox</a>
    or <a href="https://docs.microsoft.com/en-us/windows/wsl/install">Windows Subsystem for Linux</a>.</li>
<li><code>git</code></li>
<li><code>redis</code> and <code>hiredis</code> library</li>
<li><code>virtualenv</code></li>
<li><code>C</code> compiler and development libraries needed to build dependencies</li>
<li>CentOS:
    <code>gcc libffi-devel openssl-devel postgresql-devel libjpeg-devel zlib-devel python-devel xmlsec1 xz-devel</code></li>
<li>Ubuntu:
    <code>sudo apt install git python3-pip python3-venv python3-dev gcc libffi-dev libsasl2-dev libssl-dev libpq-dev libjpeg8-dev zlib1g-dev xmlsec1 libldap2-dev liblzma-dev libxslt1-dev libxml2-dev</code></li>
<li>OS X:
    brew install openssl; export CFLAGS="-I$(brew --prefix openssl)/include $CFLAGS"; export LDFLAGS="-L$(brew --prefix openssl)/lib $LDFLAGS"`</li>
</ul>
<h2 id="developer-guide-install-from-src-waldur-mastermind-installation">Waldur MasterMind installation</h2>
<h3 id="developer-guide-install-from-src-install-poetry">Install poetry</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>poetry
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-install-from-src-get-the-code">Get the code</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/waldur/waldur-mastermind.git
<span class="nb">cd</span><span class="w"> </span>waldur-mastermind
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-install-from-src-install-waldur-in-development-mode-along-with-dependencies">Install Waldur in development mode along with dependencies</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>poetry<span class="w"> </span>install
poetry<span class="w"> </span>run<span class="w"> </span>pre-commit<span class="w"> </span>install
</code></pre></div></td></tr></table></div>
<p><strong>NB</strong>: If you use a machine with Apple M1 CPU, run this before:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">optflags</span><span class="o">=</span><span class="s2">&quot;-Wno-error=implicit-function-declaration&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&quot;-L/opt/homebrew/opt/libffi/lib&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">CPPFLAGS</span><span class="o">=</span><span class="s2">&quot;-I/opt/homebrew/opt/libffi/include&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_PATH</span><span class="o">=</span><span class="s2">&quot;/opt/homebrew/opt/libffi/lib/pkgconfig&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-install-from-src-create-and-edit-settings-file-see-configuration-section-for-details">Create and edit settings file (see 'Configuration' section for details)</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>cp<span class="w"> </span>src/waldur_core/server/settings.py.example<span class="w"> </span>src/waldur_core/server/settings.py
vi<span class="w"> </span>src/waldur_core/server/settings.py
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-install-from-src-initialise-postgresql-database">Initialise PostgreSQL database</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>sudo<span class="w"> </span>-u<span class="w"> </span>postgres<span class="w"> </span>-i
createdb<span class="w"> </span>waldur
createuser<span class="w"> </span>waldur
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-install-from-src-add-a-password-waldur-for-this-user">Add a password <em>waldur</em> for this user</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>psql
ALTER<span class="w"> </span>USER<span class="w"> </span>waldur<span class="w"> </span>PASSWORD<span class="w"> </span><span class="s1">&#39;waldur&#39;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-install-from-src-then-run-poetry">Then run poetry</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>poetry<span class="w"> </span>run<span class="w"> </span>waldur<span class="w"> </span>migrate<span class="w"> </span>--noinput
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-install-from-src-collect-static-data-static-files-will-be-copied-to-static-in-the-same-directory">Collect static data -- static files will be copied to <code>./static/</code> in the same directory</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>poetry<span class="w"> </span>run<span class="w"> </span>waldur<span class="w"> </span>collectstatic<span class="w"> </span>--noinput
</code></pre></div></td></tr></table></div>
<ul>
<li>Start Waldur:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>poetry<span class="w"> </span>run<span class="w"> </span>waldur<span class="w"> </span>runserver
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-install-from-src-configuration">Configuration</h2>
<p>Instructions are here: <a href="https://docs.waldur.com/admin-guide/mastermind-configuration/general/">https://docs.waldur.com/admin-guide/mastermind-configuration/general/</a></p></section><section class="print-page" id="developer-guide-logging"><h1 id="developer-guide-logging-event-logging">Event logging</h1>
<p>Event log entries is something an end user will see. In order to improve user experience the messages should be written in a consistent way.</p>
<p>Here are the guidelines for writing good log events.</p>
<ul>
<li>Use present perfect passive for the message.</li>
</ul>
<p><strong>Right:</strong> <code>Environment %s has been created.</code></p>
<p><strong>Wrong:</strong> <code>Environment %s was created.</code></p>
<ul>
<li>Build a proper sentence: start with a capital letter, end with a period.</li>
</ul>
<p><strong>Right:</strong> <code>Environment %s has been created.</code></p>
<p><strong>Wrong:</strong> <code>environment %s has been created</code></p>
<ul>
<li>Include entity names into the message string.</li>
</ul>
<p><strong>Right:</strong> <code>User %s has gained role of %s in project %s.</code></p>
<p><strong>Wrong:</strong> <code>User has gained role in project.</code></p>
<ul>
<li>Don't include too many details into the message string.</li>
</ul>
<p><strong>Right:</strong> <code>Environment %s has been updated.</code></p>
<p><strong>Wrong:</strong> <code>Environment has been updated with name: %s, description: %s.</code></p>
<ul>
<li>Use the name of an entity instead of its <code>__str__</code>.</li>
</ul>
<p><strong>Right:</strong> <code>event_logger.info('Environment %s has been updated.', env.name)</code></p>
<p><strong>Wrong:</strong> <code>event_logger.info('Environment %s has been updated.', env)</code></p>
<ul>
<li>Don't put quotes around names or entity types.</li>
</ul>
<p><strong>Right:</strong> <code>Environment %s has been created.</code></p>
<p><strong>Wrong:</strong> <code>Environment "%s" has been created.</code></p>
<ul>
<li>Don't capitalize entity types.</li>
</ul>
<p><strong>Right:</strong> <code>User %s has gained role of %s in project %s.</code></p>
<p><strong>Wrong:</strong> <code>User %s has gained Role of %s in Project %s.</code></p>
<ul>
<li>For actions that require background processing log both start of the process and its outcome.</li>
</ul>
<p><strong>Success flow:</strong></p>
<ol>
<li>
<p>log <code>Environment %s creation has been started.</code> within HTTP request handler;</p>
</li>
<li>
<p>log <code>Environment %s has been created.</code> at the end of background task.</p>
</li>
</ol>
<p><strong>Failure flow:</strong></p>
<ol>
<li>
<p>log <code>Environment %s creation has been started.</code> within HTTP request handler;</p>
</li>
<li>
<p>log <code>Environment %s creation has failed.</code> at the end of background task.</p>
</li>
<li>
<p>For actions that can be processed within HTTP request handler log only success.</p>
</li>
</ol>
<p><strong>Success flow:</strong></p>
<p>log <code>User %s has been created.</code> at the end of HTTP request handler.</p>
<p><strong>Failure flow:</strong></p>
<p>don't log anything, since most of the errors that could happen here
   are validation errors that would be corrected by user and then resubmitted.</p></section><section class="print-page" id="developer-guide-managed-entities"><h1 id="developer-guide-managed-entities-managed-entities">Managed entities</h1>
<h2 id="developer-guide-managed-entities-overview">Overview</h2>
<p>Managed entities are entities for which Waldur's database is considered an authoritative source of information.
By means of REST API a user defines the desired state of the entities.
Waldur's jobs are then executed to make the backend (OpenStack, JIRA, etc) reflect
the desired state as close as possible.</p>
<p>Since making changes to a backend can take a long time, they are done in background tasks.</p>
<p>Here's a proper way to deal with managed entities:</p>
<ul>
<li>within the scope of REST API request:</li>
<li>introduce the change (create, delete or edit an entity) to the Waldur's database;</li>
<li>schedule a background job passing instance id as a parameter;</li>
<li>
<p>return a positive HTTP response to the caller.</p>
</li>
<li>
<p>within the scope of background job:</p>
</li>
<li>
<p>fetch the entity being changed by its instance id;</p>
</li>
<li>make sure that it is in a proper state (e.g. not being updated by another background job);</li>
<li>transactionally update the its state to reflect that it is being updated;</li>
<li>perform necessary calls to backend to synchronize changes
    from Waldur's database to that backend;</li>
<li>transactionally update its state to reflect that it not being updated anymore.</li>
</ul>
<p>Using the above flow makes it possible for user to get immediate feedback
from an initial REST API call and then query state changes of the entity.</p>
<h2 id="developer-guide-managed-entities-managed-entities-operations-flow">Managed entities operations flow</h2>
<ol>
<li>
<p>View receives request for entity change.</p>
</li>
<li>
<p>If request contains any data - view passes request to serializer for validation.</p>
</li>
<li>
<p>View extracts operations specific information from validated data and saves entity via serializer.</p>
</li>
<li>
<p>View starts executor with saved instance and operation specific information as input.</p>
</li>
<li>
<p>Executor handles entity states checks and transition.</p>
</li>
<li>
<p>Executor schedules celery tasks to perform asynchronous operations.</p>
</li>
<li>
<p>View returns response.</p>
</li>
<li>
<p>Tasks asynchronously call backend methods to perform required operation.</p>
</li>
<li>
<p>Callback tasks changes instance state after backend method execution.</p>
</li>
</ol>
<h2 id="developer-guide-managed-entities-simplified-schema-of-operations-flow">Simplified schema of operations flow</h2>
<p>View ---&gt; Serializer ---&gt; View ---&gt; Executor ---&gt; Tasks ---&gt; Backend</p></section><section class="print-page" id="developer-guide-models"><h1 id="developer-guide-models-models">Models</h1>
<ul>
<li>Structure application models</li>
</ul>
<p><a class="glightbox" href="../developer-guide/core_structure.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Structure application models" src="../developer-guide/core_structure.png" /></a></p>
<ul>
<li>Permissions application models</li>
</ul>
<p><a class="glightbox" href="../developer-guide/core_permissions.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Permissions application models" src="../developer-guide/core_permissions.png" /></a></p>
<ul>
<li>Marketplace application models</li>
</ul>
<p><a class="glightbox" href="../developer-guide/marketplace.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Marketplace application models" src="../developer-guide/marketplace.png" /></a></p></section><section class="print-page" id="developer-guide-permissions"><h1 id="developer-guide-permissions-role-based-access-control">Role-based access control</h1>
<h2 id="developer-guide-permissions-introduction">Introduction</h2>
<p>Waldur authorization system determines what user can do. It consists of permissions and roles. Permission is unique string designating action to be executed. Role is named set of permissions. This functionality is implemented in <code>waldur_core.permissions</code> application.</p>
<p>First thing to remember is to use <code>PermissionEnum</code> to define permissions instead of using plain string or standalone named constant, otherwise they would not be pushed to frontend.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># src/waldur_core/permissions/enums.py</span>
<span class="k">class</span> <span class="nc">PermissionEnum</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
  <span class="n">CREATE_OFFERING</span> <span class="o">=</span> <span class="s1">&#39;OFFERING.CREATE&#39;</span>
  <span class="n">UPDATE_OFFERING</span> <span class="o">=</span> <span class="s1">&#39;OFFERING.UPDATE&#39;</span>
  <span class="n">DELETE_OFFERING</span> <span class="o">=</span> <span class="s1">&#39;OFFERING.DELETE&#39;</span>
</code></pre></div></td></tr></table></div>
<p>Next, let's assign that permissions to role.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.permissions.fixtures</span> <span class="kn">import</span> <span class="n">CustomerRole</span>
<span class="kn">from</span> <span class="nn">waldur_core.permissions.enums</span> <span class="kn">import</span> <span class="n">PermissionEnum</span>

<span class="n">CustomerRole</span><span class="o">.</span><span class="n">OWNER</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="n">PermissionEnum</span><span class="o">.</span><span class="n">CREATE_OFFERING</span><span class="p">)</span>
<span class="n">CustomerRole</span><span class="o">.</span><span class="n">OWNER</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="n">PermissionEnum</span><span class="o">.</span><span class="n">UPDATE_OFFERING</span><span class="p">)</span>
<span class="n">CustomerRole</span><span class="o">.</span><span class="n">OWNER</span><span class="o">.</span><span class="n">add_permission</span><span class="p">(</span><span class="n">PermissionEnum</span><span class="o">.</span><span class="n">DELETE_OFFERING</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Now, let's assign customer owner role to particular user and customer:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">from</span> <span class="nn">waldur_core.structure.models</span> <span class="kn">import</span> <span class="n">Customer</span>

<span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="n">customer</span> <span class="o">=</span> <span class="n">Customer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">last</span><span class="p">()</span>
<span class="n">customer</span><span class="o">.</span><span class="n">add_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">CustomerRole</span><span class="o">.</span><span class="n">OWNER</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Finally, we can check whether user is allowed to create offering in particular organization.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_core.permissions.enums</span> <span class="kn">import</span> <span class="n">PermissionEnum</span>
<span class="kn">from</span> <span class="nn">waldur_core.permissions.utils</span> <span class="kn">import</span> <span class="n">has_permission</span>

<span class="n">has_permission</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">PermissionEnum</span><span class="o">.</span><span class="n">CREATE_OFFERING</span><span class="p">,</span> <span class="n">customer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Please note that this function accepts not only customer, but also project and offering as a scope.
Consider these models as authorization aggregates. Other models, such as resources and orders, should refer to these aggregates to perform authorization check. For example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">has_permission</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">PermissionEnum</span><span class="o">.</span><span class="n">SET_RESOURCE_USAGE</span><span class="p">,</span> <span class="n">resource</span><span class="o">.</span><span class="n">offering</span><span class="o">.</span><span class="n">customer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-permissions-migration-example">Migration example</h2>
<p>Previously we have relied on hard-coded roles, such as customer owner and project manager. Migration to dynamic roles on backend is relatively straightforward process. Consider the following example.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ProviderPlanViewSet</span><span class="p">:</span>
  <span class="n">archive_permissions</span> <span class="o">=</span> <span class="p">[</span><span class="n">structure_permissions</span><span class="o">.</span><span class="n">is_owner</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>As you may see, we have relied on selectors with hard-coded roles. The main drawback of this approach is that it is very hard to inspect who can do what without reading all source code. And it is even hard to adjust this behaviour. Contrary to its name, by using dynamic roles we don't need to care much about roles though.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ProviderPlanViewSet</span><span class="p">:</span>
  <span class="n">archive_permissions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">permission_factory</span><span class="p">(</span>
      <span class="n">PermissionEnum</span><span class="o">.</span><span class="n">ARCHIVE_OFFERING_PLAN</span><span class="p">,</span>
      <span class="p">[</span><span class="s1">&#39;offering.customer&#39;</span><span class="p">],</span>
    <span class="p">)</span>
  <span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Here we use <code>permission_factory</code> function which accepts permission string and list of paths to scopes, either customer, project or offering. It returns function which accepts request and raises an exception if user doesn't have specified permission in roles connected to current user and one of these scopes.</p>
<h2 id="developer-guide-permissions-permissions-for-viewing">Permissions for viewing</h2>
<p>Usually it is implemented filter backend, such as <code>GenericRoleFilter</code>, which in turn uses <code>get_connected_customers</code> and <code>get_connected_projects</code> function because customer and project are two main permission aggregates.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PaymentProfileViewSet</span><span class="p">(</span><span class="n">core_views</span><span class="o">.</span><span class="n">ActionsViewSet</span><span class="p">):</span>
    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">structure_filters</span><span class="o">.</span><span class="n">GenericRoleFilter</span><span class="p">,</span>
        <span class="n">DjangoFilterBackend</span><span class="p">,</span>
        <span class="n">filters</span><span class="o">.</span><span class="n">PaymentProfileFilterBackend</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Although this approach works fine for trivial use cases, often enough permission filtering logic is more involved and we implement <code>get_queryset</code> method instead.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">OfferingUserGroupViewSet</span><span class="p">(</span><span class="n">core_views</span><span class="o">.</span><span class="n">ActionsViewSet</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">queryset</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span>
      <span class="n">current_user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span>
      <span class="k">if</span> <span class="n">current_user</span><span class="o">.</span><span class="n">is_staff</span> <span class="ow">or</span> <span class="n">current_user</span><span class="o">.</span><span class="n">is_support</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">queryset</span>

      <span class="n">projects</span> <span class="o">=</span> <span class="n">get_connected_projects</span><span class="p">(</span><span class="n">current_user</span><span class="p">)</span>
      <span class="n">customers</span> <span class="o">=</span> <span class="n">get_connected_customers</span><span class="p">(</span><span class="n">current_user</span><span class="p">)</span>

      <span class="n">subquery</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Q</span><span class="p">(</span><span class="n">projects__customer__in</span><span class="o">=</span><span class="n">customers</span><span class="p">)</span>
        <span class="o">|</span> <span class="n">Q</span><span class="p">(</span><span class="n">offering__customer__in</span><span class="o">=</span><span class="n">customers</span><span class="p">)</span>
        <span class="o">|</span> <span class="n">Q</span><span class="p">(</span><span class="n">projects__in</span><span class="o">=</span><span class="n">projects</span><span class="p">)</span>
      <span class="p">)</span>
      <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">subquery</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-permissions-permissions-for-object-creation-and-update">Permissions for object creation and update</h2>
<p>Usually it is done in serializer's validate method.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RobotAccountSerializer</span><span class="p">:</span>
  <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
    <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s1">&#39;request&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">:</span>
      <span class="n">permission</span> <span class="o">=</span> <span class="n">PermissionEnum</span><span class="o">.</span><span class="n">UPDATE_RESOURCE_ROBOT_ACCOUNT</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="n">permission</span> <span class="o">=</span> <span class="n">PermissionEnum</span><span class="o">.</span><span class="n">CREATE_RESOURCE_ROBOT_ACCOUNT</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_permission</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">permission</span><span class="p">,</span> <span class="n">resource</span><span class="o">.</span><span class="n">offering</span><span class="o">.</span><span class="n">customer</span><span class="p">):</span>
      <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">()</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="developer-guide-quotas"><h1 id="developer-guide-quotas-quotas-application">Quotas application</h1>
<h2 id="developer-guide-quotas-overview">Overview</h2>
<p>Quotas is Django application that provides generic implementation of quotas tracking functionality:</p>
<ol>
<li>Store and query resource limits and usages for project, customer or any other model.</li>
<li>Aggregate quota usage in object hierarchies.</li>
<li>Aggregate historical data for charting and analysis.</li>
</ol>
<h2 id="developer-guide-quotas-define-quota-fields">Define quota fields</h2>
<p>Quotas are typically implemented on a per-model basis.
Model with quotas should inherit <code>QuotaModelMixin</code> and define <code>Quotas</code> class.
<code>Quotas</code> class consists of set of quota fields. Consider the following example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="c1"># in models.py</span>

  <span class="kn">from</span> <span class="nn">waldur_core.quotas</span> <span class="kn">import</span> <span class="n">models</span> <span class="k">as</span> <span class="n">quotas_models</span><span class="p">,</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">quotas_fields</span>

  <span class="k">class</span> <span class="nc">Tenant</span><span class="p">(</span><span class="n">quotas_models</span><span class="o">.</span><span class="n">QuotaModelMixin</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

      <span class="k">class</span> <span class="nc">Quotas</span><span class="p">(</span><span class="n">quotas_models</span><span class="o">.</span><span class="n">QuotaModelMixin</span><span class="o">.</span><span class="n">Quotas</span><span class="p">):</span>
          <span class="n">vcpu</span> <span class="o">=</span> <span class="n">quotas_fields</span><span class="o">.</span><span class="n">QuotaField</span><span class="p">(</span><span class="n">default_limit</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">is_backend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
          <span class="n">ram</span> <span class="o">=</span> <span class="n">quotas_fields</span><span class="o">.</span><span class="n">QuotaField</span><span class="p">(</span><span class="n">default_limit</span><span class="o">=</span><span class="mi">51200</span><span class="p">,</span> <span class="n">is_backend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
          <span class="n">storage</span> <span class="o">=</span> <span class="n">quotas_fields</span><span class="o">.</span><span class="n">QuotaField</span><span class="p">(</span><span class="n">default_limit</span><span class="o">=</span><span class="mi">1024000</span><span class="p">,</span> <span class="n">is_backend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>As you can see, Tenant model defines quota fields for number of virtual CPU cores, amount of RAM and storage.</p>
<h2 id="developer-guide-quotas-change-object-quotas-usage-and-limit">Change object quotas usage and limit</h2>
<p>To edit objects quotas use:</p>
<ul>
<li><code>set_quota_limit</code> - replace old quota limit with new one</li>
<li><code>set_quota_usage</code> - replace old quota usage with new one</li>
<li><code>add_quota_usage</code> - add value to quota usage</li>
</ul>
<p>Do not edit quotas manually, because this will break quotas in objects ancestors.</p>
<p>Please note that aggregated usage is not stored in the database. Instead usage deltas are saved. The main reason behind it is to avoid deadlocks when multiple requests are trying to update the same quota for customer or project simultaneously.</p>
<h2 id="developer-guide-quotas-check-if-quota-exceeded">Check if quota exceeded</h2>
<p>To check if any of object quotas exceeded, use <code>validate_quota_change</code> method of object with quotas.
This method receive dictionary of quotas usage deltas and returns errors if one or more quotas of object exceeded.</p>
<h2 id="developer-guide-quotas-sort-objects-by-quotas-with-django_filtersfilterset">Sort objects by quotas with django_filters.FilterSet</h2>
<p>Inherit your <code>FilterSet</code> from <code>QuotaFilterMixin</code> and follow next steps to enable ordering by quotas.</p>
<p>Add <code>quotas__limit</code> and <code>-quotas__limit</code> to filter meta <code>order_by</code> attribute if you want to order by quotas limits. Ordering can be done only by one quota at a time.</p>
<h2 id="developer-guide-quotas-workflow-for-quota-allocation">Workflow for quota allocation</h2>
<p>In order to prevent bugs when multiple simultaneous requests are performed, the following workflow is used.</p>
<p>1) As soon as we know what quota will be used we increase its usage.
  It is performed in serializers' save or update method.
  If quota usage becomes over limit, validation error is raised.
  Consider for example <code>InstanceFlavorChangeSerializer</code> in OpenStack plugin.</p>
<p>2) If backend API call for resource provision fails, frontend quota usage is not modified.
  Instead it is assumed that quota pulling is triggered either by user or by cron.</p>
<p>3) Quota usage is decreased only when backend API call for resource deletion succeeds.
  Consider for example <code>delete_volume</code> backend method in OpenStack plugin.</p></section><section class="print-page" id="developer-guide-resource-actions"><h1 id="developer-guide-resource-actions-declaring-resource-actions">Declaring resource actions</h1>
<p>Any methods on the resource viewset decorated with
<code>@action(detail=True, methods=['post'])</code> will be recognized as resource
actions. For example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">InstanceViewSet</span><span class="p">(</span><span class="n">structure_views</span><span class="o">.</span><span class="n">BaseResourceViewSet</span><span class="p">):</span>

    <span class="nd">@action</span><span class="p">(</span><span class="n">detail</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;post&#39;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@action</span><span class="p">(</span><span class="n">detail</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;post&#39;</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">unlink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-resource-actions-complex-actions-and-serializers">Complex actions and serializers</h2>
<p>If your action uses serializer to parse complex data, you should declare
action-specific serializers on the resource viewset. For example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">InstanceViewSet</span><span class="p">(</span><span class="n">structure_views</span><span class="o">.</span><span class="n">BaseResourceViewSet</span><span class="p">):</span>

    <span class="n">assign_floating_ip_serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">AssignFloatingIpSerializer</span>
    <span class="n">resize_serializer_class</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">InstanceResizeSerializer</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="developer-guide-settings-policy"><h1 id="developer-guide-settings-policy-settings-policy">Settings policy</h1>
<p>Settings are used to configure behaviour of Waldur deployment. Settings can be used for configuration of both
core and plugins, or dependent libraries.</p>
<p>Below is a policy for the settings.</p>
<h2 id="developer-guide-settings-policy-plugin-settings">Plugin settings</h2>
<p>Plugins are defining their settings in the <code>extension.py</code>. However, most probably not all settings might make sense to
override in production. Responsibility for highlighting what settings could be overridden in production are on
plugin developer.</p>
<h2 id="developer-guide-settings-policy-deployment-settings">Deployment settings</h2>
<p>Deployment specific settings (e.g. for CentOS-8) are maintained as Python files and are kept in <code>/etc/waldur/</code>:</p>
<ul>
<li><code>override.conf.py</code> - all settings overwritten for the deployment apart from logging settings;</li>
<li><code>features.json</code> - features setup for frontend;</li>
<li><code>logging.conf.py</code> - logging configuration for Waldur</li>
</ul></section><section class="print-page" id="developer-guide-tasks-and-executors"><h1 id="developer-guide-tasks-and-executors-tasks-and-executors">Tasks and executors</h1>
<h2 id="developer-guide-tasks-and-executors-scheduling-celery-task-from-signal-handler">Scheduling Celery task from signal handler</h2>
<p>Please use transaction.on_commit wrapper if you need to schedule Celery task from signal handler.
Otherwise, Celery task is scheduled too early and executed even if object is not yet saved to the database.
See also <a href="https://docs.djangoproject.com/en/2.2/topics/db/transactions/#performing-actions-after-commit">django docs</a></p>
<h2 id="developer-guide-tasks-and-executors-executors">Executors</h2>
<p>Waldur performs logical operations using executors that combine several tasks.</p>
<p>Executor represents a logical operation on a backend, like VM creation or resize.
It executes one or more background tasks and takes care of resource state updates
and exception handling.</p>
<h2 id="developer-guide-tasks-and-executors-tasks">Tasks</h2>
<p>There are 3 types of task queues: regular (used by default), heavy and background.</p>
<h2 id="developer-guide-tasks-and-executors-task-registration">Task registration</h2>
<p>For class based tasks use old Task base class for compatibility:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">Task</span>
</code></pre></div></td></tr></table></div>
<p>For functions use decorator shared_task:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">shared_task</span>


  <span class="nd">@shared_task</span>
  <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
      <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-tasks-and-executors-regular-tasks">Regular tasks</h3>
<p>Each regular task corresponds to a particular granular action - like state transition,
object deletion or backend method execution. They are supposed to be combined and
called in executors. It is not allowed to schedule tasks directly from
views or serializer.</p>
<h3 id="developer-guide-tasks-and-executors-heavy-tasks">Heavy tasks</h3>
<p>If task takes too long to complete, you should try to break it down into smaller regular tasks
in order to avoid flooding general queue. Only if backend does not allow to do so,
you should mark such tasks as heavy so that they use separate queue.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="nd">@shared_task</span><span class="p">(</span><span class="n">is_heavy_task</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
  <span class="k">def</span> <span class="nf">heavy</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;** Heavy </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">uuid</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="developer-guide-tasks-and-executors-throttle-tasks">Throttle tasks</h3>
<p>Some backends don't allow to execute several operations concurrently within the same scope.
For example, one OpenStack settings does not support provisioning of more than 4 instances together.
In this case task throttling should be used.</p>
<h3 id="developer-guide-tasks-and-executors-background-tasks">Background tasks</h3>
<p>Tasks that are executed by celerybeat should be marked as "background".
To mark task as background you need to inherit it from core.BackgroundTask:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="kn">from</span> <span class="nn">waldur_core.core</span> <span class="kn">import</span> <span class="n">tasks</span> <span class="k">as</span> <span class="n">core_tasks</span>
  <span class="k">class</span> <span class="nc">MyTask</span><span class="p">(</span><span class="n">core_tasks</span><span class="o">.</span><span class="n">BackgroundTask</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;** Background task&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Explore BackgroundTask to discover background tasks features.</p></section><section class="print-page" id="developer-guide-templates"><h1 id="developer-guide-templates-templates">Templates</h1>
<p>The content of this document is autogenerated during CI job execution.</p></section><section class="print-page" id="developer-guide-waldur-ci-cd"><h1 id="developer-guide-waldur-ci-cd-waldur-cicd">Waldur CI/CD</h1>
<h2 id="developer-guide-waldur-ci-cd-general-architecture">General Architecture</h2>
<p>Waldur uses CI/CD approach for testing, packaging and deployment. The approach is implemented with GitLab CI system. It provides a framework for building pipelines. A pipeline consists of a sequence of stages, each of which depends on the result of a predecessor and includes smaller parts called jobs. A job is a sequence of actions executed for a specific purpose, e.g., testing an application.</p>
<p>The entire CI/CD pipeline consists of smaller pipelines, each of which resides in a corresponding repository and belongs to a particular part.</p>
<p>The CI pipelines are created for the following modules:</p>
<ul>
<li>Waldur Mastermind - REST API backend</li>
<li>Waldur Homeport - frontend module</li>
<li>Waldur Docker Compose - configuration for single-node deployment via Docker Compose</li>
<li>Waldur Helm Chart - package with templates of <a href="https://kubernetes.io/">Kubernetes</a> manifests for workload resources</li>
</ul>
<p>The CD pipelines were created for several Waldur deployments like Waldur development or production.</p>
<p>The following diagram illustrates the general picture of the pipeline.</p>
<p><a class="glightbox" href="../developer-guide/img/CI-CD-general.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="CI/CD Pipeline for Waldur" src="../developer-guide/img/CI-CD-general.png" /></a></p>
<h2 id="developer-guide-waldur-ci-cd-pipeline-architecture-for-waldur-components">Pipeline architecture for Waldur Components</h2>
<p>Waldur components are the separate applications of Waldur. The two major ones are Waldur Mastermind and Waldur Homeport.</p>
<p><a class="glightbox" href="../developer-guide/img/1-pipeline-components.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Pipeline for Waldur Components" src="../developer-guide/img/1-pipeline-components.png" /></a></p>
<p>There are three main stages in the pipeline:</p>
<ul>
<li>Test, where the source code lint and unit testing takes place. This stage runs for each commit in a merge request and for the main branch commits;</li>
<li>Build, where Docker image is being built. This stage runs for the main branch commits;</li>
<li>Release, where Docker image from the last stage is being published in <a href="https://hub.docker.com/">Docker Hub</a> registry. This stage runs for the main branch commits.</li>
</ul>
<h2 id="developer-guide-waldur-ci-cd-pipeline-architecture-for-waldur-deployment-templates">Pipeline architecture for Waldur Deployment Templates</h2>
<p>Waldur deployment templates are the configurations for different deployment environments. Currently, Waldur supports Docker Compose and Kubernetes. The structure of the latter one is based on <a href="https://helm.sh/">Helm</a> technology. The pipeline is shown below.</p>
<p><a class="glightbox" href="../developer-guide/img/2-pipeline-dt.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Pipeline for Waldur Deployment Templates" src="../developer-guide/img/2-pipeline-dt.png" /></a></p>
<p>This pipeline includes two stages:</p>
<ul>
<li>Test, where the source code lint and configuration testing takes place. This stage runs for each commit in a merge request and the main branch commits;</li>
<li>Release, where the configuration is published to <a href="https://github.com/">GitHub</a>. This step is implemented with <a href="https://docs.gitlab.com/ee/user/project/repository/mirror/push.html">GitLab mirroring</a>.</li>
</ul>
<h2 id="developer-guide-waldur-ci-cd-pipeline-architecture-for-waldur-deployments">Pipeline architecture for Waldur Deployments</h2>
<p>In this context, deployments are repositories with values for further insertion into Waldur Deployment Templates. For example, they can be values for environmental variables used in Waldur containers. The pipeline is shown below.</p>
<p><a class="glightbox" href="../developer-guide/img/3-pipeline-depl.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Pipeline for Waldur Deployments" src="../developer-guide/img/3-pipeline-depl.png" /></a></p>
<p>There are three independent stages:</p>
<ul>
<li>Deploy, where Waldur release is installed or updated. This stage runs only for main branch commits. For Docker Compose environment, this stage is triggered automatically. For Kubernetes, it runs automatically only for update operations, while installation requires a manual trigger. Also, the update action runs by a schedule, e.g. at 5 AM;</li>
<li>Test, where the running Waldur instance is tested. For example, it checks availability via HTTP requests sent to public Waldur endpoints;</li>
<li>Undeploy, which removes the Waldur instance. This stage can be triggered only manually.</li>
</ul></section><section class="print-page" id="developer-guide-workflow"><h1 id="developer-guide-workflow-development-guidelines">Development guidelines</h1>
<ol>
<li>Follow <a href="https://python.org/dev/peps/pep-0008/">PEP8</a></li>
<li>Use <a href="https://github.com/nvie/gitflow">git flow</a></li>
<li>Write docstrings</li>
</ol>
<h2 id="developer-guide-workflow-flow-for-feature-tasks">Flow for feature tasks</h2>
<ul>
<li>Create a new branch from develop</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>git<span class="w"> </span>checkout<span class="w"> </span>develop
<span class="w">  </span>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>develop
<span class="w">  </span>git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/task-id
</code></pre></div></td></tr></table></div>
<ul>
<li>Perform brilliant work (don't forget about tests!)</li>
<li>Verify that tests are passing.</li>
<li>Push all changes to origin (<a href="https://code.opennodecloud.com/">https://code.opennodecloud.com/</a>)</li>
<li>Create a Merge Request and assign it to a reviewer. Make sure that MR can be merged automatically. If not, resolve
   the conflicts by merging develop branch into yours:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>git<span class="w"> </span>checkout<span class="w"> </span>feature/task-id
<span class="w">  </span>git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>develop
</code></pre></div></td></tr></table></div>
<ul>
<li>Resolve ticket in JIRA.</li>
</ul></section>
                        <h2 class='nav-section-title' id='section-plugins'>
                            Plugins <a class='headerlink' href='#section-plugins' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="developer-guide-plugins"><h1 id="developer-guide-plugins-plugins">Plugins</h1>
<ul>
<li><a href="#developer-guide-plugins-plugins">Plugins</a></li>
<li><a href="#developer-guide-plugins-openstack">OpenStack</a></li>
<li><a href="#developer-guide-plugins-invoices">Invoices</a></li>
<li><a href="#developer-guide-plugins-jira">Jira</a></li>
<li><a href="#developer-guide-plugins-valimo">Valimo</a></li>
</ul></section><section class="print-page" id="developer-guide-plugins-invoices"><h1 id="developer-guide-plugins-invoices-invoices-plugin">Invoices plugin</h1>
<p>Invoice price is calculated based on its items. For each object that should be added to invoice (invoice item source) should be created a separate model.</p>
<p>Business logic for invoice item creation and registration should be covered in a registrator in the module <code>registrators.py</code>.</p>
<p>Invoice items creation and termination should be triggered in handlers that reacts on items sources deletion or save. <code>RegistrationManager</code> should be used in handlers.</p></section><section class="print-page" id="developer-guide-plugins-jira"><h1 id="developer-guide-plugins-jira-jira-plugin">JIRA plugin</h1>
<h2 id="developer-guide-plugins-jira-configuration">Configuration</h2>
<ol>
<li>
<p>Define active backend.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># For Service Desk</span>
<span class="n">WALDUR_SUPPORT</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;ACTIVE_BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_mastermind.support.backend.atlassian:ServiceDeskBackend&#39;</span><span class="p">,</span>
<span class="p">})</span>
<span class="c1"># For JIRA</span>
<span class="n">WALDUR_SUPPORT</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;ACTIVE_BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_mastermind.support.backend.atlassian:JiraBackend&#39;</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Setup connection. Define server URL and user details to connect JIRA
    or Service Desk to Waldur:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_SUPPORT</span><span class="p">[</span><span class="s1">&#39;CREDENTIALS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;server&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">server</span> <span class="n">URL</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Atlassian</span> <span class="n">user</span> <span class="n">username</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Atlassian</span> <span class="n">user</span> <span class="n">password</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Project setup. Define project key.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_SUPPORT</span><span class="p">[</span><span class="s1">&#39;PROJECT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">project</span> <span class="n">key</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Project issues setup.</p>
<p>4.1. Make sure that selected project supports registered types of issues: <code>WALDUR_SUPPORT['ISSUE']['types']</code>.</p>
<p>4.2. Make sure that project issues have fields that corresponds to
<code>impact_field</code>, <code>reporter_field</code>, <code>caller_field</code>. It is
possible to override default field names:</p>
</li>
</ol>
<blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">WALDUR_SUPPORT</span><span class="p">[</span><span class="s1">&#39;ISSUE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;impact_field&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">issue</span> <span class="n">impact</span> <span class="n">field</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">JIRA</span> <span class="ow">or</span> <span class="n">Service</span> <span class="n">desk</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s1">&#39;reporter_field&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">issue</span> <span class="n">reporter</span> <span class="n">field</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">JIRA</span> <span class="ow">or</span> <span class="n">Service</span> <span class="n">desk</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s1">&#39;caller_field&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">issue</span> <span class="n">caller</span> <span class="n">field</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">JIRA</span> <span class="ow">or</span> <span class="n">Service</span> <span class="n">desk</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></td></tr></table></div>
</blockquote>
<h2 id="developer-guide-plugins-jira-web-hook-installation">Web hook installation</h2>
<p>It's possible to track updates of JIRA issues and apply them to Waldur
immediately.</p>
<p>An instruction of JIRA configuration can be found at
<a href="https://developer.atlassian.com/jiradev/jira-apis/webhooks">https://developer.atlassian.com/jiradev/jira-apis/webhooks</a></p>
<p>Step by step guide:</p>
<ol>
<li>
<p>Log in to JIRA as administrator</p>
</li>
<li>
<p>Click on a cogwheel in the upper right corner and pick 'System'.</p>
</li>
<li>
<p>Scroll down to the lower left corner and find a "WebHook" option under the Advanced tab.</p>
</li>
<li>
<p>Now click on "Create a Web Hook" You will be presented with a web
    hook creation view. There are only 3 mandatory fields - Name, Status and URL.</p>
<p>4.1 Name your hook</p>
<p>4.2 Select whether you want to enable it. It can be disabled at any
moment from to the same menu.</p>
<p>4.3 Configure a URL to send a POST request to. For instance:
<a href="http://waldur.example.com/api/support-jira-webhook/">http://waldur.example.com/api/support-jira-webhook/</a> It is not needed
to add any additional fields to request.</p>
<p>*Note: In case of VirtualBox localhost usually is 10.0.2.2. So the
complete URL will be next:
<code>http://10.0.2.2:8000/api/support-jira-webhook/*</code></p>
<p>4.4 Add a description.</p>
<p>4.5 Please make sure you've picked 'created, updated and deleted' actions under 'Events' section. No need to to check Comments events, they will be synced by the issue triggers.</p>
<p>4.6 Save configuration.</p>
</li>
</ol></section><section class="print-page" id="developer-guide-plugins-plugins"><h1 id="developer-guide-plugins-plugins-waldur-plugins">Waldur plugins</h1>
<h2 id="developer-guide-plugins-plugins-plugin-as-extension">Plugin as extension</h2>
<p>Waldur extensions are developed as auto-configurable plugins. One plugin
can contain several extensions which is a pure Django application by its
own. In order to be recognized and automatically connected to Waldur
some additional configuration required.</p>
<p>Extensions' URLs will be registered automatically only if
<code>settings.WALDUR_CORE['EXTENSIONS_AUTOREGISTER']</code> is <code>True</code>, which is
default.</p>
<p>Create a class inherited from
<code>waldur_core.core.WaldurExtension</code>. Implement methods which
reflect your app functionality. At least <code>django_app()</code>
should be implemented.</p>
<p>Add an entry point of name <code>waldur_extensions</code> to your package
<code>setup.py</code>. Example:</p>
<blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;waldur_extensions&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;waldur_demo = waldur_demo.extension:DemoExtension&#39;</span><span class="p">,)</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
</blockquote>
<h2 id="developer-guide-plugins-plugins-plugin-documentation">Plugin documentation</h2>
<ol>
<li>
<p>Keep plugin's documentation within plugin's code repository.</p>
</li>
<li>
<p>The documentation page should start with plugin's title and
    description.</p>
</li>
<li>
<p>Keep plugin's documentation page structure similar to the Waldur's main documentation page:</p>
<p><strong>Guide</strong> - should contain at least <strong>installation</strong> steps.
<strong>API</strong> - should include description of API extension, if any.</p>
</li>
</ol></section><section class="print-page" id="developer-guide-plugins-valimo"><h1 id="developer-guide-plugins-valimo-valimo-authentication-plugin">Valimo authentication plugin</h1>
<p>Valimo endpoint allows to get Waldur authentication token using mobile
PKI from Valimo. Please note, that only authentication is supported - no
auto-registration is currently available.</p>
<ul>
<li>
<p>To initiate a login process, please issue POST request against
  <code>/api/auth-valimo/</code> endpoint providing phone number as an input.</p>
</li>
<li>
<p>On that request Waldur will create a result object (<code>AuthResult</code>)
  and request authentication from the Valimo PKI service. The result
  object contains all the metadata about the request, including field
  <code>message</code> - text that is sent to the user via SMS. This text is
  typically shown to the user for validation purposes.</p>
</li>
<li>
<p>The client is expected to poll for the authentication process by
  issuing POST requests against <code>/api/auth-valimo/result/</code> with UUID
  in the payload of a request. Please see details in the API
  documentation.</p>
</li>
<li>
<p>After a successful login, endpoint <code>/api/auth-valimo/result/</code> will
  contain authentication token.</p>
</li>
</ul></section>
                        <h3 class='nav-section-title' id='section-openstack'>
                            Openstack <a class='headerlink' href='#section-openstack' title='Permanent link'>↵</a>
                        </h3>
                        <section class="print-page" id="developer-guide-plugins-openstack"><h1 id="developer-guide-plugins-openstack-openstack-plugin">OpenStack plugin</h1>
<p><a href="https://www.openstack.org/">OpenStack</a> is a popular open-source toolkit
for building private clouds.</p>
<ul>
<li><a href="#developer-guide-plugins-openstack-instances">Instances</a></li>
<li><a href="#developer-guide-plugins-openstack-backups">Backups</a></li>
<li><a href="#developer-guide-plugins-openstack-import">Import</a></li>
</ul></section><section class="print-page" id="developer-guide-plugins-openstack-backups"><h1 id="developer-guide-plugins-openstack-backups-openstack-backups">OpenStack backups</h1>
<p>Backups allow storing backups of instances outside of an OpenStack
deployment and restoring it on other deployment.</p>
<p>On backup creation Waldur creates cinder backups for each volume of
the instance, stores instance metadata and exports and saves metadata
records of cinder backups.</p>
<p>On backup restoration Waldur creates cinder backups in a new tenant,
based on saved metadata records. After that it creates new volumes and
restores cinder backups into them. Finally, Waldur creates new instance
based on restored volumes and backup metadata.</p>
<h2 id="developer-guide-plugins-openstack-backups-rest-api">REST API</h2>
<p>To create new backup, issue POST request with instance, backup name
and description to <code>/api/openstacktenant-backups/</code> endpoint. backup
has fields <code>state</code> and <code>runtime_state</code> that indicate backup creation
progress.</p>
<p>It is possible to update backup name and description with POST
request against <code>/api/openstacktenant-backups/&lt;uuid&gt;/</code> endpoint.</p>
<p>To restore backup - issue POST request with backup, new tenant and
new instance flavor against <code>/api/openstacktenant-backups/&lt;uuid&gt;/restore/</code>
endpoint. Make sure that flavor is big enough for instance. You can
check backup metadata to get stored instance minimum ram, cores and
storage. On successful start of the restoration, endpoint will return
URL of an instance that should will be created from backup, field
<code>state</code> of this instance indicates restoration process progress.</p>
<p>For more detailed endpoints description - please check endpoints
documentation.</p></section><section class="print-page" id="developer-guide-plugins-openstack-import"><h1 id="developer-guide-plugins-openstack-import-resources-import">Resources import</h1>
<p>Waldur is able to import existing OpenStack tenants, instances and
volumes. This allows you take resources you've created and bring it
under Waldur management.</p>
<p>To get list of available volumes to import send GET request to
<em>marketplace-offerings/<offering_uuid>/importable_resources/</em> endpoint.</p>
<p>To import volume send POST-request with the following parameters to
<em>marketplace-offerings/<offering_uuid>/import_resource</em> endpoint:</p>
<ul>
<li><strong>project</strong> a UUID of project used for import;</li>
<li><strong>backend_id</strong> a backend id of the resource to be imported;</li>
<li><strong>plan</strong> an optional UUID of plan used for import.</li>
</ul></section><section class="print-page" id="developer-guide-plugins-openstack-instances"><h1 id="developer-guide-plugins-openstack-instances-openstack-instances">OpenStack instances</h1>
<p>When a VM instance is created through Waldur, it is created
using Cinder service with 2 volumes:</p>
<ul>
<li><strong>root volume</strong> containing OS root image, bootable;</li>
<li><strong>data volume</strong> an empty volume for data.</li>
</ul>
<p>VM resize (flavor). To change memory or CPU number, a flavor should be
changed. Please note, that the disk size is not affected. Change can
happen only for a stopped VM.</p>
<p>VM resize (disk). Increasing a disk size means extension of the <strong>data
volume</strong> attached to the instance. The process includes detaching of a
data volume, extending it and re-attaching to a VM. Disk can be
increased only for a stopped VM.</p></section><h1 class='nav-section-title-end'>Ended: Openstack</h1><h1 class='nav-section-title-end'>Ended: Plugins</h1>
                        <h2 class='nav-section-title' id='section-ui'>
                            Ui <a class='headerlink' href='#section-ui' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="developer-guide-ui-i18n"><h1 id="developer-guide-ui-i18n-multilingual-user-interface">Multilingual user interface</h1>
<p>Workflow looks as following:</p>
<p>Markup TSX code using <code>translate</code> function. For example:
 <code>translate('User details')</code></p>
<p>Always mark complete sentences for translation. If you combine fragments at runtime, there is no way for the translator to construct a proper sentence in their language. Do not combine strings together at runtime.</p>
<p>If you need to render JSX element inside of translated string, you should use <code>formatJsxTemplate</code> function:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nx">translate</span><span class="p">(</span><span class="s1">&#39;Opened by {user} at {date}&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">user</span><span class="o">:</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">IssueUser</span><span class="w"> </span><span class="nx">item</span><span class="o">=</span><span class="p">{</span><span class="nx">item</span><span class="p">}</span><span class="w"> </span><span class="o">/&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="nx">date</span><span class="o">:</span><span class="w"> </span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">created</span><span class="p">),</span>
<span class="p">},</span><span class="w"> </span><span class="nx">formatJsxTemplate</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>If translated string should be rendered inside of JSX element, you should use <code>formatJsx</code> function:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nx">translate</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;You have not added any SSH keys to your &lt;Link&gt;profile&lt;/Link&gt;.&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="nx">Link</span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Link</span><span class="w"> </span><span class="nx">state</span><span class="o">=</span><span class="s2">&quot;profile.keys&quot;</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">s</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/Link&gt; },</span>
<span class="w">  </span><span class="nx">formatJsx</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Translation template is created automatically via Webpack. It will extract strings from TS and TSX files and put it in <code>locales/template.pot</code>.</p>
<p>PO files are synced with Localazy service by GitLab CI pipelines.</p>
<p>All PO files are automatically converted by Webpack to JSON files.</p>
<p>Current user locale is stored in auth storage.</p></section><section class="print-page" id="developer-guide-ui-permissions"><h1 id="developer-guide-ui-permissions-role-based-access-control">Role-based access control</h1>
<h2 id="developer-guide-ui-permissions-introduction">Introduction</h2>
<p>Waldur authorization system determines what user can do. It consists of permissions and roles. Permission is unique string designating action to be executed. Role is named set of permissions.</p>
<p>Permissions are defined in <code>PermissionEnum</code> which is automatically generated from backend code and pushed to fronted code by GitLab CI. Most of the time you're going to use <code>hasPermission</code> function which checks, whether user is allowed to perform action on given customer, project or offering. The following example shows how to check whether user is allowed to create offering in organization.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">PermissionEnum</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@waldur/permissions/enums&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">hasPermission</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@waldur/permissions/hasPermission&#39;</span><span class="p">;</span>

<span class="nx">hasPermission</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">permission</span><span class="o">:</span><span class="w"> </span><span class="nx">PermissionEnum</span><span class="p">.</span><span class="nx">CREATE_OFFERING</span><span class="p">,</span>
<span class="w">  </span><span class="nx">customerId</span><span class="o">:</span><span class="w"> </span><span class="nx">customer</span><span class="p">.</span><span class="nx">uuid</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></td></tr></table></div>
<h2 id="developer-guide-ui-permissions-migration-examples">Migration examples</h2>
<p>Previously we have relied on hard-coded roles, such as customer owner and project manager. Migration to dynamic roles on frontend is relatively straightforward process. Consider the following example.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">AcceptAction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">isOwnerOrStaff</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">(</span><span class="nx">isOwnerOrStaffSelector</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">isServiceManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useSelector</span><span class="p">(</span><span class="nx">isServiceManagerSelector</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">isOwnerOrStaff</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="nx">isServiceManager</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Button</span><span class="o">/&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>As you may see, we have relied on selectors with hard-coded roles. The main drawback of this approach is that it is very hard to inspect who can do what without reading all source code. And it is even hard to adjust this behaviour. Contrary to its name, by using dynamic roles we don't need to care much about roles though.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">AcceptAction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">props</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">hasPermission</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">permission</span><span class="o">:</span><span class="w"> </span><span class="nx">PermissionEnum</span><span class="p">.</span><span class="nx">ACCEPT_BOOKING_REQUEST</span><span class="p">,</span>
<span class="w">    </span><span class="nx">customerId</span><span class="o">:</span><span class="w"> </span><span class="nx">customer</span><span class="p">.</span><span class="nx">uuid</span><span class="p">,</span>
<span class="w">  </span><span class="p">}))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&lt;</span><span class="nx">Button</span><span class="o">/&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The only prerequisite of course is to ensure that backend uses dynamic roles too.</p></section><section class="print-page" id="developer-guide-ui-tables"><h1 id="developer-guide-ui-tables-table-component">Table component</h1>
<ol>
<li>State management is done via <code>useTable</code> React hook.</li>
<li>Table rendering is done using <code>Table</code> component.</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">translate</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@waldur/i18n&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">Table</span><span class="p">,</span><span class="w"> </span><span class="nx">createFetcher</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@waldur/table&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">useTable</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@waldur/table/utils&#39;</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">RolesList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">tableProps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">useTable</span><span class="p">({</span>
<span class="w">    </span><span class="nx">table</span><span class="o">:</span><span class="w"> </span><span class="sb">`RolesList`</span><span class="p">,</span>
<span class="w">    </span><span class="nx">fetchData</span><span class="o">:</span><span class="w"> </span><span class="kt">createFetcher</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">),</span>
<span class="w">  </span><span class="p">});</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="o">&lt;</span><span class="nx">Table</span>
<span class="w">      </span><span class="p">{...</span><span class="nx">tableProps</span><span class="p">}</span>
<span class="w">      </span><span class="nx">columns</span><span class="o">=</span><span class="p">{[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="kt">translate</span><span class="p">(</span><span class="s1">&#39;Name&#39;</span><span class="p">),</span>
<span class="w">          </span><span class="nx">render</span><span class="o">:</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">row</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">row</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="kt">translate</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">),</span>
<span class="w">          </span><span class="nx">render</span><span class="o">:</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">row</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">row</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="kt">translate</span><span class="p">(</span><span class="s1">&#39;Assigned users count&#39;</span><span class="p">),</span>
<span class="w">          </span><span class="nx">render</span><span class="o">:</span><span class="w"> </span><span class="p">({</span><span class="w"> </span><span class="nx">row</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">row</span><span class="p">.</span><span class="nx">users_count</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">      </span><span class="p">]}</span>
<span class="w">    </span><span class="o">/&gt;</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Column definition consists of two mandatory fields: <code>title</code> and <code>render</code>.
In order to be able to make column optional, please specify <code>hasOptionalColumns</code> property for table and ensure that <code>key</code> property is defined for columns.</p></section><section class="print-page" id="developer-guide-ui-terminology_policy"><h1 id="developer-guide-ui-terminology_policy-terminology-policy">Terminology policy</h1>
<p>We prefer British English over American English. For example, we use <code>cancelled</code> instead of <code>canceled</code>.</p>
<p>Should be applied for naming buttons, separate pages of the process and in list of actions.</p>
<p><strong>Add</strong> / <strong>Remove</strong></p>
<p>Should be used when an action of creating/adding or deleting/removing is
applied to:</p>
<ul>
<li>Organizations</li>
<li>Projects</li>
<li>Providers</li>
<li>VMs</li>
<li>Applications</li>
<li>SLA</li>
<li>SSH key</li>
<li>Team members</li>
</ul>
<p><strong>Import</strong> / <strong>Unlink</strong></p>
<p>Should be used when an action of importing or unlinking / deleting a record without
undeploying is applied to:</p>
<ul>
<li>VMs</li>
</ul>
<p>Please use "synchronise" instead of "pull" in action title.</p></section><section class="print-page" id="developer-guide-ui-tests"><h1 id="developer-guide-ui-tests-testing">Testing</h1>
<p>In order to run unit tests only once, execute command <code>yarn jest</code>.
If you want to run server, which watches for changes in tests, run <code>yarn jest --watch</code>.</p>
<p>Unit tests are used for testing React components, Redux actions, sagas, reducers, selectors.
Unit tests are written in the <code>.spec.ts</code> files.</p>
<p>Integration tests are implemented using <a href="https://www.cypress.io/">Cypress framework</a>.
In order to run all integration tests, execute command <code>yarn ci:test</code>.
If you already have Webpack server running, it's better to execute command <code>yarn cypress open</code>.</p></section><h1 class='nav-section-title-end'>Ended: Ui</h1><h1 class='nav-section-title-end'>Ended: Developer guide</h1>
                        <h1 class='nav-section-title' id='section-glossaries'>
                            Glossaries <a class='headerlink' href='#section-glossaries' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="glossaries"><h1 id="glossaries-glossaries">Glossaries</h1>
<ul>
<li><a href="#glossaries-structure">Structure</a></li>
<li><a href="#glossaries-marketplace">Marketplace</a></li>
</ul></section><section class="print-page" id="glossaries-marketplace"><h1 id="glossaries-marketplace-terminology">Terminology</h1>
<table>
<thead>
<tr>
<th style="text-align: center;">Name</th>
<th style="text-align: center;">Description</th>
<th style="text-align: center;">Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">Organization</td>
<td style="text-align: center;">Legal representation of the entity that can be a client of the Operator.</td>
<td style="text-align: center;">Ministry A, Department B</td>
</tr>
<tr>
<td style="text-align: center;">Project</td>
<td style="text-align: center;">Functionality in Self-Service Portal, which allows to group internal resources into projects, which allows to limit access to resources for people.</td>
<td style="text-align: center;">Internal systems, Public web</td>
</tr>
<tr>
<td style="text-align: center;">Service Provider</td>
<td style="text-align: center;">Organization can publish offerings in marketplace as soon as it is registered as service provider.</td>
<td style="text-align: center;">ETAIS, UT HPCC</td>
</tr>
<tr>
<td style="text-align: center;">Offering</td>
<td style="text-align: center;">Service Offering from Service Provider, which can be requested via a Marketplace. Correspond to an entry in the Service Catalogue.</td>
<td style="text-align: center;">VPS with LB, VDC in DataCenter 1</td>
</tr>
<tr>
<td style="text-align: center;">Category</td>
<td style="text-align: center;">A grouping of the Offerings defining metadata common to all offerings in this Category.</td>
<td style="text-align: center;">Compute, Storage, Operations</td>
</tr>
<tr>
<td style="text-align: center;">Section</td>
<td style="text-align: center;">Section is a named aggregate of offering attributes.</td>
<td style="text-align: center;">System information, Support, Security</td>
</tr>
<tr>
<td style="text-align: center;">Attribute</td>
<td style="text-align: center;">Attribute is an atomic piece of offering metadata, it has name, type and list of options.</td>
<td style="text-align: center;">Peak TFlop/s, Memory per node (GB)</td>
</tr>
<tr>
<td style="text-align: center;">Plan</td>
<td style="text-align: center;">An option for paying for a particular Offering. There can be multiple options but at each point in time only one Plan can be active.</td>
<td style="text-align: center;">Small private cloud, Big private cloud</td>
</tr>
<tr>
<td style="text-align: center;">Order</td>
<td style="text-align: center;">A collection of Order items. Considered as done when all Order Items have been processed.</td>
<td style="text-align: center;">3 different Offerings with configuration.</td>
</tr>
<tr>
<td style="text-align: center;">Order Item</td>
<td style="text-align: center;">Connects Offering with concrete Organization and configuration settings.</td>
<td style="text-align: center;">Small VPC with name “test”</td>
</tr>
<tr>
<td style="text-align: center;">Resource</td>
<td style="text-align: center;">Created as part of fulfilling the Order Item. Represents part of the Offering that customer Organization can use.</td>
<td style="text-align: center;">VM, VPC</td>
</tr>
<tr>
<td style="text-align: center;">Category component</td>
<td style="text-align: center;">Specifies unit of measurement, display name and internal name of the component, which should be present in every category offerings. It is used for aggregating offering component usage and rendering dashboard charts in both project and organization workspace.</td>
<td style="text-align: center;">vCPU, RAM, storage</td>
</tr>
<tr>
<td style="text-align: center;">Offering component</td>
<td style="text-align: center;">Usage-based component that constitute offering. It may refer to the category component via parent field in order to ensure that component usage is aggregated.</td>
<td style="text-align: center;">Database count, disk usage</td>
</tr>
<tr>
<td style="text-align: center;">Plan Component</td>
<td style="text-align: center;">Components that constitute a plan.</td>
<td style="text-align: center;">vCPU, RAM, storage, network bandwidth</td>
</tr>
<tr>
<td style="text-align: center;">Component usage</td>
<td style="text-align: center;">Collects reported resource usage for each plan component separately.</td>
<td style="text-align: center;">5 virtual floating IPs for the last month.</td>
</tr>
</tbody>
</table></section><section class="print-page" id="glossaries-structure"><h1 id="glossaries-structure-users-organizations-and-projects">Users, Organizations and Projects</h1>
<p>Waldur is a service for sharing resources across projects. It is based
on the delegation model where an organization can allocate certain users to
perform technical or non-technical actions in the projects.</p>
<p>The most common types of Waldur installations include:</p>
<ul>
<li><strong>Cloud</strong> - used in commercial or government sectors for providing access to cloud resources like virtual machines, storage and Kubernetes clusters.</li>
<li><strong>Academic</strong> - used in research and education. Waldur is deployed for a single university, high school or research infrastructure.</li>
<li><strong>Academic Shared</strong> - the same purpose as Academic, but is shared among several universities or infrastructures.</li>
</ul>
<h2 id="glossaries-structure-glossary">Glossary</h2>
<h3 id="glossaries-structure-user">User</h3>
<p>An account in Waldur belonging to a person or a robot. A user can have roles in Organizations and Projects.
Some users - mostly affiliated with Waldur operator - can have global roles, e.g. support or staff.</p>
<h3 id="glossaries-structure-organization">Organization</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="glossaries-structure-__tabbed_1_1" name="glossaries-structure-__tabbed_1" type="radio" /><input id="glossaries-structure-__tabbed_1_2" name="glossaries-structure-__tabbed_1" type="radio" /><input id="glossaries-structure-__tabbed_1_3" name="glossaries-structure-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="glossaries-structure-__tabbed_1_1">Cloud</label><label for="glossaries-structure-__tabbed_1_2">Academic</label><label for="glossaries-structure-__tabbed_1_3">Academic Shared</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>A company or a department. Organization can be a customer, a service provider or both.</p>
</div>
<div class="tabbed-block">
<p>A faculty, department or an institute. Organization can be also a service provider, for example, an HPC center.</p>
</div>
<div class="tabbed-block">
<p>In Academic Shared model, all organizations are service providers allocating resources to their users (research groups or classes) through their Projects.</p>
</div>
</div>
</div>
<h3 id="glossaries-structure-project">Project</h3>
<p>A project within an Organization. Used for organizing and isolating Resources and Users.</p>
<h3 id="glossaries-structure-service-provider">Service Provider</h3>
<p>Organization that provides services to other organizations.</p>
<h3 id="glossaries-structure-user-types">User types</h3>
<table>
<thead>
<tr>
<th></th>
<th style="text-align: center;">User</th>
<th style="text-align: center;">Support agent</th>
<th style="text-align: center;">Staff</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web and API access</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Can create support requests</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Can provide user support</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Can see all projects and resources</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Can manage organizations</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Can access admin area</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
</tbody>
</table>
<h3 id="glossaries-structure-user-roles-in-organization">User roles in Organization</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="glossaries-structure-__tabbed_2_1" name="glossaries-structure-__tabbed_2" type="radio" /><input id="glossaries-structure-__tabbed_2_2" name="glossaries-structure-__tabbed_2" type="radio" /><input id="glossaries-structure-__tabbed_2_3" name="glossaries-structure-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="glossaries-structure-__tabbed_2_1">Cloud</label><label for="glossaries-structure-__tabbed_2_2">Academic</label><label for="glossaries-structure-__tabbed_2_3">Academic Shared</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th></th>
<th style="text-align: center;">Owner</th>
<th style="text-align: center;">Service Manager</th>
<th style="text-align: center;">Project Manager</th>
<th style="text-align: center;">System Administrator</th>
</tr>
</thead>
<tbody>
<tr>
<td>Manage Team</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span> (pre-approved users)</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Manage Projects</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Request and Manage Resources</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Approves creation of Resource Requests (Orders)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span> (configurable)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Approves Resource Requests (Orders)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Manage Offerings (Service provider-specific)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th></th>
<th style="text-align: center;">PI</th>
<th style="text-align: center;">Service Manager</th>
<th style="text-align: center;">co-PI</th>
<th style="text-align: center;">Member</th>
</tr>
</thead>
<tbody>
<tr>
<td>Manage Team</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span> (pre-approved users)</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Manage Projects</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Request and Manage Resources</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Approves creation of Resource Requests (Orders)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span> (configurable)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
</tr>
<tr>
<td>Approves Resource Requests (Orders)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Manage Offerings (Service provider-specific)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th></th>
<th style="text-align: center;">Resource allocator</th>
<th style="text-align: center;">Service Manager</th>
<th style="text-align: center;">PI</th>
<th style="text-align: center;">co-PI</th>
<th style="text-align: center;">Member</th>
</tr>
</thead>
<tbody>
<tr>
<td>Manage Team</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span> (pre-approved users)</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Manage Projects</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Request and Manage Resources</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Approves creation of Resource Requests (Orders)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span> (configurable)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Approves Resource Requests (Orders)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td>Manage Offerings (Service provider-specific)</td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 7 9 19l-5.5-5.5 1.41-1.41L9 16.17 19.59 5.59 21 7Z"/></svg></span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div></section><h1 class='nav-section-title-end'>Ended: Glossaries</h1>
                        <h1 class='nav-section-title' id='section-integrations'>
                            Integrations <a class='headerlink' href='#section-integrations' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="integrations"><h1 id="integrations-integrations">Integrations</h1>
<p>Waldur supports integration with various private and public cloud services for delivering of additional functionality.
The list of currently supported integrations is below. New services are integrated following business demand and can be
delivered specifically for your deployment.</p>
<ul>
<li>OpenStack - OpenStack is a popular open-source platform for building private and public clouds. Waldur provides full integration with OpenStack clouds, in particular with Keystone, Nova, Cinder, Glance and Neutron services. Waldur can provision and manage OpenStack Projects, networks, subnets, floating IPs, instances and much more.</li>
<li>MS Azure - Microsoft Azure is a well known public cloud provider. Waldur supports creation, import and management of Virtual Machines on Azure.</li>
<li>SLURM - SLURM is a popular HPC workload manager and job scheduling system. Waldur supports integration with SLURM to enable web-based self-service for creating and managing accounts and allocations. <a href="https://docs.waldur.com/integrations/waldur-slurm-service/">More information</a></li>
<li>Open OnDemand - Open OnDemand provides a remote web access to supercomputers. Waldur supports integration with Open OnDemand by integrating KeyCloak and SLURM plugins for seamless account and permission management. <a href="https://docs.waldur.com/integrations/open-ondemand/">More information</a></li>
<li>VMware - VMware provides virtualization, networking, and security management tools.</li>
</ul>
<p>In addition to previously mentioned integration towards resource providers, Waldur also supports several identity providers like:</p>
<ul>
<li>EduGAIN - Support for federated academical identity provider EduGAIN. Waldur supports full integration as a EduGAIN Service Provider including CoCo extensions for higher security guarantees. <a href="https://docs.waldur.com/admin-guide/identities/eduGAIN/">More information</a></li>
<li>LDAP - Support for taking identities from an external LDAP-server, e.g. FreeIPA, OpenLDAP or AD. Simple configuration for LDAP schema allows to connect your existing profiles with Waldur. <a href="https://docs.waldur.com/admin-guide/identities/LDAP/">More information</a></li>
<li>MyAccessID - Support for integrating with GEANT's MyAccessID service. Full integration along with support for additional Puhuri-specific APIs.</li>
<li>Keycloak - Support for integrating with Keycloak identity servers. Waldur is also able to maintain a list of groups in Keycloak that match Waldur's internal structure. <a href="https://docs.waldur.com/admin-guide/identities/keycloak/">More information</a></li>
<li>SAML2 - Support for federated identity providers over SAML-based protocols. Automated account creation and update based on information from SAML-attributes.</li>
<li>Waldur DB - Support for user profiles managed within local Waldur database. Does not require any additional configuration or setup. Fields of the profile can be tuned to match specifics of deployment (e.g. exposing additional names in national languages).</li>
</ul></section>
                        <h2 class='nav-section-title' id='section-glauth'>
                            Glauth <a class='headerlink' href='#section-glauth' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrations-glauth-systemd-instructions"><h1 id="integrations-glauth-systemd-instructions-systemd-setup-for-glauth-and-config-refresher">Systemd setup for glauth and config refresher</h1>
<p>Prerequisites:</p>
<ol>
<li>Ensure wget is installed to a target machine as refreshing script uses it;</li>
<li>Install glauth binary to <code>/usr/bin/glauth</code> upon staring glauth service, e.g. <a href="https://github.com/glauth/glauth/releases/download/v2.3.0/glauth-linux-amd64">glauth v2.3.0</a>.</li>
</ol>
<h2 id="integrations-glauth-systemd-instructions-refresher-service">Refresher service</h2>
<p>Copy the files from this repository to a corresponding paths on the target host:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>mkdir<span class="w"> </span>/etc/glauth
cp<span class="w"> </span>systemd-conf/refresher/preconfig.cfg.template<span class="w"> </span>/etc/glauth/preconfig.cfg.template
cp<span class="w"> </span>systemd-conf/refresher/refresher.env<span class="w"> </span>/etc/glauth/refresher.env
cp<span class="w"> </span>systemd-conf/refresher/refresh-glauth-config.sh<span class="w"> </span>/usr/sbin/refresh-glauth-config.sh
cp<span class="w"> </span>systemd-conf/refresher/refresh-glauth-config.service<span class="w"> </span>/etc/systemd/system/refresh-glauth-config.service
</code></pre></div></td></tr></table></div>
<p>Update systemd daemon configs and start and enabled the service:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code>systemctl<span class="w"> </span>daemon-reload
systemctl<span class="w"> </span>start<span class="w"> </span>refresh-glauth-config
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>refresh-glauth-config
</code></pre></div></td></tr></table></div>
<p>After some time, you should be able to check the prepared config file in <code>/etc/glauth/config.cfg</code></p>
<h2 id="integrations-glauth-systemd-instructions-glauth-service">Glauth service</h2>
<p>Ensure glauth binary is installed in <code>/usr/bin/glauth</code> and perform the same steps for the glauth service:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>cp<span class="w"> </span>systemd-conf/glauth/glauth.service<span class="w"> </span>/etc/systemd/system/glauth.service
systemctl<span class="w"> </span>daemon-reload
systemctl<span class="w"> </span>start<span class="w"> </span>refresh-glauth-config
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>refresh-glauth-config
</code></pre></div></td></tr></table></div></section><h1 class='nav-section-title-end'>Ended: Glauth</h1>
                        <h2 class='nav-section-title' id='section-lexis'>
                            Lexis <a class='headerlink' href='#section-lexis' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrations-lexis"><h1 id="integrations-lexis-integrating-lexis-with-waldur">Integrating LEXIS with Waldur</h1>
<h2 id="integrations-lexis-creating-a-lexis-link-for-a-resource">Creating a LEXIS link for a resource</h2>
<p>To create a <a href="https://docs.lexis.tech/">LEXIS</a> link integration with a Waldur resource the API request shown below can be sent (http refers to HTTPie client).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code>http<span class="w"> </span>POST<span class="w"> </span>https://waldur.example.com/api/lexis-links/<span class="w"> </span>Authorization:<span class="s2">&quot;Token e63ffc6408afc4ft874fc5fb4dbcebf1277ca723&quot;</span><span class="w"> </span><span class="nv">resource</span><span class="o">=</span>https://waldur.example.com/api/marketplace-resources/a5dad412c0d94aeb8cffad3d0ca325ea/
HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Accept:<span class="w"> </span>application/json,<span class="w"> </span>text/plain,<span class="w"> </span>*/*
Accept-Language:<span class="w"> </span>en
HTTP/1.1<span class="w"> </span><span class="m">201</span><span class="w"> </span>Created
Date:<span class="w"> </span>Mon,<span class="w"> </span><span class="m">23</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">07</span>:31:08<span class="w"> </span>GMT
Content-Type:<span class="w"> </span>application/json
Vary:<span class="w"> </span>Accept,<span class="w"> </span>Accept-Language,<span class="w"> </span>Cookie,<span class="w"> </span>Origin
Allow:<span class="w"> </span>GET,<span class="w"> </span>POST,<span class="w"> </span>HEAD,<span class="w"> </span>OPTIONS
X-Frame-Options:<span class="w"> </span>DENY
Content-Length:<span class="w"> </span><span class="m">2</span>
Content-Language:<span class="w"> </span>en
Access-Control-Allow-Origin:<span class="w"> </span>*
Access-Control-Expose-Headers:<span class="w"> </span>x-result-count,<span class="w"> </span>Link
</code></pre></div></td></tr></table></div>
<p>Alternatively this can be done through UI of Waldur as shown below.</p>
<p><strong>Note: To be able to create a LEXIS link for a resource using Waldur UI, the related to the resource offering has to have <code>plugin_options</code> set.</strong></p>
<p>Namely:</p>
<ul>
<li>heappe_url</li>
<li>heappe_username</li>
<li>heappe_cluster_id</li>
<li>heappe_local_base_path</li>
</ul>
<p><a class="glightbox" href="../integrations/lexis/images/lexisstep1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img.png" src="../integrations/lexis/images/lexisstep1.png" /></a>
<a class="glightbox" href="../integrations/lexis/images/lexisstep2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img.png" src="../integrations/lexis/images/lexisstep2.png" /></a></p>
<h2 id="integrations-lexis-listing-all-lexis-links">Listing all LEXIS links</h2>
<p>To view all LEXIS links the API request shown below can be sent.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code>http<span class="w"> </span>GET<span class="w"> </span>https://waldur.example.com/api/lexis-links/<span class="w"> </span>Authorization:<span class="s2">&quot;Token e63ffc6408afc4ft874fc5fb4dbcebf1277ca723&quot;</span>
Accept:<span class="w"> </span>application/json,<span class="w"> </span>text/plain,<span class="w"> </span>*/*
Accept-Language:<span class="w"> </span>en
HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Date:<span class="w"> </span>Mon,<span class="w"> </span><span class="m">23</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">08</span>:09:41<span class="w"> </span>GMT
Content-Type:<span class="w"> </span>application/json
X-Result-Count:<span class="w"> </span><span class="m">4</span>
Link:<span class="w"> </span>&lt;https://waldur.example.com/api/lexis-links/?page_size<span class="o">=</span><span class="m">10</span>&gt;<span class="p">;</span><span class="w"> </span><span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;first&quot;</span>,<span class="w"> </span>&lt;https://waldur.example.com/api/lexis-links/?page_size<span class="o">=</span><span class="m">10</span>&gt;<span class="p">;</span><span class="w"> </span><span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;last&quot;</span>
Vary:<span class="w"> </span>Accept,<span class="w"> </span>Accept-Language,<span class="w"> </span>Cookie,<span class="w"> </span>Origin
Allow:<span class="w"> </span>GET,<span class="w"> </span>POST,<span class="w"> </span>HEAD,<span class="w"> </span>OPTIONS
X-Frame-Options:<span class="w"> </span>DENY
Content-Length:<span class="w"> </span><span class="m">2965</span>
Content-Language:<span class="w"> </span>en
Access-Control-Allow-Origin:<span class="w"> </span>*
Access-Control-Expose-Headers:<span class="w"> </span>x-result-count,<span class="w"> </span>Link
</code></pre></div></td></tr></table></div>
<p>Response example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="s2">&quot;https://waldur.example.com/api/lexis-links/6aaa620c60e14f21bd0817360db005ed/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="s2">&quot;6aaa620c60e14f21bd0817360db005ed&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="s2">&quot;2023-10-23T08:57:44.031155Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;modified&quot;</span><span class="p">:</span><span class="s2">&quot;2023-10-23T08:57:44.031155Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;robot_account&quot;</span><span class="p">:</span><span class="s2">&quot;https://waldur.example.com/api/marketplace-robot-accounts/8ae5711c788f4700aab9480deed9e2bd/&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;robot_account_username&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;robot_account_type&quot;</span><span class="p">:</span><span class="s2">&quot;hl006&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="s2">&quot;pending&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resource_uuid&quot;</span><span class="p">:</span><span class="s2">&quot;a5dad412c0d94aeb8cffad3d0ca325ea&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resource_name&quot;</span><span class="p">:</span><span class="s2">&quot;brandturn-keybandwidth&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resource_backend_id&quot;</span><span class="p">:</span><span class="s2">&quot;dca3f539-3215-476d-b68b-36d8844502f0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;resource_end_date&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;project_uuid&quot;</span><span class="p">:</span><span class="s2">&quot;f5b14e76985349d8b5f91325702fde1b&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;project_name&quot;</span><span class="p">:</span><span class="s2">&quot;Automated coherent access&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;customer_uuid&quot;</span><span class="p">:</span><span class="s2">&quot;da90223725c74ee4b02524a3f3732321&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;customer_name&quot;</span><span class="p">:</span><span class="s2">&quot;Ashley and Sons&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p><em>Note: A LEXIS link can be in one of the following states:</em></p>
<ol>
<li><em>Pending</em></li>
<li><em>Executing</em></li>
<li><em>OK</em></li>
<li><em>Erred</em></li>
</ol>
<p>Listing LEXIS links can alternatively be done through Waldur UI by visiting resource details</p>
<p><a class="glightbox" href="../integrations/lexis/images/resourcedetails.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img.png" src="../integrations/lexis/images/resourcedetails.png" /></a></p>
<p>or use administration menu if you are a staff user</p>
<p><a class="glightbox" href="../integrations/lexis/images/stafflexis.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img.png" src="../integrations/lexis/images/stafflexis.png" /></a></p>
<h2 id="integrations-lexis-listing-resources-supporting-lexis-links">Listing resources supporting LEXIS links</h2>
<p>To list all resources supporting LEXIS links, the following API request can be used:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>http<span class="w"> </span>GET<span class="w"> </span>https://waldur.example.com/api/marketplace-resources/?lexis_links_supported<span class="o">=</span><span class="nb">true</span><span class="w"> </span>Authorization:<span class="s2">&quot;Token 154f2c6984b5992928b62f87950ac529f1f906ca&quot;</span>
</code></pre></div></td></tr></table></div>
<p>The main filter is <code>lexis_links_supported</code> parameter.</p>
<p>The example response:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">HTTP/</span><span class="mf">1.1</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="err">OK</span>
<span class="err">Allow</span><span class="p">:</span><span class="w"> </span><span class="err">GET</span><span class="p">,</span><span class="w"> </span><span class="err">POST</span><span class="p">,</span><span class="w"> </span><span class="err">HEAD</span><span class="p">,</span><span class="w"> </span><span class="err">OPTIONS</span>
<span class="err">Co</span><span class="kc">ntent</span><span class="mi">-</span><span class="err">La</span><span class="kc">n</span><span class="err">guage</span><span class="p">:</span><span class="w"> </span><span class="err">e</span><span class="kc">n</span>
<span class="err">Co</span><span class="kc">ntent</span><span class="mi">-</span><span class="err">Le</span><span class="kc">n</span><span class="err">g</span><span class="kc">t</span><span class="err">h</span><span class="p">:</span><span class="w"> </span><span class="mi">4825</span>
<span class="err">Co</span><span class="kc">ntent</span><span class="mi">-</span><span class="err">Type</span><span class="p">:</span><span class="w"> </span><span class="err">applica</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">/jso</span><span class="kc">n</span>
<span class="err">Da</span><span class="kc">te</span><span class="p">:</span><span class="w"> </span><span class="err">Wed</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="w"> </span><span class="err">Ja</span><span class="kc">n</span><span class="w"> </span><span class="mi">2024</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">48</span><span class="p">:</span><span class="mi">54</span><span class="w"> </span><span class="err">GMT</span>
<span class="err">Li</span><span class="kc">n</span><span class="err">k</span><span class="p">:</span><span class="w"> </span><span class="err">&lt;h</span><span class="kc">tt</span><span class="err">ps</span><span class="p">:</span><span class="c1">//waldur.example.com/api/marketplace-resources/?lexis_links_supported=true&gt;; rel=&quot;first&quot;, &lt;https://waldur.example.com/api/marketplace-resources/?lexis_links_supported=true&gt;; rel=&quot;last&quot;</span>
<span class="err">Server</span><span class="p">:</span><span class="w"> </span><span class="err">WSGIServer/</span><span class="mf">0.2</span><span class="w"> </span><span class="err">CPy</span><span class="kc">t</span><span class="err">ho</span><span class="kc">n</span><span class="err">/</span><span class="mf">3.11.5</span>
<span class="err">Vary</span><span class="p">:</span><span class="w"> </span><span class="err">Accep</span><span class="kc">t</span><span class="p">,</span><span class="w"> </span><span class="err">Accep</span><span class="kc">t</span><span class="mi">-</span><span class="err">La</span><span class="kc">n</span><span class="err">guage</span><span class="p">,</span><span class="w"> </span><span class="err">Cookie</span><span class="p">,</span><span class="w"> </span><span class="err">Origi</span><span class="kc">n</span>
<span class="err">X</span><span class="mi">-</span><span class="err">Frame</span><span class="mi">-</span><span class="err">Op</span><span class="kc">t</span><span class="err">io</span><span class="kc">ns</span><span class="p">:</span><span class="w"> </span><span class="err">DENY</span>
<span class="err">X</span><span class="mi">-</span><span class="err">Resul</span><span class="kc">t</span><span class="mi">-</span><span class="err">Cou</span><span class="kc">nt</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>

<span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;attributes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;br1&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;available_actions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;LEXIS_LINK.CREATE&quot;</span>
<span class="w">        </span><span class="p">],</span>
<span class="w">        </span><span class="nt">&quot;backend_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;project_000003&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;backend_metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nt">&quot;can_terminate&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;category_icon&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://waldur.example.com/api/media-download/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c3IiOiIzYzY0ODg5ZjE2OTQ0MmQ2ODc0OTBhZGRjMmE5ZGUzMCIsImN0IjoibWFya2V0cGxhY2UuY2F0ZWdvcnkiLCJpZCI6IjQ3NDZjYWY4NTk0NzQwYjlhNWM4Y2I3OWE1ZGZkNThjIiwiZmllbGQiOiJpY29uIiwiZXhwIjoxNzA2NzEyNTM0fQ.d1oe4Yn5DcB2nEqHjWp-TQzYt0f2gmkJwO_SS3ArJms/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;category_title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HPC&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;category_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;4746caf8594740b9a5c8cb79a5dfd58c&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-12-15T20:35:48.855341Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;current_usages&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">        </span><span class="nt">&quot;customer_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Remote project&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;customer_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b559b279ee9f47a788f64ac4b86d1c56&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;effective_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;end_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;end_date_requested_by&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;endpoints&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">        </span><span class="nt">&quot;error_message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;error_traceback&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_limit_based&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;is_usage_based&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;limit_usage&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;limits&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;gb_k_hours&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;cpu_k_hours&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;gpu_k_hours&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;modified&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-09T11:17:30.214126Z&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;br1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://waldur.example.com/api/marketplace-public-offerings/765868848dd943e0baeefdac9a78aeac/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_billable&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_customer_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b559b279ee9f47a788f64ac4b86d1c56&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_image&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Basic&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_plugin_options&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;heappe_cluster_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;heappe_local_base_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;~/&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;heappe_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://heappe-1.cloud.ut.ee&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;heappe_username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;offering_shared&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_terms_of_service&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_thumbnail&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Marketplace.Basic&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;offering_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;765868848dd943e0baeefdac9a78aeac&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;options&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;plan&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://waldur.example.com/api/marketplace-public-offerings/765868848dd943e0baeefdac9a78aeac/plans/6e08a30d481b4d62a17a2c145d744d9e/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;plan_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;plan_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;asd plan&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;plan_unit&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;month&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;plan_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6e08a30d481b4d62a17a2c145d744d9e&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;project&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://waldur.example.com/api/projects/dcc1e4456ba94f2498cf85dace03d1f4/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;project_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;project_end_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;project_end_date_requested_by&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;project_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Local project / Local project 14&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;project_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dcc1e4456ba94f2498cf85dace03d1f4&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;provider_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Remote project&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;provider_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b559b279ee9f47a788f64ac4b86d1c56&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;report&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;requested_downscaling&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;resource_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;resource_uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;scope&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://waldur.example.com/api/marketplace-resources/f70a26bf348348a085d7b1276b473bcc/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;uuid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f70a26bf348348a085d7b1276b473bcc&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h2 id="integrations-lexis-deleting-lexis-links">Deleting LEXIS links</h2>
<p>To delete a LEXIS link the API request shown below can be sent.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code>http<span class="w"> </span>DELETE<span class="w"> </span>https://waldur.example.com/api/lexis-links/3bb9fbdce9aa4602860fbedf94d9fb17/
Accept:<span class="w"> </span>application/json,<span class="w"> </span>text/plain,<span class="w"> </span>*/*
Accept-Language:<span class="w"> </span>en
Authorization:<span class="w"> </span>Token<span class="w"> </span>e63ffc6408afc4ft874fc5fb4dbcebf1277ca723
HTTP/1.1<span class="w"> </span><span class="m">204</span><span class="w"> </span>No<span class="w"> </span>Content
Date:<span class="w"> </span>Mon,<span class="w"> </span><span class="m">23</span><span class="w"> </span>Oct<span class="w"> </span><span class="m">2023</span><span class="w"> </span><span class="m">08</span>:56:48<span class="w"> </span>GMT
Vary:<span class="w"> </span>Accept,<span class="w"> </span>Accept-Language,<span class="w"> </span>Cookie,<span class="w"> </span>Origin
Allow:<span class="w"> </span>GET,<span class="w"> </span>PUT,<span class="w"> </span>PATCH,<span class="w"> </span>DELETE,<span class="w"> </span>HEAD,<span class="w"> </span>OPTIONS
X-Frame-Options:<span class="w"> </span>DENY
Content-Length:<span class="w"> </span><span class="m">0</span>
Content-Language:<span class="w"> </span>en
Access-Control-Allow-Origin:<span class="w"> </span>*
Access-Control-Expose-Headers:<span class="w"> </span>x-result-count,<span class="w"> </span>Link
</code></pre></div></td></tr></table></div>
<p>This can alternatively be done using Waldur UI as shown below:
<a class="glightbox" href="../integrations/lexis/images/lexisdelete.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img.png" src="../integrations/lexis/images/lexisdelete.png" /></a></p></section><h1 class='nav-section-title-end'>Ended: Lexis</h1>
                        <h2 class='nav-section-title' id='section-open-ondemand'>
                            Open ondemand <a class='headerlink' href='#section-open-ondemand' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrations-open-ondemand"><h1 id="integrations-open-ondemand-integrating-open-ondemand-with-waldur-and-slurm">Integrating Open OnDemand with Waldur and SLURM</h1>
<h2 id="integrations-open-ondemand-components-used">Components used</h2>
<p><strong><a href="https://openondemand.org/">Open OnDemand</a></strong> is an open source software that empowers students, researchers, and industry professionals with remote web access to supercomputers.</p>
<p><strong><a href="https://waldur.com">Waldur</a></strong> is an open source platform for running HPC and Cloud self service.</p>
<p><strong><a href="https://slurm.schedmd.com/">SLURM</a></strong> is an open source, fault-tolerant, and highly scalable cluster management and job scheduling system for large and small Linux clusters.</p>
<p><strong><a href="https://www.keycloak.org/">Keycloak</a></strong> is an open source software product to allow single sign-on with identity and access management aimed at modern applications and services.</p>
<p><strong><a href="https://wiki.geant.org/display/MyAccessID/MyAccessID+Home">MyAccessID</a></strong> (optional) Identity and Access Management Service is provided by GEANT with the purpose of offering  a common Identity Layer for Infrastructure Service Domains (ISDs).</p>
<h2 id="integrations-open-ondemand-integration-overview">Integration overview</h2>
<p><a class="glightbox" href="../integrations/open-ondemand/images/scheme.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Waldur Open Ondemand integration scheme" src="../integrations/open-ondemand/images/scheme.png" /></a></p>
<h2 id="integrations-open-ondemand-ood-requirements">OOD requirements</h2>
<ul>
<li>Shared user directory storage available both on SLURM and OOD VMs</li>
<li>Dedicated hostname for OOD machine (like ood.example.com)</li>
<li>Open TCP/80 and TCP/443, ability to connect LDAP on SLURM management machine</li>
<li>Linux server with at least 4GB of RAM and 10GB of storage disk</li>
</ul>
<h2 id="integrations-open-ondemand-open-ondemand-ood-installation-and-configuration">Open OnDemand (OOD) installation and configuration</h2>
<p>Follow the guide at <a href="https://github.com/OSC/ood-ansible">https://github.com/OSC/ood-ansible</a> to automatically install OOD on the Linux server.</p>
<p>Preparation guide:</p>
<ol>
<li>Setup a certificate to later use in ansible configuration:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>certbot
certbot<span class="w"> </span>certonly<span class="w"> </span>--agree-tos<span class="w"> </span>-d<span class="w"> </span>ood.example.com<span class="w"> </span>--standalone<span class="w"> </span>-m<span class="w"> </span>ood@example.com<span class="w"> </span>--no-eff-email
</code></pre></div></td></tr></table></div>
<ol>
<li>In Keycloak create a client with authentication enabled for the Open OnDemand.</li>
<li>Populate the ansible inventory.yaml:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nn">---</span>
<span class="nt">all</span><span class="p">:</span>
<span class="w">  </span><span class="nt">children</span><span class="p">:</span>
<span class="w">    </span><span class="nt">playground</span><span class="p">:</span>
<span class="w">      </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">        </span><span class="nt">ood.example.com</span><span class="p">:</span>
<span class="w">          </span><span class="nt">ansible_user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu</span>
<span class="w">      </span><span class="nt">vars</span><span class="p">:</span>
<span class="w">        </span><span class="nt">servername</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ood.example.com</span>
<span class="w">        </span><span class="nt">ssl</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SSLCertificateFile /etc/letsencrypt/live/ood.example.com/cert.pem</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SSLCertificateKeyFile /etc/letsencrypt/live/ood.example.com/privkey.pem</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SSLCertificateChainFile /etc/letsencrypt/live/ood.example.com/chain.pem</span>
<span class="w">        </span><span class="nt">oidc_settings_samefile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">        </span><span class="nt">oidc_provider_metadata_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://KEYCLOAK_IP/auth/realms/kcrealm/.well-known/openid-configuration</span>
<span class="w">        </span><span class="nt">oidc_client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OIDC_CLIENT</span>
<span class="w">        </span><span class="nt">oidc_client_secret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OIDC_SECRET</span>
<span class="w">        </span><span class="nt">oidc_remote_user_claim</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">preferred_username</span>
<span class="w">        </span><span class="nt">oidc_scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;openid</span><span class="nv"> </span><span class="s">profile</span><span class="nv"> </span><span class="s">email&quot;</span>
<span class="w">        </span><span class="nt">oidc_session_inactivity_timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">28800</span>
<span class="w">        </span><span class="nt">oidc_session_max_duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">28800</span>
<span class="w">        </span><span class="nt">oidc_state_max_number_of_cookies</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10</span><span class="nv"> </span><span class="s">true&quot;</span>
<span class="w">        </span><span class="nt">oidc_cookie_same_site</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">On</span>
<span class="w">        </span><span class="nt">oidc_uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/oidc&quot;</span>
<span class="w">        </span><span class="nt">httpd_auth</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AuthType openid-connect</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Require valid-user</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Apply the playbook:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>ansible-playbook<span class="w"> </span>-i<span class="w"> </span>inventory.yaml<span class="w"> </span>-D<span class="w"> </span>ood.yml
</code></pre></div></td></tr></table></div>
<h2 id="integrations-open-ondemand-user-authentication-flow">User authentication flow</h2>
<ol>
<li>
<p>OOD gets Linux username from preferred_username claim from Keycloak</p>
</li>
<li>
<p>OOD launches a "Per User Nginx" (PUN) environment after success user login</p>
</li>
<li>
<p>OOD connects to a SLURM cluster with the selected preferred_username</p>
</li>
</ol>
<p><a class="glightbox" href="../integrations/open-ondemand/images/image2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="alt_text" src="../integrations/open-ondemand/images/image2.png" title="image_tooltip" /></a></p>
<h2 id="integrations-open-ondemand-keycloak-configuration">Keycloak configuration</h2>
<p>Keycloak acts as a central Identity server for Waldur and Open OnDemand.</p>
<p>Steps to configure Keycloak:</p>
<p><a class="glightbox" href="../integrations/open-ondemand/images/keycloak-client.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="alt_text" src="../integrations/open-ondemand/images/keycloak-client.png" title="image_tooltip" /></a></p>
<ol>
<li>Configure Waldur and Open Ondemand clients</li>
</ol>
<p><a class="glightbox" href="../integrations/open-ondemand/images/federation.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="alt_text" src="../integrations/open-ondemand/images/federation.png" title="image_tooltip" /></a></p>
<ol>
<li>Configure identity federation or user self-registration. If identity federation is used, common task is to configure username mapping like mentioned in <a href="https://puhuri.neic.no/idp_integration/use-cases/keycloak-integration/">https://puhuri.neic.no/idp_integration/use-cases/keycloak-integration/</a></li>
</ol>
<p><a class="glightbox" href="../integrations/open-ondemand/images/mapper.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="alt_text" src="../integrations/open-ondemand/images/mapper.png" title="image_tooltip" /></a></p>
<ol>
<li>Install waldur-username-mapper for matching Keycloak or federated users with their respective Linux usernames: <a href="https://docs.waldur.com/integrations/waldur-keycloak-mapper/">https://docs.waldur.com/integrations/waldur-keycloak-mapper/</a></li>
</ol>
<h2 id="integrations-open-ondemand-open-ondemand-cluster-configuration">Open OnDemand cluster configuration</h2>
<p>To configure the connection between Open OnDemand and SLURM you need to manually configure the cluster config /etc/ood/config/clusters.d/my_cluster.yml:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nn">---</span>
<span class="nt">v2</span><span class="p">:</span>
<span class="w">  </span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_slurm</span>
<span class="w">  </span><span class="nt">login</span><span class="p">:</span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.16.1.2</span>
<span class="w">  </span><span class="nt">job</span><span class="p">:</span>
<span class="w">    </span><span class="nt">adapter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">slurm</span>
<span class="w">    </span><span class="nt">submit_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.16.1.2</span>
</code></pre></div></td></tr></table></div>
<h2 id="integrations-open-ondemand-waldur-slurm-agent-configuration">waldur-slurm-agent configuration</h2>
<p>Waldur-slurm-agent is a microservice for pulling allocation from Waldur and pushing the allocation usage statistics back to Waldur.</p>
<p>The microservice supports 2 modes of operation:</p>
<ol>
<li>docker-compose - testing only, requires SLURM running in the same docker compose</li>
<li>native - production</li>
</ol>
<p>Follow <a href="https://docs.waldur.com/integrations/waldur-slurm-service/">https://docs.waldur.com/integrations/waldur-slurm-service/</a> for installation guide. Make sure to enable the ENABLE_USER_HOMEDIR_ACCOUNT_CREATION flag - Open OnDemand does not work unless the user's home directory exists.</p>
<h2 id="integrations-open-ondemand-host-based-ssh-authentication-configuration">Host-based SSH authentication configuration</h2>
<p>One of the methods to allow OOD to connect to SLURM login node is to setup a host-based “trust” or “SSH host-based authentication” between OOD VM and SLURM login node.</p>
<p>Use <a href="https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Host-based_Authentication">https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Host-based_Authentication</a> as a guide.</p>
<h2 id="integrations-open-ondemand-troubleshooting">Troubleshooting</h2>
<ol>
<li>OOD login and preferredUsername fetching errors are located in /var/log/httpd/error.log or similar</li>
<li>Per user application or SLURM configuration errors are located in /var/log/ondemand-nginx/USERNAME/</li>
<li>By default, OOD does not well tolerate setting arbitrary prepends for the URL — prefer using <a href="https://ood.example.com">https://ood.example.com</a> instead of <a href="https://ood.example.com/ood/">https://ood.example.com/</a></li>
<li>Most common SSSD / LDAP configuration errors include:<ol>
<li>Wrong LDAP filter</li>
<li>SSSD is not able to reach LDAP server (network error)</li>
<li>SSSD installed without sssd-ldap plugin</li>
<li>Home directory of the user has not been created</li>
</ol>
</li>
<li>Make sure to specify correct SLURM account in the OOD job configuration:</li>
</ol>
<p><a class="glightbox" href="../integrations/open-ondemand/images/slurm-account.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="slurm-account" src="../integrations/open-ondemand/images/slurm-account.png" /></a></p></section><h1 class='nav-section-title-end'>Ended: Open ondemand</h1>
                        <h2 class='nav-section-title' id='section-service-desk'>
                            Service desk <a class='headerlink' href='#section-service-desk' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrations-service-desk-service-desk-integrations"><h1 id="integrations-service-desk-service-desk-integrations-service-desk-integrations">Service Desk integrations</h1>
<p>Waldur supports integrations with several widely used service desk solutions like Jira,
Zammad and Microfocus SMAX. Integration with the mentioned service desk solutions allows the creation of
support requests directly from Waldur. In addition, replies from the support personnel are synchronised with Waldur so
that the end users are never directly exposed to the service desk software.</p>
<p>Users can see the issues' history and the current status of active tickets.</p>
<p>More about:</p>
<ul>
<li>Jira integration:  <a href="https://docs.waldur.com/developer-guide/plugins/jira/">Jira plugin</a></li>
<li>Zammad integration: <a href="https://docs.waldur.com/admin-guide/mastermind-configuration/configuration-guide/#waldur_zammad-plugin">Zammad plugin</a></li>
</ul></section><h1 class='nav-section-title-end'>Ended: Service desk</h1>
                        <h2 class='nav-section-title' id='section-waldur-keycloak-mapper'>
                            Waldur keycloak mapper <a class='headerlink' href='#section-waldur-keycloak-mapper' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrations-waldur-keycloak-mapper"><h1 id="integrations-waldur-keycloak-mapper-waldur-keycloak-mapper">Waldur Keycloak mapper</h1>
<p>Custom Keycloak client mapper for Waldur OfferingUser usernames.</p>
<h2 id="integrations-waldur-keycloak-mapper-installation-and-setup">Installation and setup</h2>
<p>Custom mapper setup includes the following steps:</p>
<ol>
<li>
<p>Download the jar file to your machine, e.g. one of <a href="https://github.com/waldur/waldur-keycloak-mapper/releases/">these releases</a>.</p>
</li>
<li>
<p>Add the jar file to the <a href="https://www.keycloak.org/server/configuration-provider#_installing_and_uninstalling_a_provider">providers</a> directory.
   If a Keycloak server is running in a Docker container via Docker Compose, you can mount the file as a volume:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">keycloak</span><span class="p">:</span>
<span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;quay.io/keycloak/keycloak:18.0.2&quot;</span>
<span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keycloak</span>
<span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start-dev --http-relative-path /auth</span>
<span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;${KEYCLOAK_PORT:-8080}:8080&quot;</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">waldur-keycloak-mapper-1.0.jar:/opt/keycloak/providers/waldur-keycloak-mapper-1.0.jar</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Restart the deployment to apply the changes.</p>
</li>
<li>
<p>You can find the mapper in client menu under "Mappers" section. The title is "Waldur preferred username mapper"</p>
</li>
</ol></section><h1 class='nav-section-title-end'>Ended: Waldur keycloak mapper</h1>
                        <h2 class='nav-section-title' id='section-waldur-keycloak-minio-mapper'>
                            Waldur keycloak minio mapper <a class='headerlink' href='#section-waldur-keycloak-minio-mapper' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrations-waldur-keycloak-minio-mapper"><h1 id="integrations-waldur-keycloak-minio-mapper-waldur-keycloak-minio-mapper">waldur-keycloak-minio-mapper</h1>
<p>Custom Keycloak client mapper for MinIO.
This mapper adds <code>policy</code> claim to a JSON token with a list of user permissions on a specified scope in Waldur.
For now, only <code>customer</code> and <code>project</code> are supported as a scope types for user permissions.
For example, if a user is an owner in customers C1, C2 and a manager in projects P1 and P2, the result would be:</p>
<ol>
<li>For scope <code>customer</code>: <code>policy=&lt;C1_UUID&gt;,&lt;C2_UUID&gt;</code></li>
<li>For scope <code>project</code>: <code>policy=&lt;P1_UUID&gt;,&lt;P2_UUID&gt;</code></li>
</ol>
<h2 id="integrations-waldur-keycloak-minio-mapper-installation-and-setup">Installation and setup</h2>
<p>Custom mapper setup includes the following steps:</p>
<ol>
<li>
<p>Download the jar file to your machine, e.g. one of <a href="https://github.com/waldur/waldur-keycloak-minio-mapper/releases/">these releases</a>.</p>
</li>
<li>
<p>Add the jar file to the <a href="https://www.keycloak.org/server/configuration-provider#_installing_and_uninstalling_a_provider">providers</a> directory.
   If a Keycloak server is running in a Docker container via Docker Compose, you can mount the file as a volume:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nt">keycloak</span><span class="p">:</span>
<span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;quay.io/keycloak/keycloak:18.0.2&quot;</span>
<span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">keycloak</span>
<span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">start-dev --http-relative-path /auth</span>
<span class="nt">ports</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;${KEYCLOAK_PORT:-8080}:8080&quot;</span>
<span class="nt">volumes</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">waldur-keycloak-minio-mapper-1.0.jar:/opt/keycloak/providers/waldur-keycloak-minio-mapper-1.0.jar</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>Restart the container to apply the changes.</p>
</li>
<li>
<p>You can find the mapper in client menu under "Mappers" section named "Waldur MinIO mapper"</p>
</li>
</ol></section><h1 class='nav-section-title-end'>Ended: Waldur keycloak minio mapper</h1>
                        <h2 class='nav-section-title' id='section-waldur-slurm-service'>
                            Waldur slurm service <a class='headerlink' href='#section-waldur-slurm-service' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrations-waldur-slurm-service"><h1 id="integrations-waldur-slurm-service-waldur-slurm-integration-service">Waldur SLURM Integration Service</h1>
<p>Service for Mastermind integration with SLURM cluster. The main purpose of the service is data syncronization between Waldur instance and SLURM cluster. The application uses order-related information from Waldur to manage accounts in SLURM and accounting-related info from SLURM to update usage data in Waldur.</p>
<h2 id="integrations-waldur-slurm-service-architecture">Architecture</h2>
<p>This is a stateless application, which should be deployed on a machine having access to SLURM cluster data. The service consists of two sub-applications:</p>
<ul>
<li>service-pull, which fetches data from Waldur and updates a state of a SLURM cluster correspondingly (e.g. creation of SLURM accounts ordered in Waldur)</li>
<li>service-push, which sends data from SLURM cluster to Waldur (e.g. update of resource usages)</li>
</ul>
<h3 id="integrations-waldur-slurm-service-integration-with-waldur">Integration with Waldur</h3>
<p>For this, the service uses <a href="https://github.com/waldur/python-waldur-client">Waldur client</a> based on Python and REST communication with <a href="https://github.com/waldur/waldur-mastermind">Waldur backend</a>. Service-pull application pulls orders data created for a specific offering linked to SLURM cluster and creates/updates/removes SLURM accounts based on the data. Service-push fetches data of usage, limits and associations from SLURM cluster and pushes it to Waldur.</p>
<h3 id="integrations-waldur-slurm-service-integration-with-slurm-cluster">Integration with SLURM cluster</h3>
<p>For this, service uses uses SLURM command line utilities (e.g. <code>sacct</code> and <code>sacctmgr</code>). The access to the binaries can be either direct or using docker client. In the latter case, the service is required to have access to <code>docker</code> binary and to docker socket (e.g. <code>/var/run/docker.sock</code>).</p>
<h2 id="integrations-waldur-slurm-service-setup">Setup</h2>
<p>The application supports the following environmental variables (required ones formatted with bold font):</p>
<ul>
<li><strong><code>WALDUR_API_URL</code></strong> - URL of Waldur Mastermind API (e.g. <code>http://localhost:8081/api/</code>).</li>
<li><strong><code>WALDUR_API_TOKEN</code></strong> - token for access to Mastermind API.</li>
<li><strong><code>WALDUR_SYNC_DIRECTION</code></strong> - accepts two values: <code>push</code> and <code>pull</code>. If <code>pull</code>, then application sends data from SLURM cluster to Waldur, vice versa if <code>push</code>.</li>
<li><strong><code>WALDUR_OFFERING_UUID</code></strong> - UUID of corresponding offering in Waldur.</li>
<li><code>REQUESTS_VERIFY_SSL</code> - flag for SSL verification for Waldur client, default is <code>true</code>.</li>
<li><code>SLURM_TRES_CONFIG_PATH</code> - a path to the SLURM TRES configuration, default is <code>./config-components.yaml</code>.</li>
<li><code>SLURM_DEPLOYMENT_TYPE</code> - type of SLURM deployment. accepts two values: <code>docker</code> and <code>native</code>, default is <code>docker</code>.</li>
<li><code>SLURM_CUSTOMER_PREFIX</code> - prefix used for customer's accounts, default is <code>hpc_</code>.</li>
<li><code>SLURM_PROJECT_PREFIX</code> - prefix used for project's accounts, default is <code>hpc_</code>.</li>
<li><code>SLURM_ALLOCATION_PREFIX</code> - prefix used for allocation's accounts, default is <code>hpc_</code>.</li>
<li><code>SLURM_ALLOCATION_NAME_MAX_LEN</code> - maximum length of account name created by the application.</li>
<li><code>SLURM_DEFAULT_ACCOUNT</code> - default account name existing in SLURM cluster for creation of new accounts. Default is <code>waldur</code>.</li>
<li><code>SLURM_CONTAINER_NAME</code> - name of a headnode SLURM container; must be set if SLURM_DEPLOYMENT_TYPE is docker.</li>
<li><code>SENTRY_DSN</code> - Data Source Name for Sentry (more info <a href="https://docs.sentry.io/product/sentry-basics/dsn-explainer/">here</a>)</li>
<li><code>ENABLE_USER_HOMEDIR_ACCOUNT_CREATION</code> - whether to create home directories for users related to accounts</li>
</ul>
<h2 id="integrations-waldur-slurm-service-deployment">Deployment</h2>
<h3 id="integrations-waldur-slurm-service-test-environment">Test environment</h3>
<p>In order to test the service, a user should deploy 2 separate instances of the service.
The first one (called service-pull) is for fetching data from Waldur with further processing and the second one (called service-push) is for sending data from SLURM cluster to Waldur.
Both instances must be configured with environment variables from e.g. .env-file.</p>
<p>The example of .env-file for service-pull:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>WALDUR_SYNC_DIRECTION=pull # The setup for service-pull
WALDUR_API_URL=http://waldur.example.com/api/ # Waldur API URL
WALDUR_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Waldur
WALDUR_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Waldur
SLURM_DEFAULT_ACCOUNT=root # Default account for SLURM
SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container
</code></pre></div></td></tr></table></div>
<p>The example of .env-file for service-push:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>WALDUR_SYNC_DIRECTION=push # The setup for service-push
WALDUR_API_URL=http://waldur.example.com/api/ # Waldur API URL
WALDUR_API_TOKEN=9e1132b9616ebfe943ddf632ca32bbb7e1109a32 # Token of a service provider in Waldur
WALDUR_OFFERING_UUID=e21a0f0030b447deb63bedf69db6742e # UUID of SLURM offering in Waldur
SLURM_CONTAINER_NAME=slurmctld # Name of SLURM namenode container
</code></pre></div></td></tr></table></div>
<h3 id="integrations-waldur-slurm-service-docker-based-deployment">Docker-based deployment</h3>
<p>You can find the Docker Compose configuration for testing in <code>examples/docker-compose/</code> folder.</p>
<p>In order to test it, you need to execute following commands in your terminal app:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>examples/docker-compose
docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div></td></tr></table></div>
<h3 id="integrations-waldur-slurm-service-systemd-deployment">Systemd deployment</h3>
<p>If your SLURM cluster doesn't run in Docker, you need to deploy the a systemd service starting using Python module.
The agent requires <code>sacct</code> and <code>sacctmgr</code> to be accessible on a machine, so it should run on a headnode of the SLURM cluster.
Firstly, install the waldur-slurm-agent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>waldur-slurm-agent
</code></pre></div></td></tr></table></div>
<p>Secondly, put systemd unit, environment and and TRES config files to the corresponding locations.
Don't forget to modify Waldur-related values the env files.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># For pulling service</span>
cp<span class="w"> </span>systemd-conf/service-pull/waldur-slurm-service-pull.service<span class="w"> </span>/etc/systemd/system/
mkdir<span class="w"> </span>/etc/waldur-slurm-service/
cp<span class="w"> </span>systemd-conf/service-pull/waldur-slurm-service-pull.env<span class="w"> </span>/etc/waldur-slurm-service/pull.env
cp<span class="w"> </span>./config-components.yaml<span class="w"> </span>/etc/waldur-slurm-service/tres.yaml<span class="w"> </span><span class="c1"># you can use a different path and set SLURM_TRES_CONFIG_PATH to it</span>


<span class="c1"># For pushing service</span>
cp<span class="w"> </span>systemd-conf/service-push/waldur-slurm-service-push.service<span class="w"> </span>/etc/systemd/system/
cp<span class="w"> </span>systemd-conf/service-push/waldur-slurm-service-push.env<span class="w"> </span>/etc/waldur-slurm-service/push.env
</code></pre></div></td></tr></table></div>
<p>After the preparation, run the following to apply the changes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>systemctl<span class="w"> </span>daemon-reload
systemctl<span class="w"> </span>start<span class="w"> </span>waldur-slurm-service-pull
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>waldur-slurm-service-pull<span class="w"> </span><span class="c1"># to start after reboot</span>
systemctl<span class="w"> </span>start<span class="w"> </span>waldur-slurm-service-push
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>waldur-slurm-service-push<span class="w"> </span><span class="c1"># to start after reboot</span>
</code></pre></div></td></tr></table></div>
<h3 id="integrations-waldur-slurm-service-tres-configuration">TRES configuration</h3>
<p>To setup TRES-related info, the service uses the corresponding configuration file <code>config-components.yaml</code> in the root directory. Each entry of the file incudes key-value-formatted data.
A key is a type of TRES (with optional name if type is gres) and the value contains limit, measured unit, type of accounting and label.
The service sends this data to Waldur each time when it is restarted.
If a user wants to change this information, a custom config file should be mounted into a container.</p></section><h1 class='nav-section-title-end'>Ended: Waldur slurm service</h1><h1 class='nav-section-title-end'>Ended: Integrations</h1>
                        <h1 class='nav-section-title' id='section-integrator-guide'>
                            Integrator guide <a class='headerlink' href='#section-integrator-guide' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="integrator-guide-ansible-module"><h1 id="integrator-guide-ansible-module-ansible-module-for-waldur">Ansible module for Waldur</h1>
<p>Waldur-based solutions can be managed with Ansible modules to allow provisioning and
management of infrastructure under Waldur through Ansible playbooks.</p>
<h2 id="integrator-guide-ansible-module-supported-functionality">Supported functionality</h2>
<ul>
<li>OpenStack management.</li>
<li>SLURM HPC management</li>
<li>Common client for Waldur APIs in Python.</li>
</ul>
<p>See also: <a href="http://docs.ansible.com/ansible/modules.html">http://docs.ansible.com/ansible/modules.html</a></p>
<h2 id="integrator-guide-ansible-module-installation">Installation</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>ansible-waldur-module
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-ansible-module-example-usage">Example usage</h2>
<h3 id="integrator-guide-ansible-module-configure-an-ansible-playbook-with-parameters">Configure an Ansible playbook with parameters</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Trigger master instance</span>
<span class="w">  </span><span class="nt">waldur_marketplace_os_instance</span><span class="p">:</span>
<span class="w">    </span><span class="nt">access_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">access_token</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">api_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">api_url</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">flavor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">m1.micro</span>
<span class="w">    </span><span class="nt">floating_ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auto</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CentOS 7 x86_64</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">instance_name</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">    </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;OpenStack</span><span class="nv"> </span><span class="s">Project&quot;</span>
<span class="w">    </span><span class="nt">offering</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Instance in Tenant</span>
<span class="w">    </span><span class="nt">ssh_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh1.pub</span>
<span class="w">    </span><span class="nt">subnet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vpc-1-tm-sub-net-2</span>
<span class="w">    </span><span class="nt">system_volume_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
<span class="w">    </span><span class="nt">wait</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div></td></tr></table></div>
<h3 id="integrator-guide-ansible-module-pass-parameters-to-an-ansible-playbook">Pass parameters to an Ansible playbook</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">ANSIBLE_LIBRARY</span><span class="o">=</span>/usr/share/ansible-waldur/<span class="w"> </span>ansible<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-m<span class="w"> </span>waldur_marketplace_os_instance<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-a<span class="w"> </span><span class="s2">&quot;api_url=https://waldur.example.com/api/ access_token=9036194e1ac54cada3248a8c6b203bf7 name=instance-name project=&#39;Project name&#39;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>localhost
</code></pre></div></td></tr></table></div>
<h3 id="integrator-guide-ansible-module-running-playbook-using-virtual-python-environment">Running playbook using virtual Python environment</h3>
<p>If you've installed Ansible Waldur module to virtual Python environment you need to specify
path to Python interpreter and path to module library along with path to playbook:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code>ansible-playbook<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">ansible_python_interpreter</span><span class="o">=</span>/home/user/ansible-env/bin/python<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-M<span class="w"> </span>/home/user/ansible-env/lib/python3.8/site-packages/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>playbook.yml
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-ansible-module-contributing">Contributing</h2>
<ol>
<li>See general guidelines: <a href="https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_general.html">https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_general.html</a></li>
<li>Install <code>pre-commit</code> and <code>tox</code></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>tox<span class="w"> </span>pre-commit
pre-commit<span class="w"> </span>install
</code></pre></div></td></tr></table></div>
<ol>
<li>When new module is implemented, don't forget to update <code>py_modules</code> section in <code>setup.py</code> file.</li>
<li>When new module is implemented, it should be covered with tests. Run tests using <code>tox</code></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>tox
</code></pre></div></td></tr></table></div>
<ol>
<li>Module name should consist of three parts separated by underscore: <code>waldur</code>, plugin name,
   entity name. For example, <code>waldur_os_snapshot</code> refers to OpenStack (OS) as plugin name and snapshot as entity name.</li>
</ol></section><section class="print-page" id="integrator-guide-reporting"><h1 id="integrator-guide-reporting-reporting">Reporting</h1>
<p>Examples below show how it's possible to use Waldur SDK for generation of custom reports.</p>
<h2 id="integrator-guide-reporting-running-the-scripts">Running the scripts</h2>
<p>All of the scripts below should be saved as files and executed in the environment with installed
<a href="#integrator-guide-waldur-sdk">Waldur SDK</a>. Please make sure that you have python3 and pip installed in your command line.</p>
<p>Make sure that you update <code>WALDUR_HOST</code> and <code>TOKEN</code> with values that match your target Waldur deployment.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>https://github.com/waldur/python-waldur-client/archive/master.zip
python<span class="w"> </span>&lt;reporting-script-name&gt;.py
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-reporting-project-reporting">Project reporting</h2>
<p>The first scenario is report generation about monthly costs of each project.
The name of the output file is <code>project-report.csv</code>.</p>
<p>Code example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_client</span> <span class="kn">import</span> <span class="n">WaldurClient</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="c1"># Your Waldur instance data</span>
<span class="n">WALDUR_HOST</span> <span class="o">=</span> <span class="s1">&#39;example.waldur.com&#39;</span>
<span class="n">TOKEN</span> <span class="o">=</span> <span class="s1">&#39;STAFF_USER_API_TOKEN&#39;</span>

<span class="c1"># Date-related constants</span>
<span class="n">CURRENT_YEAR</span> <span class="o">=</span> <span class="mi">2021</span>
<span class="n">CURRENT_MONTH</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c1"># Other constants</span>
<span class="n">CSV_FILE_PATH</span> <span class="o">=</span> <span class="s1">&#39;project-report.csv&#39;</span>
<span class="n">HEADER</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Organization name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Organization abbreviation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Project name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Monthly cost of a project&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># WaldurClient instance initialisation</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">WaldurClient</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">WALDUR_HOST</span><span class="si">}</span><span class="s1">/api/&#39;</span><span class="p">,</span> <span class="n">TOKEN</span>
<span class="p">)</span>

<span class="c1"># Organisations data fetching</span>
<span class="n">customers_data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_customers</span><span class="p">()</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">CSV_FILE_PATH</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;UTF8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_file</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">HEADER</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">customer_data</span> <span class="ow">in</span> <span class="n">customers_data</span><span class="p">:</span>
        <span class="n">project_reporting</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Invoices data fetching</span>
            <span class="n">invoice_data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_invoice_for_customer</span><span class="p">(</span>
                <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">],</span> <span class="n">CURRENT_YEAR</span><span class="p">,</span> <span class="n">CURRENT_MONTH</span>
            <span class="p">)</span>
        <span class="c1"># If customer doesn&#39;t have any projects or created after the requested month</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">invoice_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">invoice_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]]</span>

        <span class="c1"># Cost aggregation per each project</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">invoice_items</span><span class="p">:</span>
            <span class="n">project_reporting</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;project_name&#39;</span><span class="p">]]</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">project_reporting</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;abbreviation&#39;</span><span class="p">],</span>
                    <span class="n">key</span><span class="p">,</span>
                    <span class="n">val</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Example of output file content:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>Organization name,Organization abbreviation,Project name,Monthly cost of a project
Org A,OA,Team1,10
Org B,OB,Demo project,70
Org B,OB,Industrial project,100
Org C,OC,Lab1,110
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-reporting-openstack-tenant-reporting">OpenStack tenant reporting</h2>
<p>The second scenario is report generation about quotas and monthly costs of OpenStack tenants.</p>
<p>The name of the output file is <code>openstack-report.csv</code>.</p>
<p>Code example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_client</span> <span class="kn">import</span> <span class="n">WaldurClient</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="c1"># Your Waldur instance data</span>
<span class="n">WALDUR_HOST</span> <span class="o">=</span> <span class="s1">&#39;example.waldur.com&#39;</span>
<span class="n">TOKEN</span> <span class="o">=</span> <span class="s1">&#39;STAFF_USER_API_TOKEN&#39;</span>

<span class="c1"># Date-related constants</span>
<span class="n">CURRENT_YEAR</span> <span class="o">=</span> <span class="mi">2021</span>
<span class="n">CURRENT_MONTH</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c1"># WaldurClient instance initialisation</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">WaldurClient</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">WALDUR_HOST</span><span class="si">}</span><span class="s1">/api/&#39;</span><span class="p">,</span> <span class="n">TOKEN</span>
<span class="p">)</span>

<span class="c1"># Other constants</span>
<span class="n">CSV_FILE_PATH</span> <span class="o">=</span> <span class="s1">&#39;openstack-report.csv&#39;</span>
<span class="n">HEADER</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;Name of the OpenStack Tenant resource&#39;</span><span class="p">,</span>
    <span class="s1">&#39;vCPU limit&#39;</span><span class="p">,</span>
    <span class="s1">&#39;RAM limit&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Storage limit&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Monthly cost of the resource&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Project name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Organization name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Organization abbreviation&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># Organisations data fetching</span>
<span class="n">customers_data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_customers</span><span class="p">()</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">CSV_FILE_PATH</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;UTF8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_file</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">HEADER</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">customer_data</span> <span class="ow">in</span> <span class="n">customers_data</span><span class="p">:</span>
        <span class="n">customer_uuid</span> <span class="o">=</span> <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Invoices data fetching</span>
            <span class="n">invoice_data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_invoice_for_customer</span><span class="p">(</span>
                <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">],</span> <span class="n">CURRENT_YEAR</span><span class="p">,</span> <span class="n">CURRENT_MONTH</span>
            <span class="p">)</span>
        <span class="c1"># If customer doesn&#39;t have any projects or created after the requested month</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># Tenants data fetching</span>
        <span class="n">tenants</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_tenants</span><span class="p">({</span><span class="s1">&#39;customer_uuid&#39;</span><span class="p">:</span> <span class="n">customer_uuid</span><span class="p">})</span>

        <span class="n">resource_costs</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;resource_uuid&#39;</span><span class="p">]:</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">invoice_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]}</span>

        <span class="k">for</span> <span class="n">tenant</span> <span class="ow">in</span> <span class="n">tenants</span><span class="p">:</span>
            <span class="n">resource_uuid</span> <span class="o">=</span> <span class="n">tenant</span><span class="p">[</span><span class="s1">&#39;marketplace_resource_uuid&#39;</span><span class="p">]</span>

            <span class="c1"># Resource data fetching</span>
            <span class="n">resource</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_marketplace_resource</span><span class="p">(</span><span class="n">resource_uuid</span><span class="p">)</span>
            <span class="n">limits</span> <span class="o">=</span> <span class="n">resource</span><span class="p">[</span><span class="s1">&#39;limits&#39;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span>
                    <span class="n">tenant</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">limits</span><span class="p">[</span><span class="s1">&#39;cores&#39;</span><span class="p">],</span>
                    <span class="n">limits</span><span class="p">[</span><span class="s1">&#39;ram&#39;</span><span class="p">],</span>
                    <span class="n">limits</span><span class="p">[</span><span class="s1">&#39;storage&#39;</span><span class="p">],</span>
                    <span class="n">resource_costs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">resource_uuid</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="c1"># if a resource wasn&#39;t used during the month</span>
                    <span class="n">tenant</span><span class="p">[</span><span class="s1">&#39;project_name&#39;</span><span class="p">],</span>
                    <span class="n">tenant</span><span class="p">[</span><span class="s1">&#39;customer_name&#39;</span><span class="p">],</span>
                    <span class="n">tenant</span><span class="p">[</span><span class="s1">&#39;customer_abbreviation&#39;</span><span class="p">]</span>
                <span class="p">])</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">pprint</span><span class="p">(</span><span class="n">resource_uuid</span><span class="p">)</span>
                <span class="n">pprint</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Example of output file content:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>Name of the OpenStack.Tenant resource,vCPU limit,RAM limit,Storage limit,Monthly cost of the resource,Project name,Organization name,Organization abbreviation
HPC_resource,2.0,4096.0,61440.0,2.18,Team1,Org A,OA
OpenStack Cloud for testing,1,1024,102400,5.17,Demo project,Org B,OB
OpenStack Cloud,12,51200,614400,21.77,Industrial project,Org B,OB
Private Cloud,1,1024,102400,5.17,Lab1,Org C,OC
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-reporting-reporting-by-provider">Reporting by provider</h2>
<p>To get CSV summary of consumption by provider, the following script can be useful. Output
will be a file per provider with a short summary of invoice items for the defined period.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">import</span> <span class="nn">unicodedata</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>

<span class="kn">from</span> <span class="nn">waldur_client</span> <span class="kn">import</span> <span class="n">WaldurClient</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span>

<span class="c1"># Your Waldur instance data</span>
<span class="n">WALDUR_HOST</span> <span class="o">=</span> <span class="s1">&#39;example.waldur.com&#39;</span>
<span class="n">TOKEN</span> <span class="o">=</span> <span class="s1">&#39;SUPPORT_STAFF_SECRET_TOKEN&#39;</span>

<span class="c1"># Date-related constants</span>
<span class="n">CURRENT_YEAR</span> <span class="o">=</span> <span class="mi">2023</span>
<span class="n">CURRENT_MONTH</span> <span class="o">=</span> <span class="mi">4</span>


<span class="k">def</span> <span class="nf">slugify</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">allow_unicode</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Taken from https://github.com/django/django/blob/master/django/utils/text.py</span>
<span class="sd">    Convert to ASCII if &#39;allow_unicode&#39; is False. Convert spaces or repeated</span>
<span class="sd">    dashes to single dashes. Remove characters that aren&#39;t alphanumerics,</span>
<span class="sd">    underscores, or hyphens. Convert to lowercase. Also strip leading and</span>
<span class="sd">    trailing whitespace, dashes, and underscores.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">allow_unicode</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFKC&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFKD&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^\w\s-]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[-\s]+&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;-_&#39;</span><span class="p">)</span>

<span class="c1"># WaldurClient instance initialisation</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">WaldurClient</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">&#39;https://</span><span class="si">{</span><span class="n">WALDUR_HOST</span><span class="si">}</span><span class="s1">/api/&#39;</span><span class="p">,</span> <span class="n">TOKEN</span>
<span class="p">)</span>

<span class="c1"># Organisations data fetching</span>
<span class="n">customers_data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">list_customers</span><span class="p">()</span>

<span class="n">sp</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">customer_data</span> <span class="ow">in</span> <span class="n">customers_data</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Invoices data fetching</span>
        <span class="n">invoice_data</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_invoice_for_customer</span><span class="p">(</span>
            <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">],</span> <span class="n">CURRENT_YEAR</span><span class="p">,</span> <span class="n">CURRENT_MONTH</span>
        <span class="p">)</span>
    <span class="c1"># If customer doesn&#39;t have any projects or created after the requested month</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">continue</span>

    <span class="n">invoice_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">invoice_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">]]</span>

    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">invoice_items</span><span class="p">:</span>
        <span class="c1"># allocate to SP</span>
        <span class="k">if</span> <span class="s1">&#39;service_provider_name&#39;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;details&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;details&#39;</span><span class="p">][</span><span class="s1">&#39;service_provider_name&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">sp</span><span class="p">:</span>
                <span class="n">sp</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;details&#39;</span><span class="p">][</span><span class="s1">&#39;service_provider_name&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">item</span><span class="p">,</span> <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sp</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;details&#39;</span><span class="p">][</span><span class="s1">&#39;service_provider_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[(</span><span class="n">item</span><span class="p">,</span> <span class="n">customer_data</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])]</span>

<span class="k">for</span> <span class="n">provider</span> <span class="ow">in</span> <span class="n">sp</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">slugify</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">CURRENT_YEAR</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">CURRENT_MONTH</span><span class="si">}</span><span class="s1">.csv&#39;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Generating&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;UTF8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out_file</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
        <span class="n">HEADER</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;Kood&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Nimetus&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Klient&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Kogus&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Hind&#39;</span><span class="p">,</span>
            <span class="s1">&#39;Summa&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">HEADER</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">inv</span><span class="p">,</span> <span class="n">customer_name</span> <span class="ow">in</span> <span class="n">sp</span><span class="p">[</span><span class="n">provider</span><span class="p">]:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">inv</span><span class="p">[</span><span class="s1">&#39;article_code&#39;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="n">inv</span><span class="p">[</span><span class="s1">&#39;article_code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1"># failed to parse custom logic</span>
                <span class="k">pass</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">code</span><span class="p">,</span>
                    <span class="n">inv</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
                    <span class="n">customer_name</span><span class="p">,</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="n">inv</span><span class="p">[</span><span class="s1">&#39;quantity&#39;</span><span class="p">])),</span>
                    <span class="n">inv</span><span class="p">[</span><span class="s1">&#39;unit_price&#39;</span><span class="p">],</span>
                    <span class="n">inv</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">],</span>
                <span class="p">]</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="integrator-guide-waldur-sdk"><h1 id="integrator-guide-waldur-sdk-waldur-sdk">Waldur SDK</h1>
<p>Waldur SDK is a <a href="https://github.com/waldur/ansible-waldur-module/blob/develop/waldur_client.py">python wrapper</a>
for typical REST operations.
You can use it, if you want to send requests to Waldur REST API directly from Python.
SDK is represented by Python module called <code>waldur_client.py</code> from <code>ansible-waldur-module</code> repository.</p>
<h2 id="integrator-guide-waldur-sdk-installation">Installation</h2>
<p>Due to frequent SDK updates, installation from the public GitHub repository is highly recommended:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>https://github.com/waldur/python-waldur-client/archive/master.zip
</code></pre></div></td></tr></table></div>
<p>In order to perform operations, a user needs to create an instance of <code>WaldurClient</code> class:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_client</span> <span class="kn">import</span> <span class="n">WaldurClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">WaldurClient</span><span class="p">(</span><span class="s1">&#39;&lt;api-url&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;api-token&gt;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>This instance provides interface for further interaction with Waldur and will be used across examples in related documentation.</p>
<h2 id="integrator-guide-waldur-sdk-error-handling">Error handling</h2>
<p>If the client fails to perform an operation, it raises <code>WaldurClientException</code>. This can be handled using <code>try...except</code> block.
Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">waldur_client</span> <span class="kn">import</span> <span class="n">WaldurClient</span><span class="p">,</span> <span class="n">WaldurClientException</span>
<span class="kn">import</span> <span class="nn">pprint</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">WaldurClient</span><span class="p">(</span><span class="s1">&#39;https://abc.example.com/api&#39;</span><span class="p">,</span> <span class="s1">&#39;some-token&#39;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">list_marketplace_resources</span><span class="p">()</span>
<span class="k">except</span> <span class="n">WaldurClientException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="c1"># WaldurClientException(&quot;HTTPSConnectionPool(host=&#39;abc.example.com&#39;, port=443):</span>
<span class="c1"># Max retries exceeded with url: /api/marketplace-resources/?page_size=200</span>
<span class="c1"># (Caused by NewConnectionError(&#39;&lt;urllib3.connection.VerifiedHTTPSConnection object at 0x110636430&gt;:</span>
<span class="c1"># Failed to establish a new connection: [Errno 8] nodename nor servname provided, or not known&#39;))&quot;)</span>
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-waldur-sdk-disabling-tls-validation-not-recommended">Disabling TLS validation (not recommended!)</h2>
<p>If you are running your commands against Waldur deployment with broken TLS certificates (e.g. in development),
the trick below can be used to disable validation of certificates by SDK.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CURL_CA_BUNDLE&#39;</span><span class="p">]</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">verify</span> <span class="o">=</span> <span class="kc">False</span>

<span class="o">...</span>
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-waldur-sdk-air-gapped-installation">Air gapped installation</h2>
<p>If your machine from where you run SDK is not connected to the public Internet, you can use the following method
to transfer required libraries.</p>
<p>On the machine with access to the Internet:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;https://github.com/waldur/python-waldur-client/archive/master.zip&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>requirements.txt
mkdir<span class="w"> </span>dependencies
pip3<span class="w"> </span>download<span class="w"> </span>-r<span class="w"> </span>requirements.txt<span class="w"> </span>-d<span class="w"> </span>dependencies/
</code></pre></div></td></tr></table></div>
<p>Now transfer content of the dependencies folder and requirements.txt to a machine without public Internet and
run.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip3<span class="w"> </span>install<span class="w"> </span>--no-index<span class="w"> </span>--find-links<span class="w"> </span>dependencies/<span class="w">  </span>-r<span class="w"> </span>requirements.txt
</code></pre></div></td></tr></table></div></section>
                        <h2 class='nav-section-title' id='section-apis'>
                            APIs <a class='headerlink' href='#section-apis' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrator-guide-apis-api"><h1 id="integrator-guide-apis-api-rest-api">REST API</h1>
<h2 id="integrator-guide-apis-api-authentication">Authentication</h2>
<p>Waldur uses token-based authentication for REST.</p>
<p>In order to authenticate your requests first obtain token from any of
the supported token backends. Then use the token in all the subsequent
requests putting it into <code>Authorization</code> header:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nf">GET</span> <span class="nn">/api/projects/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Token c84d653b9ec92c6cbac41c706593e66f567a7fa4</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">example.com</span>
</code></pre></div></td></tr></table></div>
<p>Also token can be put as request GET parameter, with key <code>x-auth-token</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nf">GET</span> <span class="nn">/api/?x-auth-token=Token%20144325be6f45e1cb1a4e2016c4673edaa44fe986</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">example.com</span>
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-apis-api-api-version">API version</h2>
<p>In order to retrieve current version of the Waldur authenticated user
should send a GET request to <strong>/api/version/</strong>.</p>
<p>Valid request example (token is user specific):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nf">GET</span> <span class="nn">/api/version/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Token c84d653b9ec92c6cbac41c706593e66f567a7fa4</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">example.com</span>
</code></pre></div></td></tr></table></div>
<p>Valid response example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.0</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Allow</span><span class="o">:</span> <span class="l">OPTIONS, GET</span>

<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.3.0&quot;</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-apis-api-pagination">Pagination</h2>
<p>Every Waldur REST request supports pagination. Links to the next,
previous, first and last pages are included in the Link header.
<em>X-Result-Count</em> contains a count of all entries in the response set.</p>
<p>By default page size is set to 10. Page size can be modified by passing
<strong>?page_size=N</strong> query parameter. The maximum page size is 100.</p>
<p>Example of the header output for user listing:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.0</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Link</span><span class="o">:</span>
 <span class="l">&lt;http://example.com/api/users/?page=1&gt;; rel=&quot;first&quot;,</span>
 <span class="l">&lt;http://example.com/api/users/?page=3&gt;; rel=&quot;next&quot;,</span>
 <span class="l">&lt;http://example.com/api/users/?page=1&gt;; rel=&quot;prev&quot;,</span>
 <span class="l">&lt;http://example.com/api/users/?page=6&gt;; rel=&quot;last&quot;</span>
<span class="na">X-Result-Count</span><span class="o">:</span> <span class="l">54</span>
<span class="na">Allow</span><span class="o">:</span> <span class="l">GET, POST, HEAD, OPTIONS</span>
</code></pre></div></td></tr></table></div></section><section class="print-page" id="integrator-guide-apis-authentication"><h1 id="integrator-guide-apis-authentication-authentication">Authentication</h1>
<p>Outline:</p>
<ul>
<li><a href="#integrator-guide-apis-authentication-authentication">Authentication</a></li>
<li><a href="#integrator-guide-apis-authentication-authentication-with-username-and-password">Authentication with username and password</a></li>
<li><a href="#integrator-guide-apis-authentication-authentication-token-management">Authentication Token management</a></li>
</ul>
<p>Waldur MasterMind exposes REST API for all of its operations. Below are examples of typical operations performed against APIs. To run the examples, we are using a <a href="https://httpie.org/">HTTPie</a>.</p>
<p>Almost all of the operations with API require an authentication token. Below we list two methods on how to get it.</p>
<h2 id="integrator-guide-apis-authentication-authentication-with-username-and-password">Authentication with username and password</h2>
<p>If your account is allowed to use username/password and the method is enabled (e.g. in dev environment), you can get a new token by submitting a username/password as JSON to a specific endpoint.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code>$<span class="w"> </span>http<span class="w"> </span>-v<span class="w"> </span>POST<span class="w"> </span>https://waldur.example.com/api-auth/password/<span class="w"> </span><span class="nv">username</span><span class="o">=</span>user<span class="w"> </span><span class="nv">password</span><span class="o">=</span>password

POST<span class="w"> </span>/api-auth/password/<span class="w"> </span>HTTP/1.1
Accept:<span class="w"> </span>application/json,<span class="w"> </span>*/*<span class="p">;</span><span class="nv">q</span><span class="o">=</span><span class="m">0</span>.5
Accept-Encoding:<span class="w"> </span>gzip,<span class="w"> </span>deflate
Connection:<span class="w"> </span>keep-alive
Content-Length:<span class="w"> </span><span class="m">40</span>
Content-Type:<span class="w"> </span>application/json
Host:<span class="w"> </span>waldur.example.com
User-Agent:<span class="w"> </span>HTTPie/2.3.0

<span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;password&quot;</span>:<span class="w"> </span><span class="s2">&quot;user&quot;</span>,
<span class="w">    </span><span class="s2">&quot;username&quot;</span>:<span class="w"> </span><span class="s2">&quot;password&quot;</span>
<span class="o">}</span>

HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Access-Control-Allow-Credentials:<span class="w"> </span><span class="nb">true</span>
Access-Control-Allow-Headers:<span class="w"> </span>Accept,<span class="w"> </span>Accept-Encoding,<span class="w"> </span>Authorization,<span class="w"> </span>Content-Type,<span class="w"> </span>Origin,<span class="w"> </span>User-Agent,<span class="w"> </span>X-CSRFToken,<span class="w"> </span>X-Requested-With
Access-Control-Allow-Methods:<span class="w"> </span>DELETE,<span class="w"> </span>GET,<span class="w"> </span>OPTIONS,<span class="w"> </span>PATCH,<span class="w"> </span>POST,<span class="w"> </span>PUT
Access-Control-Allow-Origin:<span class="w"> </span>*
Access-Control-Expose-Headers:<span class="w"> </span>Link,<span class="w"> </span>X-Result-Count
Allow:<span class="w"> </span>POST,<span class="w"> </span>OPTIONS
Content-Language:<span class="w"> </span>en
Content-Length:<span class="w"> </span><span class="m">52</span>
Content-Security-Policy:<span class="w"> </span>report-uri<span class="w"> </span>csp.hpc.ut.ee<span class="p">;</span><span class="w"> </span>form-action<span class="w"> </span><span class="s1">&#39;self&#39;</span><span class="p">;</span>
Content-Type:<span class="w"> </span>application/json
Date:<span class="w"> </span>Mon,<span class="w"> </span><span class="m">05</span><span class="w"> </span>Apr<span class="w"> </span><span class="m">2021</span><span class="w"> </span><span class="m">14</span>:37:55<span class="w"> </span>GMT
Referrer-Policy:<span class="w"> </span>no-referrer-when-downgrade
Strict-Transport-Security:<span class="w"> </span>max-age<span class="o">=</span><span class="m">31536000</span><span class="p">;</span><span class="w"> </span>preload
Vary:<span class="w"> </span>Accept-Language,<span class="w"> </span>Cookie
X-Content-Type-Options:<span class="w"> </span>nosniff
X-Frame-Options:<span class="w"> </span>SAMEORIGIN
X-XSS-Protection:<span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="nv">mode</span><span class="o">=</span>block

<span class="o">{</span>
<span class="w">    </span><span class="s2">&quot;token&quot;</span>:<span class="w"> </span><span class="s2">&quot;65b4c4f5e25f0cadb3e11c181be4ffa3881741f8&quot;</span>
<span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="integrator-guide-apis-authentication-authentication-token-management">Authentication Token management</h2>
<p>The easiest way to get your token is via Waldur HomePort. Go to user workspace by selecting 'Manage' in the user drop-down.</p>
<p><a class="glightbox" href="../integrator-guide/APIs/img/side-bar.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="side-bar" src="../integrator-guide/APIs/img/side-bar.png" style="height:288px;width:220px" /></a></p>
<p>Scroll down to the Current API token field and click on the 'eye' icon to display the token.</p>
<p><a class="glightbox" href="../integrator-guide/APIs/img/api-token.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="api-token" src="../integrator-guide/APIs/img/api-token.png" /></a></p></section><section class="print-page" id="integrator-guide-apis-permissions"><h1 id="integrator-guide-apis-permissions-permissions">Permissions</h1>
<h2 id="integrator-guide-apis-permissions-listing-permissions">Listing permissions</h2>
<p>Entities of Waldur are grouped into <em>organisational units</em>. The
following <em>organisational units</em> are supported: customer and project.</p>
<p>Each <em>organisational unit</em> has a list of users associated with it.
Getting a list of users connected to a certain <em>organisational unit</em> is
done through running a GET request against a corresponding endpoint.</p>
<ul>
<li>customer: endpoint <code>/api/customer-permissions/</code></li>
<li>project: endpoint <code>/api/project-permissions/</code></li>
</ul>
<p>Filtering by <em>organisational unit</em> UUID or URL is supported. Depending
on the type, filter field is one of:</p>
<ul>
<li><code>?customer=&lt;UUID&gt;</code></li>
<li><code>?customer_url=&lt;URL&gt;</code></li>
<li><code>?project=&lt;UUID&gt;</code></li>
<li><code>?project_url=&lt;URL&gt;</code></li>
<li><code>?user_url=&lt;URL&gt;</code></li>
</ul>
<p>In addition, filtering by field names is supported. In all cases
filtering is based on case insensitive partial matching.</p>
<ul>
<li><code>?username=&lt;username&gt;</code></li>
<li><code>?full_name=&lt;full name&gt;</code></li>
<li><code>?native_name=&lt;native name&gt;</code></li>
</ul>
<p>Ordering can be done by setting an ordering field with
<code>?o=&lt;field_name&gt;</code>. For descending ordering prefix field name with a
dash (-). Supported field names are:</p>
<ul>
<li><code>?o=user__username</code></li>
<li><code>?o=user__full_name</code></li>
<li><code>?o=user__native_name</code></li>
</ul>
<h2 id="integrator-guide-apis-permissions-fetch-user-data-from-waldur-using-username">Fetch user data from Waldur using username</h2>
<p>To fetch user data together with its permissions, you need to perform the following HTTP request.
It requires <code>username</code> filter and valid API token.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">GET /api/users/?username=&lt;USERNAME&gt;&amp;field=uuid&amp;field=customer_permissions&amp;field=project_permissions</span>
<span class="err">Accept: application/json</span>
<span class="err">Authorization: Token &lt;API_TOKEN&gt;</span>
<span class="err">Host: example.com</span>
</code></pre></div></td></tr></table></div>
<p>Example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code>&gt;<span class="w"> </span>http<span class="w"> </span>-v<span class="w"> </span>--pretty<span class="w"> </span>all<span class="w"> </span>GET<span class="w">  </span>http://example.com:8000/api/users/<span class="w"> </span><span class="nv">username</span><span class="o">==</span>admin<span class="w"> </span><span class="nv">field</span><span class="o">==</span>uuid<span class="w"> </span><span class="nv">field</span><span class="o">==</span>customer_permissions<span class="w"> </span><span class="nv">field</span><span class="o">==</span>project_permissions<span class="w"> </span>Authorization:<span class="s2">&quot;Token 154f2c6984b5992928b62f87950ac529f1f906ca&quot;</span>

GET<span class="w"> </span>/api/users/?username<span class="o">=</span>admin<span class="p">&amp;</span><span class="nv">field</span><span class="o">=</span>uuid<span class="p">&amp;</span><span class="nv">field</span><span class="o">=</span>customer_permissions<span class="p">&amp;</span><span class="nv">field</span><span class="o">=</span>project_permissions<span class="w"> </span>HTTP/1.1
Accept:<span class="w"> </span>*/*
Accept-Encoding:<span class="w"> </span>gzip,<span class="w"> </span>deflate
Authorization:<span class="w"> </span>Token<span class="w"> </span>154f2c6984b5992928b62f87950ac529f1f906ca
Connection:<span class="w"> </span>keep-alive
Host:<span class="w"> </span>example.com:8000
User-Agent:<span class="w"> </span>HTTPie/2.4.0



HTTP/1.1<span class="w"> </span><span class="m">200</span><span class="w"> </span>OK
Allow:<span class="w"> </span>GET,<span class="w"> </span>POST,<span class="w"> </span>HEAD,<span class="w"> </span>OPTIONS
Content-Language:<span class="w"> </span>en
Content-Length:<span class="w"> </span><span class="m">702</span>
Content-Type:<span class="w"> </span>application/json
Date:<span class="w"> </span>Tue,<span class="w"> </span><span class="m">15</span><span class="w"> </span>Feb<span class="w"> </span><span class="m">2022</span><span class="w"> </span><span class="m">13</span>:07:10<span class="w"> </span>GMT
Link:<span class="w"> </span>&lt;http://example.com:8000/api/users/?field<span class="o">=</span>uuid<span class="p">&amp;</span><span class="nv">field</span><span class="o">=</span>customer_permissions<span class="p">&amp;</span><span class="nv">field</span><span class="o">=</span>project_permissions<span class="p">&amp;</span><span class="nv">username</span><span class="o">=</span>admin&gt;<span class="p">;</span><span class="w"> </span><span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;first&quot;</span>,<span class="w"> </span>&lt;http://example.com:8000/api/users/?field<span class="o">=</span>uuid<span class="p">&amp;</span><span class="nv">field</span><span class="o">=</span>customer_permissions<span class="p">&amp;</span><span class="nv">field</span><span class="o">=</span>project_permissions<span class="p">&amp;</span><span class="nv">username</span><span class="o">=</span>admin&gt;<span class="p">;</span><span class="w"> </span><span class="nv">rel</span><span class="o">=</span><span class="s2">&quot;last&quot;</span>
Server:<span class="w"> </span>WSGIServer/0.2<span class="w"> </span>CPython/3.8.2
Vary:<span class="w"> </span>Accept,<span class="w"> </span>Accept-Language,<span class="w"> </span>Cookie,<span class="w"> </span>Origin
X-Frame-Options:<span class="w"> </span>DENY
X-Result-Count:<span class="w"> </span><span class="m">1</span>

<span class="o">[</span>
<span class="w">    </span><span class="o">{</span>
<span class="w">        </span><span class="s2">&quot;customer_permissions&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">            </span><span class="o">{</span>
<span class="w">                </span><span class="s2">&quot;customer_abbreviation&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">                </span><span class="s2">&quot;customer_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;Admin org&quot;</span>,
<span class="w">                </span><span class="s2">&quot;customer_native_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">                </span><span class="s2">&quot;customer_uuid&quot;</span>:<span class="w"> </span><span class="s2">&quot;c9c8685ad4b1427aab2b6c9d36504f84&quot;</span>,
<span class="w">                </span><span class="s2">&quot;pk&quot;</span>:<span class="w"> </span><span class="m">8</span>,
<span class="w">                </span><span class="s2">&quot;role&quot;</span>:<span class="w"> </span><span class="s2">&quot;owner&quot;</span>,
<span class="w">                </span><span class="s2">&quot;url&quot;</span>:<span class="w"> </span><span class="s2">&quot;http://example.com:8000/api/customer-permissions/8/&quot;</span>
<span class="w">            </span><span class="o">}</span>,
<span class="w">            </span><span class="o">{</span>
<span class="w">                </span><span class="s2">&quot;customer_abbreviation&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">                </span><span class="s2">&quot;customer_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;aaaaa&quot;</span>,
<span class="w">                </span><span class="s2">&quot;customer_native_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">                </span><span class="s2">&quot;customer_uuid&quot;</span>:<span class="w"> </span><span class="s2">&quot;7dd7481695e347a4bc80744b0f894c00&quot;</span>,
<span class="w">                </span><span class="s2">&quot;pk&quot;</span>:<span class="w"> </span><span class="m">9</span>,
<span class="w">                </span><span class="s2">&quot;role&quot;</span>:<span class="w"> </span><span class="s2">&quot;owner&quot;</span>,
<span class="w">                </span><span class="s2">&quot;url&quot;</span>:<span class="w"> </span><span class="s2">&quot;http://example.com:8000/api/customer-permissions/9/&quot;</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">]</span>,
<span class="w">        </span><span class="s2">&quot;project_permissions&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">            </span><span class="o">{</span>
<span class="w">                </span><span class="s2">&quot;customer_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;aaaaa&quot;</span>,
<span class="w">                </span><span class="s2">&quot;pk&quot;</span>:<span class="w"> </span><span class="m">40</span>,
<span class="w">                </span><span class="s2">&quot;project_name&quot;</span>:<span class="w"> </span><span class="s2">&quot;a project&quot;</span>,
<span class="w">                </span><span class="s2">&quot;project_uuid&quot;</span>:<span class="w"> </span><span class="s2">&quot;17db88c53b894aaca8314a2a0ebfda62&quot;</span>,
<span class="w">                </span><span class="s2">&quot;role&quot;</span>:<span class="w"> </span><span class="s2">&quot;admin&quot;</span>,
<span class="w">                </span><span class="s2">&quot;url&quot;</span>:<span class="w"> </span><span class="s2">&quot;http://example.com:8000/api/project-permissions/40/&quot;</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">]</span>,
<span class="w">        </span><span class="s2">&quot;uuid&quot;</span>:<span class="w"> </span><span class="s2">&quot;3c64889f169442d687490addc2a9de30&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">]</span>
</code></pre></div></td></tr></table></div></section><h1 class='nav-section-title-end'>Ended: APIs</h1>
                        <h2 class='nav-section-title' id='section-existing-integrations'>
                            Existing integrations <a class='headerlink' href='#section-existing-integrations' title='Permanent link'>↵</a>
                        </h2>
                        <section class="print-page" id="integrator-guide-existing-integrations-firezone"><h1 id="integrator-guide-existing-integrations-firezone-vpnaas-custom-script-provisioning-vpn-as-a-service-based-on-firezone">VPNaaS custom script - Provisioning VPN as a Service based on Firezone</h1>
<p><a class="glightbox" href="../integrator-guide/existing-integrations/preview.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Firezone login screen" src="../integrator-guide/existing-integrations/preview.png" title="Login Screen" /></a></p>
<p>This python script provisions VPN as a Service based on <a href="https://github.com/firezone/firezone">Firezone</a> in OpenStack in Waldur.
It uses <a href="https://www.flatcar.org/">Flatcar Linux</a> and a butane binary that the user needs to provide inside a Docker container used for running Waldur custom scripts.</p>
<p>An additional requirement is an OpenID Connect provider for end-user authentication in Firezone.
Default VPN port: UDP/51820.</p>
<h2 id="integrator-guide-existing-integrations-firezone-system-requirements">System requirements</h2>
<ul>
<li>Keycloak with admin access for OpenID Connect client creation</li>
<li><a href="https://coreos.github.io/butane/">Butane</a> for converting Flarcar Linux yaml config into json</li>
<li>OpenStack nova for running the Firezone VM</li>
<li>OpenStack designate for the VM FQDN generation. Firezone will use that FQDN for HTTPS certificate generation.</li>
</ul>
<p>Firezone VM needs Internet connection for Let's Encrypt certificate generation and Github access for script download.</p>
<h2 id="integrator-guide-existing-integrations-firezone-setup-guide">Setup guide</h2>
<ol>
<li>Prepare waldur custom script runner container to have <a href="https://coreos.github.io/butane/">Butane</a> and <a href="https://raw.githubusercontent.com/waldur/waldur-custom-offerings/main/firezone/custom-scripts/requirements.txt">required Python packages</a></li>
<li>Paste the create.py into the creation script and terminate.py into the termination script</li>
<li>Populate environment variables</li>
<li>Add user input field with internal name "tenant" and type - "Select OpenStack tenant", make it a required field</li>
</ol>
<h2 id="integrator-guide-existing-integrations-firezone-environment-variables">Environment Variables</h2>
<p>The following environment variables need to be provided in the Waldur custom script:</p>
<ul>
<li><code>WALDUR_API_URL</code> - API URL of Waldur that holds OpenStack</li>
<li><code>WALDUR_API_TOKEN</code> - Waldur API token</li>
<li><code>KEYCLOAK_URL</code> - Keycloak address for creating OpenID connect clients</li>
<li><code>KEYCLOAK_USERNAME</code> - Keycloak admin username</li>
<li><code>KEYCLOAK_PASSWORD</code> - Keycloak admin password</li>
<li><code>KEYCLOAK_REALM</code> - Keycloak realm</li>
<li><code>CREATOR_EMAIL</code> - Email of the user, that created the VPN instance</li>
<li><code>IMAGE</code> - OpenStack image</li>
<li><code>FLAVOR</code> - OpenStack flavor</li>
<li><code>SYSTEM_VOLUME_SIZE</code> - Size of the system volume for OpenStack VM</li>
<li><code>RUN_BUTANE_IN_DOCKER</code> - When set to True - run butane in docker container instead of just binary</li>
</ul></section><section class="print-page" id="integrator-guide-existing-integrations-guacamole"><h1 id="integrator-guide-existing-integrations-guacamole-waldur-guacamole-integration">Waldur Guacamole integration</h1>
<p>Guacamole is a browser based remote desktop gateway. It supports standard protocols like VNC, RDP, and SSH.
Waldur — Guacamole integration is based on Waldur's custom scripts functionality.</p>
<p>This integration provides full virtual desktop lifecycle, including:</p>
<ul>
<li>Creation of a virtual desktop in remote Waldur (i.e. OpenStack KVM machine)</li>
<li>Adding records of a freshly created virtual desktop to Guacamole MySQL database</li>
<li>Termination of the virtual desktop and MySQL records removal upon desktop deletion</li>
</ul>
<h2 id="integrator-guide-existing-integrations-guacamole-quick-start-guide">Quick Start Guide</h2>
<ul>
<li>Make sure your Waldur is able to run custom scripts</li>
<li>Modify Guacamole MySQL database to store backend ID (Backend Waldur resource ID):</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">guacamole_connection</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">backend_id</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>Create a Service Offerring in Waldur with "Custom Script" type</li>
<li>Configure environment variables for the service:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Guacamole MySQL connection settings</span>
<span class="nv">MYSQL_USER</span><span class="o">=</span>guacamole
<span class="nv">MYSQL_DATABASE</span><span class="o">=</span>guacamole
<span class="nv">MYSQL_PASSWORD</span><span class="o">=</span>password
<span class="nv">MYSQL_HOSTNAME</span><span class="o">=</span>guacamole.example.com
<span class="c1"># RDP Password for the desktop user</span>
<span class="nv">DESKTOP_PASSWORD</span><span class="o">=</span>password
<span class="c1"># Backend Waldur connection settings</span>
<span class="nv">BACKEND_WALDUR_URL</span><span class="o">=</span>https://waldur.example.com/api/
<span class="nv">BACKEND_WALDUR_TOKEN</span><span class="o">=</span>api_token
<span class="nv">BACKEND_WALDUR_OFFERING</span><span class="o">=</span>offerring_uuid
<span class="nv">BACKEND_WALDUR_PROJECT</span><span class="o">=</span>project_uuid
<span class="nv">BACKEND_WALDUR_IMAGE</span><span class="o">=</span>image_name
<span class="nv">BACKEND_WALDUR_FLAVOR</span><span class="o">=</span>flavor_name
<span class="nv">BACKEND_WALDUR_SUBNET</span><span class="o">=</span>subnet_uuid
<span class="nv">BACKEND_WALDUR_SECURITY_GROUP</span><span class="o">=</span>security_group_name
</code></pre></div></td></tr></table></div>
<ul>
<li>Copy <code>custom-scripts/create.py</code> and <code>custom-scripts/terminate.py</code> as the creation and termination scripts for the service</li>
</ul></section><h1 class='nav-section-title-end'>Ended: Existing integrations</h1><h1 class='nav-section-title-end'>Ended: Integrator guide</h1>
                        <h1 class='nav-section-title' id='section-user-guide'>
                            User guide <a class='headerlink' href='#section-user-guide' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="user-guide"><h1 id="user-guide-user-guide">User Guide</h1>
<p>From this section, you can find useful and practical action for completing the most common tasks.</p>
<p>Please note that the user guide preparation work is in progress, and we will add new instructions continuously.</p>
<p>Practical guides:</p>
<ul>
<li><a href="#user-guide-interface">Interface overview</a></li>
<li><a href="#user-guide-organization_and_project_management">Organization and project management</a></li>
<li><a href="#user-guide-project_membership_management">Project membership management</a></li>
<li><a href="#user-guide-marketplace">Marketplace</a></li>
<li><a href="#user-guide-resource_management">Resource management</a></li>
<li><a href="#user-guide-usage_reports">Accounting and reporting</a></li>
<li><a href="#user-guide-projects-removal-admin">Projects removal by admin</a></li>
</ul></section><section class="print-page" id="user-guide-interface"><h1 id="user-guide-interface-interface-introduction">Interface Introduction</h1>
<h2 id="user-guide-interface-basics">Basics</h2>
<h3 id="user-guide-interface-dashboard">Dashboard</h3>
<ul>
<li>It is the first page you see (by default) after logging in to Waldur, which provides you with the initial necessary information of your profile, the Organizations and the Projects.</li>
</ul>
<h3 id="user-guide-interface-organization-project-selection">Organization / Project selection</h3>
<ul>
<li>You can see the information about the organization only If you are at the organization level. It means if you are only at the project level, you can not go to the organization level.</li>
</ul>
<h3 id="user-guide-interface-sidebar-menu">Sidebar menu</h3>
<ul>
<li>This is your main working tool in Waldur. Here you can manage your organizations, projects and resources. The next chapter of this guide will provide the details for each menu item.</li>
</ul>
<h3 id="user-guide-interface-workspace-menu-changes-depending-on-sidebar-menu">Workspace menu (changes depending on sidebar menu)</h3>
<ul>
<li>Each page in Waldur has a navigation bar at the top of the screen. It enables a quick access to organization/project info and management.</li>
</ul>
<h3 id="user-guide-interface-workspace">Workspace</h3>
<ul>
<li>Shows organization, project or user dashboards related to the selection.</li>
</ul>
<h3 id="user-guide-interface-user-related-actions">User related actions</h3>
<ul>
<li>Contains all necessary action fields a user might need.</li>
</ul>
<h4 id="user-guide-interface-issues">Issues</h4>
<ul>
<li>Displays the list of user related issues. Here by Creating request you can request support.</li>
</ul>
<h4 id="user-guide-interface-favorite-pages">Favorite Pages</h4>
<ul>
<li>The opportunity to gather the most visited pages to make them easily reachable.</li>
</ul>
<h4 id="user-guide-interface-pending-confirmations">Pending confirmations</h4>
<ul>
<li>Contains the list of requests related to user, resources or project management.</li>
</ul>
<h4 id="user-guide-interface-user-profile">User Profile</h4>
<ul>
<li>The main links related to the user actions like User Dashboard, Affiliations, Credentials, Notifications, Language and Color mode of the interface.</li>
</ul>
<h3 id="user-guide-interface-get-help">Get help</h3>
<ul>
<li>By clicking Support you can find User Documentation, or reach us by using support email address and also create support request by going to "Issues" window.</li>
</ul>
<video controls width="100%" autoplay="true" muted loop >
  <source src="../img/interface_basics_wo_logo.mp4" type="video/mp4">
</video></section><section class="print-page" id="user-guide-marketplace"><h1 id="user-guide-marketplace-marketplace-introduction">Marketplace introduction</h1>
<p>Marketplace is a central module for provisioning of Waldur resources. Marketplace contains Offerings that
belong to a special type of Organizations - Service Providers. Marketplace provides common functionality
for resource lifecycle management, accounting and invoicing. Specifics are implemented in the Marketplace plugins
(e.g. for OpenStack, SLURM, Rancher, etc).</p>
<h2 id="user-guide-marketplace-diagram-of-concepts">Diagram of concepts</h2>
<p><a class="glightbox" href="../user-guide/img/marketplace-structure.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Diagram of marketplace concepts" src="../user-guide/img/marketplace-structure.png" /></a></p>
<h2 id="user-guide-marketplace-adding-a-new-offering">Adding a new Offering</h2>
<p>To create a new Offering in the Marketplace, you need to:</p>
<ul>
<li>Assure that categories are configured in the Marketplace.</li>
<li>Create at least one service provider.</li>
<li>Create and activate a public offering.</li>
</ul>
<h3 id="user-guide-marketplace-creating-a-service-provider">Creating a Service Provider</h3>
<p>Pick or create an organization that will be used as a service provider. Mark it a such in the Management tab of the
organization using "Register as service provider":</p>
<p><a class="glightbox" href="../user-guide/img/serviceprovider_reg.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Mark as service provider" src="../user-guide/img/serviceprovider_reg.jpg" /></a></p>
<h3 id="user-guide-marketplace-creating-marketplace-categories">Creating Marketplace categories</h3>
<p>To create a category, either use administrative interface of Waldur, hosted under <code>`/admin</code> (can be accessed by staff users)
or use management command for loading the pre-defined categories.</p>
<ul>
<li>With Docker-compose deployment:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-t<span class="w"> </span>waldur-mastermind-worker<span class="w"> </span>waldur<span class="w"> </span>load_categories<span class="w">  </span><span class="c1"># vpc vm storage ...</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>With Helm deployment</li>
</ul>
<p>Open waldur-mastermind-worker shell and execute the following command:</p>
<ol>
<li>Get waldur-mastermind-worker pod name</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="c1"># Example:</span>
<span class="w">  </span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>waldur-mastermind-worker<span class="w"> </span><span class="c1"># --&gt;</span>
<span class="w">  </span><span class="c1"># default       waldur-mastermind-worker-6d98cd98bd-wps8n   1/1     Running     0          9m9s</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Connect to pod via shell</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="c1"># Example:</span>
<span class="w">  </span>kubectl<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>waldur-mastermind-worker-6d98cd98bd-wps8n<span class="w"> </span>--<span class="w"> </span>/bin/bash
</code></pre></div></td></tr></table></div>
<ol>
<li>Execute command to see available or add a category</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span>waldur<span class="w"> </span>load_categories<span class="w">  </span><span class="c1"># vpc vm storage ...</span>
</code></pre></div></td></tr></table></div>
<h3 id="user-guide-marketplace-creating-public-offering">Creating public Offering</h3>
<p>Once you have a service provider and at least one category defined, you can add a new service offering.</p>
<ul>
<li>Go to Provider -&gt; Marketplace -&gt; Offerings and click Add new offering.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/add_offering.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="List offerings" src="../user-guide/img/add_offering.jpg" /></a></p>
<ul>
<li>Fill in the name, category and type of the offering. By default, Waldur supports several types out of the box (incl SLURM, OpenStack, VMware, Azure, custom scripts etc)</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/add_offering_2.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Add offering" src="../user-guide/img/add_offering_2.jpg" /></a></p>
<ul>
<li>Fill in additional information and click on Activate. After that, the offering is visible in the Marketplace.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/add_offering_3.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Activate offering" src="../user-guide/img/add_offering_3.jpg" /></a></p></section><section class="print-page" id="user-guide-organization_and_project_management"><h1 id="user-guide-organization_and_project_management-organization-and-project-management">Organization and project management</h1>
<h2 id="user-guide-organization_and_project_management-user-guide-for-adding-organizations">User guide for adding organizations</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Organization creation is only allowed for users in Staff role!</p>
</div>
<p>Organization in Waldur context means whatever grouping platform owner would like to have.
This can mean for example research group, institution, department or working group. Organization has an owner who can manage the organization, projects and users connected to that project.</p>
<h2 id="user-guide-organization_and_project_management-create-a-new-organization">Create a new organization</h2>
<ol>
<li>Click on "Dashboard" and then “Add organization” in the organization selection window.<br><br></li>
</ol>
<p><a class="glightbox" href="../user-guide/img/add-org.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Select organization" src="../user-guide/img/add-org.jpg" /></a><br><br></p>
<ol>
<li>
<p>Fill the form and click "Create organization":</p>
<ul>
<li>Name - Name of the organization</li>
<li>Organization group - Divisions within organization</li>
<li>Contact email - email of the person, who is responsible for the organization</li>
<li>Contact phone - contact person’s phone (optional)</li>
<li>Website URL - url of the organization (optional)</li>
<li>Logo - logo of the organization (optional)<br><br></li>
</ul>
</li>
</ol>
<p><a class="glightbox" href="../user-guide/img/add-org-2.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Select organization" src="../user-guide/img/add-org-2.jpg" /></a></p>
<h2 id="user-guide-organization_and_project_management-creation-of-projects">Creation of projects</h2>
<p>Project creation is allowed for organization owners in their organizations and staff users.</p>
<p>Prerequisites for creating projects:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>- User must have an account in Waldur instance.
</code></pre></div></td></tr></table></div>
<ol>
<li>Select your home organization.</li>
<li>Click on "Add project".</li>
<li>
<p>Fill the necessary fields (fields marked with * are mandatory).</p>
<ul>
<li>Project name - The original title of the project.</li>
<li>Project description - A brief description about the project.</li>
<li>OECD FoS code - OECD science field code (<a href="https://joinup.ec.europa.eu/collection/eu-semantic-interoperability-catalogue/solution/field-science-and-technology-classification/about">more info</a>)</li>
<li>End date - this is the end date for using the computational resources.</li>
<li>Project image - Profile picture for the project (optional).</li>
</ul>
</li>
</ol></section><section class="print-page" id="user-guide-project_membership_management"><h1 id="user-guide-project_membership_management-project-membership-management">Project membership management</h1>
<p>Project team contains users with different roles.</p>
<p>Please see <a href="https://docs.waldur.com/glossaries/structure/#user-roles-in-organization">this page</a> for User Rights based on Roles in the Organization.</p>
<h2 id="user-guide-project_membership_management-adding-project-members">Adding project members</h2>
<h3 id="user-guide-project_membership_management-new-user-already-has-account-in-current-waldur-instance">New user already has account in current Waldur instance</h3>
<ol>
<li>Open your project in Waldur.</li>
<li>Select "Team" from top menu and click on "Users".</li>
<li>
<p>By clicking "Add member" open "Add project member" window.<br><br></p>
<p><a class="glightbox" href="../user-guide/img/add-member-1.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Select organization" src="../user-guide/img/add-member-1.jpg" /></a><br><br></p>
</li>
<li>
<p>Select correct user, set the role and expiration date if necessary.<br><br></p>
<p><a class="glightbox" href="../user-guide/img/add-member-2.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Select organization" src="../user-guide/img/add-member-2.jpg" /></a><br><br></p>
</li>
<li>
<p>Finally, click on "Add".</p>
</li>
<li>User now will get invitation email with the acceptance link.<br><br></li>
</ol>
<h3 id="user-guide-project_membership_management-new-user-dont-have-a-account-in-current-waldur-instance">New user don't have a account in current Waldur instance</h3>
<ol>
<li>Open project in Waldur.<br><br></li>
<li>
<p>Select "Team" from top menu and click on "Invitations".<br><br></p>
<p><a class="glightbox" href="../user-guide/img/invitation-1.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Invite user" src="../user-guide/img/invitation-1.jpg" /></a><br><br></p>
</li>
<li>
<p>By clicking "Invite user" open "Invite by email" window.<br><br></p>
<p><a class="glightbox" href="../user-guide/img/invitation-2.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Invite user" src="../user-guide/img/invitation-2.jpg" /></a><br><br></p>
</li>
<li>
<p>Insert user's email and set the role for the new user and continue.<br><br></p>
</li>
<li>
<p>Fill in your custom message on the right side of the window and send the invitation.<br><br></p>
<p><a class="glightbox" href="../user-guide/img/invitation-3.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Invite user" src="../user-guide/img/invitation-3.jpg" /></a><br><br></p>
</li>
<li>
<p>User now will get invitation email with the acceptance link.</p>
</li>
</ol></section><section class="print-page" id="user-guide-projects-removal-admin"><h1 id="user-guide-projects-removal-admin-multiple-projects-removal-via-admin-panel">Multiple projects removal via admin panel</h1>
<p>An admin can remove projects with all related resources with the following sequence of actions:</p>
<ol>
<li>Go to admin panel (e.g. <code>http://localhost:8080/admin/</code>)</li>
<li>Open list of projects: <code>Structure tab</code> -&gt; <code>Projects</code></li>
<li>Filter the projects by organization field (optional)</li>
<li>Select projects for removal</li>
<li>Set action field to <code>Delete projects with all resources</code></li>
</ol>
<p><a class="glightbox" href="../user-guide/img/project-removal.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Project removal" src="../user-guide/img/project-removal.png" /></a></p></section><section class="print-page" id="user-guide-resource_management"><h1 id="user-guide-resource_management-resource-management">Resource management</h1>
<h2 id="user-guide-resource_management-vpc-management">VPC management</h2>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>There are several Virtual Private Cloud providers available on the ´Marketplace´.
You need to provision at least one VPC package from a suitable provider in order to be able to create virtual machines.</p>
</div>
<ul>
<li>Virtual Private Cloud (VPC) resource package can be added by clicking to ´Marketplace´ and selecting ´Private Clouds´ from the menu to go to the list of VPC.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/Marketplace.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VPC selection" src="../user-guide/img/Marketplace.jpg" /></a></p>
<ul>
<li>Currently, there are three VPC component names listed: ´Cores´, ´Ram´, and ´Storage´. For configuration of a VPC resource please fill in a suitable quantity for each component and click on the ´Add to cart´ button. Here by changing the quantities of components, you can see Prices accordingly per day, per 30 days, per 365 days, and finally the total price of the VPC.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/VPC_addition1.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VPC addition" src="../user-guide/img/VPC_addition1.jpg" /></a></p>
<ul>
<li>It is mandatory to input ´Tenant name´ to order a VPC.</li>
<li>We also strongly suggest filling the ´Tenant description´ field.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/VPC_addition2.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VPC addition" src="../user-guide/img/VPC_addition2.jpg" /></a></p>
<ul>
<li>Finally click on Add to cart and Request on the next page.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/VPC_addition3.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VPC add to cart" src="../user-guide/img/VPC_addition3.jpg" /></a></p>
<p><a class="glightbox" href="../user-guide/img/Request_vpc.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VPC request" src="../user-guide/img/Request_vpc.jpg" /></a></p>
<h3 id="user-guide-resource_management-request-approval">Request approval</h3>
<p>a) If your role in the Project is ´Project Manager´ or ´System Administrator´, please ask your Organization Owner to approve the order.</p>
<p>b) If your role is ´Organization Owner´ you are able to complete the purchase to final approval (click the ´Purchase´ button). Hereafter the system will need a couple of minutes to execute the order. Once the system changes the state to ´Done´, your VPC is ready to use.</p>
<p><a class="glightbox" href="../user-guide/img/VPC_executing.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VPC executing" src="../user-guide/img/VPC_executing.jpg" /></a></p>
<p><a class="glightbox" href="../user-guide/img/VPC_done.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VPC done" src="../user-guide/img/VPC_done.jpg" /></a></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Provisioned VPC resource package will be automatically enabled for the project as a VM provider. For other projects it can be enabled by the organization owner under Provider management within organization workspace.</p>
</div>
<h2 id="user-guide-resource_management-vm-management">VM management</h2>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Projects need to have at least one VPC resource package enabled before any virtual machines can be created. You can follow this guide to add a new VPC.</p>
</div>
<ul>
<li>VMs can be added by clicking to ’Marketplace’ and selecting ’Virtual machines’ from the menu to go to the list of Virtual Machines.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/Marketplace_VM.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VM marketplace" src="../user-guide/img/Marketplace_VM.jpg" /></a></p>
<ul>
<li>Ordering a ’Virtual Machine’ requires a VM name and selection of a VM image.</li>
<li>Please select the ’Image’ for a VM and click on the ’Select’ button, returning to the form.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/VM_addition1.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VM addition 1" src="../user-guide/img/VM_addition1.jpg" /></a></p>
<ul>
<li>Selecting the initial VM resource profile, the flavor, by clicking on the ’Flavor: Show choices’ selector is mandatory.</li>
<li>The flavor will set the initial resource profile for a VM - how much RAM, vCPU cores, and storage it will have.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>VM images contain their minimum requirements information, and non-matching VM flavors are disabled automatically.</p>
</div>
<ul>
<li>Selecting VM flavor will also update ’System volume size’ with the option to override it manually (to a higher custom value). The size of ’Data Volume’ can be customized and incremented in 1 GB steps. ’System volume’ must be at least 10 GB, whereas ’System volume’ and ’Data volume’ must be equal to or less than VPC’s total Storage.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/VM_addition2.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VM addition 2" src="../user-guide/img/VM_addition2.jpg" /></a></p>
<ul>
<li>By default, provisioned virtual machines expect users to log in using SSH keys. The initial SSH key for login should be selected by clicking on the ’SSH public key: Show choices’ selector.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There has to be at least one SSH public key added to the user profile for it to appear in the SSH key selector list.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In order to log in to your newly created VM over SSH, you need to use a username depending on your choice of VM Image type and your SSH-RSA key-pair. By default password authentication is disabled.</p>
</div>
<ul>
<li>Default usernames for login are as follows:</li>
<li>CentOS images: CentOS</li>
<li>Ubuntu images: Ubuntu</li>
<li>Debian images: Debian</li>
<li>FreeBSD images: FreeBSD</li>
<li>By default, no incoming connections will be allowed for a VM. Predefined Security Groups (firewall rules) must be linked to a VM in order to open up access (like ssh, HTTP, etc.). By clicking the ’Details’ button, you can see the details about the available ’Security Groups’. ’Security Groups’ can be added while ordering the VM or afterward by editing.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>VM create form will automatically include a ’default’ security group that enables egress (outgoing) traffic for a VM and which is required in order to reply to any of the incoming packets.</p>
</div>
<ul>
<li>VM needs to be connected to at least one of the VPC (internal) networks and an external network via floating IP - if external/public access to VM is required.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Floating IP is technically realized as 1:1 NAT between VM internal IP and public network IP.</p>
</div>
<p><a class="glightbox" href="../user-guide/img/VM_addition3.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VM addition 3" src="../user-guide/img/VM_addition3.jpg" /></a></p>
<p><a class="glightbox" href="../user-guide/img/VM_addition4.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VM addition 4" src="../user-guide/img/VM_addition4.jpg" /></a></p>
<ul>
<li>We strongly suggest also adding ’VM description’. In order to provision the VM, please click on the “Add to cart” button.</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/VM_add_to_cart.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VM request" src="../user-guide/img/VM_add_to_cart.jpg" /></a></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>On the right pane, there will be a ’Checkout summary’ with the purchase overview and indicative VM cost (as part of the VPC package cost).</p>
</div>
<ul>
<li>VM should reach into “Active” status when successfully provisioned. The “Access” field will show the IP address to access VM over SSH (Linux) or over RDP (Windows).</li>
</ul>
<p><a class="glightbox" href="../user-guide/img/VM_ready.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="VM ready" src="../user-guide/img/VM_ready.jpg" /></a></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>VM access over SSH or RDP should be permitted by ’Security Groups’ linked to VM.</p>
</div>
<h2 id="user-guide-resource_management-resource-components-update">Resource components update</h2>
<p>If it turns out that initial limits for the resource are too low or higher than expected, then it is possible to change the limits after the resource creation. This can be done by opening the resource management section. Again, like in the resource creation phase, same approval flow applies.</p></section><section class="print-page" id="user-guide-usage_reports"><h1 id="user-guide-usage_reports-accounting-and-usage-reports">Accounting and usage reports</h1>
<p>To view the usage information within a project:</p>
<ol>
<li>
<p>Open your project in Waldur.</p>
</li>
<li>
<p>Select the allocation (resource) that usage report you would like to see.</p>
</li>
<li>
<p>On this window, "Usage history" displays the report for this allocation. Use tabs "CPU Allocation", "GPU Allocation", and "Storage Allocation" to see the details.
   <a class="glightbox" href="../user-guide/img/usage_report.jpg" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="Usage" src="../user-guide/img/usage_report.jpg" /></a></p>
</li>
</ol>
<p>To check the current resource allocation limit:</p>
<ol>
<li>On the same window, the plan details for Allocation components (CPU, GPU, and storage) can be found on the top-right side.</li>
</ol></section><h1 class='nav-section-title-end'>Ended: User guide</h1></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2016 - 2023 Waldur team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "/", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>